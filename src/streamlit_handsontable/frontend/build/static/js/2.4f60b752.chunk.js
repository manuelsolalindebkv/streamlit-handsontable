/*! For license information please see 2.4f60b752.chunk.js.LICENSE.txt */
(this.webpackJsonpstreamlit_handsontable=this.webpackJsonpstreamlit_handsontable||[]).push([[2],[function(t,e,n){"use strict";n.d(e,"l",(function(){return o})),n.d(e,"G",(function(){return s})),n.d(e,"m",(function(){return a})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return c})),n.d(e,"C",(function(){return u})),n.d(e,"z",(function(){return h})),n.d(e,"N",(function(){return d})),n.d(e,"w",(function(){return p})),n.d(e,"a",(function(){return m})),n.d(e,"P",(function(){return b})),n.d(e,"U",(function(){return y})),n.d(e,"O",(function(){return w})),n.d(e,"R",(function(){return v})),n.d(e,"e",(function(){return C})),n.d(e,"f",(function(){return O})),n.d(e,"g",(function(){return T})),n.d(e,"H",(function(){return _})),n.d(e,"K",(function(){return E})),n.d(e,"v",(function(){return R})),n.d(e,"u",(function(){return M})),n.d(e,"o",(function(){return x})),n.d(e,"n",(function(){return I})),n.d(e,"p",(function(){return k})),n.d(e,"k",(function(){return A})),n.d(e,"j",(function(){return N})),n.d(e,"t",(function(){return j})),n.d(e,"s",(function(){return H})),n.d(e,"i",(function(){return D})),n.d(e,"M",(function(){return P})),n.d(e,"L",(function(){return L})),n.d(e,"A",(function(){return F})),n.d(e,"B",(function(){return B})),n.d(e,"h",(function(){return V})),n.d(e,"r",(function(){return U})),n.d(e,"b",(function(){return W})),n.d(e,"V",(function(){return z})),n.d(e,"q",(function(){return $})),n.d(e,"y",(function(){return K})),n.d(e,"x",(function(){return X})),n.d(e,"W",(function(){return q})),n.d(e,"S",(function(){return Q})),n.d(e,"E",(function(){return Z})),n.d(e,"F",(function(){return J})),n.d(e,"D",(function(){return tt})),n.d(e,"J",(function(){return et})),n.d(e,"I",(function(){return nt})),n.d(e,"Q",(function(){return it})),n.d(e,"T",(function(){return rt}));var i=n(16),r=n(6);function o(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1,i=null,r=t;for(;null!==r;){if(n===e){i=r;break}r.host&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r=r.host:(n+=1,r=r.parentNode)}return i}function s(t,e){const n=t.closest(".handsontable");return!!n&&(n.parentNode===e||n===e)}function a(t){return function(t){return Object.getPrototypeOf(t.parent)&&t.frameElement}(t)&&t.parent}function l(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;const{ELEMENT_NODE:i,DOCUMENT_FRAGMENT_NODE:r}=Node;let o=t;for(;null!==o&&void 0!==o&&o!==n;){const{nodeType:t,nodeName:n}=o;if(t===i&&(e.includes(n)||e.includes(o)))return o;const{host:s}=o;o=s&&t===r?s:o.parentNode}return null}function c(t,e,n){const i=[];let r=t;for(;r&&(r=l(r,e,n),r&&(!n||n.contains(r)));)i.push(r),r=r.host&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r.host:r.parentNode;const o=i.length;return o?i[o-1]:null}function u(t,e){let n=t.parentNode,i=[];for("string"===typeof e?i=t.defaultView?Array.prototype.slice.call(t.querySelectorAll(e),0):Array.prototype.slice.call(t.ownerDocument.querySelectorAll(e),0):i.push(e);null!==n;){if(i.indexOf(n)>-1)return!0;n=n.parentNode}return!1}function h(t){let e=0,n=t;if(n.previousSibling)for(;n=n.previousSibling;)e+=1;return e}function d(t,e,n){const i=n.parentElement.querySelector(".ht_clone_"+t);return i?i.contains(e):null}function f(t){return t&&t.length?t.filter(t=>!!t):[]}function g(t,e){if(!t||!t.length)return e?{regexFree:[],regexes:[]}:[];const n=[],i=[];return i.push(...t.filter(t=>{const i=t instanceof RegExp;return i&&e&&n.push(t),!i})),e?{regexFree:i,regexes:n}:i}function p(t,e){return void 0!==t.classList&&"string"===typeof e&&""!==e&&t.classList.contains(e)}function m(t,e){"string"===typeof e&&(e=e.split(" ")),(e=f(e)).length>0&&t.classList.add(...e)}function b(t,e){"string"===typeof e?e=e.split(" "):e instanceof RegExp&&(e=[e]);let{regexFree:n,regexes:i}=g(e,!0);n=f(n),n.length>0&&t.classList.remove(...n),i.forEach(e=>{t.classList.forEach(n=>{e.test(n)&&t.classList.remove(n)})})}function y(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;Array.isArray(e)||(e=[[e,n]]),e.forEach(e=>{Array.isArray(e)&&""!==e[0]&&t.setAttribute(...e)})}function w(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];"string"===typeof e?e=e.split(" "):e instanceof RegExp&&(e=[e]);const{regexFree:n,regexes:i}=g(e,!0);n.forEach(e=>{""!==e&&t.removeAttribute(e)}),i.forEach(e=>{t.getAttributeNames().forEach(n=>{e.test(n)&&t.removeAttribute(n)})})}function v(t){if(3===t.nodeType)t.parentNode.removeChild(t);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(t.nodeName)>-1){const e=t.childNodes;for(let t=e.length-1;t>=0;t--)v(e[t])}}function C(t){let e;for(;e=t.lastChild;)t.removeChild(e)}const S=/(<(.*)>|&(.*);)/;function O(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];S.test(e)?t.innerHTML=n?Object(i.c)(e):e:T(t,e)}function T(t,e){const n=t.firstChild;n&&3===n.nodeType&&null===n.nextSibling?n.textContent=e:(C(t),t.appendChild(t.ownerDocument.createTextNode(e)))}function _(t){const e=t.ownerDocument.documentElement;let n=t;for(;n!==e;){if(null===n)return!1;if(n.nodeType===Node.DOCUMENT_FRAGMENT_NODE){if(n.host){if(n.host.impl)return _(n.host.impl);if(n.host)return _(n.host);throw new Error("Lost in Web Components world")}return!1}if("none"===D(n).display)return!1;n=n.parentNode}return!0}function E(t){const e=t.ownerDocument,n=e.defaultView,i=e.documentElement;let r,o,s,a=t;for(r=a.offsetLeft,o=a.offsetTop,s=a;(a=a.offsetParent)&&a!==e.body&&"offsetLeft"in a;)r+=a.offsetLeft,o+=a.offsetTop,s=a;return s&&"fixed"===s.style.position&&(r+=n.pageXOffset||i.scrollLeft,o+=n.pageYOffset||i.scrollTop),{left:r,top:o}}function R(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return t.scrollY}function M(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return t.scrollX}function x(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return t===e?R(e):t.scrollTop}function I(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return t===e?M(e):t.scrollLeft}function k(t){let e=t.ownerDocument,n=e?e.defaultView:void 0;e||(e=t.document?t.document:t,n=e.defaultView);const i=["auto","scroll"];let r=t.parentNode;for(;r&&r.style&&e.body!==r;){let{overflow:t,overflowX:e,overflowY:o}=r.style;if([t,e,o].includes("scroll"))return r;if(({overflow:t,overflowX:e,overflowY:o}=n.getComputedStyle(r)),i.includes(t)||i.includes(e)||i.includes(o))return r;if(r.clientHeight<=r.scrollHeight+1&&(i.includes(o)||i.includes(t)))return r;if(r.clientWidth<=r.scrollWidth+1&&(i.includes(e)||i.includes(t)))return r;r=r.parentNode}return n}function A(t){return t.scrollHeight-t.clientHeight}function N(t){return t.scrollWidth-t.clientWidth}function j(t){const e=t.ownerDocument,n=e.defaultView;let i=t.parentNode;for(;i&&i.style&&e.body!==i;){if("visible"!==i.style.overflow&&""!==i.style.overflow)return i;const t=D(i,n),e=["scroll","hidden","auto"],r=t.getPropertyValue("overflow"),o=t.getPropertyValue("overflow-y"),s=t.getPropertyValue("overflow-x");if(e.includes(r)||e.includes(o)||e.includes(s))return i;i=i.parentNode}return n}function H(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;if(!t)return;if(t===n)return"width"===e?n.innerWidth+"px":"height"===e?n.innerHeight+"px":void 0;const i=t.style[e];if(""!==i&&void 0!==i)return i;const r=D(t,n);return""!==r[e]&&void 0!==r[e]?r[e]:void 0}function D(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return t.currentStyle||e.getComputedStyle(t)}function P(t){return t.offsetWidth}function L(t){return t.offsetHeight}function F(t){return t.clientHeight||t.innerHeight}function B(t){return t.clientWidth||t.innerWidth}function V(t){return t.selectionStart?t.selectionStart:0}function U(t){return t.selectionEnd?t.selectionEnd:0}function W(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;t.getSelection&&(t.getSelection().empty?t.getSelection().empty():t.getSelection().removeAllRanges&&t.getSelection().removeAllRanges())}function z(t,e,n){if(void 0===n&&(n=e),t.setSelectionRange){t.focus();try{t.setSelectionRange(e,n)}catch(i){const r=t.parentNode,o=r.style.display;r.style.display="block",t.setSelectionRange(e,n),r.style.display=o}}}let Y;function G(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const e=t.createElement("div");e.style.height="200px",e.style.width="100%";const n=t.createElement("div");n.style.boxSizing="content-box",n.style.height="150px",n.style.left="0px",n.style.overflow="hidden",n.style.position="absolute",n.style.top="0px",n.style.width="200px",n.style.visibility="hidden",n.appendChild(e),(t.body||t.documentElement).appendChild(n);const i=e.offsetWidth;n.style.overflow="scroll";let r=e.offsetWidth;return i===r&&(r=n.clientWidth),(t.body||t.documentElement).removeChild(n),i-r}function $(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return void 0===Y&&(Y=G(t)),Y}function K(t){return t.offsetWidth!==t.clientWidth}function X(t){return t.offsetHeight!==t.clientHeight}function q(t,e,n){t.style.transform=`translate3d(${e},${n},0)`}function Q(t){t.style.transform&&""!==t.style.transform&&(t.style.transform="")}function Z(t){return t&&(["INPUT","SELECT","TEXTAREA"].indexOf(t.nodeName)>-1||"true"===t.contentEditable)}function J(t){return Z(t)&&!1===t.hasAttribute("data-hot-input")}function tt(t){return!t.parentNode}function et(t,e){new IntersectionObserver((n,i)=>{n.forEach(n=>{n.isIntersecting&&null!==t.offsetParent&&(e(),i.unobserve(t))})},{root:t.ownerDocument.body}).observe(t)}function nt(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=t.ownerDocument,o=i.createRange(),s=i.defaultView.getSelection();y(t,"contenteditable",!0),n&&y(t,...Object(r.n)()),e&&m(t,"invisibleSelection"),o.selectNodeContents(t),s.removeAllRanges(),s.addRange(o)}function it(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=t.ownerDocument.defaultView.getSelection();t.hasAttribute("aria-hidden")&&t.removeAttribute("aria-hidden"),n.removeAllRanges(),e&&b(t,"invisibleSelection"),t.removeAttribute("contenteditable")}function rt(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];nt(t,n),e(),it(t,n)}},function(t,e,n){"use strict";function i(t){const e=t.length;let n=0;for(;n<e;)t[n]=[t[n]],n+=1}function r(t,e){const n=e.length;let i=0;for(;i<n;)t.push(e[i]),i+=1}function o(t){const e=[];if(!t||0===t.length||!t[0]||0===t[0].length)return e;const n=t.length,i=t[0].length;for(let r=0;r<n;r++)for(let n=0;n<i;n++)e[n]||(e[n]=[]),e[n][r]=t[r][n];return e}function s(t,e,n,i){let r=-1,o=t,s=n;Array.isArray(t)||(o=Array.from(t));const a=o.length;for(i&&a&&(r+=1,s=o[r]),r+=1;r<a;)s=e(s,o[r],r,o),r+=1;return s}function a(t,e){let n=0,i=t;Array.isArray(t)||(i=Array.from(t));const r=i.length,o=[];let s=-1;for(;n<r;){const t=i[n];e(t,n,i)&&(s+=1,o[s]=t),n+=1}return o}function l(t,e){let n=0,i=t;Array.isArray(t)||(i=Array.from(t));const r=i.length,o=[];let s=-1;for(;n<r;){const t=i[n];s+=1,o[s]=e(t,n,i),n+=1}return o}function c(t,e){let n=0,i=t;Array.isArray(t)||(i=Array.from(t));const r=i.length;for(;n<r&&!1!==e(i[n],n,i);)n+=1;return t}function u(t){const e=[];return c(t,t=>{-1===e.indexOf(t)&&e.push(t)}),e}function h(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const[i,...r]=[...e];let o=i;return c(r,t=>{o=o.filter(e=>!t.includes(e))}),o}function d(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return t.split(e)}n.d(e,"j",(function(){return i})),n.d(e,"f",(function(){return r})),n.d(e,"h",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"g",(function(){return h})),n.d(e,"i",(function(){return d}))},function(t,e,n){"use strict";n.d(e,"g",(function(){return r})),n.d(e,"k",(function(){return o})),n.d(e,"h",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return c})),n.d(e,"n",(function(){return u})),n.d(e,"m",(function(){return h})),n.d(e,"l",(function(){return d})),n.d(e,"f",(function(){return f})),n.d(e,"o",(function(){return g})),n.d(e,"i",(function(){return p})),n.d(e,"p",(function(){return m})),n.d(e,"e",(function(){return b})),n.d(e,"b",(function(){return y})),n.d(e,"j",(function(){return w}));var i=n(1);function r(t){let e;return Array.isArray(t)?e=t.length?new Array(t.length).fill(null):[]:(e={},g(t,(t,n)=>{"__children"!==n&&(t&&"object"===typeof t&&!Array.isArray(t)?e[n]=r(t):Array.isArray(t)?t.length&&"object"===typeof t[0]&&!Array.isArray(t[0])?e[n]=[r(t[0])]:e[n]=[]:e[n]=null)})),e}function o(t,e){return e.prototype.constructor=e,t.prototype=new e,t.prototype.constructor=t,t}function s(t,e,n){const i=Array.isArray(n);return g(e,(e,r)=>{(!1===i||n.includes(r))&&(t[r]=e)}),t}function a(t,e){g(e,(n,i)=>{e[i]&&"object"===typeof e[i]?(t[i]||(Array.isArray(e[i])?t[i]=[]:"[object Date]"===Object.prototype.toString.call(e[i])?t[i]=e[i]:t[i]={}),a(t[i],e[i])):t[i]=e[i]})}function l(t){return"object"===typeof t?JSON.parse(JSON.stringify(t)):t}function c(t){const e={};return g(t,(t,n)=>{e[n]=t}),e}function u(t){t.MIXINS||(t.MIXINS=[]);for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Object(i.a)(n,e=>{t.MIXINS.push(e.MIXIN_NAME),g(e,(e,n)=>{if(void 0!==t.prototype[n])throw new Error(`Mixin conflict. Property '${n}' already exist and cannot be overwritten.`);if("function"===typeof e)t.prototype[n]=e;else{const i=function(t,e){const n="_"+t;return function(){return void 0===this[n]&&(this[n]=(t=>{let e=t;return(Array.isArray(e)||d(e))&&(e=l(e)),e})(e)),this[n]}},r=function(t){const e="_"+t;return function(t){this[e]=t}};Object.defineProperty(t.prototype,n,{get:i(n,e),set:r(n),configurable:!0})}})}),t}function h(t,e){return JSON.stringify(t)===JSON.stringify(e)}function d(t){return"[object Object]"===Object.prototype.toString.call(t)}function f(t,e,n,i){i.value=n,i.writable=!1!==i.writable,i.enumerable=!1!==i.enumerable,i.configurable=!1!==i.configurable,Object.defineProperty(t,e,i)}function g(t,e){for(const n in t)if((!t.hasOwnProperty||t.hasOwnProperty&&Object.prototype.hasOwnProperty.call(t,n))&&!1===e(t[n],n,t))break;return t}function p(t,e){const n=e.split(".");let i=t;return g(n,t=>{if(i=i[t],void 0===i)return i=void 0,!1}),i}function m(t,e,n){const i=e.split(".");let r=t;i.forEach((t,e)=>{e!==i.length-1?(w(r,t)||(r[t]={}),r=r[t]):r[t]=n})}function b(t){if(!d(t))return 0;const e=function(t){let n=0;return d(t)?g(t,(t,i)=>{"__children"!==i&&(n+=e(t))}):n+=1,n};return e(t)}function y(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value";const n="_"+e,i={_touched:!1,[n]:t,isTouched(){return this._touched}};return Object.defineProperty(i,e,{get(){return this[n]},set(t){this._touched=!0,this[n]=t},enumerable:!0,configurable:!0}),i}function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},function(t,e,n){"use strict";n.r(e),n.d(e,"CONTEXT_MENU_ITEMS_NAMESPACE",(function(){return i})),n.d(e,"CONTEXTMENU_ITEMS_NO_ITEMS",(function(){return r})),n.d(e,"CONTEXTMENU_ITEMS_ROW_ABOVE",(function(){return o})),n.d(e,"CONTEXTMENU_ITEMS_ROW_BELOW",(function(){return s})),n.d(e,"CONTEXTMENU_ITEMS_INSERT_LEFT",(function(){return a})),n.d(e,"CONTEXTMENU_ITEMS_INSERT_RIGHT",(function(){return l})),n.d(e,"CONTEXTMENU_ITEMS_REMOVE_ROW",(function(){return c})),n.d(e,"CONTEXTMENU_ITEMS_REMOVE_COLUMN",(function(){return u})),n.d(e,"CONTEXTMENU_ITEMS_UNDO",(function(){return h})),n.d(e,"CONTEXTMENU_ITEMS_REDO",(function(){return d})),n.d(e,"CONTEXTMENU_ITEMS_READ_ONLY",(function(){return f})),n.d(e,"CONTEXTMENU_ITEMS_CLEAR_COLUMN",(function(){return g})),n.d(e,"CONTEXTMENU_ITEMS_COPY",(function(){return p})),n.d(e,"CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_HEADERS",(function(){return m})),n.d(e,"CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_GROUP_HEADERS",(function(){return b})),n.d(e,"CONTEXTMENU_ITEMS_COPY_COLUMN_HEADERS_ONLY",(function(){return y})),n.d(e,"CONTEXTMENU_ITEMS_CUT",(function(){return w})),n.d(e,"CONTEXTMENU_ITEMS_FREEZE_COLUMN",(function(){return v})),n.d(e,"CONTEXTMENU_ITEMS_UNFREEZE_COLUMN",(function(){return C})),n.d(e,"CONTEXTMENU_ITEMS_MERGE_CELLS",(function(){return S})),n.d(e,"CONTEXTMENU_ITEMS_UNMERGE_CELLS",(function(){return O})),n.d(e,"CONTEXTMENU_ITEMS_ADD_COMMENT",(function(){return T})),n.d(e,"CONTEXTMENU_ITEMS_EDIT_COMMENT",(function(){return _})),n.d(e,"CONTEXTMENU_ITEMS_REMOVE_COMMENT",(function(){return E})),n.d(e,"CONTEXTMENU_ITEMS_READ_ONLY_COMMENT",(function(){return R})),n.d(e,"CONTEXTMENU_ITEMS_ALIGNMENT",(function(){return M})),n.d(e,"CONTEXTMENU_ITEMS_ALIGNMENT_LEFT",(function(){return x})),n.d(e,"CONTEXTMENU_ITEMS_ALIGNMENT_CENTER",(function(){return I})),n.d(e,"CONTEXTMENU_ITEMS_ALIGNMENT_RIGHT",(function(){return k})),n.d(e,"CONTEXTMENU_ITEMS_ALIGNMENT_JUSTIFY",(function(){return A})),n.d(e,"CONTEXTMENU_ITEMS_ALIGNMENT_TOP",(function(){return N})),n.d(e,"CONTEXTMENU_ITEMS_ALIGNMENT_MIDDLE",(function(){return j})),n.d(e,"CONTEXTMENU_ITEMS_ALIGNMENT_BOTTOM",(function(){return H})),n.d(e,"CONTEXTMENU_ITEMS_BORDERS",(function(){return D})),n.d(e,"CONTEXTMENU_ITEMS_BORDERS_TOP",(function(){return P})),n.d(e,"CONTEXTMENU_ITEMS_BORDERS_RIGHT",(function(){return L})),n.d(e,"CONTEXTMENU_ITEMS_BORDERS_BOTTOM",(function(){return F})),n.d(e,"CONTEXTMENU_ITEMS_BORDERS_LEFT",(function(){return B})),n.d(e,"CONTEXTMENU_ITEMS_REMOVE_BORDERS",(function(){return V})),n.d(e,"CONTEXTMENU_ITEMS_NESTED_ROWS_INSERT_CHILD",(function(){return U})),n.d(e,"CONTEXTMENU_ITEMS_NESTED_ROWS_DETACH_CHILD",(function(){return W})),n.d(e,"CONTEXTMENU_ITEMS_HIDE_COLUMN",(function(){return z})),n.d(e,"CONTEXTMENU_ITEMS_SHOW_COLUMN",(function(){return Y})),n.d(e,"CONTEXTMENU_ITEMS_HIDE_ROW",(function(){return G})),n.d(e,"CONTEXTMENU_ITEMS_SHOW_ROW",(function(){return $})),n.d(e,"FILTERS_NAMESPACE",(function(){return K})),n.d(e,"FILTERS_CONDITIONS_NAMESPACE",(function(){return X})),n.d(e,"FILTERS_CONDITIONS_NONE",(function(){return q})),n.d(e,"FILTERS_CONDITIONS_EMPTY",(function(){return Q})),n.d(e,"FILTERS_CONDITIONS_NOT_EMPTY",(function(){return Z})),n.d(e,"FILTERS_CONDITIONS_EQUAL",(function(){return J})),n.d(e,"FILTERS_CONDITIONS_NOT_EQUAL",(function(){return tt})),n.d(e,"FILTERS_CONDITIONS_BEGINS_WITH",(function(){return et})),n.d(e,"FILTERS_CONDITIONS_ENDS_WITH",(function(){return nt})),n.d(e,"FILTERS_CONDITIONS_CONTAINS",(function(){return it})),n.d(e,"FILTERS_CONDITIONS_NOT_CONTAIN",(function(){return rt})),n.d(e,"FILTERS_CONDITIONS_BY_VALUE",(function(){return ot})),n.d(e,"FILTERS_CONDITIONS_GREATER_THAN",(function(){return st})),n.d(e,"FILTERS_CONDITIONS_GREATER_THAN_OR_EQUAL",(function(){return at})),n.d(e,"FILTERS_CONDITIONS_LESS_THAN",(function(){return lt})),n.d(e,"FILTERS_CONDITIONS_LESS_THAN_OR_EQUAL",(function(){return ct})),n.d(e,"FILTERS_CONDITIONS_BETWEEN",(function(){return ut})),n.d(e,"FILTERS_CONDITIONS_NOT_BETWEEN",(function(){return ht})),n.d(e,"FILTERS_CONDITIONS_AFTER",(function(){return dt})),n.d(e,"FILTERS_CONDITIONS_BEFORE",(function(){return ft})),n.d(e,"FILTERS_CONDITIONS_TODAY",(function(){return gt})),n.d(e,"FILTERS_CONDITIONS_TOMORROW",(function(){return pt})),n.d(e,"FILTERS_CONDITIONS_YESTERDAY",(function(){return mt})),n.d(e,"FILTERS_DIVS_FILTER_BY_CONDITION",(function(){return bt})),n.d(e,"FILTERS_DIVS_FILTER_BY_VALUE",(function(){return yt})),n.d(e,"FILTERS_LABELS_CONJUNCTION",(function(){return wt})),n.d(e,"FILTERS_LABELS_DISJUNCTION",(function(){return vt})),n.d(e,"FILTERS_VALUES_BLANK_CELLS",(function(){return Ct})),n.d(e,"FILTERS_BUTTONS_SELECT_ALL",(function(){return St})),n.d(e,"FILTERS_BUTTONS_CLEAR",(function(){return Ot})),n.d(e,"FILTERS_BUTTONS_OK",(function(){return Tt})),n.d(e,"FILTERS_BUTTONS_CANCEL",(function(){return _t})),n.d(e,"FILTERS_BUTTONS_PLACEHOLDER_SEARCH",(function(){return Et})),n.d(e,"FILTERS_BUTTONS_PLACEHOLDER_VALUE",(function(){return Rt})),n.d(e,"FILTERS_BUTTONS_PLACEHOLDER_SECOND_VALUE",(function(){return Mt})),n.d(e,"CHECKBOX_RENDERER_NAMESPACE",(function(){return xt})),n.d(e,"CHECKBOX_CHECKED",(function(){return It})),n.d(e,"CHECKBOX_UNCHECKED",(function(){return kt}));const i="ContextMenu:items",r=i+".noItems",o=i+".insertRowAbove",s=i+".insertRowBelow",a=i+".insertColumnOnTheLeft",l=i+".insertColumnOnTheRight",c=i+".removeRow",u=i+".removeColumn",h=i+".undo",d=i+".redo",f=i+".readOnly",g=i+".clearColumn",p=i+".copy",m=i+".copyWithHeaders",b=i+".copyWithGroupHeaders",y=i+".copyHeadersOnly",w=i+".cut",v=i+".freezeColumn",C=i+".unfreezeColumn",S=i+".mergeCells",O=i+".unmergeCells",T=i+".addComment",_=i+".editComment",E=i+".removeComment",R=i+".readOnlyComment",M=i+".align",x=i+".align.left",I=i+".align.center",k=i+".align.right",A=i+".align.justify",N=i+".align.top",j=i+".align.middle",H=i+".align.bottom",D=i+".borders",P=i+".borders.top",L=i+".borders.right",F=i+".borders.bottom",B=i+".borders.left",V=i+".borders.remove",U=i+".nestedHeaders.insertChildRow",W=i+".nestedHeaders.detachFromParent",z=i+".hideColumn",Y=i+".showColumn",G=i+".hideRow",$=i+".showRow",K="Filters:",X=K+"conditions",q=X+".none",Q=X+".isEmpty",Z=X+".isNotEmpty",J=X+".isEqualTo",tt=X+".isNotEqualTo",et=X+".beginsWith",nt=X+".endsWith",it=X+".contains",rt=X+".doesNotContain",ot=X+".byValue",st=X+".greaterThan",at=X+".greaterThanOrEqualTo",lt=X+".lessThan",ct=X+".lessThanOrEqualTo",ut=X+".isBetween",ht=X+".isNotBetween",dt=X+".after",ft=X+".before",gt=X+".today",pt=X+".tomorrow",mt=X+".yesterday",bt=K+"labels.filterByCondition",yt=K+"labels.filterByValue",wt=K+"labels.conjunction",vt=K+"labels.disjunction",Ct=K+"values.blankCells",St=K+"buttons.selectAll",Ot=K+"buttons.clear",Tt=K+"buttons.ok",_t=K+"buttons.cancel",Et=K+"buttons.placeholder.search",Rt=K+"buttons.placeholder.value",Mt=K+"buttons.placeholder.secondValue",xt="CheckboxRenderer:",It=xt+"checked",kt=xt+"unchecked"},function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"e",(function(){return a})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return c})),n.d(e,"a",(function(){return w}));var i=n(13),r=n(10);function o(t){let e;switch(typeof t){case"string":case"number":e=""+t;break;case"object":e=null===t?"":t.toString();break;case"undefined":e="";break;default:e=t.toString()}return e}function s(t){return"undefined"!==typeof t}function a(t){return"undefined"===typeof t}function l(t){return null===t||""===t||a(t)}function c(t){return"[object RegExp]"===Object.prototype.toString.call(t)}const u="length",h=t=>parseInt(t,16),d=t=>parseInt(t,10),f=(t,e,n)=>t.substr(e,n),g=t=>t.codePointAt(0)-65,p=t=>(""+t).replace(/\-/g,"");let m=!1;const b={invalid:()=>r.a`
    The license key for Handsontable is invalid.\x20
    If you need any help, contact us at support@handsontable.com.`,expired:t=>{let{keyValidityDate:e,hotVersion:n}=t;return r.a`
    The license key for Handsontable expired on ${e}, and is not valid for the installed\x20
    version ${n}. Renew your license key at handsontable.com or downgrade to a version released prior\x20
    to ${e}. If you need any help, contact us at sales@handsontable.com.`},missing:()=>r.a`
    The license key for Handsontable is missing. Use your purchased key to activate the product.\x20
    Alternatively, you can activate Handsontable to use for non-commercial purposes by\x20
    passing the key: 'non-commercial-and-evaluation'. If you need any help, contact\x20
    us at support@handsontable.com.`,non_commercial:()=>""},y={invalid:()=>r.a`
    The license key for Handsontable is invalid.\x20
    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> on how to\x20
    install it properly or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.`,expired:t=>{let{keyValidityDate:e,hotVersion:n}=t;return r.a`
    The license key for Handsontable expired on ${e}, and is not valid for the installed\x20
    version ${n}. <a href="https://handsontable.com/pricing" target="_blank">Renew</a> your\x20
    license key or downgrade to a version released prior to ${e}. If you need any\x20
    help, contact us at <a href="mailto:sales@handsontable.com">sales@handsontable.com</a>.`},missing:()=>r.a`
    The license key for Handsontable is missing. Use your purchased key to activate the product.\x20
    Alternatively, you can activate Handsontable to use for non-commercial purposes by\x20
    passing the key: 'non-commercial-and-evaluation'.\x20
    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> about it in\x20
    the documentation or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.`,non_commercial:()=>""};function w(t,e){const n=!l(t),r="string"===typeof t&&"non-commercial-and-evaluation"===t.toLowerCase();let o,s="invalid",a="invalid";const c=function(t){let e=[][u],n=e;if(t[u]!==g("Z"))return!1;for(let i="",r="B<H4P+".split(""),o=g(r.shift());o;o=g(r.shift()||"A"))--o<""[u]?n|=(d(""+d(h(i)+(h(f(t,Math.abs(o),2))+[]).padStart(2,"0")))%97||2)>>1:i=f(t,o,o?1===r[u]?9:8:6);return n===e}(t=p(t||""));if(n||r||c)if(c){const e=i("01/10/2024","DD/MM/YYYY"),n=Math.floor(e.toDate().getTime()/864e5),r=h(f(p(w=t),h("12"),g("F")))/(h(f(p(w),g("B"),~~![][u]))||9);o=i(864e5*(r+1),"x").format("MMMM DD, YYYY"),n>r?(s="expired",a="expired"):(s="valid",a="valid")}else r?(s="non_commercial",a="valid"):(s="invalid",a="invalid");else s="missing",a="missing";var w;if("undefined"!==typeof location&&/^([a-z0-9\-]+\.)?\x68\x61\x6E\x64\x73\x6F\x6E\x74\x61\x62\x6C\x65\x2E\x63\x6F\x6D$/i.test(location.host)&&(s="valid",a="valid"),!m&&"valid"!==s){b[s]({keyValidityDate:o,hotVersion:"14.6.0"})&&console["non_commercial"===s?"info":"warn"](b[s]({keyValidityDate:o,hotVersion:"14.6.0"})),m=!0}if("valid"!==a&&e.parentNode){if(y[a]({keyValidityDate:o,hotVersion:"14.6.0"})){const t=document.createElement("div");t.className="hot-display-license-info",t.innerHTML=y[a]({keyValidityDate:o,hotVersion:"14.6.0"}),e.parentNode.insertBefore(t,e.nextSibling)}}}},function(t,e,n){"use strict";function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=typeof t;if("number"===n)return!isNaN(t)&&isFinite(t);if("string"===n){if(0===t.length)return!1;if(1===t.length)return/\d/.test(t);const n=Array.from(new Set([".",...e])).map(t=>"\\"+t).join("|");return new RegExp(`^[+-]?(((${n})?\\d+((${n})\\d+)?(e[+-]?\\d+)?)|(0x[a-f\\d]+))$`,"i").test(t.trim())}return"object"===n&&(!!t&&"number"===typeof t.valueOf()&&!(t instanceof Date))}function r(t){return i(t,[","])}function o(t,e,n){let i=-1;for("function"===typeof e?(n=e,e=t):i=t-1;++i<=e&&!1!==n(i););}function s(t,e,n){let i=t+1;for("function"===typeof e&&(n=e,e=0);--i>=e&&!1!==n(i););}function a(t,e){return e=parseInt(e.toString().replace("%",""),10),e=isNaN(e)?0:e,parseInt(t*e/100,10)}function l(t,e,n){return Math.min(t,e)===t?e:Math.max(t,n)===t?n:t}n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return a})),n.d(e,"a",(function(){return l}))},function(t,e,n){"use strict";n.d(e,"L",(function(){return i})),n.d(e,"N",(function(){return r})),n.d(e,"y",(function(){return o})),n.d(e,"l",(function(){return s})),n.d(e,"E",(function(){return a})),n.d(e,"D",(function(){return l})),n.d(e,"g",(function(){return c})),n.d(e,"B",(function(){return u})),n.d(e,"s",(function(){return h})),n.d(e,"t",(function(){return d})),n.d(e,"u",(function(){return f})),n.d(e,"h",(function(){return g})),n.d(e,"q",(function(){return p})),n.d(e,"w",(function(){return m})),n.d(e,"c",(function(){return b})),n.d(e,"G",(function(){return y})),n.d(e,"H",(function(){return w})),n.d(e,"M",(function(){return v})),n.d(e,"p",(function(){return C})),n.d(e,"n",(function(){return S})),n.d(e,"j",(function(){return O})),n.d(e,"v",(function(){return T})),n.d(e,"m",(function(){return _})),n.d(e,"C",(function(){return E})),n.d(e,"e",(function(){return R})),n.d(e,"F",(function(){return M})),n.d(e,"f",(function(){return x})),n.d(e,"k",(function(){return I})),n.d(e,"K",(function(){return k})),n.d(e,"z",(function(){return A})),n.d(e,"o",(function(){return N})),n.d(e,"d",(function(){return j})),n.d(e,"I",(function(){return H})),n.d(e,"b",(function(){return D})),n.d(e,"i",(function(){return P})),n.d(e,"a",(function(){return L})),n.d(e,"r",(function(){return F})),n.d(e,"A",(function(){return B})),n.d(e,"J",(function(){return V})),n.d(e,"x",(function(){return U}));const i=t=>["tabindex",t],r=()=>["role","treegrid"],o=()=>["role","presentation"],s=()=>["role","gridcell"],a=()=>["role","rowheader"],l=()=>["role","rowgroup"],c=()=>["role","columnheader"],u=()=>["role","row"],h=()=>["role","menu"],d=()=>["role","menuitem"],f=()=>["role","menuitemcheckbox"],g=()=>["role","combobox"],p=()=>["role","listbox"],m=()=>["role","option"],b=()=>["role","checkbox"],y=()=>["scope","col"],w=()=>["scope","row"],v=()=>["type","text"],C=t=>["aria-label",t],S=()=>["aria-hidden","true"],O=()=>["aria-disabled","true"],T=()=>["aria-multiselectable","true"],_=t=>["aria-haspopup",t],E=t=>["aria-rowcount",t],R=t=>["aria-colcount",t],M=t=>["aria-rowindex",t],x=t=>["aria-colindex",t],I=t=>["aria-expanded",t],k=t=>["aria-sort",t],A=()=>["aria-readonly","true"],N=()=>["aria-invalid","true"],j=t=>["aria-checked",t],H=()=>["aria-selected","true"],D=()=>["aria-autocomplete","list"],P=t=>["aria-controls",t],L=t=>["aria-activedescendant",t],F=t=>["aria-live",t],B=t=>["aria-relevant",t],V=t=>["aria-setsize",t],U=t=>["aria-posinset",t]},function(t,e,n){"use strict";var i=n(1),r=n(2),o=n(16),s=n(9),a=n(10),l=n(8);function c(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const u=["afterCellMetaReset","afterChange","afterContextMenuDefaultOptions","beforeContextMenuSetItems","afterDropdownMenuDefaultOptions","beforeDropdownMenuSetItems","afterContextMenuHide","beforeContextMenuShow","afterContextMenuShow","afterCopyLimit","beforeCreateCol","afterColumnSequenceChange","afterCreateCol","beforeCreateRow","afterCreateRow","afterDeselect","afterDestroy","afterDocumentKeyDown","afterDrawSelection","beforeRemoveCellClassNames","afterGetCellMeta","afterGetColHeader","afterGetRowHeader","afterInit","afterLoadData","afterUpdateData","afterMomentumScroll","afterOnCellCornerMouseDown","afterOnCellCornerDblClick","afterOnCellMouseDown","afterOnCellMouseUp","afterOnCellContextMenu","afterOnCellMouseOver","afterOnCellMouseOut","afterRemoveCol","afterRemoveRow","beforeRenderer","afterRenderer","afterRowSequenceChange","beforeViewportScrollVertically","beforeViewportScrollHorizontally","beforeViewportScroll","afterScrollHorizontally","afterScrollVertically","afterScroll","afterSelection","afterSelectionByProp","afterSelectionEnd","afterSelectionEndByProp","afterSelectionFocusSet","beforeSelectColumns","afterSelectColumns","beforeSelectRows","afterSelectRows","afterSetCellMeta","afterRemoveCellMeta","afterSetDataAtCell","afterSetDataAtRowProp","afterSetSourceDataAtCell","afterUpdateSettings","afterValidate","beforeLanguageChange","afterLanguageChange","beforeAutofill","afterAutofill","beforeCellAlignment","beforeChange","beforeChangeRender","beforeDrawBorders","beforeGetCellMeta","beforeRemoveCellMeta","beforeInit","beforeInitWalkontable","beforeLoadData","beforeUpdateData","beforeKeyDown","beforeOnCellMouseDown","beforeOnCellMouseUp","beforeOnCellContextMenu","beforeOnCellMouseOver","beforeOnCellMouseOut","beforeRemoveCol","beforeRemoveRow","beforeViewRender","afterViewRender","beforeRender","afterRender","beforeRowWrap","beforeColumnWrap","beforeSetCellMeta","beforeSelectionFocusSet","beforeSetRangeStartOnly","beforeSetRangeStart","beforeSetRangeEnd","beforeSelectionHighlightSet","beforeTouchScroll","beforeValidate","beforeValueRender","construct","init","modifyColHeader","modifyColWidth","modifyFiltersMultiSelectValue","modifyFocusedElement","modifyRowHeader","modifyRowHeight","modifyRowHeightByOverlayName","modifyData","modifySourceData","modifyRowData","modifyGetCellCoords","modifyFocusOnTabNavigation","beforeHighlightingRowHeader","beforeHighlightingColumnHeader","persistentStateLoad","persistentStateReset","persistentStateSave","beforeColumnSort","afterColumnSort","modifyAutofillRange","modifyCopyableRange","beforeCut","afterCut","beforeCopy","afterCopy","beforePaste","afterPaste","beforeColumnFreeze","afterColumnFreeze","beforeColumnMove","afterColumnMove","beforeColumnUnfreeze","afterColumnUnfreeze","beforeRowMove","afterRowMove","beforeColumnResize","afterColumnResize","beforeRowResize","afterRowResize","afterGetColumnHeaderRenderers","afterGetRowHeaderRenderers","beforeStretchingColumnWidth","beforeFilter","afterFilter","afterFormulasValuesUpdate","afterNamedExpressionAdded","afterNamedExpressionRemoved","afterSheetAdded","afterSheetRenamed","afterSheetRemoved","modifyColumnHeaderHeight","modifyColumnHeaderValue","beforeUndo","beforeUndoStackChange","afterUndo","afterUndoStackChange","beforeRedo","beforeRedoStackChange","afterRedo","afterRedoStackChange","modifyRowHeaderWidth","modifyTransformFocus","modifyTransformStart","modifyTransformEnd","afterModifyTransformFocus","afterModifyTransformStart","afterModifyTransformEnd","afterViewportRowCalculatorOverride","afterViewportColumnCalculatorOverride","afterPluginsInitialized","beforeHideRows","afterHideRows","beforeUnhideRows","afterUnhideRows","beforeHideColumns","afterHideColumns","beforeUnhideColumns","afterUnhideColumns","beforeTrimRow","afterTrimRow","beforeUntrimRow","afterUntrimRow","beforeDropdownMenuShow","afterDropdownMenuShow","afterDropdownMenuHide","beforeAddChild","afterAddChild","beforeDetachChild","afterDetachChild","beforeBeginEditing","afterBeginEditing","beforeMergeCells","afterMergeCells","beforeUnmergeCells","afterUnmergeCells","afterListen","afterUnlisten","afterRefreshDimensions","beforeRefreshDimensions","beforeColumnCollapse","afterColumnCollapse","beforeColumnExpand","afterColumnExpand","modifyAutoColumnSizeSeed"],h=a.a`The plugin hook "[hookName]" was removed in Handsontable [removedInVersion].\x20
  Please consult release notes https://github.com/handsontable/handsontable/releases/tag/[removedInVersion] to\x20
  learn about the migration path.`,d=new Map([["modifyRow","8.0.0"],["modifyCol","8.0.0"],["unmodifyRow","8.0.0"],["unmodifyCol","8.0.0"],["skipLengthCache","8.0.0"],["hiddenColumn","8.0.0"],["hiddenRow","8.0.0"]]),f=new Map([[]]),g=new WeakMap;class p{static getSingleton(){return m}constructor(){c(this,"globalBucket",void 0),this.globalBucket=this.createEmptyBucket()}createEmptyBucket(){const t=Object.create(null);return Object(i.a)(u,e=>{t[e]=[],this.initOrderMap(t,e)}),t}getBucket(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?(t.pluginHookBucket||(t.pluginHookBucket=this.createEmptyBucket()),t.pluginHookBucket):this.globalBucket}add(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;if(Array.isArray(e))Object(i.a)(e,e=>this.add(t,e,n));else{d.has(t)&&Object(s.b)(Object(o.e)(h,{hookName:t,removedInVersion:d.get(t)})),f.has(t)&&Object(s.b)(f.get(t));const a=this.getBucket(n);if("undefined"===typeof a[t]&&(this.register(t),a[t]=[],this.initOrderMap(a,t)),e.skip=!1,-1===a[t].indexOf(e)){let n=!1;e.initialHook&&Object(i.a)(a[t],(i,r)=>{if(i.initialHook)return a[t][r]=e,n=!0,!1}),n||a[t].push(e)}this.setCallbackOrderIndex(a,t,e,r),this.orderBucketByOrderIndex(a,t)}return this}once(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;Array.isArray(e)?Object(i.a)(e,e=>this.once(t,e,n)):(e.runOnce=!0,this.add(t,e,n,r))}remove(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=this.getBucket(n);return"undefined"!==typeof i[t]&&i[t].indexOf(e)>=0&&(e.skip=!0,!0)}has(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.getBucket(e);return!(void 0===n[t]||!n[t].length)}run(t,e,n,i,r,o,s,a){{const c=this.globalBucket[e],u=c?c.length:0;let h=0;if(u)for(;h<u;){if(!c[h]||c[h].skip){h+=1;continue}const u=Object(l.c)(c[h],t,n,i,r,o,s,a);void 0!==u&&(n=u),c[h]&&c[h].runOnce&&this.remove(e,c[h]),h+=1}}{const c=this.getBucket(t)[e],u=c?c.length:0;let h=0;if(u)for(;h<u;){if(!c[h]||c[h].skip){h+=1;continue}const u=Object(l.c)(c[h],t,n,i,r,o,s,a);void 0!==u&&(n=u),c[h]&&c[h].runOnce&&this.remove(e,c[h],t),h+=1}}return n}destroy(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(r.o)(this.getBucket(t),(t,e,n)=>n[e].length=0)}register(t){this.isRegistered(t)||u.push(t)}deregister(t){this.isRegistered(t)&&u.splice(u.indexOf(t),1)}isDeprecated(t){return f.has(t)||d.has(t)}isRegistered(t){return u.indexOf(t)>=0}getRegistered(){return u}setCallbackOrderIndex(t,e,n,i){const r=Number.isInteger(i)?i:0,o=this.getCallbackOrderMap(t,e);o.set(r,[...o.get(r)||[],n])}orderBucketByOrderIndex(t,e){const n=this.getCallbackOrderMap(t,e);void 0===n||0===n.size||1===n.size&&n.has(0)||(t[e]=[...n].sort((t,e)=>t[0]-e[0]).flatMap(t=>{let[,e]=t;return e}))}initOrderMap(t,e){g.has(t)||g.set(t,[]),g.get(t)[e]=new Map}getCallbackOrderMap(t,e){return g.get(t)[e]}}const m=new p;e.a=p},function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return l}));n(1);var i=n(4);function r(t){return"function"===typeof t}function o(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=null;function r(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i&&clearTimeout(i),i=setTimeout(()=>{e=t.apply(this,o)},n),e}return r}function s(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return t.apply(this,n.concat(i))}}function a(t){const e=t.length;return function n(i){return function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];const a=i.concat(o);let l;return l=a.length>=e?t.apply(this,a):n(a),l}}([])}function l(t,e,n,r,o,s,a,l){return Object(i.b)(l)?t.call(e,n,r,o,s,a,l):Object(i.b)(a)?t.call(e,n,r,o,s,a):Object(i.b)(s)?t.call(e,n,r,o,s):Object(i.b)(o)?t.call(e,n,r,o):Object(i.b)(r)?t.call(e,n,r):Object(i.b)(n)?t.call(e,n):t.call(e)}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}));var i=n(4);function r(){Object(i.b)(console)&&console.warn(...arguments)}function o(){Object(i.b)(console)&&console.error(...arguments)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(1);function r(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const o=Object(i.d)(t,(t,e,i)=>t+e.replace(/\r?\n\s*/g,"")+(n[i]?n[i]:""),"");return o.trim()}},function(t,e,n){"use strict";function i(t){t.isImmediatePropagationEnabled=!1,t.cancelBubble=!0}function r(t){return!1===t.isImmediatePropagationEnabled}function o(t){return 2===t.button}function s(t){return 0===t.button}function a(t){return t instanceof TouchEvent}function l(t,e){const n={x:t.offsetX,y:t.offsetY};let i=t.target;if(!(e instanceof HTMLElement)||i!==e&&i.contains(e))return n;for(;i!==e;)n.x+=i.offsetLeft,n.y+=i.offsetTop,i=i.offsetParent;return n}n.d(e,"f",(function(){return i})),n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return l}))},function(t,e,n){"use strict";t.exports=n(135)},function(t,e,n){(function(t){t.exports=function(){"use strict";var e,n;function i(){return e.apply(null,arguments)}function r(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function o(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(s(t,e))return!1;return!0}function l(t){return void 0===t}function c(t){return"number"===typeof t||"[object Number]"===Object.prototype.toString.call(t)}function u(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function h(t,e){var n,i=[],r=t.length;for(n=0;n<r;++n)i.push(e(t[n],n));return i}function d(t,e){for(var n in e)s(e,n)&&(t[n]=e[n]);return s(e,"toString")&&(t.toString=e.toString),s(e,"valueOf")&&(t.valueOf=e.valueOf),t}function f(t,e,n,i){return Te(t,e,n,i,!0).utc()}function g(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function p(t){var e=null,i=!1,r=t._d&&!isNaN(t._d.getTime());return r&&(e=g(t),i=n.call(e.parsedDateParts,(function(t){return null!=t})),r=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i),t._strict&&(r=r&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)),null!=Object.isFrozen&&Object.isFrozen(t)?r:(t._isValid=r,t._isValid)}function m(t){var e=f(NaN);return null!=t?d(g(e),t):g(e).userInvalidated=!0,e}n=Array.prototype.some?Array.prototype.some:function(t){var e,n=Object(this),i=n.length>>>0;for(e=0;e<i;e++)if(e in n&&t.call(this,n[e],e,n))return!0;return!1};var b=i.momentProperties=[],y=!1;function w(t,e){var n,i,r,o=b.length;if(l(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),l(e._i)||(t._i=e._i),l(e._f)||(t._f=e._f),l(e._l)||(t._l=e._l),l(e._strict)||(t._strict=e._strict),l(e._tzm)||(t._tzm=e._tzm),l(e._isUTC)||(t._isUTC=e._isUTC),l(e._offset)||(t._offset=e._offset),l(e._pf)||(t._pf=g(e)),l(e._locale)||(t._locale=e._locale),o>0)for(n=0;n<o;n++)l(r=e[i=b[n]])||(t[i]=r);return t}function v(t){w(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,i.updateOffset(this),y=!1)}function C(t){return t instanceof v||null!=t&&null!=t._isAMomentObject}function S(t){!1===i.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function O(t,e){var n=!0;return d((function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,t),n){var r,o,a,l=[],c=arguments.length;for(o=0;o<c;o++){if(r="","object"===typeof arguments[o]){for(a in r+="\n["+o+"] ",arguments[0])s(arguments[0],a)&&(r+=a+": "+arguments[0][a]+", ");r=r.slice(0,-2)}else r=arguments[o];l.push(r)}S(t+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var T,_={};function E(t,e){null!=i.deprecationHandler&&i.deprecationHandler(t,e),_[t]||(S(e),_[t]=!0)}function R(t){return"undefined"!==typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function M(t,e){var n,i=d({},t);for(n in e)s(e,n)&&(o(t[n])&&o(e[n])?(i[n]={},d(i[n],t[n]),d(i[n],e[n])):null!=e[n]?i[n]=e[n]:delete i[n]);for(n in t)s(t,n)&&!s(e,n)&&o(t[n])&&(i[n]=d({},i[n]));return i}function x(t){null!=t&&this.set(t)}function I(t,e,n){var i=""+Math.abs(t),r=e-i.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,T=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)s(t,e)&&n.push(e);return n};var k=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,A=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,N={},j={};function H(t,e,n,i){var r=i;"string"===typeof i&&(r=function(){return this[i]()}),t&&(j[t]=r),e&&(j[e[0]]=function(){return I(r.apply(this,arguments),e[1],e[2])}),n&&(j[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function D(t,e){return t.isValid()?(e=P(e,t.localeData()),N[e]=N[e]||function(t){var e,n,i,r=t.match(k);for(e=0,n=r.length;e<n;e++)j[r[e]]?r[e]=j[r[e]]:r[e]=(i=r[e]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(e){var i,o="";for(i=0;i<n;i++)o+=R(r[i])?r[i].call(e,t):r[i];return o}}(e),N[e](t)):t.localeData().invalidDate()}function P(t,e){var n=5;function i(t){return e.longDateFormat(t)||t}for(A.lastIndex=0;n>=0&&A.test(t);)t=t.replace(A,i),A.lastIndex=0,n-=1;return t}var L={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function F(t){return"string"===typeof t?L[t]||L[t.toLowerCase()]:void 0}function B(t){var e,n,i={};for(n in t)s(t,n)&&(e=F(n))&&(i[e]=t[n]);return i}var V,U={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1},W=/\d/,z=/\d\d/,Y=/\d{3}/,G=/\d{4}/,$=/[+-]?\d{6}/,K=/\d\d?/,X=/\d\d\d\d?/,q=/\d\d\d\d\d\d?/,Q=/\d{1,3}/,Z=/\d{1,4}/,J=/[+-]?\d{1,6}/,tt=/\d+/,et=/[+-]?\d+/,nt=/Z|[+-]\d\d:?\d\d/gi,it=/Z|[+-]\d\d(?::?\d\d)?/gi,rt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ot=/^[1-9]\d?/,st=/^([1-9]\d|\d)/;function at(t,e,n){V[t]=R(e)?e:function(t,i){return t&&n?n:e}}function lt(t,e){return s(V,t)?V[t](e._strict,e._locale):new RegExp(ct(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,i,r){return e||n||i||r}))))}function ct(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ut(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function ht(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=ut(e)),n}V={};var dt={};function ft(t,e){var n,i,r=e;for("string"===typeof t&&(t=[t]),c(e)&&(r=function(t,n){n[e]=ht(t)}),i=t.length,n=0;n<i;n++)dt[t[n]]=r}function gt(t,e){ft(t,(function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)}))}function pt(t,e,n){null!=e&&s(dt,t)&&dt[t](e,n._a,n,t)}function mt(t){return t%4===0&&t%100!==0||t%400===0}function bt(t){return mt(t)?366:365}H("Y",0,0,(function(){var t=this.year();return t<=9999?I(t,4):"+"+t})),H(0,["YY",2],0,(function(){return this.year()%100})),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),at("Y",et),at("YY",K,z),at("YYYY",Z,G),at("YYYYY",J,$),at("YYYYYY",J,$),ft(["YYYYY","YYYYYY"],0),ft("YYYY",(function(t,e){e[0]=2===t.length?i.parseTwoDigitYear(t):ht(t)})),ft("YY",(function(t,e){e[0]=i.parseTwoDigitYear(t)})),ft("Y",(function(t,e){e[0]=parseInt(t,10)})),i.parseTwoDigitYear=function(t){return ht(t)+(ht(t)>68?1900:2e3)};var yt,wt=vt("FullYear",!0);function vt(t,e){return function(n){return null!=n?(St(this,t,n),i.updateOffset(this,e),this):Ct(this,t)}}function Ct(t,e){if(!t.isValid())return NaN;var n=t._d,i=t._isUTC;switch(e){case"Milliseconds":return i?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return i?n.getUTCSeconds():n.getSeconds();case"Minutes":return i?n.getUTCMinutes():n.getMinutes();case"Hours":return i?n.getUTCHours():n.getHours();case"Date":return i?n.getUTCDate():n.getDate();case"Day":return i?n.getUTCDay():n.getDay();case"Month":return i?n.getUTCMonth():n.getMonth();case"FullYear":return i?n.getUTCFullYear():n.getFullYear();default:return NaN}}function St(t,e,n){var i,r,o,s,a;if(t.isValid()&&!isNaN(n)){switch(i=t._d,r=t._isUTC,e){case"Milliseconds":return void(r?i.setUTCMilliseconds(n):i.setMilliseconds(n));case"Seconds":return void(r?i.setUTCSeconds(n):i.setSeconds(n));case"Minutes":return void(r?i.setUTCMinutes(n):i.setMinutes(n));case"Hours":return void(r?i.setUTCHours(n):i.setHours(n));case"Date":return void(r?i.setUTCDate(n):i.setDate(n));case"FullYear":break;default:return}o=n,s=t.month(),a=29!==(a=t.date())||1!==s||mt(o)?a:28,r?i.setUTCFullYear(o,s,a):i.setFullYear(o,s,a)}}function Ot(t,e){if(isNaN(t)||isNaN(e))return NaN;var n,i=(e%(n=12)+n)%n;return t+=(e-i)/12,1===i?mt(t)?29:28:31-i%7%2}yt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},H("M",["MM",2],"Mo",(function(){return this.month()+1})),H("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),H("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),at("M",K,ot),at("MM",K,z),at("MMM",(function(t,e){return e.monthsShortRegex(t)})),at("MMMM",(function(t,e){return e.monthsRegex(t)})),ft(["M","MM"],(function(t,e){e[1]=ht(t)-1})),ft(["MMM","MMMM"],(function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);null!=r?e[1]=r:g(n).invalidMonth=t}));var Tt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),_t="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Et=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Rt=rt,Mt=rt;function xt(t,e,n){var i,r,o,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=f([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(r=yt.call(this._shortMonthsParse,s))?r:null:-1!==(r=yt.call(this._longMonthsParse,s))?r:null:"MMM"===e?-1!==(r=yt.call(this._shortMonthsParse,s))||-1!==(r=yt.call(this._longMonthsParse,s))?r:null:-1!==(r=yt.call(this._longMonthsParse,s))||-1!==(r=yt.call(this._shortMonthsParse,s))?r:null}function It(t,e){if(!t.isValid())return t;if("string"===typeof e)if(/^\d+$/.test(e))e=ht(e);else if(!c(e=t.localeData().monthsParse(e)))return t;var n=e,i=t.date();return i=i<29?i:Math.min(i,Ot(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,i):t._d.setMonth(n,i),t}function kt(t){return null!=t?(It(this,t),i.updateOffset(this,!0),this):Ct(this,"Month")}function At(){function t(t,e){return e.length-t.length}var e,n,i,r,o=[],s=[],a=[];for(e=0;e<12;e++)n=f([2e3,e]),i=ct(this.monthsShort(n,"")),r=ct(this.months(n,"")),o.push(i),s.push(r),a.push(r),a.push(i);o.sort(t),s.sort(t),a.sort(t),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Nt(t,e,n,i,r,o,s){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,i,r,o,s),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,i,r,o,s),a}function jt(t){var e,n;return t<100&&t>=0?((n=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Ht(t,e,n){var i=7+e-n;return-(7+jt(t,0,i).getUTCDay()-e)%7+i-1}function Dt(t,e,n,i,r){var o,s,a=1+7*(e-1)+(7+n-i)%7+Ht(t,i,r);return a<=0?s=bt(o=t-1)+a:a>bt(t)?(o=t+1,s=a-bt(t)):(o=t,s=a),{year:o,dayOfYear:s}}function Pt(t,e,n){var i,r,o=Ht(t.year(),e,n),s=Math.floor((t.dayOfYear()-o-1)/7)+1;return s<1?i=s+Lt(r=t.year()-1,e,n):s>Lt(t.year(),e,n)?(i=s-Lt(t.year(),e,n),r=t.year()+1):(r=t.year(),i=s),{week:i,year:r}}function Lt(t,e,n){var i=Ht(t,e,n),r=Ht(t+1,e,n);return(bt(t)-i+r)/7}function Ft(t,e){return t.slice(e,7).concat(t.slice(0,e))}H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),at("w",K,ot),at("ww",K,z),at("W",K,ot),at("WW",K,z),gt(["w","ww","W","WW"],(function(t,e,n,i){e[i.substr(0,1)]=ht(t)})),H("d",0,"do","day"),H("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),H("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),H("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),at("d",K),at("e",K),at("E",K),at("dd",(function(t,e){return e.weekdaysMinRegex(t)})),at("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),at("dddd",(function(t,e){return e.weekdaysRegex(t)})),gt(["dd","ddd","dddd"],(function(t,e,n,i){var r=n._locale.weekdaysParse(t,i,n._strict);null!=r?e.d=r:g(n).invalidWeekday=t})),gt(["d","e","E"],(function(t,e,n,i){e[i]=ht(t)}));var Bt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Vt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ut="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Wt=rt,zt=rt,Yt=rt;function Gt(t,e,n){var i,r,o,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=f([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(r=yt.call(this._weekdaysParse,s))?r:null:"ddd"===e?-1!==(r=yt.call(this._shortWeekdaysParse,s))?r:null:-1!==(r=yt.call(this._minWeekdaysParse,s))?r:null:"dddd"===e?-1!==(r=yt.call(this._weekdaysParse,s))||-1!==(r=yt.call(this._shortWeekdaysParse,s))||-1!==(r=yt.call(this._minWeekdaysParse,s))?r:null:"ddd"===e?-1!==(r=yt.call(this._shortWeekdaysParse,s))||-1!==(r=yt.call(this._weekdaysParse,s))||-1!==(r=yt.call(this._minWeekdaysParse,s))?r:null:-1!==(r=yt.call(this._minWeekdaysParse,s))||-1!==(r=yt.call(this._weekdaysParse,s))||-1!==(r=yt.call(this._shortWeekdaysParse,s))?r:null}function $t(){function t(t,e){return e.length-t.length}var e,n,i,r,o,s=[],a=[],l=[],c=[];for(e=0;e<7;e++)n=f([2e3,1]).day(e),i=ct(this.weekdaysMin(n,"")),r=ct(this.weekdaysShort(n,"")),o=ct(this.weekdays(n,"")),s.push(i),a.push(r),l.push(o),c.push(i),c.push(r),c.push(o);s.sort(t),a.sort(t),l.sort(t),c.sort(t),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Kt(){return this.hours()%12||12}function Xt(t,e){H(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function qt(t,e){return e._meridiemParse}H("H",["HH",2],0,"hour"),H("h",["hh",2],0,Kt),H("k",["kk",2],0,(function(){return this.hours()||24})),H("hmm",0,0,(function(){return""+Kt.apply(this)+I(this.minutes(),2)})),H("hmmss",0,0,(function(){return""+Kt.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)})),H("Hmm",0,0,(function(){return""+this.hours()+I(this.minutes(),2)})),H("Hmmss",0,0,(function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)})),Xt("a",!0),Xt("A",!1),at("a",qt),at("A",qt),at("H",K,st),at("h",K,ot),at("k",K,ot),at("HH",K,z),at("hh",K,z),at("kk",K,z),at("hmm",X),at("hmmss",q),at("Hmm",X),at("Hmmss",q),ft(["H","HH"],3),ft(["k","kk"],(function(t,e,n){var i=ht(t);e[3]=24===i?0:i})),ft(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),ft(["h","hh"],(function(t,e,n){e[3]=ht(t),g(n).bigHour=!0})),ft("hmm",(function(t,e,n){var i=t.length-2;e[3]=ht(t.substr(0,i)),e[4]=ht(t.substr(i)),g(n).bigHour=!0})),ft("hmmss",(function(t,e,n){var i=t.length-4,r=t.length-2;e[3]=ht(t.substr(0,i)),e[4]=ht(t.substr(i,2)),e[5]=ht(t.substr(r)),g(n).bigHour=!0})),ft("Hmm",(function(t,e,n){var i=t.length-2;e[3]=ht(t.substr(0,i)),e[4]=ht(t.substr(i))})),ft("Hmmss",(function(t,e,n){var i=t.length-4,r=t.length-2;e[3]=ht(t.substr(0,i)),e[4]=ht(t.substr(i,2)),e[5]=ht(t.substr(r))}));var Qt,Zt=vt("Hours",!0),Jt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Tt,monthsShort:_t,week:{dow:0,doy:6},weekdays:Bt,weekdaysMin:Ut,weekdaysShort:Vt,meridiemParse:/[ap]\.?m?\.?/i},te={},ee={};function ne(t,e){var n,i=Math.min(t.length,e.length);for(n=0;n<i;n+=1)if(t[n]!==e[n])return n;return i}function ie(t){return t?t.toLowerCase().replace("_","-"):t}function re(e){var n=null;if(void 0===te[e]&&"undefined"!==typeof t&&t&&t.exports&&function(t){return!(!t||!t.match("^[^/\\\\]*$"))}(e))try{n=Qt._abbr,function(){var t=new Error("Cannot find module 'undefined'");throw t.code="MODULE_NOT_FOUND",t}(),oe(n)}catch(i){te[e]=null}return te[e]}function oe(t,e){var n;return t&&((n=l(e)?ae(t):se(t,e))?Qt=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Qt._abbr}function se(t,e){if(null!==e){var n,i=Jt;if(e.abbr=t,null!=te[t])E("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=te[t]._config;else if(null!=e.parentLocale)if(null!=te[e.parentLocale])i=te[e.parentLocale]._config;else{if(null==(n=re(e.parentLocale)))return ee[e.parentLocale]||(ee[e.parentLocale]=[]),ee[e.parentLocale].push({name:t,config:e}),null;i=n._config}return te[t]=new x(M(i,e)),ee[t]&&ee[t].forEach((function(t){se(t.name,t.config)})),oe(t),te[t]}return delete te[t],null}function ae(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Qt;if(!r(t)){if(e=re(t))return e;t=[t]}return function(t){for(var e,n,i,r,o=0;o<t.length;){for(e=(r=ie(t[o]).split("-")).length,n=(n=ie(t[o+1]))?n.split("-"):null;e>0;){if(i=re(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&ne(r,n)>=e-1)break;e--}o++}return Qt}(t)}function le(t){var e,n=t._a;return n&&-2===g(t).overflow&&(e=n[1]<0||n[1]>11?1:n[2]<1||n[2]>Ot(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,g(t)._overflowDayOfYear&&(e<0||e>2)&&(e=2),g(t)._overflowWeeks&&-1===e&&(e=7),g(t)._overflowWeekday&&-1===e&&(e=8),g(t).overflow=e),t}var ce=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ue=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,he=/Z|[+-]\d\d(?::?\d\d)?/,de=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],fe=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ge=/^\/?Date\((-?\d+)/i,pe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,me={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function be(t){var e,n,i,r,o,s,a=t._i,l=ce.exec(a)||ue.exec(a),c=de.length,u=fe.length;if(l){for(g(t).iso=!0,e=0,n=c;e<n;e++)if(de[e][1].exec(l[1])){r=de[e][0],i=!1!==de[e][2];break}if(null==r)return void(t._isValid=!1);if(l[3]){for(e=0,n=u;e<n;e++)if(fe[e][1].exec(l[3])){o=(l[2]||" ")+fe[e][0];break}if(null==o)return void(t._isValid=!1)}if(!i&&null!=o)return void(t._isValid=!1);if(l[4]){if(!he.exec(l[4]))return void(t._isValid=!1);s="Z"}t._f=r+(o||"")+(s||""),Se(t)}else t._isValid=!1}function ye(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function we(t){var e,n=pe.exec(t._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(n){if(e=function(t,e,n,i,r,o){var s=[ye(t),_t.indexOf(e),parseInt(n,10),parseInt(i,10),parseInt(r,10)];return o&&s.push(parseInt(o,10)),s}(n[4],n[3],n[2],n[5],n[6],n[7]),!function(t,e,n){return!t||Vt.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(g(n).weekdayMismatch=!0,n._isValid=!1,!1)}(n[1],e,t))return;t._a=e,t._tzm=function(t,e,n){if(t)return me[t];if(e)return 0;var i=parseInt(n,10),r=i%100;return(i-r)/100*60+r}(n[8],n[9],n[10]),t._d=jt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),g(t).rfc2822=!0}else t._isValid=!1}function ve(t,e,n){return null!=t?t:null!=e?e:n}function Ce(t){var e,n,r,o,s,a=[];if(!t._d){for(r=function(t){var e=new Date(i.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,n,i,r,o,s,a,l,c;null!=(e=t._w).GG||null!=e.W||null!=e.E?(o=1,s=4,n=ve(e.GG,t._a[0],Pt(_e(),1,4).year),i=ve(e.W,1),((r=ve(e.E,1))<1||r>7)&&(l=!0)):(o=t._locale._week.dow,s=t._locale._week.doy,c=Pt(_e(),o,s),n=ve(e.gg,t._a[0],c.year),i=ve(e.w,c.week),null!=e.d?((r=e.d)<0||r>6)&&(l=!0):null!=e.e?(r=e.e+o,(e.e<0||e.e>6)&&(l=!0)):r=o),i<1||i>Lt(n,o,s)?g(t)._overflowWeeks=!0:null!=l?g(t)._overflowWeekday=!0:(a=Dt(n,i,r,o,s),t._a[0]=a.year,t._dayOfYear=a.dayOfYear)}(t),null!=t._dayOfYear&&(s=ve(t._a[0],r[0]),(t._dayOfYear>bt(s)||0===t._dayOfYear)&&(g(t)._overflowDayOfYear=!0),n=jt(s,0,t._dayOfYear),t._a[1]=n.getUTCMonth(),t._a[2]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=r[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?jt:Nt).apply(null,a),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&"undefined"!==typeof t._w.d&&t._w.d!==o&&(g(t).weekdayMismatch=!0)}}function Se(t){if(t._f!==i.ISO_8601)if(t._f!==i.RFC_2822){t._a=[],g(t).empty=!0;var e,n,r,o,s,a,l,c=""+t._i,u=c.length,h=0;for(l=(r=P(t._f,t._locale).match(k)||[]).length,e=0;e<l;e++)o=r[e],(n=(c.match(lt(o,t))||[])[0])&&((s=c.substr(0,c.indexOf(n))).length>0&&g(t).unusedInput.push(s),c=c.slice(c.indexOf(n)+n.length),h+=n.length),j[o]?(n?g(t).empty=!1:g(t).unusedTokens.push(o),pt(o,n,t)):t._strict&&!n&&g(t).unusedTokens.push(o);g(t).charsLeftOver=u-h,c.length>0&&g(t).unusedInput.push(c),t._a[3]<=12&&!0===g(t).bigHour&&t._a[3]>0&&(g(t).bigHour=void 0),g(t).parsedDateParts=t._a.slice(0),g(t).meridiem=t._meridiem,t._a[3]=function(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((i=t.isPM(n))&&e<12&&(e+=12),i||12!==e||(e=0),e):e}(t._locale,t._a[3],t._meridiem),null!==(a=g(t).era)&&(t._a[0]=t._locale.erasConvertYear(a,t._a[0])),Ce(t),le(t)}else we(t);else be(t)}function Oe(t){var e=t._i,n=t._f;return t._locale=t._locale||ae(t._l),null===e||void 0===n&&""===e?m({nullInput:!0}):("string"===typeof e&&(t._i=e=t._locale.preparse(e)),C(e)?new v(le(e)):(u(e)?t._d=e:r(n)?function(t){var e,n,i,r,o,s,a=!1,l=t._f.length;if(0===l)return g(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<l;r++)o=0,s=!1,e=w({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],Se(e),p(e)&&(s=!0),o+=g(e).charsLeftOver,o+=10*g(e).unusedTokens.length,g(e).score=o,a?o<i&&(i=o,n=e):(null==i||o<i||s)&&(i=o,n=e,s&&(a=!0));d(t,n||e)}(t):n?Se(t):function(t){var e=t._i;l(e)?t._d=new Date(i.now()):u(e)?t._d=new Date(e.valueOf()):"string"===typeof e?function(t){var e=ge.exec(t._i);null===e?(be(t),!1===t._isValid&&(delete t._isValid,we(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:i.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):r(e)?(t._a=h(e.slice(0),(function(t){return parseInt(t,10)})),Ce(t)):o(e)?function(t){if(!t._d){var e=B(t._i),n=void 0===e.day?e.date:e.day;t._a=h([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),Ce(t)}}(t):c(e)?t._d=new Date(e):i.createFromInputFallback(t)}(t),p(t)||(t._d=null),t))}function Te(t,e,n,i,s){var l={};return!0!==e&&!1!==e||(i=e,e=void 0),!0!==n&&!1!==n||(i=n,n=void 0),(o(t)&&a(t)||r(t)&&0===t.length)&&(t=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=s,l._l=n,l._i=t,l._f=e,l._strict=i,function(t){var e=new v(le(Oe(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}(l)}function _e(t,e,n,i){return Te(t,e,n,i,!1)}i.createFromInputFallback=O("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),i.ISO_8601=function(){},i.RFC_2822=function(){};var Ee=O("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=_e.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:m()})),Re=O("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=_e.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:m()}));function Me(t,e){var n,i;if(1===e.length&&r(e[0])&&(e=e[0]),!e.length)return _e();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}var xe=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ie(t){var e=B(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||e.isoWeek||0,a=e.day||0,l=e.hour||0,c=e.minute||0,u=e.second||0,h=e.millisecond||0;this._isValid=function(t){var e,n,i=!1,r=xe.length;for(e in t)if(s(t,e)&&(-1===yt.call(xe,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<r;++n)if(t[xe[n]]){if(i)return!1;parseFloat(t[xe[n]])!==ht(t[xe[n]])&&(i=!0)}return!0}(e),this._milliseconds=+h+1e3*u+6e4*c+1e3*l*60*60,this._days=+a+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=ae(),this._bubble()}function ke(t){return t instanceof Ie}function Ae(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Ne(t,e){H(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+I(~~(t/60),2)+e+I(~~t%60,2)}))}Ne("Z",":"),Ne("ZZ",""),at("Z",it),at("ZZ",it),ft(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=He(it,t)}));var je=/([\+\-]|\d\d)/gi;function He(t,e){var n,i,r=(e||"").match(t);return null===r?null:0===(i=60*(n=((r[r.length-1]||[])+"").match(je)||["-",0,0])[1]+ht(n[2]))?0:"+"===n[0]?i:-i}function De(t,e){var n,r;return e._isUTC?(n=e.clone(),r=(C(t)||u(t)?t.valueOf():_e(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),i.updateOffset(n,!1),n):_e(t).local()}function Pe(t){return-Math.round(t._d.getTimezoneOffset())}function Le(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var Fe=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Be=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ve(t,e){var n,i,r,o=t,a=null;return ke(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:c(t)||!isNaN(+t)?(o={},e?o[e]=+t:o.milliseconds=+t):(a=Fe.exec(t))?(n="-"===a[1]?-1:1,o={y:0,d:ht(a[2])*n,h:ht(a[3])*n,m:ht(a[4])*n,s:ht(a[5])*n,ms:ht(Ae(1e3*a[6]))*n}):(a=Be.exec(t))?(n="-"===a[1]?-1:1,o={y:Ue(a[2],n),M:Ue(a[3],n),w:Ue(a[4],n),d:Ue(a[5],n),h:Ue(a[6],n),m:Ue(a[7],n),s:Ue(a[8],n)}):null==o?o={}:"object"===typeof o&&("from"in o||"to"in o)&&(r=function(t,e){var n;return t.isValid()&&e.isValid()?(e=De(e,t),t.isBefore(e)?n=We(t,e):((n=We(e,t)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}(_e(o.from),_e(o.to)),(o={}).ms=r.milliseconds,o.M=r.months),i=new Ie(o),ke(t)&&s(t,"_locale")&&(i._locale=t._locale),ke(t)&&s(t,"_isValid")&&(i._isValid=t._isValid),i}function Ue(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function We(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function ze(t,e){return function(n,i){var r;return null===i||isNaN(+i)||(E(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),Ye(this,Ve(n,i),t),this}}function Ye(t,e,n,r){var o=e._milliseconds,s=Ae(e._days),a=Ae(e._months);t.isValid()&&(r=null==r||r,a&&It(t,Ct(t,"Month")+a*n),s&&St(t,"Date",Ct(t,"Date")+s*n),o&&t._d.setTime(t._d.valueOf()+o*n),r&&i.updateOffset(t,s||a))}Ve.fn=Ie.prototype,Ve.invalid=function(){return Ve(NaN)};var Ge=ze(1,"add"),$e=ze(-1,"subtract");function Ke(t){return"string"===typeof t||t instanceof String}function Xe(t){return C(t)||u(t)||Ke(t)||c(t)||function(t){var e=r(t),n=!1;return e&&(n=0===t.filter((function(e){return!c(e)&&Ke(t)})).length),e&&n}(t)||function(t){var e,n,i=o(t)&&!a(t),r=!1,l=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=l.length;for(e=0;e<c;e+=1)n=l[e],r=r||s(t,n);return i&&r}(t)||null===t||void 0===t}function qe(t){var e,n=o(t)&&!a(t),i=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<r.length;e+=1)i=i||s(t,r[e]);return n&&i}function Qe(t,e){if(t.date()<e.date())return-Qe(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(n,"months");return-(n+(e-i<0?(e-i)/(i-t.clone().add(n-1,"months")):(e-i)/(t.clone().add(n+1,"months")-i)))||0}function Ze(t){var e;return void 0===t?this._locale._abbr:(null!=(e=ae(t))&&(this._locale=e),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Je=O("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function tn(){return this._locale}function en(t,e){return(t%e+e)%e}function nn(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-126227808e5:new Date(t,e,n).valueOf()}function rn(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-126227808e5:Date.UTC(t,e,n)}function on(t,e){return e.erasAbbrRegex(t)}function sn(){var t,e,n,i,r,o=[],s=[],a=[],l=[],c=this.eras();for(t=0,e=c.length;t<e;++t)n=ct(c[t].name),i=ct(c[t].abbr),r=ct(c[t].narrow),s.push(n),o.push(i),a.push(r),l.push(n),l.push(i),l.push(r);this._erasRegex=new RegExp("^("+l.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+s.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}function an(t,e){H(0,[t,t.length],0,e)}function ln(t,e,n,i,r){var o;return null==t?Pt(this,i,r).year:(e>(o=Lt(t,i,r))&&(e=o),cn.call(this,t,e,n,i,r))}function cn(t,e,n,i,r){var o=Dt(t,e,n,i,r),s=jt(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}H("N",0,0,"eraAbbr"),H("NN",0,0,"eraAbbr"),H("NNN",0,0,"eraAbbr"),H("NNNN",0,0,"eraName"),H("NNNNN",0,0,"eraNarrow"),H("y",["y",1],"yo","eraYear"),H("y",["yy",2],0,"eraYear"),H("y",["yyy",3],0,"eraYear"),H("y",["yyyy",4],0,"eraYear"),at("N",on),at("NN",on),at("NNN",on),at("NNNN",(function(t,e){return e.erasNameRegex(t)})),at("NNNNN",(function(t,e){return e.erasNarrowRegex(t)})),ft(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,i){var r=n._locale.erasParse(t,i,n._strict);r?g(n).era=r:g(n).invalidEra=t})),at("y",tt),at("yy",tt),at("yyy",tt),at("yyyy",tt),at("yo",(function(t,e){return e._eraYearOrdinalRegex||tt})),ft(["y","yy","yyy","yyyy"],0),ft(["yo"],(function(t,e,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[0]=n._locale.eraYearOrdinalParse(t,r):e[0]=parseInt(t,10)})),H(0,["gg",2],0,(function(){return this.weekYear()%100})),H(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),an("gggg","weekYear"),an("ggggg","weekYear"),an("GGGG","isoWeekYear"),an("GGGGG","isoWeekYear"),at("G",et),at("g",et),at("GG",K,z),at("gg",K,z),at("GGGG",Z,G),at("gggg",Z,G),at("GGGGG",J,$),at("ggggg",J,$),gt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,i){e[i.substr(0,2)]=ht(t)})),gt(["gg","GG"],(function(t,e,n,r){e[r]=i.parseTwoDigitYear(t)})),H("Q",0,"Qo","quarter"),at("Q",W),ft("Q",(function(t,e){e[1]=3*(ht(t)-1)})),H("D",["DD",2],"Do","date"),at("D",K,ot),at("DD",K,z),at("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),ft(["D","DD"],2),ft("Do",(function(t,e){e[2]=ht(t.match(K)[0])}));var un=vt("Date",!0);H("DDD",["DDDD",3],"DDDo","dayOfYear"),at("DDD",Q),at("DDDD",Y),ft(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=ht(t)})),H("m",["mm",2],0,"minute"),at("m",K,st),at("mm",K,z),ft(["m","mm"],4);var hn=vt("Minutes",!1);H("s",["ss",2],0,"second"),at("s",K,st),at("ss",K,z),ft(["s","ss"],5);var dn,fn,gn=vt("Seconds",!1);for(H("S",0,0,(function(){return~~(this.millisecond()/100)})),H(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),H(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),H(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),H(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),H(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),H(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),at("S",Q,W),at("SS",Q,z),at("SSS",Q,Y),dn="SSSS";dn.length<=9;dn+="S")at(dn,tt);function pn(t,e){e[6]=ht(1e3*("0."+t))}for(dn="S";dn.length<=9;dn+="S")ft(dn,pn);fn=vt("Milliseconds",!1),H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var mn=v.prototype;function bn(t){return t}mn.add=Ge,mn.calendar=function(t,e){1===arguments.length&&(arguments[0]?Xe(arguments[0])?(t=arguments[0],e=void 0):qe(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||_e(),r=De(n,this).startOf("day"),o=i.calendarFormat(this,r)||"sameElse",s=e&&(R(e[o])?e[o].call(this,n):e[o]);return this.format(s||this.localeData().calendar(o,this,_e(n)))},mn.clone=function(){return new v(this)},mn.diff=function(t,e,n){var i,r,o;if(!this.isValid())return NaN;if(!(i=De(t,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),e=F(e)){case"year":o=Qe(this,i)/12;break;case"month":o=Qe(this,i);break;case"quarter":o=Qe(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:ut(o)},mn.endOf=function(t){var e,n;if(void 0===(t=F(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?rn:nn,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-en(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-en(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-en(e,1e3)-1}return this._d.setTime(e),i.updateOffset(this,!0),this},mn.format=function(t){t||(t=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var e=D(this,t);return this.localeData().postformat(e)},mn.from=function(t,e){return this.isValid()&&(C(t)&&t.isValid()||_e(t).isValid())?Ve({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},mn.fromNow=function(t){return this.from(_e(),t)},mn.to=function(t,e){return this.isValid()&&(C(t)&&t.isValid()||_e(t).isValid())?Ve({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},mn.toNow=function(t){return this.to(_e(),t)},mn.get=function(t){return R(this[t=F(t)])?this[t]():this},mn.invalidAt=function(){return g(this).overflow},mn.isAfter=function(t,e){var n=C(t)?t:_e(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=F(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},mn.isBefore=function(t,e){var n=C(t)?t:_e(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=F(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},mn.isBetween=function(t,e,n,i){var r=C(t)?t:_e(t),o=C(e)?e:_e(e);return!!(this.isValid()&&r.isValid()&&o.isValid())&&(("("===(i=i||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===i[1]?this.isBefore(o,n):!this.isAfter(o,n)))},mn.isSame=function(t,e){var n,i=C(t)?t:_e(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=F(e)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},mn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},mn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},mn.isValid=function(){return p(this)},mn.lang=Je,mn.locale=Ze,mn.localeData=tn,mn.max=Re,mn.min=Ee,mn.parsingFlags=function(){return d({},g(this))},mn.set=function(t,e){if("object"===typeof t){var n,i=function(t){var e,n=[];for(e in t)s(t,e)&&n.push({unit:e,priority:U[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}(t=B(t)),r=i.length;for(n=0;n<r;n++)this[i[n].unit](t[i[n].unit])}else if(R(this[t=F(t)]))return this[t](e);return this},mn.startOf=function(t){var e,n;if(void 0===(t=F(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?rn:nn,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=en(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=en(e,6e4);break;case"second":e=this._d.valueOf(),e-=en(e,1e3)}return this._d.setTime(e),i.updateOffset(this,!0),this},mn.subtract=$e,mn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},mn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},mn.toDate=function(){return new Date(this.valueOf())},mn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?D(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):R(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",D(n,"Z")):D(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},mn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,n,i="moment",r="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",r="Z"),t="["+i+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=r+'[")]',this.format(t+e+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!==typeof Symbol&&null!=Symbol.for&&(mn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),mn.toJSON=function(){return this.isValid()?this.toISOString():null},mn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},mn.unix=function(){return Math.floor(this.valueOf()/1e3)},mn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},mn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},mn.eraName=function(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until)return i[t].name;if(i[t].until<=n&&n<=i[t].since)return i[t].name}return""},mn.eraNarrow=function(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until)return i[t].narrow;if(i[t].until<=n&&n<=i[t].since)return i[t].narrow}return""},mn.eraAbbr=function(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until)return i[t].abbr;if(i[t].until<=n&&n<=i[t].since)return i[t].abbr}return""},mn.eraYear=function(){var t,e,n,r,o=this.localeData().eras();for(t=0,e=o.length;t<e;++t)if(n=o[t].since<=o[t].until?1:-1,r=this.clone().startOf("day").valueOf(),o[t].since<=r&&r<=o[t].until||o[t].until<=r&&r<=o[t].since)return(this.year()-i(o[t].since).year())*n+o[t].offset;return this.year()},mn.year=wt,mn.isLeapYear=function(){return mt(this.year())},mn.weekYear=function(t){return ln.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)},mn.isoWeekYear=function(t){return ln.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},mn.quarter=mn.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},mn.month=kt,mn.daysInMonth=function(){return Ot(this.year(),this.month())},mn.week=mn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},mn.isoWeek=mn.isoWeeks=function(t){var e=Pt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},mn.weeksInYear=function(){var t=this.localeData()._week;return Lt(this.year(),t.dow,t.doy)},mn.weeksInWeekYear=function(){var t=this.localeData()._week;return Lt(this.weekYear(),t.dow,t.doy)},mn.isoWeeksInYear=function(){return Lt(this.year(),1,4)},mn.isoWeeksInISOWeekYear=function(){return Lt(this.isoWeekYear(),1,4)},mn.date=un,mn.day=mn.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=Ct(this,"Day");return null!=t?(t=function(t,e){return"string"!==typeof t?t:isNaN(t)?"number"===typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},mn.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},mn.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"===typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},mn.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},mn.hour=mn.hours=Zt,mn.minute=mn.minutes=hn,mn.second=mn.seconds=gn,mn.millisecond=mn.milliseconds=fn,mn.utcOffset=function(t,e,n){var r,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"===typeof t){if(null===(t=He(it,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(r=Pe(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==t&&(!e||this._changeInProgress?Ye(this,Ve(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Pe(this)},mn.utc=function(t){return this.utcOffset(0,t)},mn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Pe(this),"m")),this},mn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var t=He(nt,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},mn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?_e(t).utcOffset():0,(this.utcOffset()-t)%60===0)},mn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},mn.isLocal=function(){return!!this.isValid()&&!this._isUTC},mn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},mn.isUtc=Le,mn.isUTC=Le,mn.zoneAbbr=function(){return this._isUTC?"UTC":""},mn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},mn.dates=O("dates accessor is deprecated. Use date instead.",un),mn.months=O("months accessor is deprecated. Use month instead",kt),mn.years=O("years accessor is deprecated. Use year instead",wt),mn.zone=O("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?("string"!==typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()})),mn.isDSTShifted=O("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var t,e={};return w(e,this),(e=Oe(e))._a?(t=e._isUTC?f(e._a):_e(e._a),this._isDSTShifted=this.isValid()&&function(t,e,n){var i,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),s=0;for(i=0;i<r;i++)(n&&t[i]!==e[i]||!n&&ht(t[i])!==ht(e[i]))&&s++;return s+o}(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var yn=x.prototype;function wn(t,e,n,i){var r=ae(),o=f().set(i,e);return r[n](o,t)}function vn(t,e,n){if(c(t)&&(e=t,t=void 0),t=t||"",null!=e)return wn(t,e,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=wn(t,i,n,"month");return r}function Cn(t,e,n,i){"boolean"===typeof t?(c(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,c(e)&&(n=e,e=void 0),e=e||"");var r,o=ae(),s=t?o._week.dow:0,a=[];if(null!=n)return wn(e,(n+s)%7,i,"day");for(r=0;r<7;r++)a[r]=wn(e,(r+s)%7,i,"day");return a}yn.calendar=function(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return R(i)?i.call(e,n):i},yn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(k).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])},yn.invalidDate=function(){return this._invalidDate},yn.ordinal=function(t){return this._ordinal.replace("%d",t)},yn.preparse=bn,yn.postformat=bn,yn.relativeTime=function(t,e,n,i){var r=this._relativeTime[n];return R(r)?r(t,e,n,i):r.replace(/%d/i,t)},yn.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return R(n)?n(e):n.replace(/%s/i,e)},yn.set=function(t){var e,n;for(n in t)s(t,n)&&(R(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},yn.eras=function(t,e){var n,r,o,s=this._eras||ae("en")._eras;for(n=0,r=s.length;n<r;++n){switch(typeof s[n].since){case"string":o=i(s[n].since).startOf("day"),s[n].since=o.valueOf()}switch(typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":o=i(s[n].until).startOf("day").valueOf(),s[n].until=o.valueOf()}}return s},yn.erasParse=function(t,e,n){var i,r,o,s,a,l=this.eras();for(t=t.toUpperCase(),i=0,r=l.length;i<r;++i)if(o=l[i].name.toUpperCase(),s=l[i].abbr.toUpperCase(),a=l[i].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(s===t)return l[i];break;case"NNNN":if(o===t)return l[i];break;case"NNNNN":if(a===t)return l[i]}else if([o,s,a].indexOf(t)>=0)return l[i]},yn.erasConvertYear=function(t,e){var n=t.since<=t.until?1:-1;return void 0===e?i(t.since).year():i(t.since).year()+(e-t.offset)*n},yn.erasAbbrRegex=function(t){return s(this,"_erasAbbrRegex")||sn.call(this),t?this._erasAbbrRegex:this._erasRegex},yn.erasNameRegex=function(t){return s(this,"_erasNameRegex")||sn.call(this),t?this._erasNameRegex:this._erasRegex},yn.erasNarrowRegex=function(t){return s(this,"_erasNarrowRegex")||sn.call(this),t?this._erasNarrowRegex:this._erasRegex},yn.months=function(t,e){return t?r(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Et).test(e)?"format":"standalone"][t.month()]:r(this._months)?this._months:this._months.standalone},yn.monthsShort=function(t,e){return t?r(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Et.test(e)?"format":"standalone"][t.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},yn.monthsParse=function(t,e,n){var i,r,o;if(this._monthsParseExact)return xt.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=f([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}},yn.monthsRegex=function(t){return this._monthsParseExact?(s(this,"_monthsRegex")||At.call(this),t?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=Mt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},yn.monthsShortRegex=function(t){return this._monthsParseExact?(s(this,"_monthsRegex")||At.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=Rt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},yn.week=function(t){return Pt(t,this._week.dow,this._week.doy).week},yn.firstDayOfYear=function(){return this._week.doy},yn.firstDayOfWeek=function(){return this._week.dow},yn.weekdays=function(t,e){var n=r(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Ft(n,this._week.dow):t?n[t.day()]:n},yn.weekdaysMin=function(t){return!0===t?Ft(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},yn.weekdaysShort=function(t){return!0===t?Ft(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},yn.weekdaysParse=function(t,e,n){var i,r,o;if(this._weekdaysParseExact)return Gt.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=f([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}},yn.weekdaysRegex=function(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||$t.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Wt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},yn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||$t.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=zt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},yn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||$t.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Yt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},yn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},yn.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},oe("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===ht(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),i.lang=O("moment.lang is deprecated. Use moment.locale instead.",oe),i.langData=O("moment.langData is deprecated. Use moment.localeData instead.",ae);var Sn=Math.abs;function On(t,e,n,i){var r=Ve(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function Tn(t){return t<0?Math.floor(t):Math.ceil(t)}function _n(t){return 4800*t/146097}function En(t){return 146097*t/4800}function Rn(t){return function(){return this.as(t)}}var Mn=Rn("ms"),xn=Rn("s"),In=Rn("m"),kn=Rn("h"),An=Rn("d"),Nn=Rn("w"),jn=Rn("M"),Hn=Rn("Q"),Dn=Rn("y"),Pn=Mn;function Ln(t){return function(){return this.isValid()?this._data[t]:NaN}}var Fn=Ln("milliseconds"),Bn=Ln("seconds"),Vn=Ln("minutes"),Un=Ln("hours"),Wn=Ln("days"),zn=Ln("months"),Yn=Ln("years"),Gn=Math.round,$n={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Kn(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}var Xn=Math.abs;function qn(t){return(t>0)-(t<0)||+t}function Qn(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,i,r,o,s,a,l=Xn(this._milliseconds)/1e3,c=Xn(this._days),u=Xn(this._months),h=this.asSeconds();return h?(t=ut(l/60),e=ut(t/60),l%=60,t%=60,n=ut(u/12),u%=12,i=l?l.toFixed(3).replace(/\.?0+$/,""):"",r=h<0?"-":"",o=qn(this._months)!==qn(h)?"-":"",s=qn(this._days)!==qn(h)?"-":"",a=qn(this._milliseconds)!==qn(h)?"-":"",r+"P"+(n?o+n+"Y":"")+(u?o+u+"M":"")+(c?s+c+"D":"")+(e||t||l?"T":"")+(e?a+e+"H":"")+(t?a+t+"M":"")+(l?a+i+"S":"")):"P0D"}var Zn=Ie.prototype;return Zn.isValid=function(){return this._isValid},Zn.abs=function(){var t=this._data;return this._milliseconds=Sn(this._milliseconds),this._days=Sn(this._days),this._months=Sn(this._months),t.milliseconds=Sn(t.milliseconds),t.seconds=Sn(t.seconds),t.minutes=Sn(t.minutes),t.hours=Sn(t.hours),t.months=Sn(t.months),t.years=Sn(t.years),this},Zn.add=function(t,e){return On(this,t,e,1)},Zn.subtract=function(t,e){return On(this,t,e,-1)},Zn.as=function(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if("month"===(t=F(t))||"quarter"===t||"year"===t)switch(e=this._days+i/864e5,n=this._months+_n(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(En(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}},Zn.asMilliseconds=Mn,Zn.asSeconds=xn,Zn.asMinutes=In,Zn.asHours=kn,Zn.asDays=An,Zn.asWeeks=Nn,Zn.asMonths=jn,Zn.asQuarters=Hn,Zn.asYears=Dn,Zn.valueOf=Pn,Zn._bubble=function(){var t,e,n,i,r,o=this._milliseconds,s=this._days,a=this._months,l=this._data;return o>=0&&s>=0&&a>=0||o<=0&&s<=0&&a<=0||(o+=864e5*Tn(En(a)+s),s=0,a=0),l.milliseconds=o%1e3,t=ut(o/1e3),l.seconds=t%60,e=ut(t/60),l.minutes=e%60,n=ut(e/60),l.hours=n%24,s+=ut(n/24),r=ut(_n(s)),a+=r,s-=Tn(En(r)),i=ut(a/12),a%=12,l.days=s,l.months=a,l.years=i,this},Zn.clone=function(){return Ve(this)},Zn.get=function(t){return t=F(t),this.isValid()?this[t+"s"]():NaN},Zn.milliseconds=Fn,Zn.seconds=Bn,Zn.minutes=Vn,Zn.hours=Un,Zn.days=Wn,Zn.weeks=function(){return ut(this.days()/7)},Zn.months=zn,Zn.years=Yn,Zn.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var n,i,r=!1,o=$n;return"object"===typeof t&&(e=t,t=!1),"boolean"===typeof t&&(r=t),"object"===typeof e&&(o=Object.assign({},$n,e),null!=e.s&&null==e.ss&&(o.ss=e.s-1)),n=this.localeData(),i=function(t,e,n,i){var r=Ve(t).abs(),o=Gn(r.as("s")),s=Gn(r.as("m")),a=Gn(r.as("h")),l=Gn(r.as("d")),c=Gn(r.as("M")),u=Gn(r.as("w")),h=Gn(r.as("y")),d=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||s<=1&&["m"]||s<n.m&&["mm",s]||a<=1&&["h"]||a<n.h&&["hh",a]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(d=d||u<=1&&["w"]||u<n.w&&["ww",u]),(d=d||c<=1&&["M"]||c<n.M&&["MM",c]||h<=1&&["y"]||["yy",h])[2]=e,d[3]=+t>0,d[4]=i,Kn.apply(null,d)}(this,!r,o,n),r&&(i=n.pastFuture(+this,i)),n.postformat(i)},Zn.toISOString=Qn,Zn.toString=Qn,Zn.toJSON=Qn,Zn.locale=Ze,Zn.localeData=tn,Zn.toIsoString=O("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Qn),Zn.lang=Je,H("X",0,0,"unix"),H("x",0,0,"valueOf"),at("x",et),at("X",/[+-]?\d+(\.\d{1,3})?/),ft("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),ft("x",(function(t,e,n){n._d=new Date(ht(t))})),i.version="2.30.1",e=_e,i.fn=mn,i.min=function(){var t=[].slice.call(arguments,0);return Me("isBefore",t)},i.max=function(){var t=[].slice.call(arguments,0);return Me("isAfter",t)},i.now=function(){return Date.now?Date.now():+new Date},i.utc=f,i.unix=function(t){return _e(1e3*t)},i.months=function(t,e){return vn(t,e,"months")},i.isDate=u,i.locale=oe,i.invalid=m,i.duration=Ve,i.isMoment=C,i.weekdays=function(t,e,n){return Cn(t,e,n,"weekdays")},i.parseZone=function(){return _e.apply(null,arguments).parseZone()},i.localeData=ae,i.isDuration=ke,i.monthsShort=function(t,e){return vn(t,e,"monthsShort")},i.weekdaysMin=function(t,e,n){return Cn(t,e,n,"weekdaysMin")},i.defineLocale=se,i.updateLocale=function(t,e){if(null!=e){var n,i,r=Jt;null!=te[t]&&null!=te[t].parentLocale?te[t].set(M(te[t]._config,e)):(null!=(i=re(t))&&(r=i._config),e=M(r,e),null==i&&(e.abbr=t),(n=new x(e)).parentLocale=te[t],te[t]=n),oe(t)}else null!=te[t]&&(null!=te[t].parentLocale?(te[t]=te[t].parentLocale,t===oe()&&oe(t)):null!=te[t]&&delete te[t]);return te[t]},i.locales=function(){return T(te)},i.weekdaysShort=function(t,e,n){return Cn(t,e,n,"weekdaysShort")},i.normalizeUnits=F,i.relativeTimeRounding=function(t){return void 0===t?Gn:"function"===typeof t&&(Gn=t,!0)},i.relativeTimeThreshold=function(t,e){return void 0!==$n[t]&&(void 0===e?$n[t]:($n[t]=e,"s"===t&&($n.ss=e-1),!0))},i.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},i.prototype=mn,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}()}).call(this,n(141)(t))},function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"a",(function(){return b})),n.d(e,"c",(function(){return y})),n.d(e,"d",(function(){return w}));var i=n(16),r=n(5),o=n(8);const s="asc",a=new Map([[s,[-1,1]],["desc",[1,-1]]]),l=t=>`The priority '${t}' is already declared in a map.`,c=t=>`The priority '${t}' is not a number.`;var u=n(40);const h=t=>`'${t}' value is already declared in a unique set.`;const d=t=>`There is already registered "${t}" plugin.`,f=function(){let{errorPriorityExists:t,errorPriorityNaN:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=new Map;function i(i,o){if(!Object(r.b)(i))throw new Error(e(i));if(n.has(i))throw new Error(t(i));n.set(i,o)}function u(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;const[e,i]=a.get(t)||a.get(s);return[...n].sort((t,n)=>t[0]<n[0]?e:i).map(t=>t[1])}return t=Object(o.d)(t)?t:l,e=Object(o.d)(e)?e:c,{addItem:i,getItems:u}}({errorPriorityExists:t=>`There is already registered plugin on priority "${t}".`,errorPriorityNaN:t=>`The priority "${t}" is not a number.`}),g=function(){let{errorItemExists:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=new Set;function n(n){if(e.has(n))throw new Error(t(n));e.add(n)}function i(){return[...e]}function r(){e.clear()}return t=Object(o.d)(t)?t:h,{addItem:n,clear:r,getItems:i}}({errorItemExists:d}),p=Object(u.a)({errorIdExists:d});function m(){return[...f.getItems(),...g.getItems()]}function b(t){const e=Object(i.f)(t);return p.getItem(e)}function y(t){return!!b(t)}function w(t,e,n){[t,e,n]=function(t,e,n){"function"===typeof t&&(t=(e=t).PLUGIN_KEY,n=e.PLUGIN_PRIORITY);return[t,e,n]}(t,e,n),void 0===b(t)&&function(t,e,n){const r=Object(i.f)(t);if(p.hasItem(r))throw new Error(d(r));void 0===n?g.addItem(r):f.addItem(n,r);p.addItem(r,e)}(t,e,n)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return h})),n.d(e,"j",(function(){return d})),n.d(e,"c",(function(){return f})),n.d(e,"i",(function(){return g})),n.d(e,"f",(function(){return p})),n.d(e,"g",(function(){return m})),n.d(e,"k",(function(){return b})),n.d(e,"h",(function(){return y}));var i=n(2),r=n(26);const o=t=>{const e={value:!1,test:(n,i)=>{e.value=t(n,i)}};return e},s={chrome:o((t,e)=>/Chrome/.test(t)&&/Google/.test(e)),chromeWebKit:o(t=>/CriOS/.test(t)),edge:o(t=>/Edge/.test(t)),edgeWebKit:o(t=>/EdgiOS/.test(t)),firefox:o(t=>/Firefox/.test(t)),firefoxWebKit:o(t=>/FxiOS/.test(t)),mobile:o(t=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)),safari:o((t,e)=>/Safari/.test(t)&&/Apple Computer/.test(e))},a={mac:o(t=>/^Mac/.test(t)),win:o(t=>/^Win/.test(t)),linux:o(t=>/^Linux/.test(t)),ios:o(t=>/iPhone|iPad|iPod/i.test(t))};function l(){return s.chrome.value}function c(){return s.chromeWebKit.value}function u(){return s.firefox.value}function h(){return s.firefoxWebKit.value}function d(){return s.safari.value}function f(){return s.edge.value}function g(){return s.mobile.value}function p(){return a.ios.value}function m(){let{maxTouchPoints:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator;return t>2&&a.mac.value}function b(){return a.win.value}function y(){return a.mac.value}Object(r.c)()&&(function(){let{userAgent:t=navigator.userAgent,vendor:e=navigator.vendor}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.o)(s,n=>{let{test:i}=n;i(t,e)})}(),function(){let{platform:t=navigator.platform}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.o)(a,e=>{let{test:n}=e;n(t)})}())},function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"e",(function(){return a})),n.d(e,"d",(function(){return l})),n.d(e,"c",(function(){return c}));var i=n(105);n(4);function r(t){return t[0].toUpperCase()+t.substr(1)}function o(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+t()+t()}function s(t){return/^([0-9][0-9]?%$)|(^100%$)/.test(t)}function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(""+t).replace(/(?:\\)?\[([^[\]]+)]/g,(t,n)=>"\\"===t.charAt(0)?t.substr(1,t.length-1):void 0===e[n]?"":e[n])}function l(t){return c(""+t,{ALLOWED_TAGS:[]})}function c(t,e){return i.sanitize(t,e)}},function(t,e,n){"use strict";n.d(e,"d",(function(){return g})),n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return l}));var i=n(7),r=n(24);const o=new WeakMap,{register:s,getItem:a,hasItem:l,getNames:c,getValues:u}=Object(r.a)("editors");function h(t){const e={},n=t;this.getConstructor=function(){return t},this.getInstance=function(t){return t.guid in e||(e[t.guid]=new n(t)),e[t.guid]},i.a.getSingleton().add("afterDestroy",(function(){e[this.guid]=null}))}function d(t,e){let n;if("function"===typeof t)o.get(t)||g(null,t),n=o.get(t);else{if("string"!==typeof t)throw Error('Only strings and functions can be passed as "editor" parameter');n=a(t)}if(!n)throw Error(`No editor registered under name "${t}"`);return n.getInstance(e)}function f(t){if("function"===typeof t)return t;if(!l(t))throw Error(`No registered editor found under "${t}" name`);return a(t).getConstructor()}function g(t,e){t&&"string"!==typeof t&&(t=(e=t).EDITOR_TYPE);const n=new h(e);"string"===typeof t&&s(t,n),o.set(e,n)}},function(t,e,n){"use strict";var i=n(2),r=n(8);const o={_localHooks:Object.create(null),addLocalHook(t,e){return this._localHooks[t]||(this._localHooks[t]=[]),this._localHooks[t].push(e),this},runLocalHooks(t,e,n,i,o,s,a){if(this._localHooks[t]){const l=this._localHooks[t].length;for(let c=0;c<l;c++)Object(r.c)(this._localHooks[t][c],this,e,n,i,o,s,a)}},clearLocalHooks(){return this._localHooks={},this}};Object(i.f)(o,"MIXIN_NAME","localHooks",{writable:!1,enumerable:!1}),e.a=o},,function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return s}));var i=n(24);const{register:r,getItem:o,hasItem:s,getNames:a,getValues:l}=Object(i.a)("renderers");function c(t){if("function"===typeof t)return t;if(!s(t))throw Error(`No registered renderer found under "${t}" name`);return o(t)}function u(t,e){"string"!==typeof t&&(t=(e=t).RENDERER_TYPE),r(t,e)}},function(t,e,n){"use strict";n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return c}));var i=n(24),r=n(17),o=n(20),s=n(25);const{register:a,getItem:l,hasItem:c,getNames:u,getValues:h}=Object(i.a)("cellTypes");function d(t){if(!c(t))throw Error(`You declared cell type "${t}" as a string that is not mapped to a known object.\n                 Cell type must be an object or a string mapped to an object registered by\n                 "Handsontable.cellTypes.registerCellType" method`);return l(t)}function f(t,e){"string"!==typeof t&&(t=(e=t).CELL_TYPE);const{editor:n,renderer:i,validator:l}=e;n&&Object(r.d)(t,n),i&&Object(o.c)(t,i),l&&Object(s.c)(t,l),a(t,e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return u}));var i=n(1),r=n(15);const o={ALT:18,ARROW_DOWN:40,ARROW_LEFT:37,ARROW_RIGHT:39,ARROW_UP:38,AUDIO_DOWN:Object(r.d)()?182:174,AUDIO_MUTE:Object(r.d)()?181:173,AUDIO_UP:Object(r.d)()?183:175,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND_LEFT:91,COMMAND_RIGHT:93,COMMAND_FIREFOX:224,CONTROL:17,DELETE:46,END:35,ENTER:13,ESCAPE:27,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,HOME:36,INSERT:45,MEDIA_NEXT:176,MEDIA_PLAY_PAUSE:179,MEDIA_PREV:177,MEDIA_STOP:178,NULL:0,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PERIOD:190,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,A:65,C:67,D:68,F:70,L:76,O:79,P:80,S:83,V:86,X:88,Y:89,Z:90},s=[o.ALT,o.ARROW_DOWN,o.ARROW_LEFT,o.ARROW_RIGHT,o.ARROW_UP,o.AUDIO_DOWN,o.AUDIO_MUTE,o.AUDIO_UP,o.BACKSPACE,o.CAPS_LOCK,o.DELETE,o.END,o.ENTER,o.ESCAPE,o.F1,o.F2,o.F3,o.F4,o.F5,o.F6,o.F7,o.F8,o.F9,o.F10,o.F11,o.F12,o.F13,o.F14,o.F15,o.F16,o.F17,o.F18,o.F19,o.HOME,o.INSERT,o.MEDIA_NEXT,o.MEDIA_PLAY_PAUSE,o.MEDIA_PREV,o.MEDIA_STOP,o.NULL,o.NUM_LOCK,o.PAGE_DOWN,o.PAGE_UP,o.PAUSE,o.SCROLL_LOCK,o.SHIFT,o.TAB];function a(t){return 32===t||t>=48&&t<=57||t>=96&&t<=111||t>=186&&t<=192||t>=219&&t<=222||t>=226||t>=65&&t<=90}function l(t){return s.includes(t)}function c(t){return[o.CONTROL,o.COMMAND_LEFT,o.COMMAND_RIGHT,o.COMMAND_FIREFOX].includes(t)}function u(t,e){const n=e.split("|");let r=!1;return Object(i.a)(n,e=>{if(t===o[e])return r=!0,!1}),r}},function(t,e,n){"use strict";var i=n(11);function r(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let o=0;e.a=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(this,"context",void 0),this.context=t||this,this.context.eventListeners||(this.context.eventListeners=[])}addEventListener(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];function s(t){n.call(this,function(t){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=function(){e.apply(this),Object(i.f)(this)},t}(t))}return this.context.eventListeners.push({element:t,event:e,callback:n,callbackProxy:s,options:r,eventManager:this}),t.addEventListener(e,s,r),o+=1,()=>{this.removeEventListener(t,e,n)}}removeEventListener(t,e,n){let i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=this.context.eventListeners.length;for(;s;)if(s-=1,i=this.context.eventListeners[s],i.event===e&&i.element===t){if(n&&n!==i.callback)continue;if(r&&i.eventManager!==this)continue;this.context.eventListeners.splice(s,1),i.element.removeEventListener(i.event,i.callbackProxy,i.options),o-=1}}clearEvents(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.context)return;let e=this.context.eventListeners.length;for(;e;){e-=1;const n=this.context.eventListeners[e];t&&n.eventManager!==this||(this.context.eventListeners.splice(e,1),n.element.removeEventListener(n.event,n.callbackProxy,n.options),o-=1)}}clear(){this.clearEvents()}destroy(){this.clearEvents(),this.context=null}destroyWithOwnEventsOnly(){this.clearEvents(!0),this.context=null}fireEvent(t,e){let n=t.document,i=t;n||(n=t.ownerDocument?t.ownerDocument:t,i=n.defaultView);const r={bubbles:!0,cancelable:"mousemove"!==e,view:i,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0};let o;n.createEvent?(o=n.createEvent("MouseEvents"),o.initMouseEvent(e,r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget||n.body.parentNode)):o=n.createEventObject(),t.dispatchEvent?t.dispatchEvent(o):t.fireEvent("on"+e,o)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const i=new Map;function r(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"common";i.has(t)||i.set(t,new Map);const e=i.get(t);function n(t,n){e.set(t,n)}function r(t){return e.get(t)}function o(t){return e.has(t)}function s(){return[...e.keys()]}function a(){return[...e.values()]}return{register:n,getItem:r,hasItem:o,getNames:s,getValues:a}}},function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return s}));var i=n(24);const{register:r,getItem:o,hasItem:s,getNames:a,getValues:l}=Object(i.a)("validators");function c(t){if("function"===typeof t)return t;if(!s(t))throw Error(`No registered validator found under "${t}" name`);return o(t)}function u(t,e){"string"!==typeof t&&(t=(e=t).VALIDATOR_TYPE),r(t,e)}},function(t,e,n){"use strict";function i(t){return window.requestAnimationFrame(t)}function r(t){window.cancelAnimationFrame(t)}function o(){return"ontouchstart"in window}function s(){return"undefined"!==typeof window}let a;function l(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a||(a="object"===typeof Intl?new Intl.Collator(t,e).compare:"function"===typeof String.prototype.localeCompare?(t,e)=>(""+t).localeCompare(e):(t,e)=>t===e?0:t>e?-1:1,a)}n.d(e,"e",(function(){return i})),n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return l}))},,function(t,e,n){"use strict";(function(e){var n=function(t){return t&&t.Math===Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()}).call(this,n(144))},,function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return c}));var i=n(2);const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ".length;function o(t){let e,n=t+1,i="";for(;n>0;)e=(n-1)%r,i=String.fromCharCode(65+e)+i,n=parseInt((n-e)/r,10);return i}function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t;const i=[];return Array.isArray(t)&&Array.isArray(t[0])||(n=[t]),n.forEach((t,n)=>{Array.isArray(t)?t.forEach((t,r)=>{i.push([n+e,r,t])}):Object.keys(t).forEach(r=>{i.push([n+e,r,t[r]])})}),i}function a(t){let e=0;return Array.isArray(t)&&(t[0]&&Array.isArray(t[0])?e=t[0].length:t[0]&&Object(i.l)(t[0])&&(e=Object(i.e)(t[0]))),e}function l(t){return!!(Array.isArray(t)&&t.length&&t.every(t=>Array.isArray(t)))}function c(t){return!!(Array.isArray(t)&&t.length&&t.every(t=>"object"===typeof t&&!Array.isArray(t)&&null!==t))}},function(t,e,n){"use strict";var i="object"==typeof document&&document.all;t.exports="undefined"==typeof i&&void 0!==i?function(t){return"function"==typeof t||t===i}:function(t){return"function"==typeof t}},function(t,e,n){"use strict";var i=n(56),r=Function.prototype,o=r.call,s=i&&r.bind.bind(o,o);t.exports=i?s:function(t){return function(){return o.apply(t,arguments)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var i=n(1);function r(t,e,n){return[...t.slice(0,e),...n,...t.slice(e)]}function o(t,e){return Object(i.b)(t,t=>!1===e.includes(t))}},function(t,e,n){"use strict";t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var i=n(48);const r={name:"editorCloseAndSave",callback(t){t._getEditorManager().closeEditorAndSaveChanges()}};var o=n(240);const s={name:"editorCloseAndSaveByArrowKeys",callback(t,e,n){const i=t._getEditorManager(),r=i.getActiveEditor();r.isInFullEditMode()&&r.state===o.b.EDITING||(i.closeEditorAndSaveChanges(),t.getSelected()&&(n.includes("arrowdown")?t.selection.transformStart(1,0):n.includes("arrowup")?t.selection.transformStart(-1,0):n.includes("arrowleft")?t.selection.transformStart(0,-1*t.getDirectionFactor()):n.includes("arrowright")&&t.selection.transformStart(0,t.getDirectionFactor())),e.preventDefault())}},a={name:"editorCloseAndSaveByEnter",callback(t,e){const n=t._getEditorManager();n.closeEditorAndSaveChanges(e.ctrlKey||e.metaKey),n.moveSelectionAfterEnter(e)}},l={name:"editorCloseWithoutSaving",callback(t){const e=t._getEditorManager();e.closeEditorAndRestoreOriginalValue(t.getShortcutManager().isCtrlPressed()),e.activeEditor.focus()}},c={name:"editorFastOpen",callback(t,e){const{highlight:n}=t.getSelectedRangeLast();n.isHeader()||t._getEditorManager().openEditor(null,e,!0)}};var u=n(11);const h=[r,s,a,l,c,{name:"editorOpen",callback(t,e,n){const i=t._getEditorManager(),r=t.getSelectedRangeLast(),{highlight:o}=r;if(t.selection.isMultiple()&&!r.isHeader()&&t.countRenderedCols()>0&&t.countRenderedRows()>0){const i=t.getSettings(),r="function"===typeof i.enterMoves?i.enterMoves(e):i.enterMoves;n.includes("shift")?t.selection.transformFocus(-r.row,-r.col):t.selection.transformFocus(r.row,r.col)}else o.isHeader()||(t.getSettings().enterBeginsEditing?i.cellProperties.readOnly?i.moveSelectionAfterEnter(e):i.openEditor(null,e,!0):i.moveSelectionAfterEnter(e),Object(u.f)(e))}},{name:"extendCellsSelectionDown",callback(t){const{highlight:e}=t.getSelectedRangeLast();t.selection.isSelectedByColumnHeader()||t.selection.isSelectedByCorner()||!(e.isCell()||e.isHeader()&&t.selection.isSelectedByRowHeader())||t.selection.transformEnd(1,0)}},{name:"extendCellsSelectionDownByViewportHeight",callback(t){const{to:e}=t.getSelectedRangeLast(),n=Math.min(e.row+t.countVisibleRows(),t.countRows()-1),i=t.rowIndexMapper.getNearestNotHiddenIndex(n,-1);if(null!==i){const n=t._createCellCoords(i,e.col),r=e.row-t.view.getFirstFullyVisibleRow(),o=Math.min(n.row-r,t.countRows()-1);t.selection.setRangeEnd(n),t.scrollViewportTo({row:o,verticalSnap:"top",horizontalSnap:"start"})}}},{name:"extendCellsSelectionLeft",callback(t){const{highlight:e}=t.getSelectedRangeLast();t.selection.isSelectedByRowHeader()||t.selection.isSelectedByCorner()||!(e.isCell()||e.isHeader()&&t.selection.isSelectedByColumnHeader())||t.selection.transformEnd(0,-1*t.getDirectionFactor())}},{name:"extendCellsSelectionRight",callback(t){const{highlight:e}=t.getSelectedRangeLast();t.selection.isSelectedByRowHeader()||t.selection.isSelectedByCorner()||!(e.isCell()||e.isHeader()&&t.selection.isSelectedByColumnHeader())||t.selection.transformEnd(0,t.getDirectionFactor())}},{name:"extendCellsSelectionToColumns",callback(t){const{highlight:e,from:n,to:i}=t.getSelectedRangeLast();t.selection.isSelectedByRowHeader()?t.selection.selectAll(!0,!0):t.selectColumns(n.col,i.col,e)}},{name:"extendCellsSelectionToMostBottom",callback(t){const{selection:e,rowIndexMapper:n}=t,{highlight:i,from:r,to:o}=t.getSelectedRangeLast(),s=i.isHeader()&&t.selection.isSelectedByRowHeader();if(i.isCell()||s){const a=n.getNearestNotHiddenIndex(t.countRows()-1,-1),l=r.clone();l.row=i.row,e.setRangeStart(l,void 0,!1,i.clone()),s&&e.selectedByRowHeader.add(e.getLayerLevel()),e.setRangeEnd(t._createCellCoords(a,o.col))}}},{name:"extendCellsSelectionToMostInlineEnd",callback(t){const{selection:e,columnIndexMapper:n}=t,{highlight:i,from:r,to:o}=t.getSelectedRangeLast();if(!t.selection.isSelectedByRowHeader()&&!t.selection.isSelectedByCorner()&&i.isCell()){const s=n.getNearestNotHiddenIndex(t.countCols()-1,-1),a=r.clone();a.col=i.col,e.setRangeStart(a,void 0,!1,i.clone()),e.setRangeEnd(t._createCellCoords(o.row,s))}}},{name:"extendCellsSelectionToMostInlineStart",callback(t){const{selection:e,columnIndexMapper:n}=t,{highlight:i,from:r,to:o}=t.getSelectedRangeLast();if(!t.selection.isSelectedByRowHeader()&&!t.selection.isSelectedByCorner()&&i.isCell()){const s=parseInt(t.getSettings().fixedColumnsStart,10),a=n.getNearestNotHiddenIndex(s,1),l=r.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),e.setRangeEnd(t._createCellCoords(o.row,a))}}},{name:"extendCellsSelectionToMostLeft",callback(t){const{selection:e,columnIndexMapper:n}=t,{highlight:i,from:r,to:o}=t.getSelectedRangeLast(),s=i.isHeader()&&t.selection.isSelectedByColumnHeader();if(i.isCell()||s){const a=n.getNearestNotHiddenIndex(...t.isRtl()?[t.countCols()-1,-1]:[0,1]),l=r.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),s&&e.selectedByColumnHeader.add(e.getLayerLevel()),e.setRangeEnd(t._createCellCoords(o.row,a))}}},{name:"extendCellsSelectionToMostRight",callback(t){const{selection:e,columnIndexMapper:n}=t,{highlight:i,from:r,to:o}=t.getSelectedRangeLast(),s=i.isHeader()&&t.selection.isSelectedByColumnHeader();if(i.isCell()||s){const a=n.getNearestNotHiddenIndex(...t.isRtl()?[0,1]:[t.countCols()-1,-1]),l=r.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),s&&e.selectedByColumnHeader.add(e.getLayerLevel()),e.setRangeEnd(t._createCellCoords(o.row,a))}}},{name:"extendCellsSelectionToMostTop",callback(t){const{selection:e,rowIndexMapper:n}=t,{highlight:i,from:r,to:o}=t.getSelectedRangeLast(),s=i.isHeader()&&t.selection.isSelectedByRowHeader();if(i.isCell()||s){const a=n.getNearestNotHiddenIndex(0,1),l=r.clone();l.row=i.row,e.setRangeStart(l,void 0,!1,i.clone()),s&&e.selectedByRowHeader.add(e.getLayerLevel()),e.setRangeEnd(t._createCellCoords(a,o.col))}}},{name:"extendCellsSelectionToRows",callback(t){const{highlight:e,from:n,to:i}=t.getSelectedRangeLast();t.selection.isSelectedByColumnHeader()?t.selection.selectAll(!0,!0):t.selectRows(n.row,i.row,e)}},{name:"extendCellsSelectionUp",callback(t){const{highlight:e}=t.getSelectedRangeLast();t.selection.isSelectedByColumnHeader()||t.selection.isSelectedByCorner()||!(e.isCell()||e.isHeader()&&t.selection.isSelectedByRowHeader())||t.selection.transformEnd(-1,0)}},{name:"extendCellsSelectionUpByViewportHeight",callback(t){const{to:e}=t.getSelectedRangeLast(),n=Math.max(e.row-t.countVisibleRows(),0),i=t.rowIndexMapper.getNearestNotHiddenIndex(n,1);if(null!==i){const n=t._createCellCoords(i,e.col),r=e.row-t.view.getFirstFullyVisibleRow(),o=Math.max(n.row-r,0);t.selection.setRangeEnd(n),t.scrollViewportTo({row:o,verticalSnap:"top",horizontalSnap:"start"})}}},{name:"moveCellSelectionDown",callback(t){let{selection:e}=t;e.transformStart(1,0)}},{name:"moveCellSelectionDownByViewportHeight",callback(t){const{navigableHeaders:e}=t.getSettings(),n=e?t.countColHeaders():0,{row:i}=t.getSelectedRangeLast().highlight;let r=t.countVisibleRows()+n;i===t.countRows()-1?r=1:i+r>t.countRows()&&(r=t.countRows()-i-1),t.selection.transformStart(r,0),t.getSelectedRangeLast().highlight.row<0&&t.scrollViewportTo({row:0})}},{name:"moveCellSelectionInlineEnd",callback(t,e){const n=t.getSettings(),i=t.getSelectedRangeLast(),r="function"===typeof n.tabMoves?n.tabMoves(e):n.tabMoves;t.selection.isMultiple()&&!i.isHeader()&&t.countRenderedCols()>0&&t.countRenderedRows()>0?t.selection.transformFocus(-r.row,-r.col):t.selection.transformStart(-r.row,-r.col)}},{name:"moveCellSelectionInlineStart",callback(t,e){const n=t.getSettings(),i=t.getSelectedRangeLast(),r="function"===typeof n.tabMoves?n.tabMoves(e):n.tabMoves;t.selection.isMultiple()&&!i.isHeader()&&t.countRenderedCols()>0&&t.countRenderedRows()>0?t.selection.transformFocus(r.row,r.col):t.selection.transformStart(r.row,r.col)}},{name:"moveCellSelectionLeft",callback(t){t.selection.transformStart(0,-1*t.getDirectionFactor())}},{name:"moveCellSelectionRight",callback(t){t.selection.transformStart(0,t.getDirectionFactor())}},{name:"moveCellSelectionToMostBottom",callback(t){const{col:e}=t.getSelectedRangeLast().highlight;let n=t.rowIndexMapper.getNearestNotHiddenIndex(t.countRows()-1,-1);null===n&&(n=-1),t.selection.setRangeStart(t._createCellCoords(n,e))}},{name:"moveCellSelectionToMostBottomInlineEnd",callback(t){const{selection:e,rowIndexMapper:n,columnIndexMapper:i}=t,r=parseInt(t.getSettings().fixedRowsBottom,10),o=n.getNearestNotHiddenIndex(t.countRows()-r-1,-1),s=i.getNearestNotHiddenIndex(t.countCols()-1,-1);e.setRangeStart(t._createCellCoords(o,s))}},{name:"moveCellSelectionToMostInlineEnd",callback(t){const{selection:e,columnIndexMapper:n}=t;e.setRangeStart(t._createCellCoords(t.getSelectedRangeLast().highlight.row,n.getNearestNotHiddenIndex(t.countCols()-1,-1)))}},{name:"moveCellSelectionToMostInlineStart",callback(t){const{selection:e,columnIndexMapper:n}=t,i=parseInt(t.getSettings().fixedColumnsStart,10),r=t.getSelectedRangeLast().highlight.row,o=n.getNearestNotHiddenIndex(i,1);e.setRangeStart(t._createCellCoords(r,o))}},{name:"moveCellSelectionToMostLeft",callback(t){const{selection:e,columnIndexMapper:n}=t,i=t.getSelectedRangeLast().highlight.row;let r=n.getNearestNotHiddenIndex(...t.isRtl()?[t.countCols()-1,-1]:[0,1]);null===r&&(r=t.isRtl()?-1:-t.countRowHeaders()),e.setRangeStart(t._createCellCoords(i,r))}},{name:"moveCellSelectionToMostRight",callback(t){const{selection:e,columnIndexMapper:n}=t,{row:i}=t.getSelectedRangeLast().highlight;let r=n.getNearestNotHiddenIndex(...t.isRtl()?[0,1]:[t.countCols()-1,-1]);null===r&&(r=t.isRtl()?-t.countRowHeaders():-1),e.setRangeStart(t._createCellCoords(i,r))}},{name:"moveCellSelectionToMostTop",callback(t){const{col:e}=t.getSelectedRangeLast().highlight;let n=t.rowIndexMapper.getNearestNotHiddenIndex(0,1);null===n&&(n=-t.countColHeaders()),t.selection.setRangeStart(t._createCellCoords(n,e))}},{name:"moveCellSelectionToMostTopInlineStart",callback(t){const{selection:e,rowIndexMapper:n,columnIndexMapper:i}=t,r=parseInt(t.getSettings().fixedRowsTop,10),o=parseInt(t.getSettings().fixedColumnsStart,10),s=n.getNearestNotHiddenIndex(r,1),a=i.getNearestNotHiddenIndex(o,1);e.setRangeStart(t._createCellCoords(s,a))}},{name:"moveCellSelectionUp",callback(t){let{selection:e}=t;e.transformStart(-1,0)}},{name:"moveCellSelectionUpByViewportHight",callback(t){const{navigableHeaders:e}=t.getSettings(),n=e?t.countColHeaders():0,{row:i}=t.getSelectedRangeLast().highlight;let r=-(t.countVisibleRows()+n);i===-n?r=-1:i+r<n&&(r=-(i+n)),t.selection.transformStart(r,0),t.getSelectedRangeLast().highlight.row<0&&t.scrollViewportTo({row:0})}},{name:"emptySelectedCells",callback(t){t.emptySelectedCells(),t._getEditorManager().prepareEditor()}},{name:"scrollToFocusedCell",callback(t){const{highlight:e}=t.getSelectedRangeLast(),n=t.view.getFirstFullyVisibleRow()-1,i=t.view.getFirstFullyVisibleColumn()-1,r=t.view.getLastFullyVisibleRow()+1,o=t.view.getLastFullyVisibleColumn()+1,s=t._createCellCoords(n,i),a=t._createCellCoords(r,o);if(!t._createCellRange(s,s,a).includes(e)&&(e.row>=0||e.col>=0)){const n={};if(e.col>=0){const i=Math.floor(t.countVisibleCols()/2);n.col=Math.max(e.col-i,0)}if(e.row>=0){const i=Math.floor(t.countVisibleRows()/2);n.row=Math.max(e.row-i,0)}t.scrollViewportTo({...n,verticalSnap:"top",horizontalSnap:"start"})}}},{name:"selectAllCells",callback(t){t.selection.selectAll(!0,!0,{disableHeadersHighlight:!0})}},{name:"selectAllCellsAndHeaders",callback(t){t.selection.selectAll(!0,!0,{disableHeadersHighlight:!1})}},{name:"populateSelectedCellsData",callback(t){const e=t.getSelectedRange(),{row:n,col:i}=e[e.length-1].highlight.normalize(),r=t.getDataAtCell(n,i),o=new Map;for(let s=0;s<e.length;s++)e[s].forAll((e,s)=>{if(e>=0&&s>=0&&(e!==n||s!==i)){const{readOnly:n}=t.getCellMeta(e,s);n||o.set(`${e}x${s}`,[e,s,r])}});t.setDataAtCell(Array.from(o.values()))}}];function d(t){const e={};return h.forEach(n=>{let{name:i,callback:r}=n;e[i]=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return r(t,...n)}}),e}function f(t){const e=t.getShortcutManager().addContext("editor"),n=d(t),r={group:i.a};e.addShortcuts([{keys:[["Enter"],["Enter","Shift"]],callback:(t,e)=>n.editorCloseAndSaveByEnter(t,e)},{keys:[["Enter","Control/Meta"],["Enter","Control/Meta","Shift"]],captureCtrl:!0,callback:(t,e)=>n.editorCloseAndSaveByEnter(t,e)},{keys:[["Tab"],["Tab","Shift"],["PageDown"],["PageUp"]],forwardToContext:t.getShortcutManager().getContext("grid"),callback:(t,e)=>n.editorCloseAndSave(t,e)},{keys:[["ArrowDown"],["ArrowUp"],["ArrowLeft"],["ArrowRight"]],preventDefault:!1,callback:(t,e)=>n.editorCloseAndSaveByArrowKeys(t,e)},{keys:[["Escape"],["Escape","Control/Meta"]],callback:()=>n.editorCloseWithoutSaving()}],r)}var g=n(4);function p(t){const e=t.getShortcutManager().addContext("grid"),n=d(t),r={runOnlyIf:()=>{const{navigableHeaders:e}=t.getSettings();return Object(g.b)(t.getSelected())&&(e||!e&&t.countRenderedRows()>0&&t.countRenderedCols()>0)},group:i.b};e.addShortcuts([{keys:[["F2"]],callback:t=>n.editorFastOpen(t)},{keys:[["Enter"],["Enter","Shift"]],callback:(t,e)=>n.editorOpen(t,e)},{keys:[["Backspace"],["Delete"]],callback:()=>n.emptySelectedCells()}],{group:i.a,runOnlyIf:()=>Object(g.b)(t.getSelected())}),e.addShortcuts([{keys:[["Control/Meta","A"]],callback:()=>n.selectAllCells(),runOnlyIf:()=>{var e;return!(null!==(e=t.getSelectedRangeLast())&&void 0!==e&&e.highlight.isHeader())}},{keys:[["Control/Meta","A"]],callback:()=>{},runOnlyIf:()=>{var e;return null===(e=t.getSelectedRangeLast())||void 0===e?void 0:e.highlight.isHeader()},preventDefault:!0},{keys:[["Control/Meta","Shift","Space"]],callback:()=>n.selectAllCellsAndHeaders()},{keys:[["Control/Meta","Enter"]],callback:()=>n.populateSelectedCellsData(),runOnlyIf:()=>{var e,n;return!(null!==(e=t.getSelectedRangeLast())&&void 0!==e&&e.highlight.isHeader())&&(null===(n=t.getSelectedRangeLast())||void 0===n?void 0:n.getCellsCount())>1}},{keys:[["Control","Space"]],captureCtrl:!0,callback:()=>n.extendCellsSelectionToColumns()},{keys:[["Shift","Space"]],stopPropagation:!0,callback:()=>n.extendCellsSelectionToRows()},{keys:[["ArrowUp"]],callback:()=>n.moveCellSelectionUp()},{keys:[["ArrowUp","Control/Meta"]],captureCtrl:!0,callback:()=>n.moveCellSelectionToMostTop()},{keys:[["ArrowUp","Shift"]],callback:()=>n.extendCellsSelectionUp()},{keys:[["ArrowUp","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>n.extendCellsSelectionToMostTop(),runOnlyIf:()=>!(t.selection.isSelectedByCorner()||t.selection.isSelectedByColumnHeader())},{keys:[["ArrowDown"]],callback:()=>n.moveCellSelectionDown()},{keys:[["ArrowDown","Control/Meta"]],captureCtrl:!0,callback:()=>n.moveCellSelectionToMostBottom()},{keys:[["ArrowDown","Shift"]],callback:()=>n.extendCellsSelectionDown()},{keys:[["ArrowDown","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>n.extendCellsSelectionToMostBottom(),runOnlyIf:()=>!(t.selection.isSelectedByCorner()||t.selection.isSelectedByColumnHeader())},{keys:[["ArrowLeft"]],callback:()=>n.moveCellSelectionLeft()},{keys:[["ArrowLeft","Control/Meta"]],captureCtrl:!0,callback:()=>n.moveCellSelectionToMostLeft()},{keys:[["ArrowLeft","Shift"]],callback:()=>n.extendCellsSelectionLeft()},{keys:[["ArrowLeft","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>n.extendCellsSelectionToMostLeft(),runOnlyIf:()=>!(t.selection.isSelectedByCorner()||t.selection.isSelectedByRowHeader())},{keys:[["ArrowRight"]],callback:()=>n.moveCellSelectionRight()},{keys:[["ArrowRight","Control/Meta"]],captureCtrl:!0,callback:()=>n.moveCellSelectionToMostRight()},{keys:[["ArrowRight","Shift"]],callback:()=>n.extendCellsSelectionRight()},{keys:[["ArrowRight","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>n.extendCellsSelectionToMostRight(),runOnlyIf:()=>!(t.selection.isSelectedByCorner()||t.selection.isSelectedByRowHeader())},{keys:[["Home"]],captureCtrl:!0,callback:()=>n.moveCellSelectionToMostInlineStart(),runOnlyIf:()=>t.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["Home","Shift"]],callback:()=>n.extendCellsSelectionToMostInlineStart()},{keys:[["Home","Control/Meta"]],captureCtrl:!0,callback:()=>n.moveCellSelectionToMostTopInlineStart(),runOnlyIf:()=>t.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["End"]],captureCtrl:!0,callback:()=>n.moveCellSelectionToMostInlineEnd(),runOnlyIf:()=>t.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["End","Shift"]],callback:()=>n.extendCellsSelectionToMostInlineEnd()},{keys:[["End","Control/Meta"]],captureCtrl:!0,callback:()=>n.moveCellSelectionToMostBottomInlineEnd(),runOnlyIf:()=>t.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["PageUp"]],callback:()=>n.moveCellSelectionUpByViewportHight()},{keys:[["PageUp","Shift"]],callback:()=>n.extendCellsSelectionUpByViewportHeight()},{keys:[["PageDown"]],callback:()=>n.moveCellSelectionDownByViewportHeight()},{keys:[["PageDown","Shift"]],callback:()=>n.extendCellsSelectionDownByViewportHeight()},{keys:[["Tab"]],preventDefault:!1,callback:t=>n.moveCellSelectionInlineStart(t)},{keys:[["Shift","Tab"]],preventDefault:!1,callback:t=>n.moveCellSelectionInlineEnd(t)},{keys:[["Control/Meta","Backspace"]],callback:()=>n.scrollToFocusedCell()}],r)}function m(t){[p,f].forEach(e=>e(t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n(5),r=n(2),o=n(8),s=n(18);function a(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class l{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;a(this,"indexedValues",[]),a(this,"initValueOrFn",void 0),this.initValueOrFn=t}getValues(){return this.indexedValues}getValueAtIndex(t){const e=this.indexedValues;if(t<e.length)return e[t]}setValues(t){this.indexedValues=t.slice(),this.runLocalHooks("change")}setValueAtIndex(t,e){return t<this.indexedValues.length&&(this.indexedValues[t]=e,this.runLocalHooks("change"),!0)}clear(){this.setDefaultValues()}getLength(){return this.getValues().length}setDefaultValues(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.indexedValues.length;this.indexedValues.length=0,Object(o.d)(this.initValueOrFn)?Object(i.d)(t-1,t=>this.indexedValues.push(this.initValueOrFn(t))):Object(i.d)(t-1,()=>this.indexedValues.push(this.initValueOrFn)),this.runLocalHooks("change")}init(t){return this.setDefaultValues(t),this.runLocalHooks("init"),this}insert(){this.runLocalHooks("change")}remove(){this.runLocalHooks("change")}destroy(){this.clearLocalHooks(),this.indexedValues=null,this.initValueOrFn=null}}Object(r.n)(l,s.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var i=n(8),r=n(1);function o(t,e,n,r){const o=n.length?n[0]:void 0;return[...t.slice(0,o),...n.map((t,e)=>Object(i.d)(r)?r(t,e):r),...void 0===o?[]:t.slice(o)]}function s(t,e){return Object(r.b)(t,(t,n)=>!1===e.includes(n))}},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return g})),n.d(e,"f",(function(){return p}));var i=n(71),r=n(1),o=n(4);const s=0,a=1,l=[3,2],c=[["number"],["number","string"],["number","undefined"],["number","string","undefined"]],u=Symbol("root"),h=Symbol("child");function d(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;if(e!==u&&e!==h)throw new Error("The second argument is used internally only and cannot be overwritten.");const n=Array.isArray(t),r=e===u;let o=s;if(n){const e=t[0];if(0===t.length)o=a;else if(r&&e instanceof i.a)o=3;else if(r&&Array.isArray(e))o=d(e,h);else if(t.length>=2&&t.length<=4){!t.some((t,e)=>!c[e].includes(typeof t))&&(o=2)}}return o}function f(t){let{createCellCoords:e,createCellRange:n,keepDirection:i=!1,propToCol:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!l.includes(t))throw new Error("Unsupported selection ranges schema type was provided.");return function(s){const a=3===t;let l=a?s.from.row:s[0],c=a?s.from.col:s[1],u=a?s.to.row:s[2],h=a?s.to.col:s[3];if("function"===typeof r&&("string"===typeof c&&(c=r(c)),"string"===typeof h&&(h=r(h))),Object(o.e)(u)&&(u=l),Object(o.e)(h)&&(h=c),!i){const t=l,e=c,n=u,i=h;l=Math.min(t,n),c=Math.min(e,i),u=Math.max(t,n),h=Math.max(e,i)}const d=e(l,c),f=e(u,h);return n(d,d,f)}}function g(t){const e=d(t.getSelected());if(e===s||e===a)return[];const n=f(e,{createCellCoords:t._createCellCoords.bind(t),createCellRange:t._createCellRange.bind(t)}),i=new Set;Object(r.a)(t.getSelected(),t=>{const{from:e,to:o}=n(t),s=Math.max(e.col,0),a=o.col-s+1;Object(r.a)(Array.from(new Array(a),(t,e)=>s+e),t=>{i.has(t)||i.add(t)})});const o=Array.from(i).sort((t,e)=>t-e);return Object(r.d)(o,(t,e,n,i)=>(0!==n&&e===i[n-1]+1?t[t.length-1][1]+=1:t.push([e,1]),t),[])}function p(t){const e=d(t.getSelected());if(e===s||e===a)return[];const n=f(e,{createCellCoords:t._createCellCoords.bind(t),createCellRange:t._createCellRange.bind(t)}),i=new Set;Object(r.a)(t.getSelected(),t=>{const{from:e,to:o}=n(t),s=Math.max(e.row,0),a=o.row-s+1;Object(r.a)(Array.from(new Array(a),(t,e)=>s+e),t=>{i.has(t)||i.add(t)})});const o=Array.from(i).sort((t,e)=>t-e);return Object(r.d)(o,(t,e,n,i)=>(0!==n&&e===i[n-1]+1?t[t.length-1][1]+=1:t.push([e,1]),t),[])}},function(t,e,n){"use strict";var i=n(32),r=n(155),o=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(r(t),e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(8);const r=t=>`The id '${t}' is already declared in a map.`;function o(){let{errorIdExists:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=new Map;function n(n,i){if(u(n))throw new Error(t(n));e.set(n,i)}function o(t){return e.delete(t)}function s(){e.clear()}function a(t){const[e]=c().find(e=>{let[n,i]=e;return t===i&&n})||[null];return e}function l(t){return e.get(t)}function c(){return[...e]}function u(t){return e.has(t)}return t=Object(i.d)(t)?t:r,{addItem:n,clear:s,getId:a,getItem:l,getItems:c,hasItem:u,removeItem:o}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var i=n(1);function r(t,e){return Object(i.c)(t,t=>t-e.filter(e=>e<t).length)}function o(t,e){const n=e[0],r=e.length;return Object(i.c)(t,t=>t>=n?t+r:t)}},function(t,e,n){t.exports=function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,(function(t){return r(e[s][1][t]||t)}),c,c.exports,t,e,n,i)}return n[s].exports}for(var o=!1,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){!function(t){"use strict";var n,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,r=Math.ceil,o=Math.floor,s="[BigNumber Error] ",a=s+"Number primitive has more than 15 significant digits: ",l=1e14,c=14,u=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,f=1e9;function g(t){var e=0|t;return 0<t||t===e?e:e-1}function p(t){for(var e,n,i=1,r=t.length,o=t[0]+"";i<r;){for(e=t[i++]+"",n=c-e.length;n--;e="0"+e);o+=e}for(r=o.length;48===o.charCodeAt(--r););return o.slice(0,r+1||1)}function m(t,e){var n,i,r=t.c,o=e.c,s=t.s,a=e.s,l=t.e,c=e.e;if(!s||!a)return null;if(n=r&&!r[0],i=o&&!o[0],n||i)return n?i?0:-a:s;if(s!=a)return s;if(n=s<0,i=l==c,!r||!o)return i?0:!r^n?1:-1;if(!i)return c<l^n?1:-1;for(a=(l=r.length)<(c=o.length)?l:c,s=0;s<a;s++)if(r[s]!=o[s])return r[s]>o[s]^n?1:-1;return l==c?0:c<l^n?1:-1}function b(t,e,n,i){if(t<e||n<t||t!==(t<0?r(t):o(t)))throw Error(s+(i||"Argument")+("number"==typeof t?t<e||n<t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function y(t){var e=t.c.length-1;return g(t.e/c)==e&&t.c[e]%2!=0}function w(t,e){return(1<t.length?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function v(t,e,n){var i,r;if(e<0){for(r=n+".";++e;r+=n);t=r+t}else if(++e>(i=t.length)){for(r=n,e-=i;--e;r+=n);t+=r}else e<i&&(t=t.slice(0,e)+"."+t.slice(e));return t}(n=function t(e){var n,C,S,O,T,_,E,R,M,x,I=W.prototype={constructor:W,toString:null,valueOf:null},k=new W(1),A=20,N=4,j=-7,H=21,D=-1e7,P=1e7,L=!1,F=1,B=0,V={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},U="0123456789abcdefghijklmnopqrstuvwxyz";function W(t,e){var n,r,s,l,h,d,f,g,p=this;if(!(p instanceof W))return new W(t,e);if(null==e){if(t instanceof W)return p.s=t.s,p.e=t.e,void(p.c=(t=t.c)?t.slice():t);if((d="number"==typeof t)&&0*t==0){if(p.s=1/t<0?(t=-t,-1):1,t===~~t){for(l=0,h=t;10<=h;h/=10,l++);return p.e=l,void(p.c=[t])}g=String(t)}else{if(g=String(t),!i.test(g))return S(p,g,d);p.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}-1<(l=g.indexOf("."))&&(g=g.replace(".","")),0<(h=g.search(/e/i))?(l<0&&(l=h),l+=+g.slice(h+1),g=g.substring(0,h)):l<0&&(l=g.length)}else{if(b(e,2,U.length,"Base"),g=String(t),10==e)return $(p=new W(t instanceof W?t:g),A+p.e+1,N);if(d="number"==typeof t){if(0*t!=0)return S(p,g,d,e);if(p.s=1/t<0?(g=g.slice(1),-1):1,W.DEBUG&&15<g.replace(/^0\.0*|\./,"").length)throw Error(a+t);d=!1}else p.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(n=U.slice(0,e),l=h=0,f=g.length;h<f;h++)if(n.indexOf(r=g.charAt(h))<0){if("."==r){if(l<h){l=f;continue}}else if(!s&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){s=!0,h=-1,l=0;continue}return S(p,String(t),d,e)}-1<(l=(g=C(g,e,10,p.s)).indexOf("."))?g=g.replace(".",""):l=g.length}for(h=0;48===g.charCodeAt(h);h++);for(f=g.length;48===g.charCodeAt(--f););if(g=g.slice(h,++f)){if(f-=h,d&&W.DEBUG&&15<f&&(u<t||t!==o(t)))throw Error(a+p.s*t);if(P<(l=l-h-1))p.c=p.e=null;else if(l<D)p.c=[p.e=0];else{if(p.e=l,p.c=[],h=(l+1)%c,l<0&&(h+=c),h<f){for(h&&p.c.push(+g.slice(0,h)),f-=c;h<f;)p.c.push(+g.slice(h,h+=c));g=g.slice(h),h=c-g.length}else h-=f;for(;h--;g+="0");p.c.push(+g)}}else p.c=[p.e=0]}function z(t,e,n,i){var r,o,s,a,l;if(null==n?n=N:b(n,0,8),!t.c)return t.toString();if(r=t.c[0],s=t.e,null==e)l=p(t.c),l=1==i||2==i&&(s<=j||H<=s)?w(l,s):v(l,s,"0");else if(o=(t=$(new W(t),e,n)).e,a=(l=p(t.c)).length,1==i||2==i&&(e<=o||o<=j)){for(;a<e;l+="0",a++);l=w(l,o)}else if(e-=s,l=v(l,o,"0"),a<o+1){if(0<--e)for(l+=".";e--;l+="0");}else if(0<(e+=o-a))for(o+1==a&&(l+=".");e--;l+="0");return t.s<0&&r?"-"+l:l}function Y(t,e){for(var n,i=1,r=new W(t[0]);i<t.length;i++){if(!(n=new W(t[i])).s){r=n;break}e.call(r,n)&&(r=n)}return r}function G(t,e,n){for(var i=1,r=e.length;!e[--r];e.pop());for(r=e[0];10<=r;r/=10,i++);return(n=i+n*c-1)>P?t.c=t.e=null:t.c=n<D?[t.e=0]:(t.e=n,e),t}function $(t,e,n,i){var s,a,u,d,f,g,p,m=t.c,b=h;if(m){t:{for(s=1,d=m[0];10<=d;d/=10,s++);if((a=e-s)<0)a+=c,u=e,p=(f=m[g=0])/b[s-u-1]%10|0;else if((g=r((a+1)/c))>=m.length){if(!i)break t;for(;m.length<=g;m.push(0));f=p=0,u=(a%=c)-c+(s=1)}else{for(f=d=m[g],s=1;10<=d;d/=10,s++);p=(u=(a%=c)-c+s)<0?0:f/b[s-u-1]%10|0}if(i=i||e<0||null!=m[g+1]||(u<0?f:f%b[s-u-1]),i=n<4?(p||i)&&(0==n||n==(t.s<0?3:2)):5<p||5==p&&(4==n||i||6==n&&(0<a?0<u?f/b[s-u]:0:m[g-1])%10&1||n==(t.s<0?8:7)),e<1||!m[0])return m.length=0,i?(e-=t.e+1,m[0]=b[(c-e%c)%c],t.e=-e||0):m[0]=t.e=0,t;if(0==a?(m.length=g,d=1,g--):(m.length=g+1,d=b[c-a],m[g]=0<u?o(f/b[s-u]%b[u])*d:0),i)for(;;){if(0==g){for(a=1,u=m[0];10<=u;u/=10,a++);for(u=m[0]+=d,d=1;10<=u;u/=10,d++);a!=d&&(t.e++,m[0]==l&&(m[0]=1));break}if(m[g]+=d,m[g]!=l)break;m[g--]=0,d=1}for(a=m.length;0===m[--a];m.pop());}t.e>P?t.c=t.e=null:t.e<D&&(t.c=[t.e=0])}return t}function K(t){var e,n=t.e;return null===n?t.toString():(e=p(t.c),e=n<=j||H<=n?w(e,n):v(e,n,"0"),t.s<0?"-"+e:e)}return W.clone=t,W.ROUND_UP=0,W.ROUND_DOWN=1,W.ROUND_CEIL=2,W.ROUND_FLOOR=3,W.ROUND_HALF_UP=4,W.ROUND_HALF_DOWN=5,W.ROUND_HALF_EVEN=6,W.ROUND_HALF_CEIL=7,W.ROUND_HALF_FLOOR=8,W.EUCLID=9,W.config=W.set=function(t){var e,n;if(null!=t){if("object"!=typeof t)throw Error(s+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(b(n=t[e],0,f,e),A=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(b(n=t[e],0,8,e),N=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((n=t[e])&&n.pop?(b(n[0],-f,0,e),b(n[1],0,f,e),j=n[0],H=n[1]):(b(n,-f,f,e),j=-(H=n<0?-n:n))),t.hasOwnProperty(e="RANGE"))if((n=t[e])&&n.pop)b(n[0],-f,-1,e),b(n[1],1,f,e),D=n[0],P=n[1];else{if(b(n,-f,f,e),!n)throw Error(s+e+" cannot be zero: "+n);D=-(P=n<0?-n:n)}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(s+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw L=!n,Error(s+"crypto unavailable");L=n}else L=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(b(n=t[e],0,9,e),F=n),t.hasOwnProperty(e="POW_PRECISION")&&(b(n=t[e],0,f,e),B=n),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(n=t[e]))throw Error(s+e+" not an object: "+n);V=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.$|[+-.\s]|(.).*\1/.test(n))throw Error(s+e+" invalid: "+n);U=n}}return{DECIMAL_PLACES:A,ROUNDING_MODE:N,EXPONENTIAL_AT:[j,H],RANGE:[D,P],CRYPTO:L,MODULO_MODE:F,POW_PRECISION:B,FORMAT:V,ALPHABET:U}},W.isBigNumber=function(t){return t instanceof W||t&&!0===t._isBigNumber||!1},W.maximum=W.max=function(){return Y(arguments,I.lt)},W.minimum=W.min=function(){return Y(arguments,I.gt)},W.random=(O=9007199254740992,T=Math.random()*O&2097151?function(){return o(Math.random()*O)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,i,a,l,u=0,d=[],g=new W(k);if(null==t?t=A:b(t,0,f),a=r(t/c),L)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(a*=2));u<a;)9e15<=(l=131072*e[u]+(e[u+1]>>>11))?(n=crypto.getRandomValues(new Uint32Array(2)),e[u]=n[0],e[u+1]=n[1]):(d.push(l%1e14),u+=2);u=a/2}else{if(!crypto.randomBytes)throw L=!1,Error(s+"crypto unavailable");for(e=crypto.randomBytes(a*=7);u<a;)9e15<=(l=281474976710656*(31&e[u])+1099511627776*e[u+1]+4294967296*e[u+2]+16777216*e[u+3]+(e[u+4]<<16)+(e[u+5]<<8)+e[u+6])?crypto.randomBytes(7).copy(e,u):(d.push(l%1e14),u+=7);u=a/7}if(!L)for(;u<a;)(l=T())<9e15&&(d[u++]=l%1e14);for(a=d[--u],t%=c,a&&t&&(l=h[c-t],d[u]=o(a/l)*l);0===d[u];d.pop(),u--);if(u<0)d=[i=0];else{for(i=-1;0===d[0];d.splice(0,1),i-=c);for(u=1,l=d[0];10<=l;l/=10,u++);u<c&&(i-=c-u)}return g.e=i,g.c=d,g}),W.sum=function(){for(var t=1,e=arguments,n=new W(e[0]);t<e.length;)n=n.plus(e[t++]);return n},C=function(){var t="0123456789";function e(t,e,n,i){for(var r,o,s=[0],a=0,l=t.length;a<l;){for(o=s.length;o--;s[o]*=e);for(s[0]+=i.indexOf(t.charAt(a++)),r=0;r<s.length;r++)s[r]>n-1&&(null==s[r+1]&&(s[r+1]=0),s[r+1]+=s[r]/n|0,s[r]%=n)}return s.reverse()}return function(i,r,o,s,a){var l,c,u,h,d,f,g,m,b=i.indexOf("."),y=A,w=N;for(0<=b&&(h=B,B=0,i=i.replace(".",""),f=(m=new W(r)).pow(i.length-b),B=h,m.c=e(v(p(f.c),f.e,"0"),10,o,t),m.e=m.c.length),u=h=(g=e(i,r,o,a?(l=U,t):(l=t,U))).length;0==g[--h];g.pop());if(!g[0])return l.charAt(0);if(b<0?--u:(f.c=g,f.e=u,f.s=s,g=(f=n(f,m,y,w,o)).c,d=f.r,u=f.e),b=g[c=u+y+1],h=o/2,d=d||c<0||null!=g[c+1],d=w<4?(null!=b||d)&&(0==w||w==(f.s<0?3:2)):h<b||b==h&&(4==w||d||6==w&&1&g[c-1]||w==(f.s<0?8:7)),c<1||!g[0])i=d?v(l.charAt(1),-y,l.charAt(0)):l.charAt(0);else{if(g.length=c,d)for(--o;++g[--c]>o;)g[c]=0,c||(++u,g=[1].concat(g));for(h=g.length;!g[--h];);for(b=0,i="";b<=h;i+=l.charAt(g[b++]));i=v(i,u,l.charAt(0))}return i}}(),n=function(){function t(t,e,n){var i,r,o,s,a=0,l=t.length,c=e%d,u=e/d|0;for(t=t.slice();l--;)a=((r=c*(o=t[l]%d)+(i=u*o+(s=t[l]/d|0)*c)%d*d+a)/n|0)+(i/d|0)+u*s,t[l]=r%n;return a&&(t=[a].concat(t)),t}function e(t,e,n,i){var r,o;if(n!=i)o=i<n?1:-1;else for(r=o=0;r<n;r++)if(t[r]!=e[r]){o=t[r]>e[r]?1:-1;break}return o}function n(t,e,n,i){for(var r=0;n--;)t[n]-=r,r=t[n]<e[n]?1:0,t[n]=r*i+t[n]-e[n];for(;!t[0]&&1<t.length;t.splice(0,1));}return function(i,r,s,a,u){var h,d,f,p,m,b,y,w,v,C,S,O,T,_,E,R,M,x=i.s==r.s?1:-1,I=i.c,k=r.c;if(!(I&&I[0]&&k&&k[0]))return new W(i.s&&r.s&&(I?!k||I[0]!=k[0]:k)?I&&0==I[0]||!k?0*x:x/0:NaN);for(v=(w=new W(x)).c=[],x=s+(d=i.e-r.e)+1,u||(u=l,d=g(i.e/c)-g(r.e/c),x=x/c|0),f=0;k[f]==(I[f]||0);f++);if(k[f]>(I[f]||0)&&d--,x<0)v.push(1),p=!0;else{for(_=I.length,R=k.length,x+=2,1<(m=o(u/(k[f=0]+1)))&&(k=t(k,m,u),I=t(I,m,u),R=k.length,_=I.length),T=R,S=(C=I.slice(0,R)).length;S<R;C[S++]=0);M=k.slice(),M=[0].concat(M),E=k[0],k[1]>=u/2&&E++;do{if(m=0,(h=e(k,C,R,S))<0){if(O=C[0],R!=S&&(O=O*u+(C[1]||0)),1<(m=o(O/E)))for(u<=m&&(m=u-1),y=(b=t(k,m,u)).length,S=C.length;1==e(b,C,y,S);)m--,n(b,R<y?M:k,y,u),y=b.length,h=1;else 0==m&&(h=m=1),y=(b=k.slice()).length;if(y<S&&(b=[0].concat(b)),n(C,b,S,u),S=C.length,-1==h)for(;e(k,C,R,S)<1;)m++,n(C,R<S?M:k,S,u),S=C.length}else 0===h&&(m++,C=[0]);v[f++]=m,C[0]?C[S++]=I[T]||0:(C=[I[T]],S=1)}while((T++<_||null!=C[0])&&x--);p=null!=C[0],v[0]||v.splice(0,1)}if(u==l){for(f=1,x=v[0];10<=x;x/=10,f++);$(w,s+(w.e=f+d*c-1)+1,a,p)}else w.e=d,w.r=+p;return w}}(),_=/^(-?)0([xbo])(?=\w[\w.]*$)/i,E=/^([^.]+)\.$/,R=/^\.([^.]+)$/,M=/^-?(Infinity|NaN)$/,x=/^\s*\+(?=[\w.])|^\s+|\s+$/g,S=function(t,e,n,i){var r,o=n?e:e.replace(x,"");if(M.test(o))t.s=isNaN(o)?null:o<0?-1:1,t.c=t.e=null;else{if(!n&&(o=o.replace(_,(function(t,e,n){return r="x"==(n=n.toLowerCase())?16:"b"==n?2:8,i&&i!=r?t:e})),i&&(r=i,o=o.replace(E,"$1").replace(R,"0.$1")),e!=o))return new W(o,r);if(W.DEBUG)throw Error(s+"Not a"+(i?" base "+i:"")+" number: "+e);t.c=t.e=t.s=null}},I.absoluteValue=I.abs=function(){var t=new W(this);return t.s<0&&(t.s=1),t},I.comparedTo=function(t,e){return m(this,new W(t,e))},I.decimalPlaces=I.dp=function(t,e){var n,i,r;if(null!=t)return b(t,0,f),null==e?e=N:b(e,0,8),$(new W(this),t+this.e+1,e);if(!(n=this.c))return null;if(i=((r=n.length-1)-g(this.e/c))*c,r=n[r])for(;r%10==0;r/=10,i--);return i<0&&(i=0),i},I.dividedBy=I.div=function(t,e){return n(this,new W(t,e),A,N)},I.dividedToIntegerBy=I.idiv=function(t,e){return n(this,new W(t,e),0,1)},I.exponentiatedBy=I.pow=function(t,e){var n,i,a,l,u,h,d,f,g=this;if((t=new W(t)).c&&!t.isInteger())throw Error(s+"Exponent not an integer: "+K(t));if(null!=e&&(e=new W(e)),u=14<t.e,!g.c||!g.c[0]||1==g.c[0]&&!g.e&&1==g.c.length||!t.c||!t.c[0])return f=new W(Math.pow(+K(g),u?2-y(t):+K(t))),e?f.mod(e):f;if(h=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new W(NaN);(i=!h&&g.isInteger()&&e.isInteger())&&(g=g.mod(e))}else{if(9<t.e&&(0<g.e||g.e<-1||(0==g.e?1<g.c[0]||u&&24e7<=g.c[1]:g.c[0]<8e13||u&&g.c[0]<=9999975e7)))return l=g.s<0&&y(t)?-0:0,-1<g.e&&(l=1/l),new W(h?1/l:l);B&&(l=r(B/c+2))}for(d=u?(n=new W(.5),h&&(t.s=1),y(t)):(a=Math.abs(+K(t)))%2,f=new W(k);;){if(d){if(!(f=f.times(g)).c)break;l?f.c.length>l&&(f.c.length=l):i&&(f=f.mod(e))}if(a){if(0===(a=o(a/2)))break;d=a%2}else if($(t=t.times(n),t.e+1,1),14<t.e)d=y(t);else{if(0==(a=+K(t)))break;d=a%2}g=g.times(g),l?g.c&&g.c.length>l&&(g.c.length=l):i&&(g=g.mod(e))}return i?f:(h&&(f=k.div(f)),e?f.mod(e):l?$(f,B,N,void 0):f)},I.integerValue=function(t){var e=new W(this);return null==t?t=N:b(t,0,8),$(e,e.e+1,t)},I.isEqualTo=I.eq=function(t,e){return 0===m(this,new W(t,e))},I.isFinite=function(){return!!this.c},I.isGreaterThan=I.gt=function(t,e){return 0<m(this,new W(t,e))},I.isGreaterThanOrEqualTo=I.gte=function(t,e){return 1===(e=m(this,new W(t,e)))||0===e},I.isInteger=function(){return!!this.c&&g(this.e/c)>this.c.length-2},I.isLessThan=I.lt=function(t,e){return m(this,new W(t,e))<0},I.isLessThanOrEqualTo=I.lte=function(t,e){return-1===(e=m(this,new W(t,e)))||0===e},I.isNaN=function(){return!this.s},I.isNegative=function(){return this.s<0},I.isPositive=function(){return 0<this.s},I.isZero=function(){return!!this.c&&0==this.c[0]},I.minus=function(t,e){var n,i,r,o,s=this,a=s.s;if(e=(t=new W(t,e)).s,!a||!e)return new W(NaN);if(a!=e)return t.s=-e,s.plus(t);var u=s.e/c,h=t.e/c,d=s.c,f=t.c;if(!u||!h){if(!d||!f)return d?(t.s=-e,t):new W(f?s:NaN);if(!d[0]||!f[0])return f[0]?(t.s=-e,t):new W(d[0]?s:3==N?-0:0)}if(u=g(u),h=g(h),d=d.slice(),a=u-h){for((r=(o=a<0)?(a=-a,d):(h=u,f)).reverse(),e=a;e--;r.push(0));r.reverse()}else for(i=(o=(a=d.length)<(e=f.length))?a:e,a=e=0;e<i;e++)if(d[e]!=f[e]){o=d[e]<f[e];break}if(o&&(r=d,d=f,f=r,t.s=-t.s),0<(e=(i=f.length)-(n=d.length)))for(;e--;d[n++]=0);for(e=l-1;a<i;){if(d[--i]<f[i]){for(n=i;n&&!d[--n];d[n]=e);--d[n],d[i]+=l}d[i]-=f[i]}for(;0==d[0];d.splice(0,1),--h);return d[0]?G(t,d,h):(t.s=3==N?-1:1,t.c=[t.e=0],t)},I.modulo=I.mod=function(t,e){var i,r,o=this;return t=new W(t,e),!o.c||!t.s||t.c&&!t.c[0]?new W(NaN):!t.c||o.c&&!o.c[0]?new W(o):(9==F?(r=t.s,t.s=1,i=n(o,t,0,3),t.s=r,i.s*=r):i=n(o,t,0,F),(t=o.minus(i.times(t))).c[0]||1!=F||(t.s=o.s),t)},I.multipliedBy=I.times=function(t,e){var n,i,r,o,s,a,u,h,f,p,m,b,y,w,v,C=this,S=C.c,O=(t=new W(t,e)).c;if(!(S&&O&&S[0]&&O[0]))return!C.s||!t.s||S&&!S[0]&&!O||O&&!O[0]&&!S?t.c=t.e=t.s=null:(t.s*=C.s,S&&O?(t.c=[0],t.e=0):t.c=t.e=null),t;for(i=g(C.e/c)+g(t.e/c),t.s*=C.s,(u=S.length)<(p=O.length)&&(y=S,S=O,O=y,r=u,u=p,p=r),r=u+p,y=[];r--;y.push(0));for(w=l,v=d,r=p;0<=--r;){for(n=0,m=O[r]%v,b=O[r]/v|0,o=r+(s=u);r<o;)n=((h=m*(h=S[--s]%v)+(a=b*h+(f=S[s]/v|0)*m)%v*v+y[o]+n)/w|0)+(a/v|0)+b*f,y[o--]=h%w;y[o]=n}return n?++i:y.splice(0,1),G(t,y,i)},I.negated=function(){var t=new W(this);return t.s=-t.s||null,t},I.plus=function(t,e){var n,i=this,r=i.s;if(e=(t=new W(t,e)).s,!r||!e)return new W(NaN);if(r!=e)return t.s=-e,i.minus(t);var o=i.e/c,s=t.e/c,a=i.c,u=t.c;if(!o||!s){if(!a||!u)return new W(r/0);if(!a[0]||!u[0])return u[0]?t:new W(a[0]?i:0*r)}if(o=g(o),s=g(s),a=a.slice(),r=o-s){for((n=0<r?(s=o,u):(r=-r,a)).reverse();r--;n.push(0));n.reverse()}for((r=a.length)-(e=u.length)<0&&(n=u,u=a,a=n,e=r),r=0;e;)r=(a[--e]=a[e]+u[e]+r)/l|0,a[e]=l===a[e]?0:a[e]%l;return r&&(a=[r].concat(a),++s),G(t,a,s)},I.precision=I.sd=function(t,e){var n,i,r;if(null!=t&&t!==!!t)return b(t,1,f),null==e?e=N:b(e,0,8),$(new W(this),t,e);if(!(n=this.c))return null;if(i=(r=n.length-1)*c+1,r=n[r]){for(;r%10==0;r/=10,i--);for(r=n[0];10<=r;r/=10,i++);}return t&&this.e+1>i&&(i=this.e+1),i},I.shiftedBy=function(t){return b(t,-u,u),this.times("1e"+t)},I.squareRoot=I.sqrt=function(){var t,e,i,r,o,s=this,a=s.c,l=s.s,c=s.e,u=A+4,h=new W("0.5");if(1!==l||!a||!a[0])return new W(!l||l<0&&(!a||a[0])?NaN:a?s:1/0);if((i=0==(l=Math.sqrt(+K(s)))||l==1/0?(((e=p(a)).length+c)%2==0&&(e+="0"),l=Math.sqrt(+e),c=g((c+1)/2)-(c<0||c%2),new W(e=l==1/0?"1e"+c:(e=l.toExponential()).slice(0,e.indexOf("e")+1)+c)):new W(l+"")).c[0])for((l=(c=i.e)+u)<3&&(l=0);;)if(o=i,i=h.times(o.plus(n(s,o,u,1))),p(o.c).slice(0,l)===(e=p(i.c)).slice(0,l)){if(i.e<c&&--l,"9999"!=(e=e.slice(l-3,l+1))&&(r||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||($(i,i.e+A+2,1),t=!i.times(i).eq(s));break}if(!r&&($(o,o.e+A+2,0),o.times(o).eq(s))){i=o;break}u+=4,l+=4,r=1}return $(i,i.e+A+1,N,t)},I.toExponential=function(t,e){return null!=t&&(b(t,0,f),t++),z(this,t,e,1)},I.toFixed=function(t,e){return null!=t&&(b(t,0,f),t=t+this.e+1),z(this,t,e)},I.toFormat=function(t,e,n){var i;if(null==n)null!=t&&e&&"object"==typeof e?(n=e,e=null):t&&"object"==typeof t?(n=t,t=e=null):n=V;else if("object"!=typeof n)throw Error(s+"Argument not an object: "+n);if(i=this.toFixed(t,e),this.c){var r,o=i.split("."),a=+n.groupSize,l=+n.secondaryGroupSize,c=n.groupSeparator||"",u=o[0],h=o[1],d=this.s<0,f=d?u.slice(1):u,g=f.length;if(l&&(r=a,a=l,g-=l=r),0<a&&0<g){for(r=g%a||a,u=f.substr(0,r);r<g;r+=a)u+=c+f.substr(r,a);0<l&&(u+=c+f.slice(r)),d&&(u="-"+u)}i=h?u+(n.decimalSeparator||"")+((l=+n.fractionGroupSize)?h.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):h):u}return(n.prefix||"")+i+(n.suffix||"")},I.toFraction=function(t){var e,i,r,o,a,l,u,d,f,g,m,b,y=this,w=y.c;if(null!=t&&(!(u=new W(t)).isInteger()&&(u.c||1!==u.s)||u.lt(k)))throw Error(s+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+K(u));if(!w)return new W(y);for(e=new W(k),f=i=new W(k),r=d=new W(k),b=p(w),a=e.e=b.length-y.e-1,e.c[0]=h[(l=a%c)<0?c+l:l],t=!t||0<u.comparedTo(e)?0<a?e:f:u,l=P,P=1/0,u=new W(b),d.c[0]=0;g=n(u,e,0,1),1!=(o=i.plus(g.times(r))).comparedTo(t);)i=r,r=o,f=d.plus(g.times(o=f)),d=o,e=u.minus(g.times(o=e)),u=o;return o=n(t.minus(i),r,0,1),d=d.plus(o.times(f)),i=i.plus(o.times(r)),d.s=f.s=y.s,m=n(f,r,a*=2,N).minus(y).abs().comparedTo(n(d,i,a,N).minus(y).abs())<1?[f,r]:[d,i],P=l,m},I.toNumber=function(){return+K(this)},I.toPrecision=function(t,e){return null!=t&&b(t,1,f),z(this,t,e,2)},I.toString=function(t){var e,n=this,i=n.s,r=n.e;return null===r?i?(e="Infinity",i<0&&(e="-"+e)):e="NaN":(e=null==t?r<=j||H<=r?w(p(n.c),r):v(p(n.c),r,"0"):10===t?v(p((n=$(new W(n),A+r+1,N)).c),n.e,"0"):(b(t,2,U.length,"Base"),C(v(p(n.c),r,"0"),10,t,i,!0)),i<0&&n.c[0]&&(e="-"+e)),e},I.valueOf=I.toJSON=function(){return K(this)},I._isBigNumber=!0,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(I[Symbol.toStringTag]="BigNumber",I[Symbol.for("nodejs.util.inspect.custom")]=I.valueOf),null!=e&&W.set(e),W}()).default=n.BigNumber=n,void 0!==e&&e.exports?e.exports=n:(t||(t="undefined"!=typeof self&&self?self:window),t.BigNumber=n)}(this)},{}],2:[function(t,e,n){"use strict";e.exports={languageTag:"en-US",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},spaceSeparated:!1,ordinal:function(t){var e=t%10;return 1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$",position:"prefix",code:"USD"},currencyFormat:{thousandSeparated:!0,totalLength:4,spaceSeparated:!0},formats:{fourDigits:{totalLength:4,spaceSeparated:!0},fullWithTwoDecimals:{output:"currency",thousandSeparated:!0,mantissa:2},fullWithTwoDecimalsNoCurrency:{thousandSeparated:!0,mantissa:2},fullWithNoDecimals:{output:"currency",thousandSeparated:!0,mantissa:0}}}},{}],3:[function(t,e,n){"use strict";function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=t("./globalState"),o=t("./validating"),s=t("./parsing"),a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],l={general:{scale:1024,suffixes:a,marker:"bd"},binary:{scale:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],marker:"b"},decimal:{scale:1e3,suffixes:a,marker:"d"}},c={totalLength:0,characteristic:0,forceAverage:!1,average:!1,mantissa:-1,optionalMantissa:!0,thousandSeparated:!1,spaceSeparated:!1,negative:"sign",forceSign:!1};function u(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0;if("string"==typeof e&&(e=s.parseFormat(e)),!o.validateFormat(e))return"ERROR: invalid format";var i=e.prefix||"",a=e.postfix||"",u=function(t,e,n){switch(e.output){case"currency":return function(t,e,n){var i=n.currentCurrency(),r=Object.assign({},c,e),o=void 0,s="",a=!!r.totalLength||!!r.forceAverage||r.average,l=e.currencyPosition||i.position,u=e.currencySymbol||i.symbol;r.spaceSeparated&&(s=" "),"infix"===l&&(o=s+u+s);var h=g({instance:t,providedFormat:e,state:n,decimalSeparator:o});return"prefix"===l&&(h=t._value<0&&"sign"===r.negative?"-".concat(s).concat(u).concat(h.slice(1)):u+s+h),l&&"postfix"!==l||(h=h+(s=a?"":s)+u),h}(t,e=p(e,r.currentCurrencyDefaultFormat()),r);case"percent":return function(t,e,n,i){var r=e.prefixSymbol,o=g({instance:i(100*t._value),providedFormat:e,state:n}),s=Object.assign({},c,e);return r?"%".concat(s.spaceSeparated?" ":"").concat(o):"".concat(o).concat(s.spaceSeparated?" ":"","%")}(t,e=p(e,r.currentPercentageDefaultFormat()),r,n);case"byte":return e=p(e,r.currentByteDefaultFormat()),v=t,S=r,O=n,T=(C=e).base||"binary",_=l[T],R=(E=h(v._value,_.suffixes,_.scale)).value,M=E.suffix,x=g({instance:O(R),providedFormat:C,state:S,defaults:S.currentByteDefaultFormat()}),I=S.currentAbbreviations(),"".concat(x).concat(I.spaced?" ":"").concat(M);case"time":return e=p(e,r.currentTimeDefaultFormat()),m=t,b=Math.floor(m._value/60/60),y=Math.floor((m._value-60*b*60)/60),w=Math.round(m._value-60*b*60-60*y),"".concat(b,":").concat(y<10?"0":"").concat(y,":").concat(w<10?"0":"").concat(w);case"ordinal":return i=t,o=e=p(e,r.currentOrdinalDefaultFormat()),a=(s=r).currentOrdinal(),u=Object.assign({},c,o),d=g({instance:i,providedFormat:o,state:s}),f=a(i._value),"".concat(d).concat(u.spaceSeparated?" ":"").concat(f);case"number":default:return g({instance:t,providedFormat:e,numbro:n})}var i,o,s,a,u,d,f,m,b,y,w,v,C,S,O,T,_,E,R,M,x,I}(t,e,n);return(u=i+u)+a}function h(t,e,n){var i=e[0],r=Math.abs(t);if(n<=r){for(var o=1;o<e.length;++o){var s=Math.pow(n,o),a=Math.pow(n,o+1);if(s<=r&&r<a){i=e[o],t/=s;break}}i===e[0]&&(t/=Math.pow(n,e.length-1),i=e[e.length-1])}return{value:t,suffix:i}}function d(t){for(var e="",n=0;n<t;n++)e+="0";return e}function f(t,e){return-1!==t.toString().indexOf("e")?function(t,e){var n=t.toString(),r=i(n.split("e"),2),o=r[0],s=r[1],a=i(o.split("."),2),l=a[0],c=a[1],u=void 0===c?"":c;if(0<+s)n=l+u+d(s-u.length);else{var h=".";h=+l<0?"-0".concat(h):"0".concat(h);var f=(d(-s-1)+Math.abs(l)+u).substr(0,e);f.length<e&&(f+=d(e-f.length)),n=h+f}return 0<+s&&0<e&&(n+=".".concat(d(e))),n}(t,e):(Math.round(+"".concat(t,"e+").concat(e))/Math.pow(10,e)).toFixed(e)}function g(t){var e=t.instance,n=t.providedFormat,o=t.state,s=void 0===o?r:o,a=t.decimalSeparator,l=t.defaults,u=void 0===l?s.currentDefaults():l,h=e._value;if(0===h&&s.hasZeroFormat())return s.getZeroFormat();if(!isFinite(h))return h.toString();var d,g,p,m,b,y,w,v,C=Object.assign({},c,u,n),S=C.totalLength,O=S?0:C.characteristic,T=C.optionalCharacteristic,_=C.forceAverage,E=!!S||!!_||C.average,R=S?-1:E&&void 0===n.mantissa?0:C.mantissa,M=!S&&(void 0===n.optionalMantissa?-1===R:C.optionalMantissa),x=C.trimMantissa,I=C.thousandSeparated,k=C.spaceSeparated,A=C.negative,N=C.forceSign,j=C.exponential,H="";if(E){var D=function(t){var e=t.value,n=t.forceAverage,i=t.abbreviations,r=t.spaceSeparated,o=void 0!==r&&r,s=t.totalLength,a=void 0===s?0:s,l="",c=Math.abs(e),u=-1;if(c>=Math.pow(10,12)&&!n||"trillion"===n?(l=i.trillion,e/=Math.pow(10,12)):c<Math.pow(10,12)&&c>=Math.pow(10,9)&&!n||"billion"===n?(l=i.billion,e/=Math.pow(10,9)):c<Math.pow(10,9)&&c>=Math.pow(10,6)&&!n||"million"===n?(l=i.million,e/=Math.pow(10,6)):(c<Math.pow(10,6)&&c>=Math.pow(10,3)&&!n||"thousand"===n)&&(l=i.thousand,e/=Math.pow(10,3)),l&&(l=(o?" ":"")+l),a){var h=e.toString().split(".")[0];u=Math.max(a-h.length,0)}return{value:e,abbreviation:l,mantissaPrecision:u}}({value:h,forceAverage:_,abbreviations:s.currentAbbreviations(),spaceSeparated:k,totalLength:S});h=D.value,H+=D.abbreviation,S&&(R=D.mantissaPrecision)}if(j){var P=(g=(d={value:h,characteristicPrecision:O}).value,m=void 0===(p=d.characteristicPrecision)?0:p,y=(b=i(g.toExponential().split("e"),2))[0],w=b[1],v=+y,m&&1<m&&(v*=Math.pow(10,m-1),w=0<=(w=+w-(m-1))?"+".concat(w):w),{value:v,abbreviation:"e".concat(w)});h=P.value,H=P.abbreviation+H}var L,F,B,V=function(t,e,n,r,o){if(-1===r)return t;var s=f(e,r),a=i(s.toString().split("."),2),l=a[0],c=a[1],u=void 0===c?"":c;if(u.match(/^0+$/)&&(n||o))return l;var h=u.match(/0+$/);return o&&h?"".concat(l,".").concat(u.toString().slice(0,h.index)):s.toString()}(h.toString(),h,M,R,x);return V=function(t,e,n,i,r){var o=i.currentDelimiters(),s=o.thousands;r=r||o.decimal;var a=o.thousandsSize||3,l=t.toString(),c=l.split(".")[0],u=l.split(".")[1];return n&&(e<0&&(c=c.slice(1)),function(t,e){for(var n=[],i=0,r=t;0<r;r--)i===e&&(n.unshift(r),i=0),i++;return n}(c.length,a).forEach((function(t,e){c=c.slice(0,t+e)+s+c.slice(t+e)})),e<0&&(c="-".concat(c))),u?c+r+u:c}(V=function(t,e,n,r){var o=t,s=i(o.toString().split("."),2),a=s[0],l=s[1];if(a.match(/^-?0$/)&&n)return l?"".concat(a.replace("0",""),".").concat(l):a.replace("0","");if(a.length<r)for(var c=r-a.length,u=0;u<c;u++)o="0".concat(o);return o.toString()}(V,0,T,O),h,I,s,a),(E||j)&&(V+=H),(N||h<0)&&(L=V,B=A,V=0===(F=h)?L:0==+L?L.replace("-",""):0<F?"+".concat(L):"sign"===B?L:"(".concat(L.replace("-",""),")")),V}function p(t,e){if(!t)return e;var n=Object.keys(t);return 1===n.length&&"output"===n[0]?e:t}e.exports=function(t){return{format:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return u.apply(void 0,n.concat([t]))},getByteUnit:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return function(t){var e=l.general;return h(t._value,e.suffixes,e.scale).suffix}.apply(void 0,n.concat([t]))},getBinaryByteUnit:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return function(t){var e=l.binary;return h(t._value,e.suffixes,e.scale).suffix}.apply(void 0,n.concat([t]))},getDecimalByteUnit:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return function(t){var e=l.decimal;return h(t._value,e.suffixes,e.scale).suffix}.apply(void 0,n.concat([t]))},formatOrDefault:p}}},{"./globalState":4,"./parsing":8,"./validating":10}],4:[function(t,e,n){"use strict";var i=t("./en-US"),r=t("./validating"),o=t("./parsing"),s={},a=void 0,l={},c=null,u={};function h(t){a=t}function d(){return l[a]}s.languages=function(){return Object.assign({},l)},s.currentLanguage=function(){return a},s.currentCurrency=function(){return d().currency},s.currentAbbreviations=function(){return d().abbreviations},s.currentDelimiters=function(){return d().delimiters},s.currentOrdinal=function(){return d().ordinal},s.currentDefaults=function(){return Object.assign({},d().defaults,u)},s.currentOrdinalDefaultFormat=function(){return Object.assign({},s.currentDefaults(),d().ordinalFormat)},s.currentByteDefaultFormat=function(){return Object.assign({},s.currentDefaults(),d().byteFormat)},s.currentPercentageDefaultFormat=function(){return Object.assign({},s.currentDefaults(),d().percentageFormat)},s.currentCurrencyDefaultFormat=function(){return Object.assign({},s.currentDefaults(),d().currencyFormat)},s.currentTimeDefaultFormat=function(){return Object.assign({},s.currentDefaults(),d().timeFormat)},s.setDefaults=function(t){t=o.parseFormat(t),r.validateFormat(t)&&(u=t)},s.getZeroFormat=function(){return c},s.setZeroFormat=function(t){return c="string"==typeof t?t:null},s.hasZeroFormat=function(){return null!==c},s.languageData=function(t){if(t){if(l[t])return l[t];throw new Error('Unknown tag "'.concat(t,'"'))}return d()},s.registerLanguage=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!r.validateLanguage(t))throw new Error("Invalid language data");l[t.languageTag]=t,e&&h(t.languageTag)},s.setLanguage=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:i.languageTag;if(!l[t]){var n=t.split("-")[0],r=Object.keys(l).find((function(t){return t.split("-")[0]===n}));return l[r]?void h(r):void h(e)}h(t)},s.registerLanguage(i),a=i.languageTag,e.exports=s},{"./en-US":2,"./parsing":8,"./validating":10}],5:[function(t,e,n){"use strict";e.exports=function(e){return{loadLanguagesInNode:function(n){return i=e,void n.forEach((function(e){var n=void 0;try{n=t("../languages/".concat(e))}catch(n){console.error('Unable to load "'.concat(e,'". No matching language file found.'))}n&&i.registerLanguage(n)}));var i}}}},{}],6:[function(t,e,n){"use strict";var i=t("bignumber.js");function r(t,e,n){var r=new i(t._value),o=e;return n.isNumbro(e)&&(o=e._value),o=new i(o),t._value=r.minus(o).toNumber(),t}e.exports=function(t){return{add:function(e,n){return o=n,s=t,a=new i((r=e)._value),l=o,s.isNumbro(o)&&(l=o._value),l=new i(l),r._value=a.plus(l).toNumber(),r;var r,o,s,a,l},subtract:function(e,n){return r(e,n,t)},multiply:function(e,n){return o=n,s=t,a=new i((r=e)._value),l=o,s.isNumbro(o)&&(l=o._value),l=new i(l),r._value=a.times(l).toNumber(),r;var r,o,s,a,l},divide:function(e,n){return o=n,s=t,a=new i((r=e)._value),l=o,s.isNumbro(o)&&(l=o._value),l=new i(l),r._value=a.dividedBy(l).toNumber(),r;var r,o,s,a,l},set:function(e,n){return i=e,o=r=n,t.isNumbro(r)&&(o=r._value),i._value=o,i;var i,r,o},difference:function(e,n){return i=n,r(s=(o=t)(e._value),i,o),Math.abs(s._value);var i,o,s}}}},{"bignumber.js":1}],7:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=t("./globalState"),o=t("./validating"),s=t("./loading")(f),a=t("./unformatting"),l=t("./formatting")(f),c=t("./manipulating")(f),u=t("./parsing"),h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._value=e}var e,n;return e=t,(n=[{key:"clone",value:function(){return f(this._value)}},{key:"format",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return l.format(this,t)}},{key:"formatCurrency",value:function(t){return"string"==typeof t&&(t=u.parseFormat(t)),(t=l.formatOrDefault(t,r.currentCurrencyDefaultFormat())).output="currency",l.format(this,t)}},{key:"formatTime",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.output="time",l.format(this,t)}},{key:"binaryByteUnits",value:function(){return l.getBinaryByteUnit(this)}},{key:"decimalByteUnits",value:function(){return l.getDecimalByteUnit(this)}},{key:"byteUnits",value:function(){return l.getByteUnit(this)}},{key:"difference",value:function(t){return c.difference(this,t)}},{key:"add",value:function(t){return c.add(this,t)}},{key:"subtract",value:function(t){return c.subtract(this,t)}},{key:"multiply",value:function(t){return c.multiply(this,t)}},{key:"divide",value:function(t){return c.divide(this,t)}},{key:"set",value:function(t){return c.set(this,d(t))}},{key:"value",value:function(){return this._value}},{key:"valueOf",value:function(){return this._value}}])&&i(e.prototype,n),t}();function d(t){var e=t;return f.isNumbro(t)?e=t._value:"string"==typeof t?e=f.unformat(t):isNaN(t)&&(e=NaN),e}function f(t){return new h(d(t))}f.version="2.1.2",f.isNumbro=function(t){return t instanceof h},f.language=r.currentLanguage,f.registerLanguage=r.registerLanguage,f.setLanguage=r.setLanguage,f.languages=r.languages,f.languageData=r.languageData,f.zeroFormat=r.setZeroFormat,f.defaultFormat=r.currentDefaults,f.setDefaults=r.setDefaults,f.defaultCurrencyFormat=r.currentCurrencyDefaultFormat,f.validate=o.validate,f.loadLanguagesInNode=s.loadLanguagesInNode,f.unformat=a.unformat,e.exports=f},{"./formatting":3,"./globalState":4,"./loading":5,"./manipulating":6,"./parsing":8,"./unformatting":9,"./validating":10}],8:[function(t,e,n){"use strict";e.exports={parseFormat:function(t){var e,n,i,r,o,s,a,l,c,u,h,d,f,g,p,m,b,y,w,v,C=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return"string"!=typeof t?t:(n=C,o=C,function(t,e){if(-1===t.indexOf("$")){if(-1===t.indexOf("%"))return-1!==t.indexOf("bd")?(e.output="byte",e.base="general"):-1!==t.indexOf("b")?(e.output="byte",e.base="binary"):-1!==t.indexOf("d")?(e.output="byte",e.base="decimal"):-1===t.indexOf(":")?-1!==t.indexOf("o")&&(e.output="ordinal"):e.output="time";e.output="percent"}else e.output="currency"}(t=(s=(r=t=(i=(e=t).match(/^{([^}]*)}/))?(n.prefix=i[1],e.slice(i[0].length)):e).match(/{([^}]*)}$/))?(o.postfix=s[1],r.slice(0,-s[0].length)):r,C),a=C,(l=t.match(/[1-9]+[0-9]*/))&&(a.totalLength=+l[0]),c=C,(u=t.split(".")[0].match(/0+/))&&(c.characteristic=u[0].length),function(t,e){if(-1!==t.indexOf(".")){var n=t.split(".")[0];e.optionalCharacteristic=-1===n.indexOf("0")}}(t,C),h=C,-1!==t.indexOf("a")&&(h.average=!0),f=C,-1!==(d=t).indexOf("K")?f.forceAverage="thousand":-1!==d.indexOf("M")?f.forceAverage="million":-1!==d.indexOf("B")?f.forceAverage="billion":-1!==d.indexOf("T")&&(f.forceAverage="trillion"),function(t,e){var n=t.split(".")[1];if(n){var i=n.match(/0+/);i&&(e.mantissa=i[0].length)}}(t,C),p=C,(g=t).match(/\[\.]/)?p.optionalMantissa=!0:g.match(/\./)&&(p.optionalMantissa=!1),m=C,-1!==t.indexOf(",")&&(m.thousandSeparated=!0),b=C,-1!==t.indexOf(" ")&&(b.spaceSeparated=!0),w=C,(y=t).match(/^\+?\([^)]*\)$/)&&(w.negative="parenthesis"),y.match(/^\+?-/)&&(w.negative="sign"),v=C,t.match(/^\+/)&&(v.forceSign=!0),C)}}},{}],9:[function(t,e,n){"use strict";var i=[{key:"ZiB",factor:Math.pow(1024,7)},{key:"ZB",factor:Math.pow(1e3,7)},{key:"YiB",factor:Math.pow(1024,8)},{key:"YB",factor:Math.pow(1e3,8)},{key:"TiB",factor:Math.pow(1024,4)},{key:"TB",factor:Math.pow(1e3,4)},{key:"PiB",factor:Math.pow(1024,5)},{key:"PB",factor:Math.pow(1e3,5)},{key:"MiB",factor:Math.pow(1024,2)},{key:"MB",factor:Math.pow(1e3,2)},{key:"KiB",factor:Math.pow(1024,1)},{key:"KB",factor:Math.pow(1e3,1)},{key:"GiB",factor:Math.pow(1024,3)},{key:"GB",factor:Math.pow(1e3,3)},{key:"EiB",factor:Math.pow(1024,6)},{key:"EB",factor:Math.pow(1e3,6)},{key:"B",factor:1}];function r(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}e.exports={unformat:function(e,n){var o,s,a,l=t("./globalState"),c=l.currentDelimiters(),u=l.currentCurrency().symbol,h=l.currentOrdinal(),d=l.getZeroFormat(),f=l.currentAbbreviations(),g=void 0;if("string"==typeof e)g=function(t,e){if(!t.indexOf(":")||":"===e.thousands)return!1;var n=t.split(":");if(3!==n.length)return!1;var i=+n[0],r=+n[1],o=+n[2];return!isNaN(i)&&!isNaN(r)&&!isNaN(o)}(e,c)?(s=+(o=e.split(":"))[0],a=+o[1],+o[2]+60*a+3600*s):function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",o=3<arguments.length?arguments[3]:void 0,s=4<arguments.length?arguments[4]:void 0,a=5<arguments.length?arguments[5]:void 0,l=6<arguments.length?arguments[6]:void 0;if(""!==t)return t===s?0:function t(e,n){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",s=3<arguments.length?arguments[3]:void 0,a=4<arguments.length?arguments[4]:void 0,l=5<arguments.length?arguments[5]:void 0,c=6<arguments.length?arguments[6]:void 0;if(!isNaN(+e))return+e;var u="",h=e.replace(/(^[^(]*)\((.*)\)([^)]*$)/,"$1$2$3");if(h!==e)return-1*t(h,n,o,s,a,l,c);for(var d=0;d<i.length;d++){var f=i[d];if((u=e.replace(f.key,""))!==e)return t(u,n,o,s,a,l,c)*f.factor}if((u=e.replace("%",""))!==e)return t(u,n,o,s,a,l,c)/100;var g=parseFloat(e);if(!isNaN(g)){var p=s(g);if(p&&"."!==p&&(u=e.replace(new RegExp("".concat(r(p),"$")),""))!==e)return t(u,n,o,s,a,l,c);var m={};Object.keys(l).forEach((function(t){m[l[t]]=t}));for(var b=Object.keys(m).sort().reverse(),y=b.length,w=0;w<y;w++){var v=b[w],C=m[v];if((u=e.replace(v,""))!==e){var S=void 0;switch(C){case"thousand":S=Math.pow(10,3);break;case"million":S=Math.pow(10,6);break;case"billion":S=Math.pow(10,9);break;case"trillion":S=Math.pow(10,12)}return t(u,n,o,s,a,l,c)*S}}}}(function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=t.replace(n,"");return(i=i.replace(new RegExp("([0-9])".concat(r(e.thousands),"([0-9])"),"g"),"$1$2")).replace(e.decimal,".")}(t,e,n),e,n,o,s,a,l)}(e,c,u,h,d,f,n);else{if("number"!=typeof e)return;g=e}if(void 0!==g)return g}}},{"./globalState":4}],10:[function(t,e,n){"use strict";function i(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=t("./unformatting"),s=/^[a-z]{2,3}(-[a-zA-Z]{4})?(-([A-Z]{2}|[0-9]{3}))?$/,a={output:{type:"string",validValues:["currency","percent","byte","time","ordinal","number"]},base:{type:"string",validValues:["decimal","binary","general"],restriction:function(t,e){return"byte"===e.output},message:"`base` must be provided only when the output is `byte`",mandatory:function(t){return"byte"===t.output}},characteristic:{type:"number",restriction:function(t){return 0<=t},message:"value must be positive"},prefix:"string",postfix:"string",forceAverage:{type:"string",validValues:["trillion","billion","million","thousand"]},average:"boolean",currencyPosition:{type:"string",validValues:["prefix","infix","postfix"]},currencySymbol:"string",totalLength:{type:"number",restrictions:[{restriction:function(t){return 0<=t},message:"value must be positive"},{restriction:function(t,e){return!e.exponential},message:"`totalLength` is incompatible with `exponential`"}]},mantissa:{type:"number",restriction:function(t){return 0<=t},message:"value must be positive"},optionalMantissa:"boolean",trimMantissa:"boolean",optionalCharacteristic:"boolean",thousandSeparated:"boolean",spaceSeparated:"boolean",abbreviations:{type:"object",children:{thousand:"string",million:"string",billion:"string",trillion:"string"}},negative:{type:"string",validValues:["sign","parenthesis"]},forceSign:"boolean",exponential:{type:"boolean"},prefixSymbol:{type:"boolean",restriction:function(t,e){return"percent"===e.output},message:"`prefixSymbol` can be provided only when the output is `percent`"}},l={languageTag:{type:"string",mandatory:!0,restriction:function(t){return t.match(s)},message:"the language tag must follow the BCP 47 specification (see https://tools.ieft.org/html/bcp47)"},delimiters:{type:"object",children:{thousands:"string",decimal:"string",thousandsSize:"number"},mandatory:!0},abbreviations:{type:"object",children:{thousand:{type:"string",mandatory:!0},million:{type:"string",mandatory:!0},billion:{type:"string",mandatory:!0},trillion:{type:"string",mandatory:!0}},mandatory:!0},spaceSeparated:"boolean",ordinal:{type:"function",mandatory:!0},currency:{type:"object",children:{symbol:"string",position:"string",code:"string"},mandatory:!0},defaults:"format",ordinalFormat:"format",byteFormat:"format",percentageFormat:"format",currencyFormat:"format",timeDefaults:"format",formats:{type:"object",children:{fourDigits:{type:"format",mandatory:!0},fullWithTwoDecimals:{type:"format",mandatory:!0},fullWithTwoDecimalsNoCurrency:{type:"format",mandatory:!0},fullWithNoDecimals:{type:"format",mandatory:!0}}}};function c(t){return!!o.unformat(t)}function u(t,e,n){var o=3<arguments.length&&void 0!==arguments[3]&&arguments[3],s=Object.keys(t).map((function(i){if(!e[i])return console.error("".concat(n," Invalid key: ").concat(i)),!1;var o=t[i],s=e[i];if("string"==typeof s&&(s={type:s}),"format"===s.type){if(!u(o,a,"[Validate ".concat(i,"]"),!0))return!1}else if(r(o)!==s.type)return console.error("".concat(n," ").concat(i,' type mismatched: "').concat(s.type,'" expected, "').concat(r(o),'" provided')),!1;if(s.restrictions&&s.restrictions.length)for(var l=s.restrictions.length,c=0;c<l;c++){var h=s.restrictions[c],d=h.restriction,f=h.message;if(!d(o,t))return console.error("".concat(n," ").concat(i," invalid value: ").concat(f)),!1}return s.restriction&&!s.restriction(o,t)?(console.error("".concat(n," ").concat(i," invalid value: ").concat(s.message)),!1):s.validValues&&-1===s.validValues.indexOf(o)?(console.error("".concat(n," ").concat(i," invalid value: must be among ").concat(JSON.stringify(s.validValues),', "').concat(o,'" provided')),!1):!(s.children&&!u(o,s.children,"[Validate ".concat(i,"]")))}));return o||s.push.apply(s,i(Object.keys(e).map((function(i){var r=e[i];if("string"==typeof r&&(r={type:r}),r.mandatory){var o=r.mandatory;if("function"==typeof o&&(o=o(t)),o&&void 0===t[i])return console.error("".concat(n,' Missing mandatory key "').concat(i,'"')),!1}return!0})))),s.reduce((function(t,e){return t&&e}),!0)}function h(t){return u(t,a,"[Validate format]")}e.exports={validate:function(t,e){var n=c(t),i=h(e);return n&&i},validateFormat:h,validateInput:c,validateLanguage:function(t){return u(t,l,"[Validate language]")}}},{"./unformatting":9}]},{},[7])(7)},,,,function(t,e,n){"use strict";var i=n(34);t.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(36),r=n(37);class o extends i.a{insert(t,e){this.indexedValues=Object(r.a)(this.indexedValues,t,e,this.initValueOrFn),super.insert(t,e)}remove(t){this.indexedValues=Object(r.b)(this.indexedValues,t),super.remove(t)}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r}));const i="gridDefault",r="editorManager.handlingEditor"},function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return c}));var i=n(4);const r={"&nbsp;":" ","&amp;":"&","&lt;":"<","&gt;":">"},o=new RegExp(Object.keys(r).map(t=>`(${t})`).join("|"),"gi");function s(t){return"TABLE"===(t&&t.nodeName||"")}function a(t){const e=t.hasColHeaders(),n=t.hasRowHeaders(),r=[e?-1:0,n?-1:0,t.countRows()-1,t.countCols()-1],o=t.getData(...r),s=o.length,a=s>0?o[0].length:0,l=["<table>","</table>"],c=e?["<thead>","</thead>"]:[],u=["<tbody>","</tbody>"],h=n?1:0,d=e?1:0;for(let f=0;f<s;f+=1){const r=e&&0===f,s=[];for(let e=0;e<a;e+=1){const a=!r&&n&&0===e;let l="";if(r)l=`<th>${t.getColHeader(e-h)}</th>`;else if(a)l=`<th>${t.getRowHeader(f-d)}</th>`;else{const n=o[f][e],{hidden:r,rowspan:s,colspan:a}=t.getCellMeta(f-d,e-h);if(!r){const t=[];if(s&&t.push(`rowspan="${s}"`),a&&t.push(`colspan="${a}"`),Object(i.c)(n))l=`<td ${t.join(" ")}></td>`;else{const e=n.toString().replace("<","&lt;").replace(">","&gt;").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,"<br>\r\n").replace(/\x20/gi,"&nbsp;").replace(/\t/gi,"&#9;");l=`<td ${t.join(" ")}>${e}</td>`}}}s.push(l)}const l=["<tr>",...s,"</tr>"].join("");r?c.splice(1,0,l):u.splice(-1,0,l)}return l.splice(1,0,c.join(""),u.join("")),l.join("")}function l(t){const e=t.length,n=["<table>"];for(let r=0;r<e;r+=1){const o=t[r],s=o.length,a=[];0===r&&n.push("<tbody>");for(let t=0;t<s;t+=1){const e=o[t],n=Object(i.c)(e)?"":e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,"<br>\r\n").replace(/\x20{2,}/gi,t=>`<span style="mso-spacerun: yes">${"&nbsp;".repeat(t.length-1)} </span>`).replace(/\t/gi,"&#9;");a.push(`<td>${n}</td>`)}n.push("<tr>",...a,"</tr>"),r+1===e&&n.push("</tbody>")}return n.push("</table>"),n.join("")}function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;const n={},i=e.createDocumentFragment(),a=e.createElement("div");i.appendChild(a);let l=t;if("string"===typeof l){const t=l.replace(/<td\b[^>]*?>([\s\S]*?)<\/\s*td>/g,t=>{const e=t.match(/<td\b[^>]*?>/g)[0];return`${e}${t.substring(e.length,t.lastIndexOf("<")).trim().replaceAll(/\n\s+/g," ").replaceAll(/<p.*?>/g,"\n").replace("\n","").replaceAll(/<\/(.*)>\s+$/gm,"</$1>").replace(/(<(?!br)([^>]+)>)/gi,"").replaceAll(/^&nbsp;$/gm,"")}</td>`});a.insertAdjacentHTML("afterbegin",""+t),l=a.querySelector("table")}if(!l||!s(l))return;const c=a.querySelector('meta[name$="enerator"]'),u=null!==l.querySelector("tbody th"),h=l.querySelector("tr"),d=h?Array.from(h.cells).reduce((t,e)=>t+e.colSpan,0)-(u?1:0):0,f=l.tFoot&&Array.from(l.tFoot.rows)||[],g=[];let p=!1,m=0,b=0;if(l.tHead){const t=Array.from(l.tHead.rows).filter(t=>{const e=null!==t.querySelector("td");return e&&g.push(t),!e});m=t.length,p=m>0,m>1?n.nestedHeaders=Array.from(t).reduce((t,e)=>{const n=Array.from(e.cells).reduce((t,e,n)=>{if(u&&0===n)return t;const{colSpan:i,innerHTML:r}=e,o=i>1?{label:r,colspan:i}:r;return t.push(o),t},[]);return t.push(n),t},[]):p&&(n.colHeaders=Array.from(t[0].children).reduce((t,e,n)=>(u&&0===n||t.push(e.innerHTML),t),[]))}g.length&&(n.fixedRowsTop=g.length),f.length&&(n.fixedRowsBottom=f.length);const y=[...g,...Array.from(l.tBodies).reduce((t,e)=>(t.push(...Array.from(e.rows)),t),[]),...f];b=y.length;const w=new Array(b);for(let r=0;r<b;r++)w[r]=new Array(d);const v=[],C=[];for(let s=0;s<b;s++){const t=y[s],e=Array.from(t.cells),n=e.length;for(let i=0;i<n;i++){const t=e[i],{nodeName:n,innerHTML:a,rowSpan:l,colSpan:u}=t,h=w[s].findIndex(t=>void 0===t);if("TD"===n){if(l>1||u>1){for(let t=s;t<s+l;t++)if(t<b)for(let e=h;e<h+u;e++)w[t][e]=null;const e=t.getAttribute("style");e&&e.includes("mso-ignore:colspan")||v.push({col:h,row:s,rowspan:l,colspan:u})}let e="";e=c&&/excel/gi.test(c.content)?a.replace(/[\r\n][\x20]{0,2}/g," ").replace(/<br(\s*|\/)>[\r\n]?[\x20]{0,3}/gim,"\r\n"):a.replace(/<br(\s*|\/)>[\r\n]?/gim,"\r\n"),w[s][h]=e.replace(o,t=>r[t])}else C.push(a)}}return v.length&&(n.mergeCells=v),C.length&&(n.rowHeaders=C),w.length&&(n.data=w),n}},,,function(t,e,n){"use strict";var i=n(31);t.exports=function(t){return"object"==typeof t?null!==t:i(t)}},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}}(),t.exports=n(136)},function(t,e,n){"use strict";function i(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function r(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){return t.get(a(t,e))}function s(t,e,n){return t.set(a(t,e),n),n}function a(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var l=new WeakMap;class c{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r(this,"row",null),r(this,"col",null),i(this,l,!1),s(l,this,n),"undefined"!==typeof t&&"undefined"!==typeof e&&(this.row=t,this.col=e)}isValid(t){const{countRows:e,countCols:n,countRowHeaders:i,countColHeaders:r}={countRows:0,countCols:0,countRowHeaders:0,countColHeaders:0,...t};return!(!Number.isInteger(this.row)||!Number.isInteger(this.col))&&(!(this.row<-r||this.col<-i)&&!(this.row>=e||this.col>=n))}isEqual(t){return t===this||this.row===t.row&&this.col===t.col}isHeader(){return!this.isCell()}isCell(){return this.row>=0&&this.col>=0}isRtl(){return o(l,this)}isSouthEastOf(t){return this.row>=t.row&&(o(l,this)?this.col<=t.col:this.col>=t.col)}isNorthWestOf(t){return this.row<=t.row&&(o(l,this)?this.col>=t.col:this.col<=t.col)}isSouthWestOf(t){return this.row>=t.row&&(o(l,this)?this.col>=t.col:this.col<=t.col)}isNorthEastOf(t){return this.row<=t.row&&(o(l,this)?this.col<=t.col:this.col>=t.col)}normalize(){return this.row=null===this.row?this.row:Math.max(this.row,0),this.col=null===this.col?this.col:Math.max(this.col,0),this}assign(t){return Number.isInteger(null===t||void 0===t?void 0:t.row)&&(this.row=t.row),Number.isInteger(null===t||void 0===t?void 0:t.col)&&(this.col=t.col),t instanceof c&&s(l,this,t.isRtl()),this}clone(){return new c(this.row,this.col,o(l,this))}toObject(){return{row:this.row,col:this.col}}}e.a=c},,function(t,e,n){"use strict";var i=n(34);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},function(t,e,n){"use strict";var i=n(28).navigator,r=i&&i.userAgent;t.exports=r?String(r):""},function(t,e,n){"use strict";function i(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}));class r{constructor(t){i(this,"calculationTypes",[]),i(this,"calculationResults",new Map),this.calculationTypes=t}_initialize(t){this.calculationTypes.forEach(e=>{let[n,i]=e;this.calculationResults.set(n,i),i.initialize(t)})}_process(t,e){this.calculationTypes.forEach(n=>{let[,i]=n;return i.process(t,e)})}_finalize(t){this.calculationTypes.forEach(e=>{let[,n]=e;return n.finalize(t)})}getResultsFor(t){return this.calculationResults.get(t)}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return cc})),n.d(e,"a",(function(){return sc}));var i={};n.r(i),n.d(i,"memcpy",(function(){return ft})),n.d(i,"joinUint8Arrays",(function(){return gt})),n.d(i,"toArrayBufferView",(function(){return pt})),n.d(i,"toInt8Array",(function(){return mt})),n.d(i,"toInt16Array",(function(){return bt})),n.d(i,"toInt32Array",(function(){return yt})),n.d(i,"toBigInt64Array",(function(){return wt})),n.d(i,"toUint8Array",(function(){return vt})),n.d(i,"toUint16Array",(function(){return Ct})),n.d(i,"toUint32Array",(function(){return St})),n.d(i,"toBigUint64Array",(function(){return Ot})),n.d(i,"toFloat32Array",(function(){return Tt})),n.d(i,"toFloat64Array",(function(){return _t})),n.d(i,"toUint8ClampedArray",(function(){return Et})),n.d(i,"toArrayBufferViewIterator",(function(){return Mt})),n.d(i,"toInt8ArrayIterator",(function(){return xt})),n.d(i,"toInt16ArrayIterator",(function(){return It})),n.d(i,"toInt32ArrayIterator",(function(){return kt})),n.d(i,"toUint8ArrayIterator",(function(){return At})),n.d(i,"toUint16ArrayIterator",(function(){return Nt})),n.d(i,"toUint32ArrayIterator",(function(){return jt})),n.d(i,"toFloat32ArrayIterator",(function(){return Ht})),n.d(i,"toFloat64ArrayIterator",(function(){return Dt})),n.d(i,"toUint8ClampedArrayIterator",(function(){return Pt})),n.d(i,"toArrayBufferViewAsyncIterator",(function(){return Lt})),n.d(i,"toInt8ArrayAsyncIterator",(function(){return Ft})),n.d(i,"toInt16ArrayAsyncIterator",(function(){return Bt})),n.d(i,"toInt32ArrayAsyncIterator",(function(){return Vt})),n.d(i,"toUint8ArrayAsyncIterator",(function(){return Ut})),n.d(i,"toUint16ArrayAsyncIterator",(function(){return Wt})),n.d(i,"toUint32ArrayAsyncIterator",(function(){return zt})),n.d(i,"toFloat32ArrayAsyncIterator",(function(){return Yt})),n.d(i,"toFloat64ArrayAsyncIterator",(function(){return Gt})),n.d(i,"toUint8ClampedArrayAsyncIterator",(function(){return $t})),n.d(i,"rebaseValueOffsets",(function(){return Kt})),n.d(i,"compareArrayLike",(function(){return Xt}));var r={};n.r(r),n.d(r,"getBool",(function(){return pe})),n.d(r,"getBit",(function(){return me})),n.d(r,"setBool",(function(){return be})),n.d(r,"truncateBitmap",(function(){return ye})),n.d(r,"packBools",(function(){return we})),n.d(r,"iterateBits",(function(){return ve})),n.d(r,"popcnt_bit_range",(function(){return Ce})),n.d(r,"popcnt_array",(function(){return Se})),n.d(r,"popcnt_uint32",(function(){return Oe}));var o={};n.r(o),n.d(o,"uint16ToFloat64",(function(){return Un})),n.d(o,"float64ToUint16",(function(){return Wn}));var s={};n.r(s),n.d(s,"isArrowBigNumSymbol",(function(){return Kn})),n.d(s,"bignumToString",(function(){return ti})),n.d(s,"bignumToBigInt",(function(){return ei})),n.d(s,"BN",(function(){return ii}));var a={};n.r(a),n.d(a,"clampIndex",(function(){return Vi})),n.d(a,"clampRange",(function(){return Wi})),n.d(a,"createElementComparator",(function(){return Gi}));var l={};n.r(l),n.d(l,"BaseInt64",(function(){return oo})),n.d(l,"Uint64",(function(){return so})),n.d(l,"Int64",(function(){return ao})),n.d(l,"Int128",(function(){return lo}));var c=n(104),u=n.n(c),h=n(12),d=n.n(h);const f=new WeakMap,g=new WeakMap;function p(t){const e=f.get(t);return console.assert(null!=e,"'this' is expected an Event object, but got",t),e}function m(t){null==t.passiveListener?t.event.cancelable&&(t.canceled=!0,"function"===typeof t.event.preventDefault&&t.event.preventDefault()):"undefined"!==typeof console&&"function"===typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",t.passiveListener)}function b(t,e){f.set(this,{eventTarget:t,event:e,eventPhase:2,currentTarget:t,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:e.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});const n=Object.keys(e);for(let i=0;i<n.length;++i){const t=n[i];t in this||Object.defineProperty(this,t,y(t))}}function y(t){return{get(){return p(this).event[t]},set(e){p(this).event[t]=e},configurable:!0,enumerable:!0}}function w(t){return{value(){const e=p(this).event;return e[t].apply(e,arguments)},configurable:!0,enumerable:!0}}function v(t){if(null==t||t===Object.prototype)return b;let e=g.get(t);return null==e&&(e=function(t,e){const n=Object.keys(e);if(0===n.length)return t;function i(e,n){t.call(this,e,n)}i.prototype=Object.create(t.prototype,{constructor:{value:i,configurable:!0,writable:!0}});for(let r=0;r<n.length;++r){const o=n[r];if(!(o in t.prototype)){const t="function"===typeof Object.getOwnPropertyDescriptor(e,o).value;Object.defineProperty(i.prototype,o,t?w(o):y(o))}}return i}(v(Object.getPrototypeOf(t)),t),g.set(t,e)),e}function C(t){return p(t).immediateStopped}function S(t,e){p(t).passiveListener=e}b.prototype={get type(){return p(this).event.type},get target(){return p(this).eventTarget},get currentTarget(){return p(this).currentTarget},composedPath(){const t=p(this).currentTarget;return null==t?[]:[t]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return p(this).eventPhase},stopPropagation(){const t=p(this);t.stopped=!0,"function"===typeof t.event.stopPropagation&&t.event.stopPropagation()},stopImmediatePropagation(){const t=p(this);t.stopped=!0,t.immediateStopped=!0,"function"===typeof t.event.stopImmediatePropagation&&t.event.stopImmediatePropagation()},get bubbles(){return Boolean(p(this).event.bubbles)},get cancelable(){return Boolean(p(this).event.cancelable)},preventDefault(){m(p(this))},get defaultPrevented(){return p(this).canceled},get composed(){return Boolean(p(this).event.composed)},get timeStamp(){return p(this).timeStamp},get srcElement(){return p(this).eventTarget},get cancelBubble(){return p(this).stopped},set cancelBubble(t){if(!t)return;const e=p(this);e.stopped=!0,"boolean"===typeof e.event.cancelBubble&&(e.event.cancelBubble=!0)},get returnValue(){return!p(this).canceled},set returnValue(t){t||m(p(this))},initEvent(){}},Object.defineProperty(b.prototype,"constructor",{value:b,configurable:!0,writable:!0}),"undefined"!==typeof window&&"undefined"!==typeof window.Event&&(Object.setPrototypeOf(b.prototype,window.Event.prototype),g.set(window.Event.prototype,b));const O=new WeakMap;function T(t){return null!==t&&"object"===typeof t}function _(t){const e=O.get(t);if(null==e)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return e}function E(t,e){Object.defineProperty(t,"on"+e,function(t){return{get(){let e=_(this).get(t);for(;null!=e;){if(3===e.listenerType)return e.listener;e=e.next}return null},set(e){"function"===typeof e||T(e)||(e=null);const n=_(this);let i=null,r=n.get(t);for(;null!=r;)3===r.listenerType?null!==i?i.next=r.next:null!==r.next?n.set(t,r.next):n.delete(t):i=r,r=r.next;if(null!==e){const r={listener:e,listenerType:3,passive:!1,once:!1,next:null};null===i?n.set(t,r):i.next=r}},configurable:!0,enumerable:!0}}(e))}function R(t){function e(){M.call(this)}e.prototype=Object.create(M.prototype,{constructor:{value:e,configurable:!0,writable:!0}});for(let n=0;n<t.length;++n)E(e.prototype,t[n]);return e}function M(){if(!(this instanceof M)){if(1===arguments.length&&Array.isArray(arguments[0]))return R(arguments[0]);if(arguments.length>0){const t=new Array(arguments.length);for(let e=0;e<arguments.length;++e)t[e]=arguments[e];return R(t)}throw new TypeError("Cannot call a class as a function")}O.set(this,new Map)}M.prototype={addEventListener(t,e,n){if(null==e)return;if("function"!==typeof e&&!T(e))throw new TypeError("'listener' should be a function or an object.");const i=_(this),r=T(n),o=(r?Boolean(n.capture):Boolean(n))?1:2,s={listener:e,listenerType:o,passive:r&&Boolean(n.passive),once:r&&Boolean(n.once),next:null};let a=i.get(t);if(void 0===a)return void i.set(t,s);let l=null;for(;null!=a;){if(a.listener===e&&a.listenerType===o)return;l=a,a=a.next}l.next=s},removeEventListener(t,e,n){if(null==e)return;const i=_(this),r=(T(n)?Boolean(n.capture):Boolean(n))?1:2;let o=null,s=i.get(t);for(;null!=s;){if(s.listener===e&&s.listenerType===r)return void(null!==o?o.next=s.next:null!==s.next?i.set(t,s.next):i.delete(t));o=s,s=s.next}},dispatchEvent(t){if(null==t||"string"!==typeof t.type)throw new TypeError('"event.type" should be a string.');const e=_(this),n=t.type;let i=e.get(n);if(null==i)return!0;const r=function(t,e){return new(v(Object.getPrototypeOf(e)))(t,e)}(this,t);let o=null;for(;null!=i;){if(i.once?null!==o?o.next=i.next:null!==i.next?e.set(n,i.next):e.delete(n):o=i,S(r,i.passive?i.listener:null),"function"===typeof i.listener)try{i.listener.call(this,r)}catch(s){"undefined"!==typeof console&&"function"===typeof console.error&&console.error(s)}else 3!==i.listenerType&&"function"===typeof i.listener.handleEvent&&i.listener.handleEvent(r);if(C(r))break;i=i.next}return S(r,null),function(t,e){p(t).eventPhase=e}(r,0),function(t,e){p(t).currentTarget=e}(r,null),!r.defaultPrevented}},Object.defineProperty(M.prototype,"constructor",{value:M,configurable:!0,writable:!0}),"undefined"!==typeof window&&"undefined"!==typeof window.EventTarget&&Object.setPrototypeOf(M.prototype,window.EventTarget.prototype);var x={};function I(t,e,n){return e<=t&&t<=n}function k(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}x.Offset,x.Table,x.SIZEOF_SHORT=2,x.SIZEOF_INT=4,x.FILE_IDENTIFIER_LENGTH=4,x.Encoding={UTF8_BYTES:1,UTF16_STRING:2},x.int32=new Int32Array(2),x.float32=new Float32Array(x.int32.buffer),x.float64=new Float64Array(x.int32.buffer),x.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],x.Long=function(t,e){this.low=0|t,this.high=0|e},x.Long.create=function(t,e){return 0==t&&0==e?x.Long.ZERO:new x.Long(t,e)},x.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},x.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},x.Long.ZERO=new x.Long(0,0),x.Builder=function(t){if(t)e=t;else var e=1024;this.bb=x.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},x.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},x.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},x.Builder.prototype.dataBuffer=function(){return this.bb},x.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},x.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var n=1+~(this.bb.capacity()-this.space+e)&t-1;this.space<n+t+e;){var i=this.bb.capacity();this.bb=x.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(n)},x.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},x.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},x.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},x.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},x.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},x.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},x.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},x.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},x.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},x.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},x.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},x.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},x.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},x.Builder.prototype.addFieldInt8=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))},x.Builder.prototype.addFieldInt16=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))},x.Builder.prototype.addFieldInt32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))},x.Builder.prototype.addFieldInt64=function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))},x.Builder.prototype.addFieldFloat32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))},x.Builder.prototype.addFieldFloat64=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))},x.Builder.prototype.addFieldOffset=function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))},x.Builder.prototype.addFieldStruct=function(t,e,n){e!=n&&(this.nested(e),this.slot(t))},x.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},x.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},x.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},x.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},x.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,i=x.ByteBuffer.allocate(n);return i.setPosition(n-e),i.bytes().set(t.bytes(),n-e),i},x.Builder.prototype.addOffset=function(t){this.prep(x.SIZEOF_INT,0),this.writeInt32(this.offset()-t+x.SIZEOF_INT)},x.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},x.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var n=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var i=(n+2)*x.SIZEOF_SHORT;this.addInt16(i);var r=0,o=this.space;t:for(e=0;e<this.vtables.length;e++){var s=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(s)){for(var a=x.SIZEOF_SHORT;a<i;a+=x.SIZEOF_SHORT)if(this.bb.readInt16(o+a)!=this.bb.readInt16(s+a))continue t;r=this.vtables[e];break}}return r?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,r-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},x.Builder.prototype.finish=function(t,e){if(e){var n=e;if(this.prep(this.minalign,x.SIZEOF_INT+x.FILE_IDENTIFIER_LENGTH),n.length!=x.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+x.FILE_IDENTIFIER_LENGTH);for(var i=x.FILE_IDENTIFIER_LENGTH-1;i>=0;i--)this.writeInt8(n.charCodeAt(i))}this.prep(this.minalign,x.SIZEOF_INT),this.addOffset(t),this.bb.setPosition(this.space)},x.Builder.prototype.requiredField=function(t,e){var n=this.bb.capacity()-t,i=n-this.bb.readInt32(n);if(!(0!=this.bb.readInt16(i+e)))throw new Error("FlatBuffers: field "+e+" must be set")},x.Builder.prototype.startVector=function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(x.SIZEOF_INT,t*e),this.prep(n,t*e)},x.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},x.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var n=0;n<t.length;){var i,r=t.charCodeAt(n++);if(r<55296||r>=56320)i=r;else i=(r<<10)+t.charCodeAt(n++)+-56613888;i<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(63&i|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);n=0;for(var o=this.space,s=this.bb.bytes();n<e.length;n++)s[o++]=e[n];return this.endVector()},x.Builder.prototype.createLong=function(t,e){return x.Long.create(t,e)},x.ByteBuffer=function(t){this.bytes_=t,this.position_=0},x.ByteBuffer.allocate=function(t){return new x.ByteBuffer(new Uint8Array(t))},x.ByteBuffer.prototype.clear=function(){this.position_=0},x.ByteBuffer.prototype.bytes=function(){return this.bytes_},x.ByteBuffer.prototype.position=function(){return this.position_},x.ByteBuffer.prototype.setPosition=function(t){this.position_=t},x.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},x.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},x.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},x.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},x.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},x.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},x.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},x.ByteBuffer.prototype.readInt64=function(t){return new x.Long(this.readInt32(t),this.readInt32(t+4))},x.ByteBuffer.prototype.readUint64=function(t){return new x.Long(this.readUint32(t),this.readUint32(t+4))},x.ByteBuffer.prototype.readFloat32=function(t){return x.int32[0]=this.readInt32(t),x.float32[0]},x.ByteBuffer.prototype.readFloat64=function(t){return x.int32[x.isLittleEndian?0:1]=this.readInt32(t),x.int32[x.isLittleEndian?1:0]=this.readInt32(t+4),x.float64[0]},x.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},x.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},x.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},x.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},x.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},x.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},x.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},x.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},x.ByteBuffer.prototype.writeFloat32=function(t,e){x.float32[0]=e,this.writeInt32(t,x.int32[0])},x.ByteBuffer.prototype.writeFloat64=function(t,e){x.float64[0]=e,this.writeInt32(t,x.int32[x.isLittleEndian?0:1]),this.writeInt32(t+4,x.int32[x.isLittleEndian?1:0])},x.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+x.SIZEOF_INT+x.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<x.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+x.SIZEOF_INT+e));return t},x.ByteBuffer.prototype.__offset=function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0},x.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},x.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),i="",r=0;if(t+=x.SIZEOF_INT,e===x.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;r<n;){var o,s=this.readUint8(t+r++);if(s<192)o=s;else{var a=this.readUint8(t+r++);if(s<224)o=(31&s)<<6|63&a;else{var l=this.readUint8(t+r++);if(s<240)o=(15&s)<<12|(63&a)<<6|63&l;else o=(7&s)<<18|(63&a)<<12|(63&l)<<6|63&this.readUint8(t+r++)}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode(55296+(o>>10),56320+(1023&o)))}return i},x.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},x.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+x.SIZEOF_INT},x.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},x.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=x.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+x.FILE_IDENTIFIER_LENGTH);for(var e=0;e<x.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+x.SIZEOF_INT+e))return!1;return!0},x.ByteBuffer.prototype.createLong=function(t,e){return x.Long.create(t,e)};function A(t){this.tokens=[].slice.call(t)}A.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};function N(t,e){if(t)throw TypeError("Decoder error");return e||65533}function j(t,e){if(!(this instanceof j))return new j(t,e);if("utf-8"!==(t=void 0!==t?String(t).toLowerCase():"utf-8"))throw new Error("Encoding not supported. Only utf-8 is supported");e=k(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function H(t,e){if(!(this instanceof H))return new H(t,e);if("utf-8"!==(t=void 0!==t?String(t).toLowerCase():"utf-8"))throw new Error("Encoding not supported. Only utf-8 is supported");e=k(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function D(t){var e=t.fatal,n=0,i=0,r=0,o=128,s=191;this.handler=function(t,a){if(-1===a&&0!==r)return r=0,N(e);if(-1===a)return-1;if(0===r){if(I(a,0,127))return a;if(I(a,194,223))r=1,n=a-192;else if(I(a,224,239))224===a&&(o=160),237===a&&(s=159),r=2,n=a-224;else{if(!I(a,240,244))return N(e);240===a&&(o=144),244===a&&(s=143),r=3,n=a-240}return n<<=6*r,null}if(!I(a,o,s))return n=r=i=0,o=128,s=191,t.prepend(a),N(e);if(o=128,s=191,n+=a-128<<6*(r-(i+=1)),i!==r)return null;var l=n;return n=r=i=0,l}}function P(t){t.fatal;this.handler=function(t,e){if(-1===e)return-1;if(I(e,0,127))return e;var n,i;I(e,128,2047)?(n=1,i=192):I(e,2048,65535)?(n=2,i=224):I(e,65536,1114111)&&(n=3,i=240);for(var r=[(e>>6*n)+i];n>0;){var o=e>>6*(n-1);r.push(128|63&o),n-=1}return r}}j.prototype={decode:function(t,e){var n;n="object"===typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"===typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=k(e),this._streaming||(this._decoder=new D({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var i,r=new A(n),o=[];!r.endOfStream()&&-1!==(i=this._decoder.handler(r,r.read()));)null!==i&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));if(!this._streaming){do{if(-1===(i=this._decoder.handler(r,r.read())))break;null!==i&&(Array.isArray(i)?o.push.apply(o,i):o.push(i))}while(!r.endOfStream());this._decoder=null}return o.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===o[0]?(this._BOMseen=!0,o.shift()):this._BOMseen=!0)),function(t){for(var e="",n=0;n<t.length;++n){var i=t[n];i<=65535?e+=String.fromCharCode(i):(i-=65536,e+=String.fromCharCode(55296+(i>>10),56320+(1023&i)))}return e}(o)}},H.prototype={encode:function(t,e){t=t?String(t):"",e=k(e),this._streaming||(this._encoder=new P(this._options)),this._streaming=Boolean(e.stream);for(var n,i=[],r=new A(function(t){for(var e=String(t),n=e.length,i=0,r=[];i<n;){var o=e.charCodeAt(i);if(o<55296||o>57343)r.push(o);else if(56320<=o&&o<=57343)r.push(65533);else if(55296<=o&&o<=56319)if(i===n-1)r.push(65533);else{var s=t.charCodeAt(i+1);if(56320<=s&&s<=57343){var a=1023&o,l=1023&s;r.push(65536+(a<<10)+l),i+=1}else r.push(65533)}i+=1}return r}(t));!r.endOfStream()&&-1!==(n=this._encoder.handler(r,r.read()));)Array.isArray(n)?i.push.apply(i,n):i.push(n);if(!this._streaming){for(;-1!==(n=this._encoder.handler(r,r.read()));)Array.isArray(n)?i.push.apply(i,n):i.push(n);this._encoder=null}return new Uint8Array(i)}};const L="function"===typeof Buffer?Buffer:null,F="function"===typeof TextDecoder&&"function"===typeof TextEncoder,B=(t=>{if(F||!L){const e=new t("utf-8");return t=>e.decode(t)}return t=>{const{buffer:e,byteOffset:n,length:i}=vt(t);return L.from(e,n,i).toString()}})("undefined"!==typeof TextDecoder?TextDecoder:j),V=(t=>{if(F||!L){const e=new t;return t=>e.encode(t)}return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return vt(L.from(t,"utf8"))}})("undefined"!==typeof TextEncoder?TextEncoder:H),U=Object.freeze({done:!0,value:void 0});class W{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class z{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Y extends z{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}async cancel(t){await this.return(t)}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(U);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return qt.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return qt.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}async throw(t){return await this.abort(t),U}async return(t){return await this.close(),U}async read(t){return(await this.next(t,"read")).value}async peek(t){return(await this.next(t,"peek")).value}next(){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((t,e)=>{this.resolvers.push({resolve:t,reject:e})}):Promise.resolve(U)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error(this+" is closed")}}const[G,$]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},"undefined"!==typeof BigInt?[BigInt,!0]:[e,!1]})(),[K,X]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};return"undefined"!==typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),[q,Q]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};return"undefined"!==typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),Z=t=>"number"===typeof t,J=t=>"boolean"===typeof t,tt=t=>"function"===typeof t,et=t=>null!=t&&Object(t)===t,nt=t=>et(t)&&tt(t.then),it=t=>et(t)&&tt(t[Symbol.iterator]),rt=t=>et(t)&&tt(t[Symbol.asyncIterator]),ot=t=>et(t)&&et(t.schema),st=t=>et(t)&&"done"in t&&"value"in t,at=t=>et(t)&&tt(t.stat)&&Z(t.fd),lt=t=>et(t)&&ct(t.body),ct=t=>et(t)&&tt(t.cancel)&&tt(t.getReader)&&!(t instanceof z),ut=t=>et(t)&&tt(t.read)&&tt(t.pipe)&&J(t.readable)&&!(t instanceof z);var ht=x.ByteBuffer;const dt="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function ft(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.byteLength;const r=t.byteLength,o=new Uint8Array(t.buffer,t.byteOffset,r),s=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,r));return o.set(s,n),t}function gt(t,e){let n,i,r,o=function(t){let e,n,i,r,o=t[0]?[t[0]]:[];for(let s,a,l=0,c=0,u=t.length;++l<u;)s=o[c],a=t[l],!s||!a||s.buffer!==a.buffer||a.byteOffset<s.byteOffset?a&&(o[++c]=a):(({byteOffset:e,byteLength:i}=s),({byteOffset:n,byteLength:r}=a),e+i<n||n+r<e?a&&(o[++c]=a):o[c]=new Uint8Array(s.buffer,e,n-e+r));return o}(t),s=o.reduce((t,e)=>t+e.byteLength,0),a=0,l=-1,c=Math.min(e||1/0,s);for(let u=o.length;++l<u;){if(n=o[l],i=n.subarray(0,Math.min(n.length,c-a)),c<=a+i.length){i.length<n.length?o[l]=n.subarray(i.length):i.length===n.length&&l++,r?ft(r,i,a):r=i;break}ft(r||(r=new Uint8Array(c)),i,a),a+=i.length}return[r||new Uint8Array(0),o.slice(l),s-(r?r.byteLength:0)]}function pt(t,e){let n=st(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?("string"===typeof n&&(n=V(n)),n instanceof ArrayBuffer||n instanceof dt?new t(n):n instanceof ht?pt(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const mt=t=>pt(Int8Array,t),bt=t=>pt(Int16Array,t),yt=t=>pt(Int32Array,t),wt=t=>pt(K,t),vt=t=>pt(Uint8Array,t),Ct=t=>pt(Uint16Array,t),St=t=>pt(Uint32Array,t),Ot=t=>pt(q,t),Tt=t=>pt(Float32Array,t),_t=t=>pt(Float64Array,t),Et=t=>pt(Uint8ClampedArray,t),Rt=t=>(t.next(),t);function*Mt(t,e){const n=function*(t){yield t},i="string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof dt?n(e):it(e)?e:n(e);yield*Rt(function*(e){let n=null;do{n=e.next(yield pt(t,n))}while(!n.done)}(i[Symbol.iterator]()))}const xt=t=>Mt(Int8Array,t),It=t=>Mt(Int16Array,t),kt=t=>Mt(Int32Array,t),At=t=>Mt(Uint8Array,t),Nt=t=>Mt(Uint16Array,t),jt=t=>Mt(Uint32Array,t),Ht=t=>Mt(Float32Array,t),Dt=t=>Mt(Float64Array,t),Pt=t=>Mt(Uint8ClampedArray,t);async function*Lt(t,e){if(nt(e))return yield*Lt(t,await e);const n=async function*(t){yield await t},i="string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof dt?n(e):it(e)?async function*(t){yield*Rt(function*(t){let e=null;do{e=t.next(yield e&&e.value)}while(!e.done)}(t[Symbol.iterator]()))}(e):rt(e)?e:n(e);yield*Rt(async function*(e){let n=null;do{n=await e.next(yield pt(t,n))}while(!n.done)}(i[Symbol.asyncIterator]()))}const Ft=t=>Lt(Int8Array,t),Bt=t=>Lt(Int16Array,t),Vt=t=>Lt(Int32Array,t),Ut=t=>Lt(Uint8Array,t),Wt=t=>Lt(Uint16Array,t),zt=t=>Lt(Uint32Array,t),Yt=t=>Lt(Float32Array,t),Gt=t=>Lt(Float64Array,t),$t=t=>Lt(Uint8ClampedArray,t);function Kt(t,e,n){if(0!==t){n=n.slice(0,e+1);for(let i=-1;++i<=e;)n[i]+=t}return n}function Xt(t,e){let n=0,i=t.length;if(i!==e.length)return!1;if(i>0)do{if(t[n]!==e[n])return!1}while(++n<i);return!0}var qt={fromIterable:t=>Qt(function*(t){let e,n,i,r,o=!1,s=[],a=0;({cmd:i,size:r}=yield null);let l=At(t)[Symbol.iterator]();try{do{if(({done:e,value:n}=isNaN(r-a)?l.next(void 0):l.next(r-a)),!e&&n.byteLength>0&&(s.push(n),a+=n.byteLength),e||r<=a)do{({cmd:i,size:r}=yield"peek"===i?gt(s,r)[0]:([n,s,a]=gt(s,r),n))}while(r<a)}while(!e)}catch(c){(o=!0)&&"function"===typeof l.throw&&l.throw(c)}finally{!1===o&&"function"===typeof l.return&&l.return()}}(t)),fromAsyncIterable:t=>Qt(async function*(t){let e,n,i,r,o=!1,s=[],a=0;({cmd:i,size:r}=yield null);let l=Ut(t)[Symbol.asyncIterator]();try{do{if(({done:e,value:n}=isNaN(r-a)?await l.next(void 0):await l.next(r-a)),!e&&n.byteLength>0&&(s.push(n),a+=n.byteLength),e||r<=a)do{({cmd:i,size:r}=yield"peek"===i?gt(s,r)[0]:([n,s,a]=gt(s,r),n))}while(r<a)}while(!e)}catch(c){(o=!0)&&"function"===typeof l.throw&&await l.throw(c)}finally{!1===o&&"function"===typeof l.return&&await l.return()}}(t)),fromDOMStream:t=>Qt(async function*(t){let e,n,i,r=!1,o=!1,s=[],a=0;({cmd:n,size:i}=yield null);let l=new Zt(t);try{do{if(({done:r,value:e}=isNaN(i-a)?await l.read(void 0):await l.read(i-a)),!r&&e.byteLength>0&&(s.push(vt(e)),a+=e.byteLength),r||i<=a)do{({cmd:n,size:i}=yield"peek"===n?gt(s,i)[0]:([e,s,a]=gt(s,i),e))}while(i<a)}while(!r)}catch(c){(o=!0)&&await l.cancel(c)}finally{!1===o?await l.cancel():t.locked&&l.releaseLock()}}(t)),fromNodeStream:t=>Qt(async function*(t){let e,n,i,r=[],o="error",s=!1,a=null,l=0,c=[];if(({cmd:e,size:n}=yield null),t.isTTY)return yield new Uint8Array(0);try{r[0]=Jt(t,"end"),r[1]=Jt(t,"error");do{if(r[2]=Jt(t,"readable"),[o,a]=await Promise.race(r.map(t=>t[2])),"error"===o)break;if((s="end"===o)||(isFinite(n-l)?(i=vt(t.read(n-l)),i.byteLength<n-l&&(i=vt(t.read(void 0)))):i=vt(t.read(void 0)),i.byteLength>0&&(c.push(i),l+=i.byteLength)),s||n<=l)do{({cmd:e,size:n}=yield"peek"===e?gt(c,n)[0]:([i,c,l]=gt(c,n),i))}while(n<l)}while(!s)}finally{await function(e,n){return i=c=null,new Promise(async(i,r)=>{for(const[n,s]of e)t.off(n,s);try{const e=t.destroy;e&&e.call(t,n),n=void 0}catch(o){n=o||n}finally{null!=n?r(n):i()}})}(r,"error"===o?a:null)}}(t)),toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}};const Qt=t=>(t.next(),t);class Zt{constructor(t){this.source=t,this.byobReader=null,this.defaultReader=null;try{this.supportsBYOB=!!(this.reader=this.getBYOBReader())}catch(e){this.supportsBYOB=!(this.reader=this.getDefaultReader())}}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=this.byobReader=this.defaultReader=null}async cancel(t){const{reader:e,source:n}=this;e&&await e.cancel(t).catch(()=>{}),n&&n.locked&&this.releaseLock()}async read(t){if(0===t)return{done:null==this.reader,value:new Uint8Array(0)};const e=this.supportsBYOB&&"number"===typeof t?await this.readFromBYOBReader(t):await this.getDefaultReader().read();return!e.done&&(e.value=vt(e)),e}getDefaultReader(){return this.byobReader&&this.releaseLock(),this.defaultReader||(this.defaultReader=this.source.getReader(),this.defaultReader.closed.catch(()=>{})),this.reader=this.defaultReader}getBYOBReader(){return this.defaultReader&&this.releaseLock(),this.byobReader||(this.byobReader=this.source.getReader({mode:"byob"}),this.byobReader.closed.catch(()=>{})),this.reader=this.byobReader}async readFromBYOBReader(t){return await async function t(e,n,i,r){if(i>=r)return{done:!1,value:new Uint8Array(n,0,r)};const{done:o,value:s}=await e.read(new Uint8Array(n,i,r-i));if((i+=s.byteLength)<r&&!o)return await t(e,s.buffer,i,r);return{done:o,value:new Uint8Array(s.buffer,0,i)}}(this.getBYOBReader(),new ArrayBuffer(t),0,t)}}const Jt=(t,e)=>{let n,i=t=>n([e,t]);return[e,i,new Promise(r=>(n=r)&&t.once(e,i))]};class te{}var ee,ne,ie,re,oe;re=ee||(ee={}),ie=re.apache||(re.apache={}),function(t){let e;!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4"}(e=t.MetadataVersion||(t.MetadataVersion={}))}((ne=ie.arrow||(ie.arrow={})).flatbuf||(ne.flatbuf={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(e=t.UnionMode||(t.UnionMode={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(e=t.Precision||(t.Precision={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(e=t.DateUnit||(t.DateUnit={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(e=t.TimeUnit||(t.TimeUnit={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME"}(e=t.IntervalUnit||(t.IntervalUnit={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"}(e=t.Type||(t.Type={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"}(e=t.Endianness||(t.Endianness={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return e.startNull(t),e.endNull(t)}}t.Null=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return e.startStruct_(t),e.endStruct_(t)}}t.Struct_=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return e.startList(t),e.endList(t)}}t.List=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeList(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeList(t){t.startObject(0)}static endLargeList(t){return t.endObject()}static createLargeList(t){return e.startLargeList(t),e.endLargeList(t)}}t.LargeList=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}listSize(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return e.startFixedSizeList(t),e.addListSize(t,n),e.endFixedSizeList(t)}}t.FixedSizeList=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){let t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(t,n){return e.startMap(t),e.addKeysSorted(t,n),e.endMap(t)}}t.Map=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(e){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}mode(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.UnionMode.Sparse}typeIds(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}typeIdsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.UnionMode.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,i){return n.startUnion(t),n.addMode(t,e),n.addTypeIds(t,i),n.endUnion(t)}}e.Union=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){let t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,n,i){return e.startInt(t),e.addBitWidth(t,n),e.addIsSigned(t,i),e.endInt(t)}}t.Int=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(e){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}precision(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.Precision.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.Precision.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return n.startFloatingPoint(t),n.addPrecision(t,e),n.endFloatingPoint(t)}}e.FloatingPoint=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return e.startUtf8(t),e.endUtf8(t)}}t.Utf8=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return e.startBinary(t),e.endBinary(t)}}t.Binary=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeUtf8(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return e.startLargeUtf8(t),e.endLargeUtf8(t)}}t.LargeUtf8=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeBinary(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return e.startLargeBinary(t),e.endLargeBinary(t)}}t.LargeBinary=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return e.startFixedSizeBinary(t),e.addByteWidth(t,n),e.endFixedSizeBinary(t)}}t.FixedSizeBinary=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return e.startBool(t),e.endBool(t)}}t.Bool=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}precision(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}static startDecimal(t){t.startObject(2)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,i){return e.startDecimal(t),e.addPrecision(t,n),e.addScale(t,i),e.endDecimal(t)}}t.Decimal=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(e){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.DateUnit.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.DateUnit.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,e){return n.startDate(t),n.addUnit(t,e),n.endDate(t)}}e.Date=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(e){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.MILLISECOND}bitWidth(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.TimeUnit.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,i){return n.startTime(t),n.addUnit(t,e),n.addBitWidth(t,i),n.endTime(t)}}e.Time=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(e){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.SECOND}timezone(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.TimeUnit.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,i){return n.startTimestamp(t),n.addUnit(t,e),n.addTimezone(t,i),n.endTimestamp(t)}}e.Timestamp=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(e){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return n.startInterval(t),n.addUnit(t,e),n.endInterval(t)}}e.Interval=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(e){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDuration(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.TimeUnit.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,e){return n.startDuration(t),n.addUnit(t,e),n.endDuration(t)}}e.Duration=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}key(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,i){return e.startKeyValue(t),e.addKey(t,n),e.addValue(t,i),e.endKeyValue(t)}}t.KeyValue=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(e){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.apache.arrow.flatbuf.Int).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){let t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryEncoding(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryEncoding(t){return t.endObject()}static createDictionaryEncoding(t,e,i,r){return n.startDictionaryEncoding(t),n.addId(t,e),n.addIndexType(t,i),n.addIsOrdered(t,r),n.endDictionaryEncoding(t)}}e.DictionaryEncoding=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(e){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){let t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}typeType(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):t.apache.arrow.flatbuf.Type.NONE}type(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(e){let n=this.bb.__offset(this.bb_pos,12);return n?(e||new t.apache.arrow.flatbuf.DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(e,n){let i=this.bb.__offset(this.bb_pos,14);return i?(n||new t.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}childrenLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(e,n){let i=this.bb.__offset(this.bb_pos,16);return i?(n||new t.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(e,n){e.addFieldInt8(2,n,t.apache.arrow.flatbuf.Type.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}static createField(t,e,i,r,o,s,a,l){return n.startField(t),n.addName(t,e),n.addNullable(t,i),n.addTypeType(t,r),n.addType(t,o),n.addDictionary(t,s),n.addChildren(t,a),n.addCustomMetadata(t,l),n.endField(t)}}e.Field=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){t.Buffer=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static createBuffer(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(e){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}endianness(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.Endianness.Little}fields(e,n){let i=this.bb.__offset(this.bb_pos,6);return i?(n||new t.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}fieldsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(e,n){let i=this.bb.__offset(this.bb_pos,8);return i?(n||new t.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(3)}static addEndianness(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.Endianness.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static createSchema(t,e,i,r){return n.startSchema(t),n.addEndianness(t,e),n.addFields(t,i),n.addCustomMetadata(t,r),n.endSchema(t)}}e.Schema=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(ee||(ee={})),function(t){!function(t){!function(t){!function(t){t.Schema=ee.apache.arrow.flatbuf.Schema}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(oe||(oe={})),function(t){!function(t){!function(t){!function(t){let e;!function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(e=t.MessageHeader||(t.MessageHeader={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(oe||(oe={})),function(t){!function(t){!function(t){!function(t){t.FieldNode=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static createFieldNode(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(oe||(oe={})),function(t){!function(e){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}length(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(e,n){let i=this.bb.__offset(this.bb_pos,6);return i?(n||new t.apache.arrow.flatbuf.FieldNode).__init(this.bb.__vector(this.bb_pos+i)+16*e,this.bb):null}nodesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){let n=this.bb.__offset(this.bb_pos,8);return n?(e||new ee.apache.arrow.flatbuf.Buffer).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}buffersLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startRecordBatch(t){t.startObject(3)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static endRecordBatch(t){return t.endObject()}static createRecordBatch(t,e,i,r){return n.startRecordBatch(t),n.addLength(t,e),n.addNodes(t,i),n.addBuffers(t,r),n.endRecordBatch(t)}}e.RecordBatch=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(oe||(oe={})),function(t){!function(e){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.apache.arrow.flatbuf.RecordBatch).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){let t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}static createDictionaryBatch(t,e,i,r){return n.startDictionaryBatch(t),n.addId(t,e),n.addData(t,i),n.addIsDelta(t,r),n.endDictionaryBatch(t)}}e.DictionaryBatch=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(oe||(oe={})),function(t){!function(e){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ee.apache.arrow.flatbuf.MetadataVersion.V1}headerType(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):t.apache.arrow.flatbuf.MessageHeader.NONE}header(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){let n=this.bb.__offset(this.bb_pos,12);return n?(e||new ee.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,ee.apache.arrow.flatbuf.MetadataVersion.V1)}static addHeaderType(e,n){e.addFieldInt8(1,n,t.apache.arrow.flatbuf.MessageHeader.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static createMessage(t,e,i,r,o,s){return n.startMessage(t),n.addVersion(t,e),n.addHeaderType(t,i),n.addHeader(t,r),n.addBodyLength(t,o),n.addCustomMetadata(t,s),n.endMessage(t)}}e.Message=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(oe||(oe={}));ee.apache.arrow.flatbuf.Type;var se,ae,le=ee.apache.arrow.flatbuf.DateUnit,ce=ee.apache.arrow.flatbuf.TimeUnit,ue=ee.apache.arrow.flatbuf.Precision,he=ee.apache.arrow.flatbuf.UnionMode,de=ee.apache.arrow.flatbuf.IntervalUnit,fe=oe.apache.arrow.flatbuf.MessageHeader,ge=ee.apache.arrow.flatbuf.MetadataVersion;function pe(t,e,n,i){return 0!==(n&1<<i)}function me(t,e,n,i){return(n&1<<i)>>i}function be(t,e,n){return n?!!(t[e>>3]|=1<<e%8)||!0:!(t[e>>3]&=~(1<<e%8))&&!1}function ye(t,e,n){const i=n.byteLength+7&-8;if(t>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(t%8===0?n.subarray(t>>3):we(ve(n,t,e,null,pe)).subarray(0,i)),r}return n}function we(t){let e=[],n=0,i=0,r=0;for(const s of t)s&&(r|=1<<i),8===++i&&(e[n++]=r,r=i=0);(0===n||i>0)&&(e[n++]=r);let o=new Uint8Array(e.length+7&-8);return o.set(e),o}function*ve(t,e,n,i,r){let o=e%8,s=e>>3,a=0,l=n;for(;l>0;o=0){let e=t[s++];do{yield r(i,a++,e,o)}while(--l>0&&++o<8)}}function Ce(t,e,n){if(n-e<=0)return 0;if(n-e<8){let i=0;for(const r of ve(t,e,n-e,t,me))i+=r;return i}const i=n>>3<<3,r=e+(e%8===0?0:8-e%8);return Ce(t,e,r)+Ce(t,i,n)+Se(t,r>>3,i-r>>3)}function Se(t,e,n){let i=0,r=0|e;const o=new DataView(t.buffer,t.byteOffset,t.byteLength),s=void 0===n?t.byteLength:r+n;for(;s-r>=4;)i+=Oe(o.getUint32(r)),r+=4;for(;s-r>=2;)i+=Oe(o.getUint16(r)),r+=2;for(;s-r>=1;)i+=Oe(o.getUint8(r)),r+=1;return i}function Oe(t){let e=0|t;return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(se||(se={})),function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(ae||(ae={}));class Te{visitMany(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.map((t,e)=>this.visit(t,...n.map(t=>t[e])))}visit(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(t){return function(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=null,r=se.NONE;e instanceof vn||e instanceof te?r=_e(e.type):e instanceof Pe?r=_e(e):"number"!==typeof(r=e)&&(r=se[e]);switch(r){case se.Null:i=t.visitNull;break;case se.Bool:i=t.visitBool;break;case se.Int:i=t.visitInt;break;case se.Int8:i=t.visitInt8||t.visitInt;break;case se.Int16:i=t.visitInt16||t.visitInt;break;case se.Int32:i=t.visitInt32||t.visitInt;break;case se.Int64:i=t.visitInt64||t.visitInt;break;case se.Uint8:i=t.visitUint8||t.visitInt;break;case se.Uint16:i=t.visitUint16||t.visitInt;break;case se.Uint32:i=t.visitUint32||t.visitInt;break;case se.Uint64:i=t.visitUint64||t.visitInt;break;case se.Float:i=t.visitFloat;break;case se.Float16:i=t.visitFloat16||t.visitFloat;break;case se.Float32:i=t.visitFloat32||t.visitFloat;break;case se.Float64:i=t.visitFloat64||t.visitFloat;break;case se.Utf8:i=t.visitUtf8;break;case se.Binary:i=t.visitBinary;break;case se.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case se.Date:i=t.visitDate;break;case se.DateDay:i=t.visitDateDay||t.visitDate;break;case se.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case se.Timestamp:i=t.visitTimestamp;break;case se.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case se.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case se.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case se.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case se.Time:i=t.visitTime;break;case se.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case se.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case se.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case se.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case se.Decimal:i=t.visitDecimal;break;case se.List:i=t.visitList;break;case se.Struct:i=t.visitStruct;break;case se.Union:i=t.visitUnion;break;case se.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case se.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case se.Dictionary:i=t.visitDictionary;break;case se.Interval:i=t.visitInterval;break;case se.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case se.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case se.FixedSizeList:i=t.visitFixedSizeList;break;case se.Map:i=t.visitMap}if("function"===typeof i)return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${se[r]}'`)}(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}visitNull(t){return null}visitBool(t){return null}visitInt(t){return null}visitFloat(t){return null}visitUtf8(t){return null}visitBinary(t){return null}visitFixedSizeBinary(t){return null}visitDate(t){return null}visitTimestamp(t){return null}visitTime(t){return null}visitDecimal(t){return null}visitList(t){return null}visitStruct(t){return null}visitUnion(t){return null}visitDictionary(t){return null}visitInterval(t){return null}visitFixedSizeList(t){return null}visitMap(t){return null}}function _e(t){switch(t.typeId){case se.Null:return se.Null;case se.Int:const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?se.Int8:se.Uint8;case 16:return n?se.Int16:se.Uint16;case 32:return n?se.Int32:se.Uint32;case 64:return n?se.Int64:se.Uint64}return se.Int;case se.Float:switch(t.precision){case ue.HALF:return se.Float16;case ue.SINGLE:return se.Float32;case ue.DOUBLE:return se.Float64}return se.Float;case se.Binary:return se.Binary;case se.Utf8:return se.Utf8;case se.Bool:return se.Bool;case se.Decimal:return se.Decimal;case se.Time:switch(t.unit){case ce.SECOND:return se.TimeSecond;case ce.MILLISECOND:return se.TimeMillisecond;case ce.MICROSECOND:return se.TimeMicrosecond;case ce.NANOSECOND:return se.TimeNanosecond}return se.Time;case se.Timestamp:switch(t.unit){case ce.SECOND:return se.TimestampSecond;case ce.MILLISECOND:return se.TimestampMillisecond;case ce.MICROSECOND:return se.TimestampMicrosecond;case ce.NANOSECOND:return se.TimestampNanosecond}return se.Timestamp;case se.Date:switch(t.unit){case le.DAY:return se.DateDay;case le.MILLISECOND:return se.DateMillisecond}return se.Date;case se.Interval:switch(t.unit){case de.DAY_TIME:return se.IntervalDayTime;case de.YEAR_MONTH:return se.IntervalYearMonth}return se.Interval;case se.Map:return se.Map;case se.List:return se.List;case se.Struct:return se.Struct;case se.Union:switch(t.mode){case he.Dense:return se.DenseUnion;case he.Sparse:return se.SparseUnion}return se.Union;case se.FixedSizeBinary:return se.FixedSizeBinary;case se.FixedSizeList:return se.FixedSizeList;case se.Dictionary:return se.Dictionary}throw new Error(`Unrecognized type '${se[t.typeId]}'`)}Te.prototype.visitInt8=null,Te.prototype.visitInt16=null,Te.prototype.visitInt32=null,Te.prototype.visitInt64=null,Te.prototype.visitUint8=null,Te.prototype.visitUint16=null,Te.prototype.visitUint32=null,Te.prototype.visitUint64=null,Te.prototype.visitFloat16=null,Te.prototype.visitFloat32=null,Te.prototype.visitFloat64=null,Te.prototype.visitDateDay=null,Te.prototype.visitDateMillisecond=null,Te.prototype.visitTimestampSecond=null,Te.prototype.visitTimestampMillisecond=null,Te.prototype.visitTimestampMicrosecond=null,Te.prototype.visitTimestampNanosecond=null,Te.prototype.visitTimeSecond=null,Te.prototype.visitTimeMillisecond=null,Te.prototype.visitTimeMicrosecond=null,Te.prototype.visitTimeNanosecond=null,Te.prototype.visitDenseUnion=null,Te.prototype.visitSparseUnion=null,Te.prototype.visitIntervalDayTime=null,Te.prototype.visitIntervalYearMonth=null;class Ee extends Te{compareSchemas(t,e){return t===e||e instanceof t.constructor&&De.compareFields(t.fields,e.fields)}compareFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every((t,n)=>De.compareField(t,e[n]))}compareField(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&De.visit(t.type,e.type)}}function Re(t,e){return e instanceof t.constructor}function Me(t,e){return t===e||Re(t,e)}function xe(t,e){return t===e||Re(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function Ie(t,e){return t===e||Re(t,e)&&t.precision===e.precision}function ke(t,e){return t===e||Re(t,e)&&t.unit===e.unit}function Ae(t,e){return t===e||Re(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function Ne(t,e){return t===e||Re(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function je(t,e){return t===e||Re(t,e)&&t.mode===e.mode&&t.typeIds.every((t,n)=>t===e.typeIds[n])&&De.compareFields(t.children,e.children)}function He(t,e){return t===e||Re(t,e)&&t.unit===e.unit}Ee.prototype.visitNull=Me,Ee.prototype.visitBool=Me,Ee.prototype.visitInt=xe,Ee.prototype.visitInt8=xe,Ee.prototype.visitInt16=xe,Ee.prototype.visitInt32=xe,Ee.prototype.visitInt64=xe,Ee.prototype.visitUint8=xe,Ee.prototype.visitUint16=xe,Ee.prototype.visitUint32=xe,Ee.prototype.visitUint64=xe,Ee.prototype.visitFloat=Ie,Ee.prototype.visitFloat16=Ie,Ee.prototype.visitFloat32=Ie,Ee.prototype.visitFloat64=Ie,Ee.prototype.visitUtf8=Me,Ee.prototype.visitBinary=Me,Ee.prototype.visitFixedSizeBinary=function(t,e){return t===e||Re(t,e)&&t.byteWidth===e.byteWidth},Ee.prototype.visitDate=ke,Ee.prototype.visitDateDay=ke,Ee.prototype.visitDateMillisecond=ke,Ee.prototype.visitTimestamp=Ae,Ee.prototype.visitTimestampSecond=Ae,Ee.prototype.visitTimestampMillisecond=Ae,Ee.prototype.visitTimestampMicrosecond=Ae,Ee.prototype.visitTimestampNanosecond=Ae,Ee.prototype.visitTime=Ne,Ee.prototype.visitTimeSecond=Ne,Ee.prototype.visitTimeMillisecond=Ne,Ee.prototype.visitTimeMicrosecond=Ne,Ee.prototype.visitTimeNanosecond=Ne,Ee.prototype.visitDecimal=Me,Ee.prototype.visitList=function(t,e){return t===e||Re(t,e)&&t.children.length===e.children.length&&De.compareFields(t.children,e.children)},Ee.prototype.visitStruct=function(t,e){return t===e||Re(t,e)&&t.children.length===e.children.length&&De.compareFields(t.children,e.children)},Ee.prototype.visitUnion=je,Ee.prototype.visitDenseUnion=je,Ee.prototype.visitSparseUnion=je,Ee.prototype.visitDictionary=function(t,e){return t===e||Re(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&De.visit(t.indices,e.indices)&&De.visit(t.dictionary,e.dictionary)},Ee.prototype.visitInterval=He,Ee.prototype.visitIntervalDayTime=He,Ee.prototype.visitIntervalYearMonth=He,Ee.prototype.visitFixedSizeList=function(t,e){return t===e||Re(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&De.compareFields(t.children,e.children)},Ee.prototype.visitMap=function(t,e){return t===e||Re(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&De.compareFields(t.children,e.children)};const De=new Ee;class Pe{static isNull(t){return t&&t.typeId===se.Null}static isInt(t){return t&&t.typeId===se.Int}static isFloat(t){return t&&t.typeId===se.Float}static isBinary(t){return t&&t.typeId===se.Binary}static isUtf8(t){return t&&t.typeId===se.Utf8}static isBool(t){return t&&t.typeId===se.Bool}static isDecimal(t){return t&&t.typeId===se.Decimal}static isDate(t){return t&&t.typeId===se.Date}static isTime(t){return t&&t.typeId===se.Time}static isTimestamp(t){return t&&t.typeId===se.Timestamp}static isInterval(t){return t&&t.typeId===se.Interval}static isList(t){return t&&t.typeId===se.List}static isStruct(t){return t&&t.typeId===se.Struct}static isUnion(t){return t&&t.typeId===se.Union}static isFixedSizeBinary(t){return t&&t.typeId===se.FixedSizeBinary}static isFixedSizeList(t){return t&&t.typeId===se.FixedSizeList}static isMap(t){return t&&t.typeId===se.Map}static isDictionary(t){return t&&t.typeId===se.Dictionary}get typeId(){return se.NONE}compareTo(t){return De.visit(this,t)}}var Le;Pe[Symbol.toStringTag]=((Le=Pe.prototype).children=null,Le.ArrayType=Array,Le[Symbol.toStringTag]="DataType");class Fe extends Pe{toString(){return"Null"}get typeId(){return se.Null}}Fe[Symbol.toStringTag]=(t=>t[Symbol.toStringTag]="Null")(Fe.prototype);class Be extends Pe{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return se.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:case 64:return this.isSigned?Int32Array:Uint32Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Be[Symbol.toStringTag]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Be.prototype);class Ve extends Be{constructor(){super(!0,8)}}class Ue extends Be{constructor(){super(!0,16)}}class We extends Be{constructor(){super(!0,32)}}class ze extends Be{constructor(){super(!0,64)}}class Ye extends Be{constructor(){super(!1,8)}}class Ge extends Be{constructor(){super(!1,16)}}class $e extends Be{constructor(){super(!1,32)}}class Ke extends Be{constructor(){super(!1,64)}}Object.defineProperty(Ve.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(Ue.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(We.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(ze.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(Ye.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(Ge.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty($e.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(Ke.prototype,"ArrayType",{value:Uint32Array});class Xe extends Pe{constructor(t){super(),this.precision=t}get typeId(){return se.Float}get ArrayType(){switch(this.precision){case ue.HALF:return Uint16Array;case ue.SINGLE:return Float32Array;case ue.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return"Float"+(this.precision<<5||16)}}Xe[Symbol.toStringTag]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(Xe.prototype);class qe extends Xe{constructor(){super(ue.HALF)}}class Qe extends Xe{constructor(){super(ue.SINGLE)}}class Ze extends Xe{constructor(){super(ue.DOUBLE)}}Object.defineProperty(qe.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(Qe.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(Ze.prototype,"ArrayType",{value:Float64Array});class Je extends Pe{constructor(){super()}get typeId(){return se.Binary}toString(){return"Binary"}}Je[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(Je.prototype);class tn extends Pe{constructor(){super()}get typeId(){return se.Utf8}toString(){return"Utf8"}}tn[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(tn.prototype);class en extends Pe{constructor(){super()}get typeId(){return se.Bool}toString(){return"Bool"}}en[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(en.prototype);class nn extends Pe{constructor(t,e){super(),this.scale=t,this.precision=e}get typeId(){return se.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}nn[Symbol.toStringTag]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(nn.prototype);class rn extends Pe{constructor(t){super(),this.unit=t}get typeId(){return se.Date}toString(){return`Date${32*(this.unit+1)}<${le[this.unit]}>`}}rn[Symbol.toStringTag]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(rn.prototype);class on extends rn{constructor(){super(le.DAY)}}class sn extends rn{constructor(){super(le.MILLISECOND)}}class an extends Pe{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return se.Time}toString(){return`Time${this.bitWidth}<${ce[this.unit]}>`}}an[Symbol.toStringTag]=(t=>(t.unit=null,t.bitWidth=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Time"))(an.prototype);class ln extends Pe{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return se.Timestamp}toString(){return`Timestamp<${ce[this.unit]}${this.timezone?", "+this.timezone:""}>`}}ln[Symbol.toStringTag]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(ln.prototype);class cn extends Pe{constructor(t){super(),this.unit=t}get typeId(){return se.Interval}toString(){return`Interval<${de[this.unit]}>`}}cn[Symbol.toStringTag]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(cn.prototype);class un extends Pe{constructor(t){super(),this.children=[t]}get typeId(){return se.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}un[Symbol.toStringTag]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(un.prototype);class hn extends Pe{constructor(t){super(),this.children=t}get typeId(){return se.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}hn[Symbol.toStringTag]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(hn.prototype);class dn extends Pe{constructor(t,e,n){super(),this.mode=t,this.children=n,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce((t,e,n)=>(t[e]=n)&&t||t,Object.create(null))}get typeId(){return se.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>""+t.type).join(" | ")}>`}}dn[Symbol.toStringTag]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(dn.prototype);class fn extends Pe{constructor(t){super(),this.byteWidth=t}get typeId(){return se.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}fn[Symbol.toStringTag]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(fn.prototype);class gn extends Pe{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return se.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}gn[Symbol.toStringTag]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(gn.prototype);class pn extends Pe{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.children=[t],this.keysSorted=e}get typeId(){return se.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}pn[Symbol.toStringTag]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(pn.prototype);const mn=(bn=-1,()=>++bn);var bn;class yn extends Pe{constructor(t,e,n,i){super(),this.indices=e,this.dictionary=t,this.isOrdered=i||!1,this.id=null==n?mn():"number"===typeof n?n:n.low}get typeId(){return se.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function wn(t){let e=t;switch(t.typeId){case se.Decimal:return 4;case se.Timestamp:return 2;case se.Date:case se.Interval:return 1+e.unit;case se.Int:case se.Time:return+(e.bitWidth>32)+1;case se.FixedSizeList:return e.listSize;case se.FixedSizeBinary:return e.byteWidth;default:return 1}}yn[Symbol.toStringTag]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(yn.prototype);class vn{constructor(t,e,n,i,r,o,s){let a;this.type=t,this.dictionary=s,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1)),this.childData=(o||[]).map(t=>t instanceof vn?t:t.data),r instanceof vn?(this.stride=r.stride,this.values=r.values,this.typeIds=r.typeIds,this.nullBitmap=r.nullBitmap,this.valueOffsets=r.valueOffsets):(this.stride=wn(t),r&&((a=r[0])&&(this.valueOffsets=a),(a=r[1])&&(this.values=a),(a=r[2])&&(this.nullBitmap=a),(a=r[3])&&(this.typeIds=a)))}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0,{valueOffsets:e,values:n,nullBitmap:i,typeIds:r}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),this.childData.reduce((t,e)=>t+e.byteLength,t)}get nullCount(){let t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-Ce(t,this.offset,this.offset+this.length)),e}clone(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.offset,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._nullCount,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.childData;return new vn(t,e,n,i,r,o,this.dictionary)}slice(t,e){const{stride:n,typeId:i,childData:r}=this,o=+(0===this._nullCount)-1,s=16===i?n:1,a=this._sliceBuffers(t,e,n,i);return this.clone(this.type,this.offset+t,e,o,a,!r.length||this.valueOffsets?r:this._sliceChildren(r,s*t,s*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===se.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:n}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);i[e>>3]=(1<<e-(-8&e))-1,n>0&&i.set(ye(this.offset,e,this.nullBitmap),0);const r=this.buffers;return r[ae.VALIDITY]=i,this.clone(this.type,0,t,n+(t-e),r)}_sliceBuffers(t,e,n,i){let r,{buffers:o}=this;return(r=o[ae.TYPE])&&(o[ae.TYPE]=r.subarray(t,t+e)),(r=o[ae.OFFSET])&&(o[ae.OFFSET]=r.subarray(t,t+e+1))||(r=o[ae.DATA])&&(o[ae.DATA]=6===i?r:r.subarray(n*t,n*(t+e))),o}_sliceChildren(t,e,n){return t.map(t=>t.slice(e,n))}static new(t,e,n,i,r,o,s){switch(r instanceof vn?r=r.buffers:r||(r=[]),t.typeId){case se.Null:return vn.Null(t,e,n);case se.Int:return vn.Int(t,e,n,i||0,r[ae.VALIDITY],r[ae.DATA]||[]);case se.Dictionary:return vn.Dictionary(t,e,n,i||0,r[ae.VALIDITY],r[ae.DATA]||[],s);case se.Float:return vn.Float(t,e,n,i||0,r[ae.VALIDITY],r[ae.DATA]||[]);case se.Bool:return vn.Bool(t,e,n,i||0,r[ae.VALIDITY],r[ae.DATA]||[]);case se.Decimal:return vn.Decimal(t,e,n,i||0,r[ae.VALIDITY],r[ae.DATA]||[]);case se.Date:return vn.Date(t,e,n,i||0,r[ae.VALIDITY],r[ae.DATA]||[]);case se.Time:return vn.Time(t,e,n,i||0,r[ae.VALIDITY],r[ae.DATA]||[]);case se.Timestamp:return vn.Timestamp(t,e,n,i||0,r[ae.VALIDITY],r[ae.DATA]||[]);case se.Interval:return vn.Interval(t,e,n,i||0,r[ae.VALIDITY],r[ae.DATA]||[]);case se.FixedSizeBinary:return vn.FixedSizeBinary(t,e,n,i||0,r[ae.VALIDITY],r[ae.DATA]||[]);case se.Binary:return vn.Binary(t,e,n,i||0,r[ae.VALIDITY],r[ae.OFFSET]||[],r[ae.DATA]||[]);case se.Utf8:return vn.Utf8(t,e,n,i||0,r[ae.VALIDITY],r[ae.OFFSET]||[],r[ae.DATA]||[]);case se.List:return vn.List(t,e,n,i||0,r[ae.VALIDITY],r[ae.OFFSET]||[],(o||[])[0]);case se.FixedSizeList:return vn.FixedSizeList(t,e,n,i||0,r[ae.VALIDITY],(o||[])[0]);case se.Struct:return vn.Struct(t,e,n,i||0,r[ae.VALIDITY],o||[]);case se.Map:return vn.Map(t,e,n,i||0,r[ae.VALIDITY],r[ae.OFFSET]||[],(o||[])[0]);case se.Union:return vn.Union(t,e,n,i||0,r[ae.VALIDITY],r[ae.TYPE]||[],r[ae.OFFSET]||o,o)}throw new Error("Unrecognized typeId "+t.typeId)}static Null(t,e,n){return new vn(t,e,n,0)}static Int(t,e,n,i,r,o){return new vn(t,e,n,i,[void 0,pt(t.ArrayType,o),vt(r)])}static Dictionary(t,e,n,i,r,o,s){return new vn(t,e,n,i,[void 0,pt(t.indices.ArrayType,o),vt(r)],[],s)}static Float(t,e,n,i,r,o){return new vn(t,e,n,i,[void 0,pt(t.ArrayType,o),vt(r)])}static Bool(t,e,n,i,r,o){return new vn(t,e,n,i,[void 0,pt(t.ArrayType,o),vt(r)])}static Decimal(t,e,n,i,r,o){return new vn(t,e,n,i,[void 0,pt(t.ArrayType,o),vt(r)])}static Date(t,e,n,i,r,o){return new vn(t,e,n,i,[void 0,pt(t.ArrayType,o),vt(r)])}static Time(t,e,n,i,r,o){return new vn(t,e,n,i,[void 0,pt(t.ArrayType,o),vt(r)])}static Timestamp(t,e,n,i,r,o){return new vn(t,e,n,i,[void 0,pt(t.ArrayType,o),vt(r)])}static Interval(t,e,n,i,r,o){return new vn(t,e,n,i,[void 0,pt(t.ArrayType,o),vt(r)])}static FixedSizeBinary(t,e,n,i,r,o){return new vn(t,e,n,i,[void 0,pt(t.ArrayType,o),vt(r)])}static Binary(t,e,n,i,r,o,s){return new vn(t,e,n,i,[yt(o),vt(s),vt(r)])}static Utf8(t,e,n,i,r,o,s){return new vn(t,e,n,i,[yt(o),vt(s),vt(r)])}static List(t,e,n,i,r,o,s){return new vn(t,e,n,i,[yt(o),void 0,vt(r)],[s])}static FixedSizeList(t,e,n,i,r,o){return new vn(t,e,n,i,[void 0,void 0,vt(r)],[o])}static Struct(t,e,n,i,r,o){return new vn(t,e,n,i,[void 0,void 0,vt(r)],o)}static Map(t,e,n,i,r,o,s){return new vn(t,e,n,i,[yt(o),void 0,vt(r)],[s])}static Union(t,e,n,i,r,o,s,a){const l=[void 0,void 0,vt(r),pt(t.ArrayType,o)];return t.mode===he.Sparse?new vn(t,e,n,i,l,s):(l[ae.OFFSET]=yt(s),new vn(t,e,n,i,l,a))}}vn.prototype.childData=Object.freeze([]);function Cn(t){if(null===t)return"null";if(void 0===t)return"undefined";switch(typeof t){case"number":case"bigint":return""+t;case"string":return`"${t}"`}return"function"===typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t)}function Sn(t){if(!t||t.length<=0)return function(t){return!0};let e="",n=t.filter(t=>t===t);return n.length>0&&(e=`\n    switch (x) {${n.map(t=>`\n        case ${function(t){if("bigint"!==typeof t)return Cn(t);if($)return Cn(t)+"n";return`"${Cn(t)}"`}(t)}:`).join("")}\n            return false;\n    }`),t.length!==n.length&&(e="if (x !== x) return false;\n"+e),new Function("x",e+"\nreturn true;")}const On=(t,e)=>(t*e+63&-64||64)/e;class Tn{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.buffer=t,this.stride=e,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=t.length/e|0)}get byteLength(){return this.length*this.stride*this.BYTES_PER_ELEMENT|0}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,e){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const e=this.stride,n=this.length*e,i=this.buffer.length;n>=i&&this._resize(On(0===i?1*n:2*n,this.BYTES_PER_ELEMENT))}return this}flush(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length;t=On(t*this.stride,this.BYTES_PER_ELEMENT);const e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.length>=e?t.subarray(0,e):ft(new t.constructor(e),t,0)}(this.buffer,t);return this.clear(),e}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=ft(new this.ArrayType(t),this.buffer)}}Tn.prototype.offset=0;class _n extends Tn{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,e){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=e,this}}class En extends _n{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array(0),1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,e){const{buffer:n}=this.reserve(t-this.length+1),i=t>>3,r=t%8,o=n[i]>>r&1;return e?0===o&&(n[i]|=1<<r,++this.numValid):1===o&&(n[i]&=~(1<<r),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class Rn extends _n{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Int32Array(1),1)}append(t){return this.set(this.length-1,t)}set(t,e){const n=this.length-1,i=this.reserve(t-n+1).buffer;return n<t++&&i.fill(i[n],n,t),i[t]=i[t-1]+e,this}flush(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length-1;return t>this.length&&this.set(t-1,0),super.flush(t+1)}}class Mn extends Tn{get ArrayType64(){return this._ArrayType64||(this._ArrayType64=this.buffer instanceof Int32Array?K:q)}set(t,e){switch(this.reserve(t-this.length+1),typeof e){case"bigint":this.buffer64[t]=e;break;case"number":this.buffer[t*this.stride]=e;break;default:this.buffer.set(e,t*this.stride)}return this}_resize(t){const e=super._resize(t),n=e.byteLength/(this.BYTES_PER_ELEMENT*this.stride);return $&&(this.buffer64=new this.ArrayType64(e.buffer,e.byteOffset,n)),e}}class xn{constructor(t){let{type:e,nullValues:n}=t;this.length=0,this.finished=!1,this.type=e,this.children=[],this.nullValues=n,this.stride=wn(e),this._nulls=new En,n&&n.length>0&&(this._isValid=Sn(n))}static new(t){}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}static throughIterable(t){return function(t){const{queueingStrategy:e="count"}=t,{highWaterMark:n=("bytes"!==e?1e3:16384)}=t,i="bytes"!==e?"length":"byteLength";return function*(e){let r=0,o=xn.new(t);for(const t of e)o.append(t)[i]>=n&&++r&&(yield o.toVector());(o.finish().length>0||0===r)&&(yield o.toVector())}}(t)}static throughAsyncIterable(t){return function(t){const{queueingStrategy:e="count"}=t,{highWaterMark:n=("bytes"!==e?1e3:16384)}=t,i="bytes"!==e?"length":"byteLength";return async function*(e){let r=0,o=xn.new(t);for await(const t of e)o.append(t)[i]>=n&&++r&&(yield o.toVector());(o.finish().length>0||0===r)&&(yield o.toVector())}}(t)}toVector(){return te.new(this.flush())}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),this._typeIds&&(t+=this._typeIds.byteLength),this.children.reduce((t,e)=>t+e.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((t,e)=>t+e.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,e){return this.setValid(t,this.isValid(e))&&this.setValue(t,e),this}setValue(t,e){this._setValue(this,t,e)}setValid(t,e){return this.length=this._nulls.set(t,+e).length,e}addChild(t){arguments.length>1&&void 0!==arguments[1]||this.numChildren;throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){const t=[],e=this._values,n=this._offsets,i=this._typeIds,{length:r,nullCount:o}=this;i?(t[ae.TYPE]=i.flush(r),n&&(t[ae.OFFSET]=n.flush(r))):n?(e&&(t[ae.DATA]=e.flush(n.last())),t[ae.OFFSET]=n.flush(r)):e&&(t[ae.DATA]=e.flush(r)),o>0&&(t[ae.VALIDITY]=this._nulls.flush(r));const s=vn.new(this.type,0,r,o,t,this.children.map(t=>t.flush()));return this.clear(),s}finish(){return this.finished=!0,this.children.forEach(t=>t.finish()),this}clear(){return this.length=0,this._offsets&&this._offsets.clear(),this._values&&this._values.clear(),this._nulls&&this._nulls.clear(),this._typeIds&&this._typeIds.clear(),this.children.forEach(t=>t.clear()),this}}xn.prototype.length=1,xn.prototype.stride=1,xn.prototype.children=null,xn.prototype.finished=!1,xn.prototype.nullValues=null,xn.prototype._isValid=()=>!0;class In extends xn{constructor(t){super(t),this._values=new _n(new this.ArrayType(0),this.stride)}setValue(t,e){const n=this._values;return n.reserve(t-n.length+1),super.setValue(t,e)}}class kn extends xn{constructor(t){super(t),this._pendingLength=0,this._offsets=new Rn}setValue(t,e){const n=this._pending||(this._pending=new Map),i=n.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=e.length,n.set(t,e)}setValid(t,e){return!!super.setValid(t,e)||((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,e=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,e),this}}class An extends xn{constructor(t){super(t),this._values=new En}setValue(t,e){this._values.set(t,+e)}}class Nn extends xn{setValue(t,e){}setValid(t,e){return this.length=Math.max(t+1,this.length),e}}class jn extends In{}class Hn extends jn{}class Dn extends jn{}class Pn extends In{}class Ln extends xn{constructor(t){let{type:e,nullValues:n,dictionaryHashFunction:i}=t;super({type:new yn(e.dictionary,e.indices,e.id,e.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=xn.new({type:this.type.indices,nullValues:n}),this.dictionary=xn.new({type:this.type.dictionary,nullValues:null}),"function"===typeof i&&(this.valueToKey=i)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,e){const n=this.indices;return e=n.setValid(t,e),this.length=n.length,e}setValue(t,e){let n=this._keysToIndices,i=this.valueToKey(e),r=n[i];return void 0===r&&(n[i]=r=this._dictionaryOffset+this.dictionary.append(e).length-1),this.indices.setValue(t,r)}flush(){const t=this.type,e=this._dictionary,n=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=e?e.concat(n):n,this.finished||(this._dictionaryOffset+=n.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return"string"===typeof t?t:""+t}}class Fn extends In{}const Bn=new Float64Array(1),Vn=new Uint32Array(Bn.buffer);function Un(t){let e=(31744&t)>>10,n=(1023&t)/1024,i=(-1)**((32768&t)>>15);switch(e){case 31:return i*(n?NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*2**(e-15)*(1+n)}function Wn(t){if(t!==t)return 32256;Bn[0]=t;let e=(2147483648&Vn[1])>>16&65535,n=2146435072&Vn[1],i=0;return n>=1089470464?Vn[0]>0?n=31744:(n=(2080374784&n)>>16,i=(1048575&Vn[1])>>10):n<=1056964608?(i=1048576+(1048575&Vn[1]),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=512+(1048575&Vn[1])>>10),e|n|65535&i}class zn extends In{}class Yn extends zn{setValue(t,e){this._values.set(t,Wn(e))}}class Gn extends zn{setValue(t,e){this._values.set(t,e)}}class $n extends zn{setValue(t,e){this._values.set(t,e)}}const Kn=Symbol.for("isArrowBigNum");function Xn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return 0===n.length?Object.setPrototypeOf(pt(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...n),this.constructor.prototype)}function qn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn.apply(this,e)}function Qn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn.apply(this,e)}function Zn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn.apply(this,e)}function Jn(t){let e,n,{buffer:i,byteOffset:r,length:o,signed:s}=t,a=new Int32Array(i,r,o),l=0,c=0,u=a.length;for(;c<u;)n=a[c++],e=a[c++],s||(e>>>=0),l+=(n>>>0)+e*c**32;return l}let ti,ei;function ni(t){let e="",n=new Uint32Array(2),i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer),o=-1,s=i.length-1;do{for(n[0]=i[o=0];o<s;)i[o++]=n[1]=n[0]/10,n[0]=(n[0]-10*n[1]<<16)+i[o];i[o]=n[1]=n[0]/10,n[0]=n[0]-10*n[1],e=`${n[0]}${e}`}while(r[0]||r[1]||r[2]||r[3]);return e||"0"}Xn.prototype[Kn]=!0,Xn.prototype.toJSON=function(){return`"${ti(this)}"`},Xn.prototype.valueOf=function(){return Jn(this)},Xn.prototype.toString=function(){return ti(this)},Xn.prototype[Symbol.toPrimitive]=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";switch(t){case"number":return Jn(this);case"string":return ti(this);case"default":return ei(this)}return ti(this)},Object.setPrototypeOf(qn.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(Qn.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(Zn.prototype,Object.create(Uint32Array.prototype)),Object.assign(qn.prototype,Xn.prototype,{constructor:qn,signed:!0,TypedArray:Int32Array,BigIntArray:K}),Object.assign(Qn.prototype,Xn.prototype,{constructor:Qn,signed:!1,TypedArray:Uint32Array,BigIntArray:q}),Object.assign(Zn.prototype,Xn.prototype,{constructor:Zn,signed:!0,TypedArray:Uint32Array,BigIntArray:q}),$?(ei=t=>8===t.byteLength?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:ni(t),ti=t=>8===t.byteLength?""+new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:ni(t)):(ti=ni,ei=ti);class ii{constructor(t,e){return ii.new(t,e)}static new(t,e){switch(e){case!0:return new qn(t);case!1:return new Qn(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case K:return new qn(t)}return 16===t.byteLength?new Zn(t):new Qn(t)}static signed(t){return new qn(t)}static unsigned(t){return new Qn(t)}static decimal(t){return new Zn(t)}}class ri extends In{setValue(t,e){this._values.set(t,e)}}class oi extends ri{}class si extends ri{}class ai extends ri{}class li extends ri{constructor(t){t.nullValues&&(t.nullValues=t.nullValues.map(fi)),super(t),this._values=new Mn(new Int32Array(0),2)}get values64(){return this._values.buffer64}isValid(t){return super.isValid(fi(t))}}class ci extends ri{}class ui extends ri{}class hi extends ri{}class di extends ri{constructor(t){t.nullValues&&(t.nullValues=t.nullValues.map(fi)),super(t),this._values=new Mn(new Uint32Array(0),2)}get values64(){return this._values.buffer64}isValid(t){return super.isValid(fi(t))}}const fi=(gi={BigIntArray:K},t=>(ArrayBuffer.isView(t)&&(gi.buffer=t.buffer,gi.byteOffset=t.byteOffset,gi.byteLength=t.byteLength,t=ei(gi),gi.buffer=null),t));var gi;class pi extends In{}class mi extends pi{}class bi extends pi{}class yi extends pi{}class wi extends pi{}class vi extends In{}class Ci extends vi{}class Si extends vi{}class Oi extends vi{}class Ti extends vi{}class _i extends In{}class Ei extends _i{}class Ri extends _i{}class Mi extends kn{constructor(t){super(t),this._values=new Tn(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,vt(e))}_flushPending(t,e){const n=this._offsets,i=this._values.reserve(e).buffer;let r,o=0,s=0,a=0;for([o,r]of t)void 0===r?n.set(o,0):(s=r.length,i.set(r,a),n.set(o,s),a+=s)}}class xi extends kn{constructor(t){super(t),this._values=new Tn(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,V(e))}_flushPending(t,e){}}xi.prototype._flushPending=Mi.prototype._flushPending;class Ii{get length(){return this._values.length}get(t){return this._values[t]}clear(){return this._values=null,this}bind(t){return t instanceof te?t:(this._values=t,this)}}const ki=Symbol.for("parent"),Ai=Symbol.for("rowIndex"),Ni=Symbol.for("keyToIdx"),ji=Symbol.for("idxToVal"),Hi=Symbol.for("nodejs.util.inspect.custom");class Di{constructor(t,e){this[ki]=t,this.size=e}entries(){return this[Symbol.iterator]()}has(t){return void 0!==this.get(t)}get(t){let e=void 0;if(null!==t&&void 0!==t){const n=this[Ni]||(this[Ni]=new Map);let i=n.get(t);if(void 0!==i){const t=this[ji]||(this[ji]=new Array(this.size));void 0!==(e=t[i])||(t[i]=e=this.getValue(i))}else if((i=this.getIndex(t))>-1){n.set(t,i);const r=this[ji]||(this[ji]=new Array(this.size));void 0!==(e=r[i])||(r[i]=e=this.getValue(i))}}return e}set(t,e){if(null!==t&&void 0!==t){const n=this[Ni]||(this[Ni]=new Map);let i=n.get(t);if(void 0===i&&n.set(t,i=this.getIndex(t)),i>-1){(this[ji]||(this[ji]=new Array(this.size)))[i]=this.setValue(i,e)}}return this}clear(){throw new Error(`Clearing ${this[Symbol.toStringTag]} not supported.`)}delete(t){throw new Error(`Deleting ${this[Symbol.toStringTag]} values not supported.`)}*[Symbol.iterator](){const t=this.keys(),e=this.values(),n=this[Ni]||(this[Ni]=new Map),i=this[ji]||(this[ji]=new Array(this.size));for(let r,o,s,a,l=0;!(s=t.next()).done&&!(a=e.next()).done;++l)r=s.value,o=a.value,i[l]=o,n.has(r)||n.set(r,l),yield[r,o]}forEach(t,e){const n=this.keys(),i=this.values(),r=void 0===e?t:(n,i,r)=>t.call(e,n,i,r),o=this[Ni]||(this[Ni]=new Map),s=this[ji]||(this[ji]=new Array(this.size));for(let a,l,c,u,h=0;!(c=n.next()).done&&!(u=i.next()).done;++h)a=c.value,l=u.value,s[h]=l,o.has(a)||o.set(a,h),r(l,a,this)}toArray(){return[...this.values()]}toJSON(){const t={};return this.forEach((e,n)=>t[n]=e),t}inspect(){return this.toString()}[Hi](){return this.toString()}toString(){const t=[];return this.forEach((e,n)=>{n=Cn(n),e=Cn(e),t.push(`${n}: ${e}`)}),`{ ${t.join(", ")} }`}}Di[Symbol.toStringTag]=(t=>(Object.defineProperties(t,{size:{writable:!0,enumerable:!1,configurable:!1,value:0},[ki]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ai]:{writable:!0,enumerable:!1,configurable:!1,value:-1}}),t[Symbol.toStringTag]="Row"))(Di.prototype);class Pi extends Di{constructor(t){return super(t,t.length),Bi(this)}keys(){return this[ki].getChildAt(0)[Symbol.iterator]()}values(){return this[ki].getChildAt(1)[Symbol.iterator]()}getKey(t){return this[ki].getChildAt(0).get(t)}getIndex(t){return this[ki].getChildAt(0).indexOf(t)}getValue(t){return this[ki].getChildAt(1).get(t)}setValue(t,e){this[ki].getChildAt(1).set(t,e)}}class Li extends Di{constructor(t){return super(t,t.type.children.length),Fi(this)}*keys(){for(const t of this[ki].type.children)yield t.name}*values(){for(const t of this[ki].type.children)yield this[t.name]}getKey(t){return this[ki].type.children[t].name}getIndex(t){return this[ki].type.children.findIndex(e=>e.name===t)}getValue(t){return this[ki].getChildAt(t).get(this[Ai])}setValue(t,e){return this[ki].getChildAt(t).set(this[Ai],e)}}Object.setPrototypeOf(Di.prototype,Map.prototype);const Fi=(()=>{const t={enumerable:!0,configurable:!1,get:null,set:null};return e=>{let n=-1,i=e[Ni]||(e[Ni]=new Map);const r=t=>function(){return this.get(t)},o=t=>function(e){return this.set(t,e)};for(const s of e.keys())i.set(s,++n),t.get=r(s),t.set=o(s),e.hasOwnProperty(s)||(t.enumerable=!0,Object.defineProperty(e,s,t)),e.hasOwnProperty(n)||(t.enumerable=!1,Object.defineProperty(e,n,t));return t.get=t.set=null,e}})(),Bi=(()=>{if("undefined"===typeof Proxy)return Fi;const t=Di.prototype.has,e=Di.prototype.get,n=Di.prototype.set,i=Di.prototype.getKey,r={isExtensible:()=>!1,deleteProperty:()=>!1,preventExtensions:()=>!0,ownKeys:t=>[...t.keys()].map(t=>""+t),has(t,e){switch(e){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case ki:case Ai:case ji:case Ni:case Hi:return!0}return"number"!==typeof e||t.has(e)||(e=t.getKey(e)),t.has(e)},get(n,r,o){switch(r){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case ki:case Ai:case ji:case Ni:case Hi:return Reflect.get(n,r,o)}return"number"!==typeof r||t.call(o,r)||(r=i.call(o,r)),e.call(o,r)},set(e,r,o,s){switch(r){case ki:case Ai:case ji:case Ni:return Reflect.set(e,r,o,s);case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:return!1}return"number"!==typeof r||t.call(s,r)||(r=i.call(s,r)),!!t.call(s,r)&&!!n.call(s,r,o)}};return t=>new Proxy(t,r)})();function Vi(t,e,n){const i=t.length,r=e>-1?e:i+e%i;return n?n(t,r):r}let Ui;function Wi(t,e,n,i){let{length:r=0}=t,o="number"!==typeof e?0:e,s="number"!==typeof n?r:n;return o<0&&(o=(o%r+r)%r),s<0&&(s=(s%r+r)%r),s<o&&(Ui=o,o=s,s=Ui),s>r&&(s=r),i?i(t,o,s):[o,s]}const zi=$?G(0):0,Yi=t=>t!==t;function Gi(t){let e=typeof t;if("object"!==e||null===t)return Yi(t)?Yi:"bigint"!==e?e=>e===t:e=>zi+e===t;if(t instanceof Date){const e=t.valueOf();return t=>t instanceof Date&&t.valueOf()===e}return ArrayBuffer.isView(t)?e=>!!e&&Xt(t,e):t instanceof Map?function(t){let e=-1;const n=[];return t.forEach(t=>n[++e]=Gi(t)),$i(n)}(t):Array.isArray(t)?function(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=Gi(t[n]);return $i(e)}(t):t instanceof te?function(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=Gi(t.get(n));return $i(e)}(t):function(t){const e=Object.keys(t);if(0===e.length)return()=>!1;const n=[];for(let i=-1,r=e.length;++i<r;)n[i]=Gi(t[e[i]]);return $i(n,e)}(t)}function $i(t,e){return n=>{if(!n||"object"!==typeof n)return!1;switch(n.constructor){case Array:return function(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e[i]))return!1;return!0}(t,n);case Map:case Pi:case Li:return Ki(t,n,n.keys());case Object:case void 0:return Ki(t,n,e||Object.keys(n))}return n instanceof te&&function(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e.get(i)))return!1;return!0}(t,n)}}function Ki(t,e,n){const i=n[Symbol.iterator](),r=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),o=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let s=0,a=t.length,l=o.next(),c=i.next(),u=r.next();for(;s<a&&!c.done&&!u.done&&!l.done&&(c.value===u.value&&t[s](l.value));++s,c=i.next(),u=r.next(),l=o.next());return!!(s===a&&c.done&&u.done&&l.done)||(i.return&&i.return(),r.return&&r.return(),o.return&&o.return(),!1)}class Xi extends te{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){let e=new Uint32Array((t||[]).length+1),n=e[0]=0,i=e.length;for(let r=0;++r<i;)e[r]=n+=t[r-1].length;return e}(e);super(),this._nullCount=-1,this._type=t,this._chunks=e,this._chunkOffsets=n,this._length=n[n.length-1],this._numChildren=(this._type.children||[]).length}static flatten(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ir(te,e)}static concat(){const t=Xi.flatten(...arguments);return new Xi(t[0].type,t)}get type(){return this._type}get length(){return this._length}get chunks(){return this._chunks}get typeId(){return this._type.typeId}get VectorName(){return`Chunked<${this._type}>`}get data(){return this._chunks[0]?this._chunks[0].data:null}get ArrayType(){return this._type.ArrayType}get numChildren(){return this._numChildren}get stride(){return this._chunks[0]?this._chunks[0].stride:1}get byteLength(){return this._chunks.reduce((t,e)=>t+e.byteLength,0)}get nullCount(){let t=this._nullCount;return t<0&&(this._nullCount=t=this._chunks.reduce((t,e)=>{let{nullCount:n}=e;return t+n},0)),t}get indices(){if(Pe.isDictionary(this._type)){if(!this._indices){const t=this._chunks;this._indices=1===t.length?t[0].indices:Xi.concat(...t.map(t=>t.indices))}return this._indices}return null}get dictionary(){return Pe.isDictionary(this._type)?this._chunks[this._chunks.length-1].data.dictionary:null}*[Symbol.iterator](){for(const t of this._chunks)yield*t}clone(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._chunks;return new Xi(this._type,t)}concat(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.clone(Xi.flatten(this,...e))}slice(t,e){return Wi(this,t,e,this._sliceInternal)}getChildAt(t){if(t<0||t>=this._numChildren)return null;let e,n,i,r=this._children||(this._children=[]);return(e=r[t])?e:(n=(this._type.children||[])[t])&&(i=this._chunks.map(e=>e.getChildAt(t)).filter(t=>null!=t),i.length>0)?r[t]=new Xi(n.type,i):null}search(t,e){let n=t,i=this._chunkOffsets,r=i.length-1;if(n<0)return null;if(n>=i[r])return null;if(r<=1)return e?e(this,0,n):[0,n];let o=0,s=0,a=0;do{if(o+1===r)return e?e(this,o,n-s):[o,n-s];a=o+(r-o)/2|0,n>=i[a]?o=a:r=a}while(n<i[r]&&n>=(s=i[o]));return null}isValid(t){return!!this.search(t,this.isValidInternal)}get(t){return this.search(t,this.getInternal)}set(t,e){this.search(t,(t,n,i)=>{let{chunks:r}=t;return r[n].set(i,e)})}indexOf(t,e){return e&&"number"===typeof e?this.search(e,(e,n,i)=>this.indexOfInternal(e,n,i,t)):this.indexOfInternal(this,0,Math.max(0,e||0),t)}toArray(){const{chunks:t}=this,e=t.length;let n=this._type.ArrayType;if(e<=0)return new n(0);if(e<=1)return t[0].toArray();let i=0,r=new Array(e);for(let a=-1;++a<e;)i+=(r[a]=t[a].toArray()).length;n!==r[0].constructor&&(n=r[0].constructor);let o=new n(i),s=n===Array?Qi:qi;for(let a=-1,l=0;++a<e;)l=s(r[a],o,l);return o}getInternal(t,e,n){let{_chunks:i}=t;return i[e].get(n)}isValidInternal(t,e,n){let{_chunks:i}=t;return i[e].isValid(n)}indexOfInternal(t,e,n,i){let{_chunks:r}=t,o=e-1,s=r.length,a=n,l=0,c=-1;for(;++o<s;){if(~(c=r[o].indexOf(i,a)))return l+c;a=0,l+=r[o].length}return-1}_sliceInternal(t,e,n){const i=[],{chunks:r,_chunkOffsets:o}=t;for(let s=-1,a=r.length;++s<a;){const t=r[s],a=t.length,l=o[s];if(l>=n)break;if(e>=l+a)continue;if(l>=e&&l+a<=n){i.push(t);continue}const c=Math.max(0,e-l),u=Math.min(n-l,a);i.push(t.slice(c,u))}return t.clone(i)}}const qi=(t,e,n)=>(e.set(t,n),n+t.length),Qi=(t,e,n)=>{let i=n;for(let r=-1,o=t.length;++r<o;)e[i++]=t[r];return i};class Zi extends Xi{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(e=Xi.flatten(...e),super(t.type,e,n),this._field=t,1===e.length&&!(this instanceof Ji))return new Ji(t,e[0],this._chunkOffsets)}static new(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];const o=Xi.flatten(Array.isArray(e)?[...e,...i]:e instanceof te?[e,...i]:[te.new(e,...i)]);if("string"===typeof t){const e=o[0].data.type;t=new cr(t,e,!0)}else!t.nullable&&o.some(t=>{let{nullCount:e}=t;return e>0})&&(t=t.clone({nullable:!0}));return new Zi(t,o)}get field(){return this._field}get name(){return this._field.name}get nullable(){return this._field.nullable}get metadata(){return this._field.metadata}clone(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._chunks;return new Zi(this._field,t)}getChildAt(t){if(t<0||t>=this.numChildren)return null;let e,n,i,r=this._children||(this._children=[]);return(e=r[t])?e:(n=(this.type.children||[])[t])&&(i=this._chunks.map(e=>e.getChildAt(t)).filter(t=>null!=t),i.length>0)?r[t]=new Zi(n,i):null}}class Ji extends Zi{constructor(t,e,n){super(t,[e],n),this._chunk=e}search(t,e){return e?e(this,0,t):[0,t]}isValid(t){return this._chunk.isValid(t)}get(t){return this._chunk.get(t)}set(t,e){this._chunk.set(t,e)}indexOf(t,e){return this._chunk.indexOf(t,e)}}const tr=Array.isArray,er=(t,e)=>or(t,e,[],0),nr=t=>ar(t,[[],[]]),ir=(t,e)=>function t(e,n,i,r){let o,s=r,a=-1,l=n.length;for(;++a<l;)tr(o=n[a])?s=t(e,o,i,s).length:o instanceof Xi?s=t(e,o.chunks,i,s).length:o instanceof e&&(i[s++]=o);return i}(t,e,[],0),rr=(t,e)=>function t(e,n,i,r){let o,s=r,a=-1,l=n.length;for(;++a<l;)tr(o=n[a])?s=t(e,o,i,s).length:o instanceof e?s=or(te,o.schema.fields.map((t,e)=>o.getChildAt(e)),i,s).length:o instanceof te&&(i[s++]=o);return i}(t,e,[],0);function or(t,e,n,i){let r,o=i,s=-1,a=e.length;for(;++s<a;)tr(r=e[s])?o=or(t,r,n,o).length:r instanceof t&&(n[o++]=r);return n}const sr=(t,e,n)=>{let[i,r]=e;return t[0][n]=i,t[1][n]=r,t};function ar(t,e){let n,i;switch(i=t.length){case 0:return e;case 1:if(n=e[0],!t[0])return e;if(tr(t[0]))return ar(t[0],e);t[0]instanceof vn||t[0]instanceof te||t[0]instanceof Pe||([n,t]=Object.entries(t[0]).reduce(sr,e));break;default:tr(n=t[i-1])?t=tr(t[0])?t[0]:t.slice(0,i-1):(t=tr(t[0])?t[0]:t,n=[])}let r,o,s=-1,a=-1,l=-1,c=t.length,[u,h]=e;for(;++l<c;)o=t[l],o instanceof Zi&&(h[++a]=o)?u[++s]=o.field.clone(n[l],o.type,!0):(({[l]:r=l}=n),o instanceof Pe&&(h[++a]=o)?u[++s]=cr.new(r,o,!0):o&&o.type&&(h[++a]=o)&&(o instanceof vn&&(h[a]=o=te.new(o)),u[++s]=cr.new(r,o.type,!0)));return e}class lr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;this.fields=t||[],this.metadata=e||new Map,n||(n=hr(t)),this.dictionaries=n}static from(){return lr.new(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}static new(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new lr(nr(e)[0])}get[Symbol.toStringTag](){return"Schema"}toString(){return`Schema<{ ${this.fields.map((t,e)=>`${e}: ${t}`).join(", ")} }>`}compareTo(t){return De.compareSchemas(this,t)}select(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e.reduce((t,e)=>(t[e]=!0)&&t,Object.create(null));return new lr(this.fields.filter(t=>i[t.name]),this.metadata)}selectAt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new lr(e.map(t=>this.fields[t]).filter(Boolean),this.metadata)}assign(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e[0]instanceof lr?e[0]:new lr(er(cr,e)),r=[...this.fields],o=ur(ur(new Map,this.metadata),i.metadata),s=i.fields.filter(t=>{const e=r.findIndex(e=>e.name===t.name);return!~e||(r[e]=t.clone({metadata:ur(ur(new Map,r[e].metadata),t.metadata)}))&&!1}),a=hr(s,new Map);return new lr([...r,...s],o,new Map([...this.dictionaries,...a]))}}class cr{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;this.name=t,this.type=e,this.nullable=n,this.metadata=i||new Map}static new(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let[i,r,o,s]=e;return e[0]&&"object"===typeof e[0]&&(({name:i}=e[0]),void 0===r&&(r=e[0].type),void 0===o&&(o=e[0].nullable),void 0===s&&(s=e[0].metadata)),new cr(""+i,r,o,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}compareTo(t){return De.compareField(this,t)}clone(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let[i,r,o,s]=e;return e[0]&&"object"===typeof e[0]?({name:i=this.name,type:r=this.type,nullable:o=this.nullable,metadata:s=this.metadata}=e[0]):[i=this.name,r=this.type,o=this.nullable,s=this.metadata]=e,cr.new(i,r,o,s)}}function ur(t,e){return new Map([...t||new Map,...e||new Map])}function hr(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;for(let n=-1,i=t.length;++n<i;){const i=t[n].type;if(Pe.isDictionary(i))if(e.has(i.id)){if(e.get(i.id)!==i.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(i.id,i.dictionary);i.children&&i.children.length>0&&hr(i.children,e)}return e}lr.prototype.fields=null,lr.prototype.metadata=null,lr.prototype.dictionaries=null,cr.prototype.type=null,cr.prototype.name=null,cr.prototype.nullable=null,cr.prototype.metadata=null;class dr extends kn{constructor(t){super(t),this._run=new Ii,this._offsets=new Rn}addChild(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new un(new cr(e,t.type,!0)),this.numChildren-1}clear(){return this._run.clear(),super.clear()}_flushPending(t){const e=this._run,n=this._offsets,i=this._setValue;let r,o=0;for([o,r]of t)void 0===r?n.set(o,0):(n.set(o,r.length),i(this,o,e.bind(r)))}}class fr extends xn{constructor(){super(...arguments),this._run=new Ii}setValue(t,e){super.setValue(t,this._run.bind(e))}addChild(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const n=this.children.push(t);return this.type=new gn(this.type.listSize,new cr(e,t.type,!0)),n}clear(){return this._run.clear(),super.clear()}}class gr extends kn{set(t,e){return super.set(t,e)}setValue(t,e){e=e instanceof Map?e:new Map(Object.entries(e));const n=this._pending||(this._pending=new Map),i=n.get(t);i&&(this._pendingLength-=i.size),this._pendingLength+=e.size,n.set(t,e)}addChild(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:""+this.numChildren;if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new pn(new cr(e,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const e=this._offsets,n=this._setValue;t.forEach((t,i)=>{void 0===t?e.set(i,0):(e.set(i,t.size),n(this,i,t))})}}class pr extends xn{addChild(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:""+this.numChildren;const n=this.children.push(t);return this.type=new hn([...this.type.children,new cr(e,t.type,!0)]),n}}class mr extends xn{constructor(t){super(t),this._typeIds=new _n(new Int8Array(0),1),"function"===typeof t.valueToChildTypeId&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,e){return this.set(this.length,t,e)}set(t,e,n){return void 0===n&&(n=this._valueToChildTypeId(this,e,t)),this.setValid(t,this.isValid(e))&&this.setValue(t,e,n),this}setValue(t,e,n){this._typeIds.set(t,n),super.setValue(t,e)}addChild(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:""+this.children.length;const n=this.children.push(t),{type:{children:i,mode:r,typeIds:o}}=this,s=[...i,new cr(e,t.type)];return this.type=new dn(r,[...o,n],s),n}_valueToChildTypeId(t,e,n){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class br extends mr{}class yr extends mr{constructor(t){super(t),this._offsets=new _n(new Int32Array(0))}setValue(t,e,n){const i=this.type.typeIdToChildIndex[n];return this._offsets.set(t,this.getChildAt(i).length),super.setValue(t,e,n)}}class wr extends Te{}const vr=(t,e,n)=>{t[e]=n%4294967296|0,t[e+1]=n/4294967296|0},Cr=(t,e,n,i)=>{const{[n]:r,[n+1]:o}=e;null!=r&&null!=o&&t.set(i.subarray(0,o-r),r)},Sr=(t,e,n)=>{let{values:i}=t;((t,e,n)=>{t[e]=n/864e5|0})(i,e,n.valueOf())},Or=(t,e,n)=>{let{values:i}=t;vr(i,2*e,n.valueOf())},Tr=(t,e,n)=>{let{stride:i,values:r}=t;r[i*e]=n},_r=(t,e,n)=>{let{stride:i,values:r}=t;r[i*e]=Wn(n)},Er=(t,e,n)=>{switch(typeof n){case"bigint":t.values64[e]=n;break;case"number":t.values[e*t.stride]=n;break;default:const i=n,{stride:r,ArrayType:o}=t,s=pt(o,i);t.values.set(s.subarray(0,r),r*e)}},Rr=(t,e,n)=>{let{values:i}=t;return vr(i,2*e,n/1e3)},Mr=(t,e,n)=>{let{values:i}=t;return vr(i,2*e,n)},xr=(t,e,n)=>{let{values:i}=t;return((t,e,n)=>{t[e]=1e3*n%4294967296|0,t[e+1]=1e3*n/4294967296|0})(i,2*e,n)},Ir=(t,e,n)=>{let{values:i}=t;return((t,e,n)=>{t[e]=1e6*n%4294967296|0,t[e+1]=1e6*n/4294967296|0})(i,2*e,n)},kr=(t,e,n)=>{let{values:i,stride:r}=t;i[r*e]=n},Ar=(t,e,n)=>{let{values:i,stride:r}=t;i[r*e]=n},Nr=(t,e,n)=>{let{values:i}=t;i.set(n.subarray(0,2),2*e)},jr=(t,e,n)=>{let{values:i}=t;i.set(n.subarray(0,2),2*e)},Hr=(t,e,n)=>{const i=t.typeIdToChildIndex[t.typeIds[e]],r=t.getChildAt(i);r&&r.set(t.valueOffsets[e],n)},Dr=(t,e,n)=>{const i=t.typeIdToChildIndex[t.typeIds[e]],r=t.getChildAt(i);r&&r.set(e,n)},Pr=(t,e,n)=>{let{values:i}=t;i.set(n.subarray(0,2),2*e)},Lr=(t,e,n)=>{let{values:i}=t;i[e]=12*n[0]+n[1]%12};wr.prototype.visitBool=(t,e,n)=>{let{offset:i,values:r}=t;const o=i+e;n?r[o>>3]|=1<<o%8:r[o>>3]&=~(1<<o%8)},wr.prototype.visitInt=(t,e,n)=>{t.type.bitWidth<64?Tr(t,e,n):Er(t,e,n)},wr.prototype.visitInt8=Tr,wr.prototype.visitInt16=Tr,wr.prototype.visitInt32=Tr,wr.prototype.visitInt64=Er,wr.prototype.visitUint8=Tr,wr.prototype.visitUint16=Tr,wr.prototype.visitUint32=Tr,wr.prototype.visitUint64=Er,wr.prototype.visitFloat=(t,e,n)=>{t.type.precision!==ue.HALF?Tr(t,e,n):_r(t,e,n)},wr.prototype.visitFloat16=_r,wr.prototype.visitFloat32=Tr,wr.prototype.visitFloat64=Tr,wr.prototype.visitUtf8=(t,e,n)=>{let{values:i,valueOffsets:r}=t;Cr(i,r,e,V(n))},wr.prototype.visitBinary=(t,e,n)=>{let{values:i,valueOffsets:r}=t;return Cr(i,r,e,n)},wr.prototype.visitFixedSizeBinary=(t,e,n)=>{let{stride:i,values:r}=t;r.set(n.subarray(0,i),i*e)},wr.prototype.visitDate=(t,e,n)=>{t.type.unit===le.DAY?Sr(t,e,n):Or(t,e,n)},wr.prototype.visitDateDay=Sr,wr.prototype.visitDateMillisecond=Or,wr.prototype.visitTimestamp=(t,e,n)=>{switch(t.type.unit){case ce.SECOND:return Rr(t,e,n);case ce.MILLISECOND:return Mr(t,e,n);case ce.MICROSECOND:return xr(t,e,n);case ce.NANOSECOND:return Ir(t,e,n)}},wr.prototype.visitTimestampSecond=Rr,wr.prototype.visitTimestampMillisecond=Mr,wr.prototype.visitTimestampMicrosecond=xr,wr.prototype.visitTimestampNanosecond=Ir,wr.prototype.visitTime=(t,e,n)=>{switch(t.type.unit){case ce.SECOND:return kr(t,e,n);case ce.MILLISECOND:return Ar(t,e,n);case ce.MICROSECOND:return Nr(t,e,n);case ce.NANOSECOND:return jr(t,e,n)}},wr.prototype.visitTimeSecond=kr,wr.prototype.visitTimeMillisecond=Ar,wr.prototype.visitTimeMicrosecond=Nr,wr.prototype.visitTimeNanosecond=jr,wr.prototype.visitDecimal=(t,e,n)=>{let{values:i}=t;i.set(n.subarray(0,4),4*e)},wr.prototype.visitList=(t,e,n)=>{const i=t.getChildAt(0),r=t.valueOffsets;for(let o=-1,s=r[e],a=r[e+1];s<a;)i.set(s++,n.get(++o))},wr.prototype.visitStruct=(t,e,n)=>{const i=n instanceof Map?(r=e,o=n,(t,e,n)=>t&&t.set(r,o.get(e.name))):n instanceof te?((t,e)=>(n,i,r)=>n&&n.set(t,e.get(r)))(e,n):Array.isArray(n)?((t,e)=>(n,i,r)=>n&&n.set(t,e[r]))(e,n):((t,e)=>(n,i,r)=>n&&n.set(t,e[i.name]))(e,n);var r,o;t.type.children.forEach((e,n)=>i(t.getChildAt(n),e,n))},wr.prototype.visitUnion=(t,e,n)=>{t.type.mode===he.Dense?Hr(t,e,n):Dr(t,e,n)},wr.prototype.visitDenseUnion=Hr,wr.prototype.visitSparseUnion=Dr,wr.prototype.visitDictionary=(t,e,n)=>{const i=t.getKey(e);null!==i&&t.setValue(i,n)},wr.prototype.visitInterval=(t,e,n)=>{t.type.unit===de.DAY_TIME?Pr(t,e,n):Lr(t,e,n)},wr.prototype.visitIntervalDayTime=Pr,wr.prototype.visitIntervalYearMonth=Lr,wr.prototype.visitFixedSizeList=(t,e,n)=>{const i=t.getChildAt(0),{stride:r}=t;for(let o=-1,s=e*r;++o<r;)i.set(s+o,n.get(o))},wr.prototype.visitMap=(t,e,n)=>{const i=t.getChildAt(0),r=t.valueOffsets,o=n instanceof Map?[...n]:Object.entries(n);for(let s=-1,a=r[e],l=r[e+1];a<l;)i.set(a++,o[++s])};const Fr=new wr;const Br=new class extends Te{visitNull(){return Nn}visitBool(){return An}visitInt(){return ri}visitInt8(){return oi}visitInt16(){return si}visitInt32(){return ai}visitInt64(){return li}visitUint8(){return ci}visitUint16(){return ui}visitUint32(){return hi}visitUint64(){return di}visitFloat(){return zn}visitFloat16(){return Yn}visitFloat32(){return Gn}visitFloat64(){return $n}visitUtf8(){return xi}visitBinary(){return Mi}visitFixedSizeBinary(){return Fn}visitDate(){return jn}visitDateDay(){return Hn}visitDateMillisecond(){return Dn}visitTimestamp(){return vi}visitTimestampSecond(){return Ci}visitTimestampMillisecond(){return Si}visitTimestampMicrosecond(){return Oi}visitTimestampNanosecond(){return Ti}visitTime(){return pi}visitTimeSecond(){return mi}visitTimeMillisecond(){return bi}visitTimeMicrosecond(){return yi}visitTimeNanosecond(){return wi}visitDecimal(){return Pn}visitList(){return dr}visitStruct(){return pr}visitUnion(){return mr}visitDenseUnion(){return yr}visitSparseUnion(){return br}visitDictionary(){return Ln}visitInterval(){return _i}visitIntervalDayTime(){return Ei}visitIntervalYearMonth(){return Ri}visitFixedSizeList(){return fr}visitMap(){return gr}};var Vr;xn.new=function t(e){const n=e.type,i=new(Br.getVisitFn(n)())(e);if(n.children&&n.children.length>0){const r=e.children||[],o={nullValues:e.nullValues},s=Array.isArray(r)?(t,e)=>r[e]||o:t=>{let{name:e}=t;return r[e]||o};n.children.forEach((e,n)=>{const{type:r}=e,o=s(e,n);i.children.push(t({...o,type:r}))})}return i},Object.keys(se).map(t=>se[t]).filter(t=>"number"===typeof t&&t!==se.NONE).forEach(t=>{Br.visit(t).prototype._setValue=Fr.getVisitFn(t)}),xi.prototype._setValue=Fr.visitBinary,function(t){!function(e){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ee.apache.arrow.flatbuf.MetadataVersion.V1}schema(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new ee.apache.arrow.flatbuf.Schema).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(e,n){let i=this.bb.__offset(this.bb_pos,8);return i?(n||new t.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null}dictionariesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(e,n){let i=this.bb.__offset(this.bb_pos,10);return i?(n||new t.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null}recordBatchesLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(4)}static addVersion(t,e){t.addFieldInt16(0,e,ee.apache.arrow.flatbuf.MetadataVersion.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static createFooter(t,e,i,r,o){return n.startFooter(t),n.addVersion(t,e),n.addSchema(t,i),n.addDictionaries(t,r),n.addRecordBatches(t,o),n.endFooter(t)}}e.Footer=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(Vr||(Vr={})),function(t){!function(t){!function(t){!function(t){t.Block=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static createBlock(t,e,n,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(n),t.writeInt64(e),t.offset()}}}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(Vr||(Vr={}));var Ur=x.Long,Wr=x.Builder,zr=x.ByteBuffer,Yr=Vr.apache.arrow.flatbuf.Block,Gr=Vr.apache.arrow.flatbuf.Footer;class $r{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ge.V4,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;this.schema=t,this.version=e,n&&(this._recordBatches=n),i&&(this._dictionaryBatches=i)}static decode(t){t=new zr(vt(t));const e=Gr.getRootAsFooter(t),n=lr.decode(e.schema());return new Kr(n,e)}static encode(t){const e=new Wr,n=lr.encode(e,t.schema);Gr.startRecordBatchesVector(e,t.numRecordBatches),[...t.recordBatches()].slice().reverse().forEach(t=>Xr.encode(e,t));const i=e.endVector();Gr.startDictionariesVector(e,t.numDictionaries),[...t.dictionaryBatches()].slice().reverse().forEach(t=>Xr.encode(e,t));const r=e.endVector();return Gr.startFooter(e),Gr.addSchema(e,n),Gr.addVersion(e,ge.V4),Gr.addRecordBatches(e,i),Gr.addDictionaries(e,r),Gr.finishFooterBuffer(e,Gr.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,n=this.numRecordBatches;++e<n;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,n=this.numDictionaries;++e<n;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Kr extends $r{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return Xr.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return Xr.decode(e)}return null}}class Xr{static decode(t){return new Xr(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:n}=e,i=new Ur(e.offset,0),r=new Ur(e.bodyLength,0);return Yr.createBlock(t,i,n,r)}constructor(t,e,n){this.metaDataLength=t,this.offset="number"===typeof n?n:n.low,this.bodyLength="number"===typeof e?e:e.low}}class qr extends Y{write(t){if((t=vt(t)).byteLength>0)return super.write(t)}toString(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?B(this.toUint8Array(!0)):this.toUint8Array(!1).then(B)}toUint8Array(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?gt(this._values)[0]:(async()=>{let t=[],e=0;for await(const n of this)t.push(n),e+=n.byteLength;return gt(t,e)[0]})()}}class Qr{constructor(t){t&&(this.source=new Jr(qt.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Zr{constructor(t){t instanceof Zr?this.source=t.source:t instanceof qr?this.source=new to(qt.fromAsyncIterable(t)):ut(t)?this.source=new to(qt.fromNodeStream(t)):ct(t)?this.source=new to(qt.fromDOMStream(t)):lt(t)?this.source=new to(qt.fromDOMStream(t.body)):it(t)?this.source=new to(qt.fromIterable(t)):(nt(t)||rt(t))&&(this.source=new to(qt.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Jr{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||U)}return(t){return Object.create(this.source.return&&this.source.return(t)||U)}}class to{constructor(t){this.source=t,this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}async cancel(t){await this.return(t)}get closed(){return this._closedPromise}async read(t){return(await this.next(t,"read")).value}async peek(t){return(await this.next(t,"peek")).value}async next(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return await this.source.next({cmd:e,size:t})}async throw(t){const e=this.source.throw&&await this.source.throw(t)||U;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}async return(t){const e=this.source.return&&await this.source.return(t)||U;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}}class eo extends Qr{constructor(t,e){super(),this.position=0,this.buffer=vt(t),this.size="undefined"===typeof e?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:n}=this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:n,position:i}=this;return e&&i<n?("number"!==typeof t&&(t=1/0),this.position=Math.min(n,i+Math.min(n-i,t)),e.subarray(i,this.position)):null}readAt(t,e){const n=this.buffer,i=Math.min(this.size,t+e);return n?n.subarray(t,i):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class no extends Zr{constructor(t,e){super(),this.position=0,this._handle=t,"number"===typeof e?this.size=e:this._pending=(async()=>{this.size=(await t.stat()).size,delete this._pending})()}async readInt32(t){const{buffer:e,byteOffset:n}=await this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)}async seek(t){return this._pending&&await this._pending,this.position=Math.min(t,this.size),t<this.size}async read(t){this._pending&&await this._pending;const{_handle:e,size:n,position:i}=this;if(e&&i<n){"number"!==typeof t&&(t=1/0);let r=i,o=0,s=0,a=Math.min(n,r+Math.min(n-r,t)),l=new Uint8Array(Math.max(0,(this.position=a)-r));for(;(r+=s)<a&&(o+=s)<l.byteLength;)({bytesRead:s}=await e.read(l,o,l.byteLength-o,r));return l}return null}async readAt(t,e){this._pending&&await this._pending;const{_handle:n,size:i}=this;if(n&&t+e<i){const r=Math.min(i,t+e),o=new Uint8Array(r-t);return(await n.read(o,0,e,t)).buffer}return new Uint8Array(e)}async close(){const t=this._handle;this._handle=null,t&&await t.close()}async throw(t){return await this.close(),{done:!0,value:t}}async return(t){return await this.close(),{done:!0,value:t}}}function io(t){return t<0&&(t=4294967295+t+1),"0x"+t.toString(16)}const ro=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class oo{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),n=new Uint32Array([t.buffer[1]>>>16,65535&t.buffer[1],t.buffer[0]>>>16,65535&t.buffer[0]]);let i=e[3]*n[3];this.buffer[0]=65535&i;let r=i>>>16;return i=e[2]*n[3],r+=i,i=e[3]*n[2]>>>0,r+=i,this.buffer[0]+=r<<16,this.buffer[1]=r>>>0<i?65536:0,this.buffer[1]+=r>>>16,this.buffer[1]+=e[1]*n[3]+e[2]*n[2]+e[3]*n[1],this.buffer[1]+=e[0]*n[3]+e[1]*n[2]+e[2]*n[1]+e[3]*n[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${io(this.buffer[1])} ${io(this.buffer[0])}`}}class so extends oo{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return so.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return so.fromString(t.toString(),e)}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);const n=t.length;let i=new so(e);for(let r=0;r<n;){const e=8<n-r?8:n-r,o=new so(new Uint32Array([parseInt(t.substr(r,e),10),0])),s=new so(new Uint32Array([ro[e],0]));i.times(s),i.plus(o),r+=e}return i}static convertArray(t){const e=new Uint32Array(2*t.length);for(let n=-1,i=t.length;++n<i;)so.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new so(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new so(new Uint32Array(t.buffer)).plus(e)}}class ao extends oo{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=this.buffer[1]<<0,n=t.buffer[1]<<0;return e<n||e===n&&this.buffer[0]<t.buffer[0]}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return ao.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return ao.fromString(t.toString(),e)}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);const n=t.startsWith("-"),i=t.length;let r=new ao(e);for(let o=n?1:0;o<i;){const e=8<i-o?8:i-o,n=new ao(new Uint32Array([parseInt(t.substr(o,e),10),0])),s=new ao(new Uint32Array([ro[e],0]));r.times(s),r.plus(n),o+=e}return n?r.negate():r}static convertArray(t){const e=new Uint32Array(2*t.length);for(let n=-1,i=t.length;++n<i;)ao.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new ao(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new ao(new Uint32Array(t.buffer)).plus(e)}}class lo{constructor(t){this.buffer=t}high(){return new ao(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new ao(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(t){const e=new so(new Uint32Array([this.buffer[3],0])),n=new so(new Uint32Array([this.buffer[2],0])),i=new so(new Uint32Array([this.buffer[1],0])),r=new so(new Uint32Array([this.buffer[0],0])),o=new so(new Uint32Array([t.buffer[3],0])),s=new so(new Uint32Array([t.buffer[2],0])),a=new so(new Uint32Array([t.buffer[1],0])),l=new so(new Uint32Array([t.buffer[0],0]));let c=so.multiply(r,l);this.buffer[0]=c.low();let u=new so(new Uint32Array([c.high(),0]));return c=so.multiply(i,l),u.plus(c),c=so.multiply(r,a),u.plus(c),this.buffer[1]=u.low(),this.buffer[3]=u.lessThan(c)?1:0,this.buffer[2]=u.high(),new so(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(so.multiply(n,l)).plus(so.multiply(i,a)).plus(so.multiply(r,s)),this.buffer[3]+=so.multiply(e,l).plus(so.multiply(n,a)).plus(so.multiply(i,s)).plus(so.multiply(r,o)).low(),this}plus(t){let e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return`${io(this.buffer[3])} ${io(this.buffer[2])} ${io(this.buffer[1])} ${io(this.buffer[0])}`}static multiply(t,e){return new lo(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new lo(new Uint32Array(t.buffer)).plus(e)}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);return lo.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);return lo.fromString(t.toString(),e)}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);const n=t.startsWith("-"),i=t.length;let r=new lo(e);for(let o=n?1:0;o<i;){const e=8<i-o?8:i-o,n=new lo(new Uint32Array([parseInt(t.substr(o,e),10),0,0,0])),s=new lo(new Uint32Array([ro[e],0,0,0]));r.times(s),r.plus(n),o+=e}return n?r.negate():r}static convertArray(t){const e=new Uint32Array(4*t.length);for(let n=-1,i=t.length;++n<i;)lo.from(t[n],new Uint32Array(e.buffer,e.byteOffset+16*n,4));return e}}class co extends Te{constructor(t,e,n,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=n,this.dictionaries=i}visit(t){return super.visit(t instanceof cr?t.type:t)}visitNull(t){let{length:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.Null(t,0,e)}visitBool(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.Bool(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitInt(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.Int(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitFloat(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.Float(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitUtf8(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.Utf8(t,0,e,n,this.readNullBitmap(t,n),this.readOffsets(t),this.readData(t))}visitBinary(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.Binary(t,0,e,n,this.readNullBitmap(t,n),this.readOffsets(t),this.readData(t))}visitFixedSizeBinary(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.FixedSizeBinary(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitDate(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.Date(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitTimestamp(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.Timestamp(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitTime(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.Time(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitDecimal(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.Decimal(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitList(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.List(t,0,e,n,this.readNullBitmap(t,n),this.readOffsets(t),this.visit(t.children[0]))}visitStruct(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.Struct(t,0,e,n,this.readNullBitmap(t,n),this.visitMany(t.children))}visitUnion(t){return t.mode===he.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.Union(t,0,e,n,this.readNullBitmap(t,n),this.readTypeIds(t),this.readOffsets(t),this.visitMany(t.children))}visitSparseUnion(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.Union(t,0,e,n,this.readNullBitmap(t,n),this.readTypeIds(t),this.visitMany(t.children))}visitDictionary(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.Dictionary(t,0,e,n,this.readNullBitmap(t,n),this.readData(t.indices),this.readDictionary(t))}visitInterval(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.Interval(t,0,e,n,this.readNullBitmap(t,n),this.readData(t))}visitFixedSizeList(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.FixedSizeList(t,0,e,n,this.readNullBitmap(t,n),this.visit(t.children[0]))}visitMap(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return vn.Map(t,0,e,n,this.readNullBitmap(t,n),this.readOffsets(t),this.visit(t.children[0]))}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nextBufferRange();return e>0&&this.readData(t,n)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t){let{length:e,offset:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return this.bytes.subarray(n,n+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class uo extends co{constructor(t,e,n,i){super(new Uint8Array(0),e,n,i),this.sources=t}readNullBitmap(t,e){let{offset:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nextBufferRange();return e<=0?new Uint8Array(0):we(this.sources[n])}readOffsets(t){let{offset:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return pt(Uint8Array,pt(Int32Array,this.sources[e]))}readTypeIds(t){let{offset:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return pt(Uint8Array,pt(t.ArrayType,this.sources[e]))}readData(t){let{offset:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();const{sources:n}=this;return Pe.isTimestamp(t)||(Pe.isInt(t)||Pe.isTime(t))&&64===t.bitWidth||Pe.isDate(t)&&t.unit===le.MILLISECOND?pt(Uint8Array,ao.convertArray(n[e])):Pe.isDecimal(t)?pt(Uint8Array,lo.convertArray(n[e])):Pe.isBinary(t)||Pe.isFixedSizeBinary(t)?function(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let i=0;i<e.length;i+=2)n[i>>1]=parseInt(e.substr(i,2),16);return n}(n[e]):Pe.isBool(t)?we(n[e]):Pe.isUtf8(t)?V(n[e].join("")):pt(Uint8Array,pt(t.ArrayType,n[e].map(t=>+t)))}}var ho=x.Long,fo=ee.apache.arrow.flatbuf.Null,go=ee.apache.arrow.flatbuf.Int,po=ee.apache.arrow.flatbuf.FloatingPoint,mo=ee.apache.arrow.flatbuf.Binary,bo=ee.apache.arrow.flatbuf.Bool,yo=ee.apache.arrow.flatbuf.Utf8,wo=ee.apache.arrow.flatbuf.Decimal,vo=ee.apache.arrow.flatbuf.Date,Co=ee.apache.arrow.flatbuf.Time,So=ee.apache.arrow.flatbuf.Timestamp,Oo=ee.apache.arrow.flatbuf.Interval,To=ee.apache.arrow.flatbuf.List,_o=ee.apache.arrow.flatbuf.Struct_,Eo=ee.apache.arrow.flatbuf.Union,Ro=ee.apache.arrow.flatbuf.DictionaryEncoding,Mo=ee.apache.arrow.flatbuf.FixedSizeBinary,xo=ee.apache.arrow.flatbuf.FixedSizeList,Io=ee.apache.arrow.flatbuf.Map;const ko=new class extends Te{visit(t,e){return null==t||null==e?void 0:super.visit(t,e)}visitNull(t,e){return fo.startNull(e),fo.endNull(e)}visitInt(t,e){return go.startInt(e),go.addBitWidth(e,t.bitWidth),go.addIsSigned(e,t.isSigned),go.endInt(e)}visitFloat(t,e){return po.startFloatingPoint(e),po.addPrecision(e,t.precision),po.endFloatingPoint(e)}visitBinary(t,e){return mo.startBinary(e),mo.endBinary(e)}visitBool(t,e){return bo.startBool(e),bo.endBool(e)}visitUtf8(t,e){return yo.startUtf8(e),yo.endUtf8(e)}visitDecimal(t,e){return wo.startDecimal(e),wo.addScale(e,t.scale),wo.addPrecision(e,t.precision),wo.endDecimal(e)}visitDate(t,e){return vo.startDate(e),vo.addUnit(e,t.unit),vo.endDate(e)}visitTime(t,e){return Co.startTime(e),Co.addUnit(e,t.unit),Co.addBitWidth(e,t.bitWidth),Co.endTime(e)}visitTimestamp(t,e){const n=t.timezone&&e.createString(t.timezone)||void 0;return So.startTimestamp(e),So.addUnit(e,t.unit),void 0!==n&&So.addTimezone(e,n),So.endTimestamp(e)}visitInterval(t,e){return Oo.startInterval(e),Oo.addUnit(e,t.unit),Oo.endInterval(e)}visitList(t,e){return To.startList(e),To.endList(e)}visitStruct(t,e){return _o.startStruct_(e),_o.endStruct_(e)}visitUnion(t,e){Eo.startTypeIdsVector(e,t.typeIds.length);const n=Eo.createTypeIdsVector(e,t.typeIds);return Eo.startUnion(e),Eo.addMode(e,t.mode),Eo.addTypeIds(e,n),Eo.endUnion(e)}visitDictionary(t,e){const n=this.visit(t.indices,e);return Ro.startDictionaryEncoding(e),Ro.addId(e,new ho(t.id,0)),Ro.addIsOrdered(e,t.isOrdered),void 0!==n&&Ro.addIndexType(e,n),Ro.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return Mo.startFixedSizeBinary(e),Mo.addByteWidth(e,t.byteWidth),Mo.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return xo.startFixedSizeList(e),xo.addListSize(e,t.listSize),xo.endFixedSizeList(e)}visitMap(t,e){return Io.startMap(e),Io.addKeysSorted(e,t.keysSorted),Io.endMap(e)}};function Ao(t){return new Zo(t.count,function t(e){return(e||[]).reduce((e,n)=>{return[...e,new es(n.count,(i=n.VALIDITY,(i||[]).reduce((t,e)=>t+ +(0===e),0))),...t(n.children)];var i},[])}(t.columns),function t(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let i=-1,r=(e||[]).length;++i<r;){const r=e[i];r.VALIDITY&&n.push(new ts(n.length,r.VALIDITY.length)),r.TYPE&&n.push(new ts(n.length,r.TYPE.length)),r.OFFSET&&n.push(new ts(n.length,r.OFFSET.length)),r.DATA&&n.push(new ts(n.length,r.DATA.length)),n=t(r.children,n)}return n}(t.columns))}function No(t,e){return(t.fields||[]).filter(Boolean).map(t=>cr.fromJSON(t,e))}function jo(t,e){return(t.children||[]).filter(Boolean).map(t=>cr.fromJSON(t,e))}function Ho(t){return new Map(Object.entries(t||{}))}function Do(t){return new Be(t.isSigned,t.bitWidth)}function Po(t,e){const n=t.type.name;switch(n){case"NONE":case"null":return new Fe;case"binary":return new Je;case"utf8":return new tn;case"bool":return new en;case"list":return new un((e||[])[0]);case"struct":case"struct_":return new hn(e||[])}switch(n){case"int":{const e=t.type;return new Be(e.isSigned,e.bitWidth)}case"floatingpoint":{const e=t.type;return new Xe(ue[e.precision])}case"decimal":{const e=t.type;return new nn(e.scale,e.precision)}case"date":{const e=t.type;return new rn(le[e.unit])}case"time":{const e=t.type;return new an(ce[e.unit],e.bitWidth)}case"timestamp":{const e=t.type;return new ln(ce[e.unit],e.timezone)}case"interval":{const e=t.type;return new cn(de[e.unit])}case"union":{const n=t.type;return new dn(he[n.mode],n.typeIds||[],e||[])}case"fixedsizebinary":{const e=t.type;return new fn(e.byteWidth)}case"fixedsizelist":{const n=t.type;return new gn(n.listSize,(e||[])[0])}case"map":{const n=t.type;return new pn((e||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var Lo=x.Long,Fo=x.Builder,Bo=x.ByteBuffer,Vo=ee.apache.arrow.flatbuf.Type,Uo=ee.apache.arrow.flatbuf.Field,Wo=ee.apache.arrow.flatbuf.Schema,zo=ee.apache.arrow.flatbuf.Buffer,Yo=oe.apache.arrow.flatbuf.Message,Go=ee.apache.arrow.flatbuf.KeyValue,$o=oe.apache.arrow.flatbuf.FieldNode,Ko=ee.apache.arrow.flatbuf.Endianness,Xo=oe.apache.arrow.flatbuf.RecordBatch,qo=oe.apache.arrow.flatbuf.DictionaryBatch;class Qo{constructor(t,e,n,i){this._version=e,this._headerType=n,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength="number"===typeof t?t:t.low}static fromJSON(t,e){const n=new Qo(0,ge.V4,e);return n._createHeader=function(t,e){return()=>{switch(e){case fe.Schema:return lr.fromJSON(t);case fe.RecordBatch:return Zo.fromJSON(t);case fe.DictionaryBatch:return Jo.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${fe[e]}, type: ${e} }`)}}(t,e),n}static decode(t){t=new Bo(vt(t));const e=Yo.getRootAsMessage(t),n=e.bodyLength(),i=e.version(),r=e.headerType(),o=new Qo(n,i,r);return o._createHeader=function(t,e){return()=>{switch(e){case fe.Schema:return lr.decode(t.header(new Wo));case fe.RecordBatch:return Zo.decode(t.header(new Xo),t.version());case fe.DictionaryBatch:return Jo.decode(t.header(new qo),t.version())}throw new Error(`Unrecognized Message type: { name: ${fe[e]}, type: ${e} }`)}}(e,r),o}static encode(t){let e=new Fo,n=-1;return t.isSchema()?n=lr.encode(e,t.header()):t.isRecordBatch()?n=Zo.encode(e,t.header()):t.isDictionaryBatch()&&(n=Jo.encode(e,t.header())),Yo.startMessage(e),Yo.addVersion(e,ge.V4),Yo.addHeader(e,n),Yo.addHeaderType(e,t.headerType),Yo.addBodyLength(e,new Lo(t.bodyLength,0)),Yo.finishMessageBuffer(e,Yo.endMessage(e)),e.asUint8Array()}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t instanceof lr)return new Qo(0,ge.V4,fe.Schema,t);if(t instanceof Zo)return new Qo(e,ge.V4,fe.RecordBatch,t);if(t instanceof Jo)return new Qo(e,ge.V4,fe.DictionaryBatch,t);throw new Error("Unrecognized Message header: "+t)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===fe.Schema}isRecordBatch(){return this.headerType===fe.RecordBatch}isDictionaryBatch(){return this.headerType===fe.DictionaryBatch}}class Zo{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,e,n){this._nodes=e,this._buffers=n,this._length="number"===typeof t?t:t.low}}class Jo{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._data=t,this._isDelta=n,this._id="number"===typeof e?e:e.low}}class ts{constructor(t,e){this.offset="number"===typeof t?t:t.low,this.length="number"===typeof e?e:e.low}}class es{constructor(t,e){this.length="number"===typeof t?t:t.low,this.nullCount="number"===typeof e?e:e.low}}function ns(t){const e=[];for(let n,i=-1,r=-1,o=t.nodesLength();++i<o;)(n=t.nodes(i))&&(e[++r]=es.decode(n));return e}function is(t,e){const n=[];for(let i,r=-1,o=-1,s=t.buffersLength();++r<s;)(i=t.buffers(r))&&(e<ge.V4&&(i.bb_pos+=8*(r+1)),n[++o]=ts.decode(i));return n}function rs(t,e){const n=[];for(let i,r=-1,o=-1,s=t.fieldsLength();++r<s;)(i=t.fields(r))&&(n[++o]=cr.decode(i,e));return n}function os(t,e){const n=[];for(let i,r=-1,o=-1,s=t.childrenLength();++r<s;)(i=t.children(r))&&(n[++o]=cr.decode(i,e));return n}function ss(t){const e=new Map;if(t)for(let n,i,r=-1,o=0|t.customMetadataLength();++r<o;)(n=t.customMetadata(r))&&null!=(i=n.key())&&e.set(i,n.value());return e}function as(t){return new Be(t.isSigned(),t.bitWidth())}function ls(t,e){const n=t.typeType();switch(n){case Vo.NONE:case Vo.Null:return new Fe;case Vo.Binary:return new Je;case Vo.Utf8:return new tn;case Vo.Bool:return new en;case Vo.List:return new un((e||[])[0]);case Vo.Struct_:return new hn(e||[])}switch(n){case Vo.Int:{const e=t.type(new ee.apache.arrow.flatbuf.Int);return new Be(e.isSigned(),e.bitWidth())}case Vo.FloatingPoint:{const e=t.type(new ee.apache.arrow.flatbuf.FloatingPoint);return new Xe(e.precision())}case Vo.Decimal:{const e=t.type(new ee.apache.arrow.flatbuf.Decimal);return new nn(e.scale(),e.precision())}case Vo.Date:{const e=t.type(new ee.apache.arrow.flatbuf.Date);return new rn(e.unit())}case Vo.Time:{const e=t.type(new ee.apache.arrow.flatbuf.Time);return new an(e.unit(),e.bitWidth())}case Vo.Timestamp:{const e=t.type(new ee.apache.arrow.flatbuf.Timestamp);return new ln(e.unit(),e.timezone())}case Vo.Interval:{const e=t.type(new ee.apache.arrow.flatbuf.Interval);return new cn(e.unit())}case Vo.Union:{const n=t.type(new ee.apache.arrow.flatbuf.Union);return new dn(n.mode(),n.typeIdsArray()||[],e||[])}case Vo.FixedSizeBinary:{const e=t.type(new ee.apache.arrow.flatbuf.FixedSizeBinary);return new fn(e.byteWidth())}case Vo.FixedSizeList:{const n=t.type(new ee.apache.arrow.flatbuf.FixedSizeList);return new gn(n.listSize(),(e||[])[0])}case Vo.Map:{const n=t.type(new ee.apache.arrow.flatbuf.Map);return new pn((e||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${Vo[n]}" (${n})`)}cr.encode=function(t,e){let n=-1,i=-1,r=-1,o=e.type,s=e.typeId;Pe.isDictionary(o)?(s=o.dictionary.typeId,r=ko.visit(o,t),i=ko.visit(o.dictionary,t)):i=ko.visit(o,t);const a=(o.children||[]).map(e=>cr.encode(t,e)),l=Uo.createChildrenVector(t,a),c=e.metadata&&e.metadata.size>0?Uo.createCustomMetadataVector(t,[...e.metadata].map(e=>{let[n,i]=e;const r=t.createString(""+n),o=t.createString(""+i);return Go.startKeyValue(t),Go.addKey(t,r),Go.addValue(t,o),Go.endKeyValue(t)})):-1;e.name&&(n=t.createString(e.name));Uo.startField(t),Uo.addType(t,i),Uo.addTypeType(t,s),Uo.addChildren(t,l),Uo.addNullable(t,!!e.nullable),-1!==n&&Uo.addName(t,n);-1!==r&&Uo.addDictionary(t,r);-1!==c&&Uo.addCustomMetadata(t,c);return Uo.endField(t)},cr.decode=function(t,e){let n,i,r,o,s,a;e&&(a=t.dictionary())?e.has(n=a.id().low)?(o=(o=a.indexType())?as(o):new We,s=new yn(e.get(n),o,n,a.isOrdered()),i=new cr(t.name(),s,t.nullable(),ss(t))):(o=(o=a.indexType())?as(o):new We,e.set(n,r=ls(t,os(t,e))),s=new yn(r,o,n,a.isOrdered()),i=new cr(t.name(),s,t.nullable(),ss(t))):(r=ls(t,os(t,e)),i=new cr(t.name(),r,t.nullable(),ss(t)));return i||null},cr.fromJSON=function(t,e){let n,i,r,o,s,a;return e&&(o=t.dictionary)?e.has(n=o.id)?(i=(i=o.indexType)?Do(i):new We,a=new yn(e.get(n),i,n,o.isOrdered),r=new cr(t.name,a,t.nullable,Ho(t.customMetadata))):(i=(i=o.indexType)?Do(i):new We,e.set(n,s=Po(t,jo(t,e))),a=new yn(s,i,n,o.isOrdered),r=new cr(t.name,a,t.nullable,Ho(t.customMetadata))):(s=Po(t,jo(t,e)),r=new cr(t.name,s,t.nullable,Ho(t.customMetadata))),r||null},lr.encode=function(t,e){const n=e.fields.map(e=>cr.encode(t,e));Wo.startFieldsVector(t,n.length);const i=Wo.createFieldsVector(t,n),r=e.metadata&&e.metadata.size>0?Wo.createCustomMetadataVector(t,[...e.metadata].map(e=>{let[n,i]=e;const r=t.createString(""+n),o=t.createString(""+i);return Go.startKeyValue(t),Go.addKey(t,r),Go.addValue(t,o),Go.endKeyValue(t)})):-1;Wo.startSchema(t),Wo.addFields(t,i),Wo.addEndianness(t,cs?Ko.Little:Ko.Big),-1!==r&&Wo.addCustomMetadata(t,r);return Wo.endSchema(t)},lr.decode=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;const n=rs(t,e);return new lr(n,ss(t),e)},lr.fromJSON=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;return new lr(No(t,e),Ho(t.customMetadata),e)},Zo.encode=function(t,e){const n=e.nodes||[],i=e.buffers||[];Xo.startNodesVector(t,n.length),n.slice().reverse().forEach(e=>es.encode(t,e));const r=t.endVector();Xo.startBuffersVector(t,i.length),i.slice().reverse().forEach(e=>ts.encode(t,e));const o=t.endVector();return Xo.startRecordBatch(t),Xo.addLength(t,new Lo(e.length,0)),Xo.addNodes(t,r),Xo.addBuffers(t,o),Xo.endRecordBatch(t)},Zo.decode=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ge.V4;return new Zo(t.length(),ns(t),is(t,e))},Zo.fromJSON=Ao,Jo.encode=function(t,e){const n=Zo.encode(t,e.data);return qo.startDictionaryBatch(t),qo.addId(t,new Lo(e.id,0)),qo.addIsDelta(t,e.isDelta),qo.addData(t,n),qo.endDictionaryBatch(t)},Jo.decode=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ge.V4;return new Jo(Zo.decode(t.data(),e),t.id(),t.isDelta())},Jo.fromJSON=function(t){return new Jo(Ao(t.data),t.id,t.isDelta)},es.encode=function(t,e){return $o.createFieldNode(t,new Lo(e.length,0),new Lo(e.nullCount,0))},es.decode=function(t){return new es(t.length(),t.nullCount())},ts.encode=function(t,e){return zo.createBuffer(t,new Lo(e.offset,0),new Lo(e.length,0))},ts.decode=function(t){return new ts(t.offset(),t.length())};const cs=function(){const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]}();var us=x.ByteBuffer;const hs=t=>`Expected ${fe[t]} Message in stream, but was null or length 0.`,ds=t=>`Header pointer of flatbuffer-encoded ${fe[t]} Message is null or length 0.`,fs=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,gs=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class ps{constructor(t){this.source=t instanceof Qr?t:new Qr(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||-1===t.value&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?U:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(hs(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=vt(this.source.read(t));if(e.byteLength<t)throw new Error(gs(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=fe.Schema,n=this.readMessage(e),i=n&&n.header();if(t&&!i)throw new Error(ds(e));return i}readMetadataLength(){const t=this.source.read(ys),e=t&&new us(t),n=e&&e.readInt32(0)||0;return{done:0===n,value:n}}readMetadata(t){const e=this.source.read(t);if(!e)return U;if(e.byteLength<t)throw new Error(fs(t,e.byteLength));return{done:!1,value:Qo.decode(e)}}}class ms{constructor(t,e){this.source=t instanceof Zr?t:at(t)?new no(t,e):new Zr(t)}[Symbol.asyncIterator](){return this}async next(){let t;return(t=await this.readMetadataLength()).done||-1===t.value&&(t=await this.readMetadataLength()).done||(t=await this.readMetadata(t.value)).done?U:t}async throw(t){return await this.source.throw(t)}async return(t){return await this.source.return(t)}async readMessage(t){let e;if((e=await this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(hs(t));return e.value}async readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=vt(await this.source.read(t));if(e.byteLength<t)throw new Error(gs(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}async readSchema(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=fe.Schema,n=await this.readMessage(e),i=n&&n.header();if(t&&!i)throw new Error(ds(e));return i}async readMetadataLength(){const t=await this.source.read(ys),e=t&&new us(t),n=e&&e.readInt32(0)||0;return{done:0===n,value:n}}async readMetadata(t){const e=await this.source.read(t);if(!e)return U;if(e.byteLength<t)throw new Error(fs(t,e.byteLength));return{done:!1,value:Qo.decode(e)}}}class bs extends ps{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof W?t:new W(t)}next(){const{_json:t}=this;if(!this._schema){this._schema=!0;return{done:!1,value:Qo.fromJSON(t.schema,fe.Schema)}}if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];this._body=e.data.columns;return{done:!1,value:Qo.fromJSON(e,fe.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];this._body=e.columns;return{done:!1,value:Qo.fromJSON(e,fe.RecordBatch)}}return this._body=[],U}readMessageBody(t){return function t(e){return(e||[]).reduce((e,n)=>[...e,...n.VALIDITY&&[n.VALIDITY]||[],...n.TYPE&&[n.TYPE]||[],...n.OFFSET&&[n.OFFSET]||[],...n.DATA&&[n.DATA]||[],...t(n.children)],[])}(this._body)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(hs(t));return e.value}readSchema(){const t=fe.Schema,e=this.readMessage(t),n=e&&e.header();if(!e||!n)throw new Error(ds(t));return n}}const ys=4,ws=new Uint8Array("ARROW1".length);for(let uc=0;uc<"ARROW1".length;uc+=1)ws[uc]="ARROW1".charCodeAt(uc);function vs(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=-1,i=ws.length;++n<i;)if(ws[n]!==t[e+n])return!1;return!0}const Cs=ws.length,Ss=Cs+ys,Os=2*Cs+ys;class Ts extends Te{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(){const t=new Ts;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=rr(Sl,n),[o=t]=t.visitMany(r);return o}visit(t){if(!Pe.isDictionary(t.type)){const{data:e,length:n,nullCount:i}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Pe.isNull(t.type)||_s.call(this,i<=0?new Uint8Array(0):ye(e.offset,n,e.nullBitmap)),this.nodes.push(new es(n,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.indices)}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function _s(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new ts(this._byteLength,e)),this._byteLength+=e,this}function Es(t){return _s.call(this,t.values.subarray(0,t.length*t.stride))}function Rs(t){const{length:e,values:n,valueOffsets:i}=t,r=i[0],o=i[e],s=Math.min(o-r,n.byteLength-r);return _s.call(this,Kt(-i[0],e,i)),_s.call(this,n.subarray(r,r+s)),this}function Ms(t){const{length:e,valueOffsets:n}=t;return n&&_s.call(this,Kt(n[0],e,n)),this.visit(t.getChildAt(0))}function xs(t){return this.visitMany(t.type.children.map((e,n)=>t.getChildAt(n)).filter(Boolean))[0]}Ts.prototype.visitBool=function(t){let e;return t.nullCount>=t.length?_s.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?_s.call(this,ye(t.offset,t.length,e)):_s.call(this,we(t))},Ts.prototype.visitInt=Es,Ts.prototype.visitFloat=Es,Ts.prototype.visitUtf8=Rs,Ts.prototype.visitBinary=Rs,Ts.prototype.visitFixedSizeBinary=Es,Ts.prototype.visitDate=Es,Ts.prototype.visitTimestamp=Es,Ts.prototype.visitTime=Es,Ts.prototype.visitDecimal=Es,Ts.prototype.visitList=Ms,Ts.prototype.visitStruct=xs,Ts.prototype.visitUnion=function(t){const{type:e,length:n,typeIds:i,valueOffsets:r}=t;if(_s.call(this,i),e.mode===he.Sparse)return xs.call(this,t);if(e.mode===he.Dense){if(t.offset<=0)return _s.call(this,r),xs.call(this,t);{const o=i.reduce((t,e)=>Math.max(t,e),i[0]),s=new Int32Array(o+1),a=new Int32Array(o+1).fill(-1),l=new Int32Array(n),c=Kt(-r[0],n,r);for(let t,e,r=-1;++r<n;)-1===(e=a[t=i[r]])&&(e=a[t]=c[t]),l[r]=c[r]-e,++s[t];_s.call(this,l);for(let i,r=-1,u=e.children.length;++r<u;)if(i=t.getChildAt(r)){const t=e.typeIds[r],o=Math.min(n,s[t]);this.visit(i.slice(a[t],o))}}}return this},Ts.prototype.visitInterval=Es,Ts.prototype.visitFixedSizeList=Ms,Ts.prototype.visitMap=Ms;class Is extends z{constructor(t){super(),this._position=0,this._started=!1,this._sink=new qr,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,et(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!==typeof t.autoDestroy||t.autoDestroy,this._writeLegacyIpcFormat="boolean"===typeof t.writeLegacyIpcFormat&&t.writeLegacyIpcFormat}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sink.toString(t)}toUint8Array(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sink.toUint8Array(t)}writeAll(t){return nt(t)?t.then(t=>this.writeAll(t)):rt(t)?js(this,t):Ns(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._sink,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var n;return t===this._sink||t instanceof qr?this._sink=t:(this._sink=new qr,t&&(et(n=t)&&tt(n.abort)&&tt(n.getWriter)&&!(n instanceof z))?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&(t=>et(t)&&tt(t.end)&&tt(t.write)&&J(t.writable)&&!(t instanceof z))(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,e&&e.compareTo(this._schema)||(null===e?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null===t||void 0===t)return this.finish()&&void 0;if(t instanceof Cl&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof Sl&&!(e=t.schema))return this.finish()&&void 0;if(e&&!e.compareTo(this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof Sl?t instanceof Ol||this._writeRecordBatch(t):t instanceof Cl?this.writeAll(t.chunks):it(t)&&this.writeAll(t)}_writeMessage(t){const e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-1,n=Qo.encode(t),i=n.byteLength,r=this._writeLegacyIpcFormat?4:8,o=i+r+e&~e,s=o-i-r;return t.headerType===fe.RecordBatch?this._recordBatchBlocks.push(new Xr(o,t.bodyLength,this._position)):t.headerType===fe.DictionaryBatch&&this._dictionaryBlocks.push(new Xr(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-r)),i>0&&this._write(n),this._writePadding(s)}_write(t){if(this._started){const e=vt(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(Qo.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(ws)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:n,bufferRegions:i,buffers:r}=Ts.assemble(t),o=new Zo(t.length,n,i),s=Qo.from(o,e);return this._writeDictionaries(t)._writeMessage(s)._writeBodyBuffers(r)}_writeDictionaryBatch(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:i,nodes:r,bufferRegions:o,buffers:s}=Ts.assemble(t),a=new Zo(t.length,r,o),l=new Jo(a,e,n),c=Qo.from(l,i);return this._writeMessage(c)._writeBodyBuffers(s)}_writeBodyBuffers(t){let e,n,i;for(let r=-1,o=t.length;++r<o;)(e=t[r])&&(n=e.byteLength)>0&&(this._write(e),(i=(n+7&-8)-n)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[e,n]of t.dictionaries){let t=this._dictionaryDeltaOffsets.get(e)||0;if(0===t||(n=n.slice(t)).length>0){const i="chunks"in n?n.chunks:[n];for(const n of i)this._writeDictionaryBatch(n,e,t>0),t+=n.length}}return this}}class ks extends Is{static writeAll(t,e){const n=new ks(e);return nt(t)?t.then(t=>n.writeAll(t)):rt(t)?js(n,t):Ns(n,t)}}class As extends Is{constructor(){super(),this._autoDestroy=!0}static writeAll(t){const e=new As;return nt(t)?t.then(t=>e.writeAll(t)):rt(t)?js(e,t):Ns(e,t)}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=$r.encode(new $r(t,ge.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function Ns(t,e){let n=e;e instanceof Cl&&(n=e.chunks,t.reset(void 0,e.schema));for(const i of n)t.write(i);return t.finish()}async function js(t,e){for await(const n of e)t.write(n);return t.finish()}const Hs=new Uint8Array(0),Ds=t=>[Hs,Hs,new Uint8Array(t),Hs];function Ps(t,e){return function(t,e){const n=[...t.fields],i=[],r={numBatches:e.reduce((t,e)=>Math.max(t,e.length),0)};let o,s=0,a=0,l=-1,c=e.length,u=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,l=-1;++l<c;)u[l]=o=e[l].shift(),a=Math.min(a,o?o.length:a);isFinite(a)&&(u=Ls(n,a,u,e,r),a>0&&(i[s++]=[a,u.slice()]))}return[t=new lr(n,t.metadata),i.map(e=>new Sl(t,...e))]}(t,e.map(t=>t instanceof Xi?t.chunks.map(t=>t.data):[t.data]))}function Ls(t,e,n,i,r){let o,s,a=0,l=-1,c=i.length;const u=(e+63&-64)>>3;for(;++l<c;)(o=n[l])&&(a=o.length)>=e?a===e?n[l]=o:(n[l]=o.slice(0,e),o=o.slice(e,a-e),r.numBatches=Math.max(r.numBatches,i[l].unshift(o))):((s=t[l]).nullable||(t[l]=s.clone({nullable:!0})),n[l]=o?o._changeLengthAndBackfillNullBitmap(e):vn.new(s.type,0,e,e,Ds(u)));return n}class Fs extends te{constructor(t,e){super(),this._children=e,this.numChildren=t.childData.length,this._bindDataAccessors(this.data=t)}get type(){return this.data.type}get typeId(){return this.data.typeId}get length(){return this.data.length}get offset(){return this.data.offset}get stride(){return this.data.stride}get nullCount(){return this.data.nullCount}get byteLength(){return this.data.byteLength}get VectorName(){return se[this.typeId]+"Vector"}get ArrayType(){return this.type.ArrayType}get values(){return this.data.values}get typeIds(){return this.data.typeIds}get nullBitmap(){return this.data.nullBitmap}get valueOffsets(){return this.data.valueOffsets}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}clone(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._children;return te.new(t,e)}concat(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xi.concat(this,...e)}slice(t,e){return Wi(this,t,e,this._sliceInternal)}isValid(t){if(this.nullCount>0){const e=this.offset+t;return 0!==(this.nullBitmap[e>>3]&1<<e%8)}return!0}getChildAt(t){return t<0||t>=this.numChildren?null:(this._children||(this._children=[]))[t]||(this._children[t]=te.new(this.data.childData[t]))}toJSON(){return[...this]}_sliceInternal(t,e,n){return t.clone(t.data.slice(e,n-e),null)}_bindDataAccessors(t){}}Fs.prototype[Symbol.isConcatSpreadable]=!0;class Bs extends Fs{asUtf8(){return te.new(this.data.clone(new tn))}}class Vs extends Fs{static from(t){return vl(()=>new en,t)}}class Us extends Fs{static from(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 2===e.length?vl(()=>e[1]===le.DAY?new on:new sn,e[0]):vl(()=>new sn,e[0])}}class Ws extends Us{}class zs extends Us{}class Ys extends Fs{}class Gs extends Fs{constructor(t){super(t),this.indices=te.new(t.clone(this.type.indices))}static from(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(3===e.length){const[t,n,i]=e,r=new yn(t.type,n,null,null);return te.new(vn.Dictionary(r,0,i.length,0,null,i,t))}return vl(()=>e[0].type,e[0])}get dictionary(){return this.data.dictionary}reverseLookup(t){return this.dictionary.indexOf(t)}getKey(t){return this.indices.get(t)}getValue(t){return this.dictionary.get(t)}setKey(t,e){return this.indices.set(t,e)}setValue(t,e){return this.dictionary.set(t,e)}}Gs.prototype.indices=null;class $s extends Fs{}class Ks extends Fs{}class Xs extends Fs{static from(t){let e=ea(this);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)){let n=ta(t.constructor)||e;if(null===e&&(e=n),e&&e===n){let n=new e,i=t.byteLength/n.ArrayType.BYTES_PER_ELEMENT;if(!Js(e,t.constructor))return te.new(vn.Float(n,0,i,0,null,t))}}if(e)return vl(()=>new e,t);if(t instanceof DataView||t instanceof ArrayBuffer)throw new TypeError("Cannot infer float type from instance of "+t.constructor.name);throw new TypeError("Unrecognized FloatVector input")}}class qs extends Xs{toFloat32Array(){return new Float32Array(this)}toFloat64Array(){return new Float64Array(this)}}class Qs extends Xs{}class Zs extends Xs{}const Js=(t,e)=>t===qe&&e!==Uint16Array,ta=t=>{switch(t){case Uint16Array:return qe;case Float32Array:return Qe;case Float64Array:return Ze;default:return null}},ea=t=>{switch(t){case qs:return qe;case Qs:return Qe;case Zs:return Ze;default:return null}};class na extends Fs{}class ia extends na{}class ra extends na{}class oa extends Fs{static from(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let[i,r=!1]=e,o=ma(this,r);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)){let t=pa(i.constructor,r)||o;if(null===o&&(o=t),o&&o===t){let t=new o,e=i.byteLength/t.ArrayType.BYTES_PER_ELEMENT;return ga(o,i.constructor)&&(e*=.5),te.new(vn.Int(t,0,e,0,null,i))}}if(o)return vl(()=>new o,i);if(i instanceof DataView||i instanceof ArrayBuffer)throw new TypeError("Cannot infer integer type from instance of "+i.constructor.name);throw new TypeError("Unrecognized IntVector input")}}class sa extends oa{}class aa extends oa{}class la extends oa{}class ca extends oa{toBigInt64Array(){return wt(this.values)}get values64(){return this._values64||(this._values64=this.toBigInt64Array())}}class ua extends oa{}class ha extends oa{}class da extends oa{}class fa extends oa{toBigUint64Array(){return Ot(this.values)}get values64(){return this._values64||(this._values64=this.toBigUint64Array())}}const ga=(t,e)=>(t===ze||t===Ke)&&(e===Int32Array||e===Uint32Array),pa=(t,e)=>{switch(t){case Int8Array:return Ve;case Int16Array:return Ue;case Int32Array:return e?ze:We;case K:return ze;case Uint8Array:return Ye;case Uint16Array:return Ge;case Uint32Array:return e?Ke:$e;case q:return Ke;default:return null}},ma=(t,e)=>{switch(t){case sa:return Ve;case aa:return Ue;case la:return e?ze:We;case ca:return ze;case ua:return Ye;case ha:return Ge;case da:return e?Ke:$e;case fa:return Ke;default:return null}};class ba extends Fs{}class ya extends Fs{asList(){const t=this.type.children[0];return te.new(this.data.clone(new un(t)))}bind(t){const e=this.getChildAt(0),{[t]:n,[t+1]:i}=this.valueOffsets;return new Pi(e.slice(n,i))}}class wa extends Fs{}const va=Symbol.for("rowIndex");class Ca extends Fs{bind(t){const e=this._row||(this._row=new Li(this)),n=Object.create(e);return n[va]=t,n}}class Sa extends Fs{}class Oa extends Sa{}class Ta extends Sa{}class _a extends Sa{}class Ea extends Sa{}class Ra extends Fs{}class Ma extends Ra{}class xa extends Ra{}class Ia extends Ra{}class ka extends Ra{}class Aa extends Fs{get typeIdToChildIndex(){return this.data.type.typeIdToChildIndex}}class Na extends Aa{get valueOffsets(){return this.data.valueOffsets}}class ja extends Aa{}class Ha extends Fs{static from(t){return vl(()=>new tn,t)}asBinary(){return te.new(this.data.clone(new Je))}}function Da(t){return function(){return t(this)}}function Pa(t){return function(e,n){return t(this,e,n)}}class La extends Te{}const Fa=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),Ba=t=>new Date(t),Va=(t,e,n)=>{const{[n]:i,[n+1]:r}=e;return null!=i&&null!=r?t.subarray(i,r):null},Ua=(t,e)=>{let{values:n}=t;return((t,e)=>Ba(((t,e)=>864e5*t[e])(t,e)))(n,e)},Wa=(t,e)=>{let{values:n}=t;return((t,e)=>Ba(Fa(t,e)))(n,2*e)},za=(t,e)=>{let{stride:n,values:i}=t;return i[n*e]},Ya=(t,e)=>{let{stride:n,values:i}=t;return Un(i[n*e])},Ga=(t,e)=>{let{stride:n,values:i,type:r}=t;return ii.new(i.subarray(n*e,n*(e+1)),r.isSigned)},$a=(t,e)=>{let{values:n}=t;return 1e3*Fa(n,2*e)},Ka=(t,e)=>{let{values:n}=t;return Fa(n,2*e)},Xa=(t,e)=>{let{values:n}=t;return((t,e)=>t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3)(n,2*e)},qa=(t,e)=>{let{values:n}=t;return((t,e)=>t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6)(n,2*e)},Qa=(t,e)=>{let{values:n,stride:i}=t;return n[i*e]},Za=(t,e)=>{let{values:n,stride:i}=t;return n[i*e]},Ja=(t,e)=>{let{values:n}=t;return ii.signed(n.subarray(2*e,2*(e+1)))},tl=(t,e)=>{let{values:n}=t;return ii.signed(n.subarray(2*e,2*(e+1)))},el=(t,e)=>{const n=t.typeIdToChildIndex[t.typeIds[e]],i=t.getChildAt(n);return i?i.get(t.valueOffsets[e]):null},nl=(t,e)=>{const n=t.typeIdToChildIndex[t.typeIds[e]],i=t.getChildAt(n);return i?i.get(e):null},il=(t,e)=>{let{values:n}=t;return n.subarray(2*e,2*(e+1))},rl=(t,e)=>{let{values:n}=t;const i=n[e],r=new Int32Array(2);return r[0]=i/12|0,r[1]=i%12|0,r};La.prototype.visitNull=(t,e)=>null,La.prototype.visitBool=(t,e)=>{let{offset:n,values:i}=t;const r=n+e;return 0!==(i[r>>3]&1<<r%8)},La.prototype.visitInt=(t,e)=>t.type.bitWidth<64?za(t,e):Ga(t,e),La.prototype.visitInt8=za,La.prototype.visitInt16=za,La.prototype.visitInt32=za,La.prototype.visitInt64=Ga,La.prototype.visitUint8=za,La.prototype.visitUint16=za,La.prototype.visitUint32=za,La.prototype.visitUint64=Ga,La.prototype.visitFloat=(t,e)=>t.type.precision!==ue.HALF?za(t,e):Ya(t,e),La.prototype.visitFloat16=Ya,La.prototype.visitFloat32=za,La.prototype.visitFloat64=za,La.prototype.visitUtf8=(t,e)=>{let{values:n,valueOffsets:i}=t;const r=Va(n,i,e);return null!==r?B(r):null},La.prototype.visitBinary=(t,e)=>{let{values:n,valueOffsets:i}=t;return Va(n,i,e)},La.prototype.visitFixedSizeBinary=(t,e)=>{let{stride:n,values:i}=t;return i.subarray(n*e,n*(e+1))},La.prototype.visitDate=(t,e)=>t.type.unit===le.DAY?Ua(t,e):Wa(t,e),La.prototype.visitDateDay=Ua,La.prototype.visitDateMillisecond=Wa,La.prototype.visitTimestamp=(t,e)=>{switch(t.type.unit){case ce.SECOND:return $a(t,e);case ce.MILLISECOND:return Ka(t,e);case ce.MICROSECOND:return Xa(t,e);case ce.NANOSECOND:return qa(t,e)}},La.prototype.visitTimestampSecond=$a,La.prototype.visitTimestampMillisecond=Ka,La.prototype.visitTimestampMicrosecond=Xa,La.prototype.visitTimestampNanosecond=qa,La.prototype.visitTime=(t,e)=>{switch(t.type.unit){case ce.SECOND:return Qa(t,e);case ce.MILLISECOND:return Za(t,e);case ce.MICROSECOND:return Ja(t,e);case ce.NANOSECOND:return tl(t,e)}},La.prototype.visitTimeSecond=Qa,La.prototype.visitTimeMillisecond=Za,La.prototype.visitTimeMicrosecond=Ja,La.prototype.visitTimeNanosecond=tl,La.prototype.visitDecimal=(t,e)=>{let{values:n}=t;return ii.decimal(n.subarray(4*e,4*(e+1)))},La.prototype.visitList=(t,e)=>{const n=t.getChildAt(0),{valueOffsets:i,stride:r}=t;return n.slice(i[e*r],i[e*r+1])},La.prototype.visitStruct=(t,e)=>t.bind(e),La.prototype.visitUnion=(t,e)=>t.type.mode===he.Dense?el(t,e):nl(t,e),La.prototype.visitDenseUnion=el,La.prototype.visitSparseUnion=nl,La.prototype.visitDictionary=(t,e)=>t.getValue(t.getKey(e)),La.prototype.visitInterval=(t,e)=>t.type.unit===de.DAY_TIME?il(t,e):rl(t,e),La.prototype.visitIntervalDayTime=il,La.prototype.visitIntervalYearMonth=rl,La.prototype.visitFixedSizeList=(t,e)=>{const n=t.getChildAt(0),{stride:i}=t;return n.slice(e*i,(e+1)*i)},La.prototype.visitMap=(t,e)=>t.bind(e);const ol=new La;class sl extends Te{}function al(t,e,n){if(void 0===e)return-1;if(null===e)return function(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let i=0;for(const r of ve(n,t.data.offset+(e||0),t.length,n,pe)){if(!r)return i;++i}return-1}(t,n);const i=Gi(e);for(let r=(n||0)-1,o=t.length;++r<o;)if(i(t.get(r)))return r;return-1}function ll(t,e,n){const i=Gi(e);for(let r=(n||0)-1,o=t.length;++r<o;)if(i(t.get(r)))return r;return-1}sl.prototype.visitNull=function(t,e){return null===e&&t.length>0?0:-1},sl.prototype.visitBool=al,sl.prototype.visitInt=al,sl.prototype.visitInt8=al,sl.prototype.visitInt16=al,sl.prototype.visitInt32=al,sl.prototype.visitInt64=al,sl.prototype.visitUint8=al,sl.prototype.visitUint16=al,sl.prototype.visitUint32=al,sl.prototype.visitUint64=al,sl.prototype.visitFloat=al,sl.prototype.visitFloat16=al,sl.prototype.visitFloat32=al,sl.prototype.visitFloat64=al,sl.prototype.visitUtf8=al,sl.prototype.visitBinary=al,sl.prototype.visitFixedSizeBinary=al,sl.prototype.visitDate=al,sl.prototype.visitDateDay=al,sl.prototype.visitDateMillisecond=al,sl.prototype.visitTimestamp=al,sl.prototype.visitTimestampSecond=al,sl.prototype.visitTimestampMillisecond=al,sl.prototype.visitTimestampMicrosecond=al,sl.prototype.visitTimestampNanosecond=al,sl.prototype.visitTime=al,sl.prototype.visitTimeSecond=al,sl.prototype.visitTimeMillisecond=al,sl.prototype.visitTimeMicrosecond=al,sl.prototype.visitTimeNanosecond=al,sl.prototype.visitDecimal=al,sl.prototype.visitList=al,sl.prototype.visitStruct=al,sl.prototype.visitUnion=al,sl.prototype.visitDenseUnion=ll,sl.prototype.visitSparseUnion=ll,sl.prototype.visitDictionary=al,sl.prototype.visitInterval=al,sl.prototype.visitIntervalDayTime=al,sl.prototype.visitIntervalYearMonth=al,sl.prototype.visitFixedSizeList=al,sl.prototype.visitMap=al;const cl=new sl;class ul extends Te{}function hl(t){if(t.nullCount>0)return function(t){const e=ol.getVisitFn(t);return ve(t.nullBitmap,t.offset,t.length,t,(t,n,i,r)=>0!==(i&1<<r)?e(t,n):null)}(t);const{type:e,typeId:n,length:i}=t;return 1===t.stride&&(n===se.Timestamp||n===se.Int&&64!==e.bitWidth||n===se.Time&&64!==e.bitWidth||n===se.Float&&e.precision>0)?t.values.subarray(0,i)[Symbol.iterator]():function*(e){for(let n=-1;++n<i;)yield e(t,n)}(ol.getVisitFn(t))}ul.prototype.visitNull=hl,ul.prototype.visitBool=hl,ul.prototype.visitInt=hl,ul.prototype.visitInt8=hl,ul.prototype.visitInt16=hl,ul.prototype.visitInt32=hl,ul.prototype.visitInt64=hl,ul.prototype.visitUint8=hl,ul.prototype.visitUint16=hl,ul.prototype.visitUint32=hl,ul.prototype.visitUint64=hl,ul.prototype.visitFloat=hl,ul.prototype.visitFloat16=hl,ul.prototype.visitFloat32=hl,ul.prototype.visitFloat64=hl,ul.prototype.visitUtf8=hl,ul.prototype.visitBinary=hl,ul.prototype.visitFixedSizeBinary=hl,ul.prototype.visitDate=hl,ul.prototype.visitDateDay=hl,ul.prototype.visitDateMillisecond=hl,ul.prototype.visitTimestamp=hl,ul.prototype.visitTimestampSecond=hl,ul.prototype.visitTimestampMillisecond=hl,ul.prototype.visitTimestampMicrosecond=hl,ul.prototype.visitTimestampNanosecond=hl,ul.prototype.visitTime=hl,ul.prototype.visitTimeSecond=hl,ul.prototype.visitTimeMillisecond=hl,ul.prototype.visitTimeMicrosecond=hl,ul.prototype.visitTimeNanosecond=hl,ul.prototype.visitDecimal=hl,ul.prototype.visitList=hl,ul.prototype.visitStruct=hl,ul.prototype.visitUnion=hl,ul.prototype.visitDenseUnion=hl,ul.prototype.visitSparseUnion=hl,ul.prototype.visitDictionary=hl,ul.prototype.visitInterval=hl,ul.prototype.visitIntervalDayTime=hl,ul.prototype.visitIntervalYearMonth=hl,ul.prototype.visitFixedSizeList=hl,ul.prototype.visitMap=hl;const dl=new ul;class fl extends Te{}function gl(t){const{type:e,length:n,stride:i}=t;switch(e.typeId){case se.Int:case se.Float:case se.Decimal:case se.Time:case se.Timestamp:return t.values.subarray(0,n*i)}return[...dl.visit(t)]}fl.prototype.visitNull=gl,fl.prototype.visitBool=gl,fl.prototype.visitInt=gl,fl.prototype.visitInt8=gl,fl.prototype.visitInt16=gl,fl.prototype.visitInt32=gl,fl.prototype.visitInt64=gl,fl.prototype.visitUint8=gl,fl.prototype.visitUint16=gl,fl.prototype.visitUint32=gl,fl.prototype.visitUint64=gl,fl.prototype.visitFloat=gl,fl.prototype.visitFloat16=gl,fl.prototype.visitFloat32=gl,fl.prototype.visitFloat64=gl,fl.prototype.visitUtf8=gl,fl.prototype.visitBinary=gl,fl.prototype.visitFixedSizeBinary=gl,fl.prototype.visitDate=gl,fl.prototype.visitDateDay=gl,fl.prototype.visitDateMillisecond=gl,fl.prototype.visitTimestamp=gl,fl.prototype.visitTimestampSecond=gl,fl.prototype.visitTimestampMillisecond=gl,fl.prototype.visitTimestampMicrosecond=gl,fl.prototype.visitTimestampNanosecond=gl,fl.prototype.visitTime=gl,fl.prototype.visitTimeSecond=gl,fl.prototype.visitTimeMillisecond=gl,fl.prototype.visitTimeMicrosecond=gl,fl.prototype.visitTimeNanosecond=gl,fl.prototype.visitDecimal=gl,fl.prototype.visitList=gl,fl.prototype.visitStruct=gl,fl.prototype.visitUnion=gl,fl.prototype.visitDenseUnion=gl,fl.prototype.visitSparseUnion=gl,fl.prototype.visitDictionary=gl,fl.prototype.visitInterval=gl,fl.prototype.visitIntervalDayTime=gl,fl.prototype.visitIntervalYearMonth=gl,fl.prototype.visitFixedSizeList=gl,fl.prototype.visitMap=gl;const pl=new fl,ml=(t,e)=>t+e,bl=t=>"Cannot compute the byte width of variable-width column "+t;const yl=new class extends Te{visitNull(t){return 0}visitInt(t){return t.bitWidth/8}visitFloat(t){return t.ArrayType.BYTES_PER_ELEMENT}visitBinary(t){throw new Error(bl(t))}visitUtf8(t){throw new Error(bl(t))}visitBool(t){return 1/8}visitDecimal(t){return 16}visitDate(t){return 4*(t.unit+1)}visitTime(t){return t.bitWidth/8}visitTimestamp(t){return t.unit===ce.SECOND?4:8}visitInterval(t){return 4*(t.unit+1)}visitList(t){throw new Error(bl(t))}visitStruct(t){return this.visitFields(t.children).reduce(ml,0)}visitUnion(t){return this.visitFields(t.children).reduce(ml,0)}visitFixedSizeBinary(t){return t.byteWidth}visitFixedSizeList(t){return t.listSize*this.visitFields(t.children).reduce(ml,0)}visitMap(t){return this.visitFields(t.children).reduce(ml,0)}visitDictionary(t){return this.visit(t.indices)}visitFields(t){return(t||[]).map(t=>this.visit(t.type))}visitSchema(t){return this.visitFields(t.fields).reduce(ml,0)}};const wl=new class extends Te{visitNull(){return wa}visitBool(){return Vs}visitInt(){return oa}visitInt8(){return sa}visitInt16(){return aa}visitInt32(){return la}visitInt64(){return ca}visitUint8(){return ua}visitUint16(){return ha}visitUint32(){return da}visitUint64(){return fa}visitFloat(){return Xs}visitFloat16(){return qs}visitFloat32(){return Qs}visitFloat64(){return Zs}visitUtf8(){return Ha}visitBinary(){return Bs}visitFixedSizeBinary(){return $s}visitDate(){return Us}visitDateDay(){return Ws}visitDateMillisecond(){return zs}visitTimestamp(){return Sa}visitTimestampSecond(){return Oa}visitTimestampMillisecond(){return Ta}visitTimestampMicrosecond(){return _a}visitTimestampNanosecond(){return Ea}visitTime(){return Ra}visitTimeSecond(){return Ma}visitTimeMillisecond(){return xa}visitTimeMicrosecond(){return Ia}visitTimeNanosecond(){return ka}visitDecimal(){return Ys}visitList(){return ba}visitStruct(){return Ca}visitUnion(){return Aa}visitDenseUnion(){return Na}visitSparseUnion(){return ja}visitDictionary(){return Gs}visitInterval(){return na}visitIntervalDayTime(){return ia}visitIntervalYearMonth(){return ra}visitFixedSizeList(){return Ks}visitMap(){return ya}};function vl(t,e){if(it(e))return te.from({nullValues:[null,void 0],type:t(),values:e});if(rt(e))return te.from({nullValues:[null,void 0],type:t(),values:e});const{values:n=[],type:i=t(),nullValues:r=[null,void 0]}={...e};return it(n),te.from({nullValues:r,...e,type:i})}te.new=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return new(wl.getVisitFn(t)())(t,...n)},te.from=function(t){const{values:e=[],...n}={nullValues:[null,void 0],...t};if(it(e)){const t=[...xn.throughIterable(n)(e)];return 1===t.length?t[0]:Xi.concat(t)}return(async t=>{const i=xn.throughAsyncIterable(n);for await(const n of i(e))t.push(n);return 1===t.length?t[0]:Xi.concat(t)})([])},Fs.prototype.get=function(t){return ol.visit(this,t)},Fs.prototype.set=function(t,e){return Fr.visit(this,t,e)},Fs.prototype.indexOf=function(t,e){return cl.visit(this,t,e)},Fs.prototype.toArray=function(){return pl.visit(this)},Fs.prototype.getByteWidth=function(){return yl.visit(this.type)},Fs.prototype[Symbol.iterator]=function(){return dl.visit(this)},Fs.prototype._bindDataAccessors=function(){const t=this.nullBitmap;t&&t.byteLength>0&&(this.get=(e=this.get,function(t){return this.isValid(t)?e.call(this,t):null}),this.set=function(t){return function(e,n){be(this.nullBitmap,this.offset+e,!(null===n||void 0===n))&&t.call(this,e,n)}}(this.set));var e},Object.keys(se).map(t=>se[t]).filter(t=>"number"===typeof t).filter(t=>t!==se.NONE).forEach(t=>{const e=wl.visit(t);var n;e.prototype.get=(n=ol.getVisitFn(t),function(t){return n(this,t)}),e.prototype.set=Pa(Fr.getVisitFn(t)),e.prototype.indexOf=Pa(cl.getVisitFn(t)),e.prototype.toArray=Da(pl.getVisitFn(t)),e.prototype.getByteWidth=function(t){return function(){return t(this.type)}}(yl.getVisitFn(t)),e.prototype[Symbol.iterator]=Da(dl.getVisitFn(t))});class Cl extends Xi{constructor(){let t=null;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n[0]instanceof lr&&(t=n.shift());let r=er(Sl,n);if(!t&&!(t=r[0]&&r[0].schema))throw new TypeError("Table must be initialized with a Schema or at least one RecordBatch");r[0]||(r[0]=new Ol(t)),super(new hn(t.fields),r),this._schema=t,this._chunks=r}static empty(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new lr([]);return new Cl(t,[])}static from(t){if(!t)return Cl.empty();if("object"===typeof t){let e=it(t.values)?function(t){const{type:e}=t;if(e instanceof hn)return Cl.fromStruct(Ca.from(t));return null}(t):rt(t.values)?function(t){const{type:e}=t;if(e instanceof hn)return Ca.from(t).then(t=>Cl.fromStruct(t));return null}(t):null;if(null!==e)return e}let e=_l.from(t);return nt(e)?(async()=>await Cl.from(await e))():e.isSync()&&(e=e.open())?e.schema?new Cl(e.schema,[...e]):Cl.empty():(async t=>{const e=await t,n=e.schema,i=[];if(n){for await(let t of e)i.push(t);return new Cl(n,i)}return Cl.empty()})(e.open())}static async fromAsync(t){return await Cl.from(t)}static fromStruct(t){return Cl.new(t.data.childData,t.type.children)}static new(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Cl(...(i=(t=>{const[e,n]=ar(t,[[],[]]);return n.map((t,n)=>t instanceof Zi?Zi.new(t.field.clone(e[n]),t):t instanceof te?Zi.new(e[n],t):Zi.new(e[n],[]))})(e),Ps(new lr(i.map(t=>{let{field:e}=t;return e})),i)));var i}get schema(){return this._schema}get length(){return this._length}get chunks(){return this._chunks}get numCols(){return this._numChildren}clone(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._chunks;return new Cl(this._schema,t)}getColumn(t){return this.getColumnAt(this.getColumnIndex(t))}getColumnAt(t){return this.getChildAt(t)}getColumnIndex(t){return this._schema.fields.findIndex(e=>e.name===t)}getChildAt(t){if(t<0||t>=this.numChildren)return null;let e,n;const i=this._schema.fields,r=this._children||(this._children=[]);if(n=r[t])return n;if(e=i[t]){const n=this._chunks.map(e=>e.getChildAt(t)).filter(t=>null!=t);if(n.length>0)return r[t]=new Zi(e,n)}return null}serialize(){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?ks:As).writeAll(this).toUint8Array(!0)}count(){return this._length}select(){const t=this._schema.fields.reduce((t,e,n)=>t.set(e.name,n),new Map);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.selectAt(...n.map(e=>t.get(e)).filter(t=>t>-1))}selectAt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=this._schema.selectAt(...e);return new Cl(i,this._chunks.map(t=>{let{length:n,data:{childData:r}}=t;return new Sl(i,n,e.map(t=>r[t]).filter(Boolean))}))}assign(t){var e=this;const n=this._schema.fields,[i,r]=t.schema.fields.reduce((t,e,i)=>{const[r,o]=t,s=n.findIndex(t=>t.name===e.name);return~s?o[s]=i:r.push(i),t},[[],[]]),o=this._schema.assign(t.schema),s=[...n.map((function(n,i,o){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r[i];return void 0===s?e.getColumnAt(i):t.getColumnAt(s)})),...i.map(e=>t.getColumnAt(e))].filter(Boolean);return new Cl(...Ps(o,s))}}class Sl extends Ca{constructor(){let t;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];let r,o=n[0];if(n[1]instanceof vn)[,t,r]=n;else{const e=o.fields,[,i,r]=n;t=vn.Struct(new hn(e),0,i,0,null,r)}super(t,r),this._schema=o}static from(t){return it(t.values),Cl.from(t)}static new(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const[i,r]=nr(e),o=r.filter(t=>t instanceof te);return new Sl(...function(t,e){let n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.reduce((t,e)=>Math.max(t,e.length),0),o=-1,s=e.length;const a=[...t.fields],l=[],c=(r+63&-64)>>3;for(;++o<s;)(n=e[o])&&n.length===r?l[o]=n:((i=a[o]).nullable||(a[o]=a[o].clone({nullable:!0})),l[o]=n?n._changeLengthAndBackfillNullBitmap(r):vn.new(i.type,0,r,r,Ds(c)));return[new lr(a),r,l]}(new lr(i),o.map(t=>t.data)))}clone(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._children;return new Sl(this._schema,t,e)}concat(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=this._schema,r=Xi.flatten(this,...e);return new Cl(i,r.map(t=>{let{data:e}=t;return new Sl(i,e)}))}get schema(){return this._schema}get numCols(){return this._schema.fields.length}get dictionaries(){return this._dictionaries||(this._dictionaries=Tl.collect(this))}select(){const t=this._schema.fields.reduce((t,e,n)=>t.set(e.name,n),new Map);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.selectAt(...n.map(e=>t.get(e)).filter(t=>t>-1))}selectAt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=this._schema.selectAt(...e),r=e.map(t=>this.data.childData[t]).filter(Boolean);return new Sl(i,this.length,r)}}class Ol extends Sl{constructor(t){super(t,0,t.fields.map(t=>vn.new(t.type,0,0,0)))}}class Tl extends Te{constructor(){super(...arguments),this.dictionaries=new Map}static collect(t){return(new Tl).visit(t.data,new hn(t.schema.fields)).dictionaries}visit(t,e){return Pe.isDictionary(e)?this.visitDictionary(t,e):(t.childData.forEach((t,n)=>this.visit(t,e.children[n].type)),this)}visitDictionary(t,e){const n=t.dictionary;return n&&n.length>0&&this.dictionaries.set(e.id,n),this}}class _l extends z{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return nt(e)?e.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return qt.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return qt.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof _l?t:ot(t)?function(t){return new El(new Hl(t))}(t):at(t)?async function(t){const{size:e}=await t.stat(),n=new no(t,e);if(e>=Os&&vs(await n.readAt(0,Cs+7&-8)))return new xl(new jl(n));return new Rl(new Al(n))}(t):nt(t)?(async()=>await _l.from(await t))():lt(t)||ct(t)||ut(t)||rt(t)?async function(t){const e=await t.peek(Cs+7&-8);return e&&e.byteLength>=4?vs(e)?new Ml(new Nl(await t.read())):new Rl(new Al(t)):new Rl(new Al(async function*(){}()))}(new Zr(t)):function(t){const e=t.peek(Cs+7&-8);return e&&e.byteLength>=4?vs(e)?new Ml(new Nl(t.read())):new El(new kl(t)):new El(new kl(function*(){}()))}(new Qr(t))}static readAll(t){return t instanceof _l?t.isSync()?Pl(t):Ll(t):ot(t)||ArrayBuffer.isView(t)||it(t)||st(t)?Pl(t):Ll(t)}}class El extends _l{constructor(t){super(t),this._impl=t}[Symbol.iterator](){return this._impl[Symbol.iterator]()}async*[Symbol.asyncIterator](){yield*this[Symbol.iterator]()}}class Rl extends _l{constructor(t){super(t),this._impl=t}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Ml extends El{constructor(t){super(t),this._impl=t}}class xl extends Rl{constructor(t){super(t),this._impl=t}}class Il{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){return new Sl(this.schema,t.length,this._loadVectors(t,e,this.schema.fields))}_loadDictionaryBatch(t,e){const{id:n,isDelta:i,data:r}=t,{dictionaries:o,schema:s}=this,a=o.get(n);if(i||!a){const t=s.dictionaries.get(n);return a&&i?a.concat(te.new(this._loadVectors(r,e,[t])[0])):te.new(this._loadVectors(r,e,[t])[0])}return a}_loadVectors(t,e,n){return new co(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}class kl extends Il{constructor(t,e){super(e),this._reader=ot(t)?new bs(this._handle=t):new ps(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=Dl(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):U}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):U}next(){if(this.closed)return U;let t,{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),i=e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),i=e.readMessageBody(t.bodyLength),r=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,r)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Ol(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Al extends Il{constructor(t,e){super(e),this._reader=new ms(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}async cancel(){!this.closed&&(this.closed=!0)&&(await this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}async open(t){return this.closed||(this.autoDestroy=Dl(this,t),this.schema||(this.schema=await this._reader.readSchema())||await this.cancel()),this}async throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?await this.reset()._reader.throw(t):U}async return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?await this.reset()._reader.return(t):U}async next(){if(this.closed)return U;let t,{_reader:e}=this;for(;t=await this._readNextMessageAndValidate();)if(t.isSchema())await this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),i=await e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),i=await e.readMessageBody(t.bodyLength),r=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,r)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Ol(this.schema)}):await this.return()}async _readNextMessageAndValidate(t){return await this._reader.readMessage(t)}}class Nl extends kl{constructor(t,e){super(t instanceof eo?t:new eo(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){if(this.closed)return null;this._footer||this.open();const e=this._footer&&this._footer.getRecordBatch(t);if(e&&this._handle.seek(e.offset)){const t=this._reader.readMessage(fe.RecordBatch);if(t&&t.isRecordBatch()){const e=t.header(),n=this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,n)}}return null}_readDictionaryBatch(t){const e=this._footer&&this._footer.getDictionaryBatch(t);if(e&&this._handle.seek(e.offset)){const t=this._reader.readMessage(fe.DictionaryBatch);if(t&&t.isDictionaryBatch()){const e=t.header(),n=this._reader.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(e,n);this.dictionaries.set(e.id,i)}}}_readFooter(){const{_handle:t}=this,e=t.size-Ss,n=t.readInt32(e),i=t.readAt(e-n,n);return $r.decode(i)}_readNextMessageAndValidate(t){if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer&&this._footer.getRecordBatch(this._recordBatchIndex);if(e&&this._handle.seek(e.offset))return this._reader.readMessage(t)}return null}}class jl extends Al{constructor(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r="number"!==typeof n[0]?n.shift():void 0,o=n[0]instanceof Map?n.shift():void 0;super(t instanceof no?t:new no(t,r),o)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}async open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=await this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&await this._readDictionaryBatch(this._dictionaryIndex++)}return await super.open(t)}async readRecordBatch(t){if(this.closed)return null;this._footer||await this.open();const e=this._footer&&this._footer.getRecordBatch(t);if(e&&await this._handle.seek(e.offset)){const t=await this._reader.readMessage(fe.RecordBatch);if(t&&t.isRecordBatch()){const e=t.header(),n=await this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,n)}}return null}async _readDictionaryBatch(t){const e=this._footer&&this._footer.getDictionaryBatch(t);if(e&&await this._handle.seek(e.offset)){const t=await this._reader.readMessage(fe.DictionaryBatch);if(t&&t.isDictionaryBatch()){const e=t.header(),n=await this._reader.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(e,n);this.dictionaries.set(e.id,i)}}}async _readFooter(){const{_handle:t}=this;t._pending&&await t._pending;const e=t.size-Ss,n=await t.readInt32(e),i=await t.readAt(e-n,n);return $r.decode(i)}async _readNextMessageAndValidate(t){if(this._footer||await this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&await this._handle.seek(e.offset))return await this._reader.readMessage(t)}return null}}class Hl extends kl{constructor(t,e){super(t,e)}_loadVectors(t,e,n){return new uo(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}function Dl(t,e){return e&&"boolean"===typeof e.autoDestroy?e.autoDestroy:t.autoDestroy}function*Pl(t){const e=_l.from(t);try{if(!e.open({autoDestroy:!1}).closed)do{yield e}while(!e.reset().open().closed)}finally{e.cancel()}}async function*Ll(t){const e=await _l.from(t);try{if(!(await e.open({autoDestroy:!1})).closed)do{yield e}while(!(await e.reset().open()).closed)}finally{await e.cancel()}}class Fl{constructor(t){this._numChunks=0,this._finished=!1,this._bufferedSize=0;const{readableStrategy:e,writableStrategy:n,queueingStrategy:i="count",...r}=t;this._controller=null,this._builder=xn.new(r),this._getSize="bytes"!==i?Bl:Vl;const{highWaterMark:o=("bytes"===i?16384:1e3)}={...e},{highWaterMark:s=("bytes"===i?16384:1e3)}={...n};this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:t=>{this._maybeFlush(this._builder,this._controller=t)},start:t=>{this._maybeFlush(this._builder,this._controller=t)}},{highWaterMark:o,size:"bytes"!==i?Bl:Vl}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:s,size:t=>this._writeValueAndReturnChunkSize(t)})}_writeValueAndReturnChunkSize(t){const e=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(t)),this._bufferedSize-e}_maybeFlush(t,e){null!==e&&(this._bufferedSize>=e.desiredSize&&++this._numChunks&&this._enqueue(e,t.toVector()),t.finished&&((t.length>0||0===this._numChunks)&&++this._numChunks&&this._enqueue(e,t.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(e,null)))}_enqueue(t,e){this._bufferedSize=0,this._controller=null,null===e?t.close():t.enqueue(e)}}const Bl=t=>t.length,Vl=t=>t.byteLength;class Ul{eq(t){return t instanceof Ul||(t=new Wl(t)),new ql(this,t)}le(t){return t instanceof Ul||(t=new Wl(t)),new Ql(this,t)}ge(t){return t instanceof Ul||(t=new Wl(t)),new Zl(this,t)}lt(t){return new Jl(this.ge(t))}gt(t){return new Jl(this.le(t))}ne(t){return new Jl(this.eq(t))}}class Wl extends Ul{constructor(t){super(),this.v=t}}class zl extends Ul{constructor(t){super(),this.name=t}bind(t){if(!this.colidx){this.colidx=-1;const e=t.schema.fields;for(let t=-1;++t<e.length;)if(e[t].name===this.name){this.colidx=t;break}if(this.colidx<0)throw new Error(`Failed to bind Col "${this.name}"`)}const e=this.vector=t.getChildAt(this.colidx);return t=>e.get(t)}}class Yl{and(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Kl(this,...e)}or(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Xl(this,...e)}not(){return new Jl(this)}}class Gl extends Yl{constructor(t,e){super(),this.left=t,this.right=e}bind(t){return this.left instanceof Wl?this.right instanceof Wl?this._bindLitLit(t,this.left,this.right):this._bindLitCol(t,this.left,this.right):this.right instanceof Wl?this._bindColLit(t,this.left,this.right):this._bindColCol(t,this.left,this.right)}}class $l extends Yl{constructor(){super();for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.children=e}}$l.prototype.children=Object.freeze([]);class Kl extends $l{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e=e.reduce((t,e)=>t.concat(e instanceof Kl?e.children:e),[]),super(...e)}bind(t){const e=this.children.map(e=>e.bind(t));return(t,n)=>e.every(e=>e(t,n))}}class Xl extends $l{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e=e.reduce((t,e)=>t.concat(e instanceof Xl?e.children:e),[]),super(...e)}bind(t){const e=this.children.map(e=>e.bind(t));return(t,n)=>e.some(e=>e(t,n))}}class ql extends Gl{_bindLitLit(t,e,n){const i=e.v==n.v;return()=>i}_bindColCol(t,e,n){const i=e.bind(t),r=n.bind(t);return(t,e)=>i(t,e)==r(t,e)}_bindColLit(t,e,n){const i=e.bind(t);if(e.vector instanceof Gs){let t;const i=e.vector;return i.dictionary!==this.lastDictionary?(t=i.reverseLookup(n.v),this.lastDictionary=i.dictionary,this.lastKey=t):t=this.lastKey,-1===t?()=>!1:e=>i.getKey(e)===t}return(t,e)=>i(t,e)==n.v}_bindLitCol(t,e,n){return this._bindColLit(t,n,e)}}class Ql extends Gl{_bindLitLit(t,e,n){const i=e.v<=n.v;return()=>i}_bindColCol(t,e,n){const i=e.bind(t),r=n.bind(t);return(t,e)=>i(t,e)<=r(t,e)}_bindColLit(t,e,n){const i=e.bind(t);return(t,e)=>i(t,e)<=n.v}_bindLitCol(t,e,n){const i=n.bind(t);return(t,n)=>e.v<=i(t,n)}}class Zl extends Gl{_bindLitLit(t,e,n){const i=e.v>=n.v;return()=>i}_bindColCol(t,e,n){const i=e.bind(t),r=n.bind(t);return(t,e)=>i(t,e)>=r(t,e)}_bindColLit(t,e,n){const i=e.bind(t);return(t,e)=>i(t,e)>=n.v}_bindLitCol(t,e,n){const i=n.bind(t);return(t,n)=>e.v>=i(t,n)}}class Jl extends Yl{constructor(t){super(),this.child=t}bind(t){const e=this.child.bind(t);return(t,n)=>!e(t,n)}}Cl.prototype.countBy=function(t){return new tc(this.chunks).countBy(t)},Cl.prototype.scan=function(t,e){return new tc(this.chunks).scan(t,e)},Cl.prototype.scanReverse=function(t,e){return new tc(this.chunks).scanReverse(t,e)},Cl.prototype.filter=function(t){return new tc(this.chunks).filter(t)};class tc extends Cl{filter(t){return new nc(this.chunks,t)}scan(t,e){const n=this.chunks,i=n.length;for(let r=-1;++r<i;){const i=n[r];e&&e(i);for(let e=-1,n=i.length;++e<n;)t(e,i)}}scanReverse(t,e){const n=this.chunks;for(let i=n.length;--i>=0;){const r=n[i];e&&e(r);for(let e=r.length;--e>=0;)t(e,r)}}countBy(t){const e=this.chunks,n=e.length,i="string"===typeof t?new zl(t):t;i.bind(e[n-1]);const r=i.vector;if(!Pe.isDictionary(r.type))throw new Error("countBy currently only supports dictionary-encoded columns");const o=Math.ceil(Math.log(r.length)/Math.log(256)),s=new(4==o?Uint32Array:o>=2?Uint16Array:Uint8Array)(r.dictionary.length);for(let a=-1;++a<n;){const t=e[a];i.bind(t);const n=i.vector.indices;for(let e=-1,i=t.length;++e<i;){let t=n.get(e);null!==t&&s[t]++}}return new ec(r.dictionary,oa.from(s))}}class ec extends Cl{constructor(t,e){const n=new lr([new cr("values",t.type),new cr("counts",e.type)]);super(new Sl(n,e.length,[t,e]))}toJSON(){const t=this.getColumnAt(0),e=this.getColumnAt(1),n={};for(let i=-1;++i<this.length;)n[t.get(i)]=e.get(i);return n}}class nc extends tc{constructor(t,e){super(t),this._predicate=e}scan(t,e){const n=this._chunks,i=n.length;for(let r=-1;++r<i;){const i=n[r],o=this._predicate.bind(i);let s=!1;for(let n=-1,r=i.length;++n<r;)o(n,i)&&(e&&!s&&(e(i),s=!0),t(n,i))}}scanReverse(t,e){const n=this._chunks;for(let i=n.length;--i>=0;){const r=n[i],o=this._predicate.bind(r);let s=!1;for(let n=r.length;--n>=0;)o(n,r)&&(e&&!s&&(e(r),s=!0),t(n,r))}}count(){let t=0;const e=this._chunks,n=e.length;for(let i=-1;++i<n;){const n=e[i],r=this._predicate.bind(n);for(let e=-1,i=n.length;++e<i;)r(e,n)&&++t}return t}*[Symbol.iterator](){const t=this._chunks,e=t.length;for(let n=-1;++n<e;){const e=t[n],i=this._predicate.bind(e);for(let t=-1,n=e.length;++t<n;)i(t,e)&&(yield e.get(t))}}filter(t){return new nc(this._chunks,this._predicate.and(t))}countBy(t){const e=this._chunks,n=e.length,i="string"===typeof t?new zl(t):t;i.bind(e[n-1]);const r=i.vector;if(!Pe.isDictionary(r.type))throw new Error("countBy currently only supports dictionary-encoded columns");const o=Math.ceil(Math.log(r.length)/Math.log(256)),s=new(4==o?Uint32Array:o>=2?Uint16Array:Uint8Array)(r.dictionary.length);for(let a=-1;++a<n;){const t=e[a],n=this._predicate.bind(t);i.bind(t);const r=i.vector.indices;for(let e=-1,i=t.length;++e<i;){let i=r.get(e);null!==i&&n(e,t)&&s[i]++}}return new ec(r.dictionary,oa.from(s))}}qt.toDOMStream=function(t,e){if(rt(t))return function(t,e){let n=null;const i=e&&"bytes"===e.type||!1,r=e&&e.highWaterMark||2**24;return new ReadableStream({...e,async start(e){await o(e,n||(n=t[Symbol.asyncIterator]()))},async pull(t){n?await o(t,n):t.close()},async cancel(){n&&n.return&&await n.return(),n=null}},{highWaterMark:i?r:void 0,...e});async function o(t,e){let n,r=null,o=t.desiredSize||null;for(;!(r=await e.next(i?o:null)).done;)if(ArrayBuffer.isView(r.value)&&(n=vt(r.value))&&(null!=o&&i&&(o=o-n.byteLength+1),r.value=n),t.enqueue(r.value),null!=o&&--o<=0)return;t.close()}}(t,e);if(it(t))return function(t,e){let n=null;const i=e&&"bytes"===e.type||!1,r=e&&e.highWaterMark||2**24;return new ReadableStream({...e,start(e){o(e,n||(n=t[Symbol.iterator]()))},pull(t){n?o(t,n):t.close()},cancel(){n&&n.return&&n.return(),n=null}},{highWaterMark:i?r:void 0,...e});function o(t,e){let n,r=null,o=t.desiredSize||null;for(;!(r=e.next(i?o:null)).done;)if(ArrayBuffer.isView(r.value)&&(n=vt(r.value))&&(null!=o&&i&&(o=o-n.byteLength+1),r.value=n),t.enqueue(r.value),null!=o&&--o<=0)return;t.close()}}(t,e);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")},xn.throughDOM=function(t){return new Fl(t)},_l.throughDOM=function(t,e){const n=new qr;let i=null;const r=new ReadableStream({async cancel(){await n.close()},async start(t){await o(t,i||(i=await async function(){return await(await _l.from(n)).open(e)}()))},async pull(t){i?await o(t,i):t.close()}});return{writable:new WritableStream(n,{highWaterMark:16384,...t}),readable:r};async function o(t,e){let n=t.desiredSize,i=null;for(;!(i=await e.next()).done;)if(t.enqueue(i.value),null!=n&&--n<=0)return;t.close()}},Is.throughDOM=function(t,e){const n=new this(t),i=new Zr(n),r=new ReadableStream({type:"bytes",async cancel(){await i.cancel()},async pull(t){await o(t)},async start(t){await o(t)}},{highWaterMark:16384,...e});return{writable:new WritableStream(n,t),readable:r};async function o(t){let e=null,n=t.desiredSize;for(;e=await i.read(n||null);)if(t.enqueue(e),null!=n&&(n-=e.byteLength)<=0)return;t.close()}};var ic,rc=function(){function t(t,e,n,i){var r=this;this.getCell=function(t,e){var n=t<r.headerRows&&e<r.headerColumns,i=t>=r.headerRows&&e<r.headerColumns,o=t<r.headerRows&&e>=r.headerColumns;if(n){var s=["blank"];return e>0&&s.push("level"+t),{type:"blank",classNames:s.join(" "),content:""}}if(o)return{type:"columns",classNames:(s=["col_heading","level"+t,"col"+(l=e-r.headerColumns)]).join(" "),content:r.getContent(r.columnsTable,l,t)};if(i){s=["row_heading","level"+e,"row"+(a=t-r.headerRows)];return{type:"index",id:"T_"+r.uuid+"level"+e+"_row"+a,classNames:s.join(" "),content:r.getContent(r.indexTable,a,e)}}s=["data","row"+(a=t-r.headerRows),"col"+(l=e-r.headerColumns)];var a,l,c=r.styler?r.getContent(r.styler.displayValuesTable,a,l):r.getContent(r.dataTable,a,l);return{type:"data",id:"T_"+r.uuid+"row"+a+"_col"+l,classNames:s.join(" "),content:c}},this.getContent=function(t,e,n){var i=t.getColumnAt(n);if(null===i)return"";switch(r.getColumnTypeId(t,n)){case se.Timestamp:return r.nanosToDate(i.get(e));default:return i.get(e)}},this.dataTable=Cl.from(t),this.indexTable=Cl.from(e),this.columnsTable=Cl.from(n),this.styler=i?{caption:i.caption,displayValuesTable:Cl.from(i.displayValues),styles:i.styles,uuid:i.uuid}:void 0}return Object.defineProperty(t.prototype,"rows",{get:function(){return this.indexTable.length+this.columnsTable.numCols},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this.indexTable.numCols+this.columnsTable.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerRows",{get:function(){return this.rows-this.dataRows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerColumns",{get:function(){return this.columns-this.dataColumns},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataRows",{get:function(){return this.dataTable.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataColumns",{get:function(){return this.dataTable.numCols},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uuid",{get:function(){return this.styler&&this.styler.uuid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"caption",{get:function(){return this.styler&&this.styler.caption},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this.styler&&this.styler.styles},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"table",{get:function(){return this.dataTable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.indexTable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnTable",{get:function(){return this.columnsTable},enumerable:!0,configurable:!0}),t.prototype.serialize=function(){return{data:this.dataTable.serialize(),index:this.indexTable.serialize(),columns:this.columnsTable.serialize()}},t.prototype.getColumnTypeId=function(t,e){return t.schema.fields[e].type.typeId},t.prototype.nanosToDate=function(t){return new Date(t/1e6)},t}(),oc=function(){return(oc=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};!function(t){t.COMPONENT_READY="streamlit:componentReady",t.SET_COMPONENT_VALUE="streamlit:setComponentValue",t.SET_FRAME_HEIGHT="streamlit:setFrameHeight"}(ic||(ic={}));var sc=function(){function t(){}return t.API_VERSION=1,t.RENDER_EVENT="streamlit:render",t.events=new M,t.registeredMessageListener=!1,t.setComponentReady=function(){t.registeredMessageListener||(window.addEventListener("message",t.onMessageEvent),t.registeredMessageListener=!0),t.sendBackMsg(ic.COMPONENT_READY,{apiVersion:t.API_VERSION})},t.setFrameHeight=function(e){void 0===e&&(e=document.body.scrollHeight),e!==t.lastFrameHeight&&(t.lastFrameHeight=e,t.sendBackMsg(ic.SET_FRAME_HEIGHT,{height:e}))},t.setComponentValue=function(e){var n;e instanceof rc?(n="dataframe",e=e.serialize()):!function(t){var e=!1;try{e=t instanceof BigInt64Array||t instanceof BigUint64Array}catch(n){}return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array||e}(e)?e instanceof ArrayBuffer?(n="bytes",e=new Uint8Array(e)):n="json":(n="bytes",e=new Uint8Array(e.buffer)),t.sendBackMsg(ic.SET_COMPONENT_VALUE,{value:e,dataType:n})},t.onMessageEvent=function(e){switch(e.data.type){case t.RENDER_EVENT:t.onRenderMessage(e.data)}},t.onRenderMessage=function(e){var n=e.args;null==n&&(console.error("Got null args in onRenderMessage. This should never happen"),n={});var i=e.dfs&&e.dfs.length>0?t.argsDataframeToObject(e.dfs):{};n=oc(oc({},n),i);var r=Boolean(e.disabled),o=e.theme;o&&ac(o);var s={disabled:r,args:n,theme:o},a=new CustomEvent(t.RENDER_EVENT,{detail:s});t.events.dispatchEvent(a)},t.argsDataframeToObject=function(e){var n=e.map((function(e){var n=e.key,i=e.value;return[n,t.toArrowTable(i)]}));return Object.fromEntries(n)},t.toArrowTable=function(t){var e=t.data,n=e.data,i=e.index,r=e.columns,o=e.styler;return new rc(n,i,r,o)},t.sendBackMsg=function(t,e){window.parent.postMessage(oc({isStreamlitMessage:!0,type:t},e),"*")},t}(),ac=function(t){var e=document.createElement("style");document.head.appendChild(e),e.innerHTML="\n    :root {\n      --primary-color: "+t.primaryColor+";\n      --background-color: "+t.backgroundColor+";\n      --secondary-background-color: "+t.secondaryBackgroundColor+";\n      --text-color: "+t.textColor+";\n      --font: "+t.font+";\n    }\n\n    body {\n      background-color: var(--background-color);\n      color: var(--text-color);\n    }\n  "};var lc=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}lc(e,t),e.prototype.componentDidMount=function(){sc.setFrameHeight()},e.prototype.componentDidUpdate=function(){sc.setFrameHeight()}}(d.a.PureComponent);function cc(t){var e=function(e){function n(n){var i=e.call(this,n)||this;return i.componentDidMount=function(){sc.events.addEventListener(sc.RENDER_EVENT,i.onRenderEvent),sc.setComponentReady()},i.componentDidUpdate=function(){null!=i.state.componentError&&sc.setFrameHeight()},i.componentWillUnmount=function(){sc.events.removeEventListener(sc.RENDER_EVENT,i.onRenderEvent)},i.onRenderEvent=function(t){var e=t;i.setState({renderData:e.detail})},i.render=function(){return null!=i.state.componentError?d.a.createElement("div",null,d.a.createElement("h1",null,"Component Error"),d.a.createElement("span",null,i.state.componentError.message)):null==i.state.renderData?null:d.a.createElement(t,{width:window.innerWidth,disabled:i.state.renderData.disabled,args:i.state.renderData.args,theme:i.state.renderData.theme})},i.state={renderData:void 0,componentError:void 0},i}return lc(n,e),n.getDerivedStateFromError=function(t){return{componentError:t}},n}(d.a.PureComponent);return u()(e,t)}},,function(t,e,n){"use strict";var i=n(56),r=Function.prototype.call;t.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},function(t,e,n){"use strict";var i=n(146),r=n(83);t.exports=function(t){return i(r(t))}},function(t,e,n){"use strict";var i=n(32),r=i({}.toString),o=i("".slice);t.exports=function(t){return o(r(t),8,-1)}},function(t,e,n){"use strict";var i=n(28),r=n(31),o=function(t){return r(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(i[t]):i[t]&&i[t][e]}},function(t,e,n){"use strict";var i=n(154),r=n(28),o=n(66),s=t.exports=r["__core-js_shared__"]||o("__core-js_shared__",{});(s.versions||(s.versions=[])).push({version:"3.38.1",mode:i?"pure":"global",copyright:"\xa9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(t,e,n){"use strict";var i=n(28),r=Object.defineProperty;t.exports=function(t,e){try{r(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},function(t,e,n){"use strict";var i=n(46),r=n(92),o=n(156),s=n(95),a=n(85),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor;e.f=i?o?function(t,e,n){if(s(t),e=a(e),s(n),"function"===typeof t&&"prototype"===e&&"value"in n&&"writable"in n&&!n.writable){var i=u(t,e);i&&i.writable&&(t[e]=n.value,n={configurable:"configurable"in n?n.configurable:i.configurable,enumerable:"enumerable"in n?n.enumerable:i.enumerable,writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(s(t),e=a(e),s(n),r)try{return c(t,e,n)}catch(i){}if("get"in n||"set"in n)throw new l("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(47),r=n(1);class o extends i.a{constructor(){super(arguments.length>0&&void 0!==arguments[0]&&arguments[0])}getHiddenIndexes(){return Object(r.d)(this.getValues(),(t,e,n)=>(e&&t.push(n),t),[])}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n(36),r=n(37),o=n(33),s=n(41),a=n(8);function l(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class c extends i.a{constructor(){super(...arguments),l(this,"orderOfIndexes",[])}getValues(){return this.orderOfIndexes.map(t=>this.indexedValues[t])}setValues(t){this.orderOfIndexes=[...Array(t.length).keys()],super.setValues(t)}setValueAtIndex(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.orderOfIndexes.length;return t<this.indexedValues.length&&(this.indexedValues[t]=e,!1===this.orderOfIndexes.includes(t)&&this.orderOfIndexes.splice(n,0,t),this.runLocalHooks("change"),!0)}clearValue(t){this.orderOfIndexes=Object(o.b)(this.orderOfIndexes,[t]),Object(a.d)(this.initValueOrFn)?super.setValueAtIndex(t,this.initValueOrFn(t)):super.setValueAtIndex(t,this.initValueOrFn)}getLength(){return this.orderOfIndexes.length}setDefaultValues(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.indexedValues.length;this.orderOfIndexes.length=0,super.setDefaultValues(t)}insert(t,e){this.indexedValues=Object(r.a)(this.indexedValues,t,e,this.initValueOrFn),this.orderOfIndexes=Object(s.b)(this.orderOfIndexes,e),super.insert(t,e)}remove(t){this.indexedValues=Object(r.b)(this.indexedValues,t),this.orderOfIndexes=Object(o.b)(this.orderOfIndexes,t),this.orderOfIndexes=Object(s.a)(this.orderOfIndexes,t),super.remove(t)}getEntries(){return this.orderOfIndexes.map(t=>[t,this.getValueAtIndex(t)])}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(47),r=n(1);class o extends i.a{constructor(){super(arguments.length>0&&void 0!==arguments[0]&&arguments[0])}getTrimmedIndexes(){return Object(r.d)(this.getValues(),(t,e,n)=>(e&&t.push(n),t),[])}}},function(t,e,n){"use strict";var i=n(54);function r(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function o(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){return t.get(a(t,e))}function a(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var l=new WeakMap;class c{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var s,c,u;o(this,"highlight",null),o(this,"from",null),o(this,"to",null),r(this,l,!1),this.highlight=t.clone(),this.from=e.clone(),this.to=n.clone(),c=this,u=i,(s=l).set(a(s,c),u)}setHighlight(t){return this.highlight=t.clone(),this}setFrom(t){return this.from=t.clone(),this}setTo(t){return this.to=t.clone(),this}isValid(t){return this.from.isValid(t)&&this.to.isValid(t)}isSingle(){return this.isSingleCell()||this.isSingleHeader()}isSingleCell(){return this.from.row>=0&&this.from.row===this.to.row&&this.from.col>=0&&this.from.col===this.to.col}isSingleHeader(){return(this.from.row<0||this.from.col<0)&&this.from.row===this.to.row&&this.from.col===this.to.col}isHeader(){return!(!this.from.isHeader()||!this.to.isHeader())||(this.from.col<0&&this.to.col<0||this.from.row<0&&this.to.row<0)}containsHeaders(){return this.from.isHeader()||this.to.isHeader()}getOuterHeight(){return Math.max(this.from.row,this.to.row)-Math.min(this.from.row,this.to.row)+1}getOuterWidth(){return Math.max(this.from.col,this.to.col)-Math.min(this.from.col,this.to.col)+1}getHeight(){if(this.from.row<0&&this.to.row<0)return 0;const t=Math.max(this.from.row,0),e=Math.max(this.to.row,0);return Math.max(t,e)-Math.min(t,e)+1}getWidth(){if(this.from.col<0&&this.to.col<0)return 0;const t=Math.max(this.from.col,0),e=Math.max(this.to.col,0);return Math.max(t,e)-Math.min(t,e)+1}getCellsCount(){return this.getWidth()*this.getHeight()}includes(t){const{row:e,col:n}=t,i=this.getOuterTopStartCorner(),r=this.getOuterBottomEndCorner();return i.row<=e&&r.row>=e&&i.col<=n&&r.col>=n}includesRange(t){return this.includes(t.getOuterTopStartCorner())&&this.includes(t.getOuterBottomEndCorner())}isEqual(t){return Math.min(this.from.row,this.to.row)===Math.min(t.from.row,t.to.row)&&Math.max(this.from.row,this.to.row)===Math.max(t.from.row,t.to.row)&&Math.min(this.from.col,this.to.col)===Math.min(t.from.col,t.to.col)&&Math.max(this.from.col,this.to.col)===Math.max(t.from.col,t.to.col)}overlaps(t){return t.isSouthEastOf(this.getOuterTopLeftCorner())&&t.isNorthWestOf(this.getOuterBottomRightCorner())}isSouthEastOf(t){return this.getOuterTopLeftCorner().isSouthEastOf(t)||this.getOuterBottomRightCorner().isSouthEastOf(t)}isNorthWestOf(t){return this.getOuterTopLeftCorner().isNorthWestOf(t)||this.getOuterBottomRightCorner().isNorthWestOf(t)}isOverlappingHorizontally(t){return this.getOuterTopEndCorner().col>=t.getOuterTopStartCorner().col&&this.getOuterTopEndCorner().col<=t.getOuterTopEndCorner().col||this.getOuterTopStartCorner().col<=t.getOuterTopEndCorner().col&&this.getOuterTopStartCorner().col>=t.getOuterTopStartCorner().col}isOverlappingVertically(t){return this.getOuterBottomStartCorner().row>=t.getOuterTopRightCorner().row&&this.getOuterBottomStartCorner().row<=t.getOuterBottomStartCorner().row||this.getOuterTopEndCorner().row<=t.getOuterBottomStartCorner().row&&this.getOuterTopEndCorner().row>=t.getOuterTopRightCorner().row}expand(t){const e=this.getOuterTopStartCorner(),n=this.getOuterBottomEndCorner();return(t.row<e.row||t.col<e.col||t.row>n.row||t.col>n.col)&&(this.from=this._createCellCoords(Math.min(e.row,t.row),Math.min(e.col,t.col)),this.to=this._createCellCoords(Math.max(n.row,t.row),Math.max(n.col,t.col)),!0)}expandByRange(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.includesRange(t)||!this.overlaps(t))return!1;const n=this.getOuterTopStartCorner(),i=this.getOuterBottomEndCorner(),r=this.getDirection(),o=t.getOuterTopStartCorner(),s=t.getOuterBottomEndCorner(),a=Math.min(n.row,o.row),l=Math.min(n.col,o.col),c=Math.max(i.row,s.row),u=Math.max(i.col,s.col),h=this._createCellCoords(a,l),d=this._createCellCoords(c,u);return this.from=h,this.to=d,this.setDirection(r),e&&(this.highlight.row===this.getOuterBottomRightCorner().row&&"N-S"===this.getVerticalDirection()&&this.flipDirectionVertically(),this.highlight.col===this.getOuterTopRightCorner().col&&"W-E"===this.getHorizontalDirection()&&this.flipDirectionHorizontally()),!0}getDirection(){return this.from.isNorthWestOf(this.to)?"NW-SE":this.from.isNorthEastOf(this.to)?"NE-SW":this.from.isSouthEastOf(this.to)?"SE-NW":this.from.isSouthWestOf(this.to)?"SW-NE":void 0}setDirection(t){switch(t){case"NW-SE":[this.from,this.to]=[this.getOuterTopLeftCorner(),this.getOuterBottomRightCorner()];break;case"NE-SW":[this.from,this.to]=[this.getOuterTopRightCorner(),this.getOuterBottomLeftCorner()];break;case"SE-NW":[this.from,this.to]=[this.getOuterBottomRightCorner(),this.getOuterTopLeftCorner()];break;case"SW-NE":[this.from,this.to]=[this.getOuterBottomLeftCorner(),this.getOuterTopRightCorner()]}}getVerticalDirection(){return["NE-SW","NW-SE"].indexOf(this.getDirection())>-1?"N-S":"S-N"}getHorizontalDirection(){return["NW-SE","SW-NE"].indexOf(this.getDirection())>-1?"W-E":"E-W"}flipDirectionVertically(){switch(this.getDirection()){case"NW-SE":this.setDirection("SW-NE");break;case"NE-SW":this.setDirection("SE-NW");break;case"SE-NW":this.setDirection("NE-SW");break;case"SW-NE":this.setDirection("NW-SE")}}flipDirectionHorizontally(){switch(this.getDirection()){case"NW-SE":this.setDirection("NE-SW");break;case"NE-SW":this.setDirection("NW-SE");break;case"SE-NW":this.setDirection("SW-NE");break;case"SW-NE":this.setDirection("SE-NW")}}getTopStartCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col)).normalize()}getTopLeftCorner(){return s(l,this)?this.getTopEndCorner():this.getTopStartCorner()}getBottomEndCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col)).normalize()}getBottomRightCorner(){return s(l,this)?this.getBottomStartCorner():this.getBottomEndCorner()}getTopEndCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col)).normalize()}getTopRightCorner(){return s(l,this)?this.getTopStartCorner():this.getTopEndCorner()}getBottomStartCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col)).normalize()}getBottomLeftCorner(){return s(l,this)?this.getBottomEndCorner():this.getBottomStartCorner()}getOuterTopStartCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}getOuterTopLeftCorner(){return s(l,this)?this.getOuterTopEndCorner():this.getOuterTopStartCorner()}getOuterBottomEndCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}getOuterBottomRightCorner(){return s(l,this)?this.getOuterBottomStartCorner():this.getOuterBottomEndCorner()}getOuterTopEndCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}getOuterTopRightCorner(){return s(l,this)?this.getOuterTopStartCorner():this.getOuterTopEndCorner()}getOuterBottomStartCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}getOuterBottomLeftCorner(){return s(l,this)?this.getOuterBottomEndCorner():this.getOuterBottomStartCorner()}isCorner(t){return t.isEqual(this.getOuterTopLeftCorner())||t.isEqual(this.getOuterTopRightCorner())||t.isEqual(this.getOuterBottomLeftCorner())||t.isEqual(this.getOuterBottomRightCorner())}getOppositeCorner(t){return t instanceof i.a&&(t.isEqual(this.getOuterBottomEndCorner())?this.getOuterTopStartCorner():t.isEqual(this.getOuterTopStartCorner())?this.getOuterBottomEndCorner():t.isEqual(this.getOuterTopEndCorner())?this.getOuterBottomStartCorner():t.isEqual(this.getOuterBottomStartCorner())?this.getOuterTopEndCorner():void 0)}getBordersSharedWith(t){if(!this.includesRange(t))return[];const e=Math.min(this.from.row,this.to.row),n=Math.max(this.from.row,this.to.row),i=Math.min(this.from.col,this.to.col),r=Math.max(this.from.col,this.to.col),o=Math.min(t.from.row,t.to.row),a=Math.max(t.from.row,t.to.row),c=Math.min(t.from.col,t.to.col),u=Math.max(t.from.col,t.to.col),h=[];return e===o&&h.push("top"),r===u&&h.push(s(l,this)?"left":"right"),n===a&&h.push("bottom"),i===c&&h.push(s(l,this)?"right":"left"),h}getInner(){const t=this.getOuterTopStartCorner(),e=this.getOuterBottomEndCorner(),n=[];for(let i=t.row;i<=e.row;i++)for(let r=t.col;r<=e.col;r++)this.from.row===i&&this.from.col===r||this.to.row===i&&this.to.col===r||n.push(this._createCellCoords(i,r));return n}getAll(){const t=this.getOuterTopStartCorner(),e=this.getOuterBottomEndCorner(),n=[];for(let i=t.row;i<=e.row;i++)for(let r=t.col;r<=e.col;r++)t.row===i&&t.col===r?n.push(t):e.row===i&&e.col===r?n.push(e):n.push(this._createCellCoords(i,r));return n}forAll(t){const e=this.getOuterTopStartCorner(),n=this.getOuterBottomEndCorner();for(let i=e.row;i<=n.row;i++)for(let r=e.col;r<=n.col;r++){if(!1===t(i,r))return}}clone(){return new c(this.highlight,this.from,this.to,s(l,this))}toObject(){return{from:this.from.toObject(),to:this.to.toObject()}}_createCellCoords(t,e){return new i.a(t,e,s(l,this))}}e.a=c},,,,,,,,function(t,e,n){"use strict";var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(t,e){for(var n,a,l=s(t),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))r.call(n,u)&&(l[u]=n[u]);if(i){a=i(n);for(var h=0;h<a.length;h++)o.call(n,a[h])&&(l[a[h]]=n[a[h]])}}return l}},function(t,e,n){"use strict";var i=n(28),r=n(81).f,o=n(94),s=n(157),a=n(66),l=n(164),c=n(175);t.exports=function(t,e){var n,u,h,d,f,g=t.target,p=t.global,m=t.stat;if(n=p?i:m?i[g]||a(g,{}):i[g]&&i[g].prototype)for(u in e){if(d=e[u],h=t.dontCallGetSet?(f=r(n,u))&&f.value:n[u],!c(p?u:g+(m?".":"#")+u,t.forced)&&void 0!==h){if(typeof d==typeof h)continue;l(d,h)}(t.sham||h&&h.sham)&&o(d,"sham",!0),s(n,u,d,t)}}},function(t,e,n){"use strict";var i=n(46),r=n(61),o=n(145),s=n(82),a=n(62),l=n(85),c=n(39),u=n(92),h=Object.getOwnPropertyDescriptor;e.f=i?h:function(t,e){if(t=a(t),e=l(e),u)try{return h(t,e)}catch(n){}if(c(t,e))return s(!r(o.f,t,e),t[e])}},function(t,e,n){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var i=n(84),r=TypeError;t.exports=function(t){if(i(t))throw new r("Can't call method on "+t);return t}},function(t,e,n){"use strict";t.exports=function(t){return null===t||void 0===t}},function(t,e,n){"use strict";var i=n(147),r=n(86);t.exports=function(t){var e=i(t,"string");return r(e)?e:e+""}},function(t,e,n){"use strict";var i=n(64),r=n(31),o=n(148),s=n(87),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return r(e)&&o(e.prototype,a(t))}},function(t,e,n){"use strict";var i=n(88);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){"use strict";var i=n(149),r=n(34),o=n(28).String;t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol("symbol detection");return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},function(t,e,n){"use strict";var i=n(31),r=n(151),o=TypeError;t.exports=function(t){if(i(t))return t;throw new o(r(t)+" is not a function")}},function(t,e,n){"use strict";var i=n(65);t.exports=function(t,e){return i[t]||(i[t]=e||{})}},function(t,e,n){"use strict";var i=n(32),r=0,o=Math.random(),s=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++r+o,36)}},function(t,e,n){"use strict";var i=n(46),r=n(34),o=n(93);t.exports=!i&&!r((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){"use strict";var i=n(28),r=n(52),o=i.document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},function(t,e,n){"use strict";var i=n(46),r=n(67),o=n(82);t.exports=i?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){"use strict";var i=n(52),r=String,o=TypeError;t.exports=function(t){if(i(t))return t;throw new o(r(t)+" is not an object")}},function(t,e,n){"use strict";t.exports={}},function(t,e,n){"use strict";var i=n(170);t.exports=function(t){var e=+t;return e!==e||0===e?0:i(e)}},function(t,e,n){"use strict";var i,r,o,s,a=n(28),l=n(99),c=n(176),u=n(31),h=n(39),d=n(34),f=n(178),g=n(100),p=n(93),m=n(101),b=n(179),y=n(180),w=a.setImmediate,v=a.clearImmediate,C=a.process,S=a.Dispatch,O=a.Function,T=a.MessageChannel,_=a.String,E=0,R={};d((function(){i=a.location}));var M=function(t){if(h(R,t)){var e=R[t];delete R[t],e()}},x=function(t){return function(){M(t)}},I=function(t){M(t.data)},k=function(t){a.postMessage(_(t),i.protocol+"//"+i.host)};w&&v||(w=function(t){m(arguments.length,1);var e=u(t)?t:O(t),n=g(arguments,1);return R[++E]=function(){l(e,void 0,n)},r(E),E},v=function(t){delete R[t]},y?r=function(t){C.nextTick(x(t))}:S&&S.now?r=function(t){S.now(x(t))}:T&&!b?(s=(o=new T).port2,o.port1.onmessage=I,r=c(s.postMessage,s)):a.addEventListener&&u(a.postMessage)&&!a.importScripts&&i&&"file:"!==i.protocol&&!d(k)?(r=k,a.addEventListener("message",I,!1)):r="onreadystatechange"in p("script")?function(t){f.appendChild(p("script")).onreadystatechange=function(){f.removeChild(this),M(t)}}:function(t){setTimeout(x(t),0)}),t.exports={set:w,clear:v}},function(t,e,n){"use strict";var i=n(56),r=Function.prototype,o=r.apply,s=r.call;t.exports="object"==typeof Reflect&&Reflect.apply||(i?s.bind(o):function(){return s.apply(o,arguments)})},function(t,e,n){"use strict";var i=n(32);t.exports=i([].slice)},function(t,e,n){"use strict";var i=TypeError;t.exports=function(t,e){if(t<e)throw new i("Not enough arguments");return t}},function(t,e,n){"use strict";var i=n(28),r=n(57),o=n(63),s=function(t){return r.slice(0,t.length)===t};t.exports=s("Bun/")?"BUN":s("Cloudflare-Workers")?"CLOUDFLARE":s("Deno/")?"DENO":s("Node.js/")?"NODE":i.Bun&&"string"==typeof Bun.version?"BUN":i.Deno&&"object"==typeof Deno.version?"DENO":"process"===o(i.process)?"NODE":i.window&&i.document?"BROWSER":"REST"},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(36),r=n(33),o=n(41);class s extends i.a{constructor(){super(t=>t)}insert(t,e){const n=Object(o.b)(this.indexedValues,e);this.indexedValues=Object(r.a)(n,t,e),super.insert(t,e)}remove(t){const e=Object(r.b)(this.indexedValues,t);this.indexedValues=Object(o.a)(e,t),super.remove(t)}}},function(t,e,n){"use strict";var i=n(139),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(t){return i.isMemo(t)?s:a[t.$$typeof]||r}a[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[i.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,g=Object.prototype;t.exports=function t(e,n,i){if("string"!==typeof n){if(g){var r=f(n);r&&r!==g&&t(e,r,i)}var s=u(n);h&&(s=s.concat(h(n)));for(var a=l(e),p=l(n),m=0;m<s.length;++m){var b=s[m];if(!o[b]&&(!i||!i[b])&&(!p||!p[b])&&(!a||!a[b])){var y=d(n,b);try{c(e,b,y)}catch(w){}}}}return e}},function(t,e,n){t.exports=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,n){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,n)}function n(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function i(t,r,o){return(i=n()?Reflect.construct:function(t,n,i){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(t,r));return i&&e(o,i.prototype),o}).apply(null,arguments)}function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var s=Object.hasOwnProperty,a=Object.setPrototypeOf,l=Object.isFrozen,c=Object.getPrototypeOf,u=Object.getOwnPropertyDescriptor,h=Object.freeze,d=Object.seal,f=Object.create,g="undefined"!==typeof Reflect&&Reflect,p=g.apply,m=g.construct;p||(p=function(t,e,n){return t.apply(e,n)}),h||(h=function(t){return t}),d||(d=function(t){return t}),m||(m=function(t,e){return i(t,r(e))});var b,y=x(Array.prototype.forEach),w=x(Array.prototype.pop),v=x(Array.prototype.push),C=x(String.prototype.toLowerCase),S=x(String.prototype.toString),O=x(String.prototype.match),T=x(String.prototype.replace),_=x(String.prototype.indexOf),E=x(String.prototype.trim),R=x(RegExp.prototype.test),M=(b=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m(b,e)});function x(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return p(t,e,i)}}function I(t,e,n){var i;n=null!==(i=n)&&void 0!==i?i:C,a&&a(t,null);for(var r=e.length;r--;){var o=e[r];if("string"===typeof o){var s=n(o);s!==o&&(l(e)||(e[r]=s),o=s)}t[o]=!0}return t}function k(t){var e,n=f(null);for(e in t)!0===p(s,t,[e])&&(n[e]=t[e]);return n}function A(t,e){for(;null!==t;){var n=u(t,e);if(n){if(n.get)return x(n.get);if("function"===typeof n.value)return x(n.value)}t=c(t)}return function(t){return console.warn("fallback value for",t),null}}var N=h(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),j=h(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),H=h(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),D=h(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),P=h(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),L=h(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),F=h(["#text"]),B=h(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),V=h(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),U=h(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),W=h(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),z=d(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Y=d(/<%[\w\W]*|[\w\W]*%>/gm),G=d(/\${[\w\W]*}/gm),$=d(/^data-[\-\w.\u00B7-\uFFFF]/),K=d(/^aria-[\-\w]+$/),X=d(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),q=d(/^(?:\w+script|data):/i),Q=d(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Z=d(/^html$/i),J=d(/^[a-z][.\w]*(-[.\w]+)+$/i),tt=function(){return"undefined"===typeof window?null:window},et=function(e,n){if("object"!==t(e)||"function"!==typeof e.createPolicy)return null;var i=null;n.currentScript&&n.currentScript.hasAttribute("data-tt-policy-suffix")&&(i=n.currentScript.getAttribute("data-tt-policy-suffix"));var r="dompurify"+(i?"#"+i:"");try{return e.createPolicy(r,{createHTML:function(t){return t},createScriptURL:function(t){return t}})}catch(o){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};return function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt(),i=function(t){return e(t)};if(i.version="2.5.7",i.removed=[],!n||!n.document||9!==n.document.nodeType)return i.isSupported=!1,i;var o=n.document,s=n.document,a=n.DocumentFragment,l=n.HTMLTemplateElement,c=n.Node,u=n.Element,d=n.NodeFilter,f=n.NamedNodeMap,g=void 0===f?n.NamedNodeMap||n.MozNamedAttrMap:f,p=n.HTMLFormElement,m=n.DOMParser,b=n.trustedTypes,x=u.prototype,nt=A(x,"cloneNode"),it=A(x,"nextSibling"),rt=A(x,"childNodes"),ot=A(x,"parentNode");if("function"===typeof l){var st=s.createElement("template");st.content&&st.content.ownerDocument&&(s=st.content.ownerDocument)}var at=et(b,o),lt=at?at.createHTML(""):"",ct=s,ut=ct.implementation,ht=ct.createNodeIterator,dt=ct.createDocumentFragment,ft=ct.getElementsByTagName,gt=o.importNode,pt={};try{pt=k(s).documentMode?s.documentMode:{}}catch(De){}var mt={};i.isSupported="function"===typeof ot&&ut&&void 0!==ut.createHTMLDocument&&9!==pt;var bt,yt,wt=z,vt=Y,Ct=G,St=$,Ot=K,Tt=q,_t=Q,Et=J,Rt=X,Mt=null,xt=I({},[].concat(r(N),r(j),r(H),r(P),r(F))),It=null,kt=I({},[].concat(r(B),r(V),r(U),r(W))),At=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Nt=null,jt=null,Ht=!0,Dt=!0,Pt=!1,Lt=!0,Ft=!1,Bt=!0,Vt=!1,Ut=!1,Wt=!1,zt=!1,Yt=!1,Gt=!1,$t=!0,Kt=!1,Xt="user-content-",qt=!0,Qt=!1,Zt={},Jt=null,te=I({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ee=null,ne=I({},["audio","video","img","source","image","track"]),ie=null,re=I({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),oe="http://www.w3.org/1998/Math/MathML",se="http://www.w3.org/2000/svg",ae="http://www.w3.org/1999/xhtml",le=ae,ce=!1,ue=null,he=I({},[oe,se,ae],S),de=["application/xhtml+xml","text/html"],fe="text/html",ge=null,pe=s.createElement("form"),me=function(t){return t instanceof RegExp||t instanceof Function},be=function(e){ge&&ge===e||(e&&"object"===t(e)||(e={}),e=k(e),bt=bt=-1===de.indexOf(e.PARSER_MEDIA_TYPE)?fe:e.PARSER_MEDIA_TYPE,yt="application/xhtml+xml"===bt?S:C,Mt="ALLOWED_TAGS"in e?I({},e.ALLOWED_TAGS,yt):xt,It="ALLOWED_ATTR"in e?I({},e.ALLOWED_ATTR,yt):kt,ue="ALLOWED_NAMESPACES"in e?I({},e.ALLOWED_NAMESPACES,S):he,ie="ADD_URI_SAFE_ATTR"in e?I(k(re),e.ADD_URI_SAFE_ATTR,yt):re,ee="ADD_DATA_URI_TAGS"in e?I(k(ne),e.ADD_DATA_URI_TAGS,yt):ne,Jt="FORBID_CONTENTS"in e?I({},e.FORBID_CONTENTS,yt):te,Nt="FORBID_TAGS"in e?I({},e.FORBID_TAGS,yt):{},jt="FORBID_ATTR"in e?I({},e.FORBID_ATTR,yt):{},Zt="USE_PROFILES"in e&&e.USE_PROFILES,Ht=!1!==e.ALLOW_ARIA_ATTR,Dt=!1!==e.ALLOW_DATA_ATTR,Pt=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Lt=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Ft=e.SAFE_FOR_TEMPLATES||!1,Bt=!1!==e.SAFE_FOR_XML,Vt=e.WHOLE_DOCUMENT||!1,zt=e.RETURN_DOM||!1,Yt=e.RETURN_DOM_FRAGMENT||!1,Gt=e.RETURN_TRUSTED_TYPE||!1,Wt=e.FORCE_BODY||!1,$t=!1!==e.SANITIZE_DOM,Kt=e.SANITIZE_NAMED_PROPS||!1,qt=!1!==e.KEEP_CONTENT,Qt=e.IN_PLACE||!1,Rt=e.ALLOWED_URI_REGEXP||Rt,le=e.NAMESPACE||ae,At=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&me(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(At.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&me(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(At.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(At.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ft&&(Dt=!1),Yt&&(zt=!0),Zt&&(Mt=I({},r(F)),It=[],!0===Zt.html&&(I(Mt,N),I(It,B)),!0===Zt.svg&&(I(Mt,j),I(It,V),I(It,W)),!0===Zt.svgFilters&&(I(Mt,H),I(It,V),I(It,W)),!0===Zt.mathMl&&(I(Mt,P),I(It,U),I(It,W))),e.ADD_TAGS&&(Mt===xt&&(Mt=k(Mt)),I(Mt,e.ADD_TAGS,yt)),e.ADD_ATTR&&(It===kt&&(It=k(It)),I(It,e.ADD_ATTR,yt)),e.ADD_URI_SAFE_ATTR&&I(ie,e.ADD_URI_SAFE_ATTR,yt),e.FORBID_CONTENTS&&(Jt===te&&(Jt=k(Jt)),I(Jt,e.FORBID_CONTENTS,yt)),qt&&(Mt["#text"]=!0),Vt&&I(Mt,["html","head","body"]),Mt.table&&(I(Mt,["tbody"]),delete Nt.tbody),h&&h(e),ge=e)},ye=I({},["mi","mo","mn","ms","mtext"]),we=I({},["annotation-xml"]),ve=I({},["title","style","font","a","script"]),Ce=I({},j);I(Ce,H),I(Ce,D);var Se=I({},P);I(Se,L);var Oe=function(t){var e=ot(t);e&&e.tagName||(e={namespaceURI:le,tagName:"template"});var n=C(t.tagName),i=C(e.tagName);return!!ue[t.namespaceURI]&&(t.namespaceURI===se?e.namespaceURI===ae?"svg"===n:e.namespaceURI===oe?"svg"===n&&("annotation-xml"===i||ye[i]):Boolean(Ce[n]):t.namespaceURI===oe?e.namespaceURI===ae?"math"===n:e.namespaceURI===se?"math"===n&&we[i]:Boolean(Se[n]):t.namespaceURI===ae?!(e.namespaceURI===se&&!we[i])&&!(e.namespaceURI===oe&&!ye[i])&&!Se[n]&&(ve[n]||!Ce[n]):!("application/xhtml+xml"!==bt||!ue[t.namespaceURI]))},Te=function(t){v(i.removed,{element:t});try{t.parentNode.removeChild(t)}catch(De){try{t.outerHTML=lt}catch(De){t.remove()}}},_e=function(t,e){try{v(i.removed,{attribute:e.getAttributeNode(t),from:e})}catch(De){v(i.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!It[t])if(zt||Yt)try{Te(e)}catch(De){}else try{e.setAttribute(t,"")}catch(De){}},Ee=function(t){var e,n;if(Wt)t="<remove></remove>"+t;else{var i=O(t,/^[\r\n\t ]+/);n=i&&i[0]}"application/xhtml+xml"===bt&&le===ae&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var r=at?at.createHTML(t):t;if(le===ae)try{e=(new m).parseFromString(r,bt)}catch(De){}if(!e||!e.documentElement){e=ut.createDocument(le,"template",null);try{e.documentElement.innerHTML=ce?lt:r}catch(De){}}var o=e.body||e.documentElement;return t&&n&&o.insertBefore(s.createTextNode(n),o.childNodes[0]||null),le===ae?ft.call(e,Vt?"html":"body")[0]:Vt?e.documentElement:o},Re=function(t){return ht.call(t.ownerDocument||t,t,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null,!1)},Me=function(t){return t instanceof p&&("string"!==typeof t.nodeName||"string"!==typeof t.textContent||"function"!==typeof t.removeChild||!(t.attributes instanceof g)||"function"!==typeof t.removeAttribute||"function"!==typeof t.setAttribute||"string"!==typeof t.namespaceURI||"function"!==typeof t.insertBefore||"function"!==typeof t.hasChildNodes)},xe=function(e){return"object"===t(c)?e instanceof c:e&&"object"===t(e)&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName},Ie=function(t,e,n){mt[t]&&y(mt[t],(function(t){t.call(i,e,n,ge)}))},ke=function(t){var e;if(Ie("beforeSanitizeElements",t,null),Me(t))return Te(t),!0;if(R(/[\u0080-\uFFFF]/,t.nodeName))return Te(t),!0;var n=yt(t.nodeName);if(Ie("uponSanitizeElement",t,{tagName:n,allowedTags:Mt}),t.hasChildNodes()&&!xe(t.firstElementChild)&&(!xe(t.content)||!xe(t.content.firstElementChild))&&R(/<[/\w]/g,t.innerHTML)&&R(/<[/\w]/g,t.textContent))return Te(t),!0;if("select"===n&&R(/<template/i,t.innerHTML))return Te(t),!0;if(7===t.nodeType)return Te(t),!0;if(Bt&&8===t.nodeType&&R(/<[/\w]/g,t.data))return Te(t),!0;if(!Mt[n]||Nt[n]){if(!Nt[n]&&Ne(n)){if(At.tagNameCheck instanceof RegExp&&R(At.tagNameCheck,n))return!1;if(At.tagNameCheck instanceof Function&&At.tagNameCheck(n))return!1}if(qt&&!Jt[n]){var r=ot(t)||t.parentNode,o=rt(t)||t.childNodes;if(o&&r)for(var s=o.length-1;s>=0;--s){var a=nt(o[s],!0);a.__removalCount=(t.__removalCount||0)+1,r.insertBefore(a,it(t))}}return Te(t),!0}return t instanceof u&&!Oe(t)?(Te(t),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!R(/<\/no(script|embed|frames)/i,t.innerHTML)?(Ft&&3===t.nodeType&&(e=t.textContent,e=T(e,wt," "),e=T(e,vt," "),e=T(e,Ct," "),t.textContent!==e&&(v(i.removed,{element:t.cloneNode()}),t.textContent=e)),Ie("afterSanitizeElements",t,null),!1):(Te(t),!0)},Ae=function(t,e,n){if($t&&("id"===e||"name"===e)&&(n in s||n in pe))return!1;if(Dt&&!jt[e]&&R(St,e));else if(Ht&&R(Ot,e));else if(!It[e]||jt[e]){if(!(Ne(t)&&(At.tagNameCheck instanceof RegExp&&R(At.tagNameCheck,t)||At.tagNameCheck instanceof Function&&At.tagNameCheck(t))&&(At.attributeNameCheck instanceof RegExp&&R(At.attributeNameCheck,e)||At.attributeNameCheck instanceof Function&&At.attributeNameCheck(e))||"is"===e&&At.allowCustomizedBuiltInElements&&(At.tagNameCheck instanceof RegExp&&R(At.tagNameCheck,n)||At.tagNameCheck instanceof Function&&At.tagNameCheck(n))))return!1}else if(ie[e]);else if(R(Rt,T(n,_t,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==_(n,"data:")||!ee[t])if(Pt&&!R(Tt,T(n,_t,"")));else if(n)return!1;return!0},Ne=function(t){return"annotation-xml"!==t&&O(t,Et)},je=function(e){var n,r,o,s;Ie("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:It};for(s=a.length;s--;){var c=n=a[s],u=c.name,h=c.namespaceURI;if(r="value"===u?n.value:E(n.value),o=yt(u),l.attrName=o,l.attrValue=r,l.keepAttr=!0,l.forceKeepAttr=void 0,Ie("uponSanitizeAttribute",e,l),r=l.attrValue,!l.forceKeepAttr&&(_e(u,e),l.keepAttr))if(Lt||!R(/\/>/i,r)){Ft&&(r=T(r,wt," "),r=T(r,vt," "),r=T(r,Ct," "));var d=yt(e.nodeName);if(Ae(d,o,r))if(!Kt||"id"!==o&&"name"!==o||(_e(u,e),r=Xt+r),Bt&&R(/((--!?|])>)|<\/(style|title)/i,r))_e(u,e);else{if(at&&"object"===t(b)&&"function"===typeof b.getAttributeType)if(h);else switch(b.getAttributeType(d,o)){case"TrustedHTML":r=at.createHTML(r);break;case"TrustedScriptURL":r=at.createScriptURL(r)}try{h?e.setAttributeNS(h,u,r):e.setAttribute(u,r),Me(e)?Te(e):w(i.removed)}catch(De){}}}else _e(u,e)}Ie("afterSanitizeAttributes",e,null)}},He=function t(e){var n,i=Re(e);for(Ie("beforeSanitizeShadowDOM",e,null);n=i.nextNode();)Ie("uponSanitizeShadowNode",n,null),ke(n)||(n.content instanceof a&&t(n.content),je(n));Ie("afterSanitizeShadowDOM",e,null)};return i.sanitize=function(e){var r,s,l,u,h,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((ce=!e)&&(e="\x3c!--\x3e"),"string"!==typeof e&&!xe(e)){if("function"!==typeof e.toString)throw M("toString is not a function");if("string"!==typeof(e=e.toString()))throw M("dirty is not a string, aborting")}if(!i.isSupported){if("object"===t(n.toStaticHTML)||"function"===typeof n.toStaticHTML){if("string"===typeof e)return n.toStaticHTML(e);if(xe(e))return n.toStaticHTML(e.outerHTML)}return e}if(Ut||be(d),i.removed=[],"string"===typeof e&&(Qt=!1),Qt){if(e.nodeName){var f=yt(e.nodeName);if(!Mt[f]||Nt[f])throw M("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof c)1===(s=(r=Ee("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?r=s:r.appendChild(s);else{if(!zt&&!Ft&&!Vt&&-1===e.indexOf("<"))return at&&Gt?at.createHTML(e):e;if(!(r=Ee(e)))return zt?null:Gt?lt:""}r&&Wt&&Te(r.firstChild);for(var g=Re(Qt?e:r);l=g.nextNode();)3===l.nodeType&&l===u||ke(l)||(l.content instanceof a&&He(l.content),je(l),u=l);if(u=null,Qt)return e;if(zt){if(Yt)for(h=dt.call(r.ownerDocument);r.firstChild;)h.appendChild(r.firstChild);else h=r;return(It.shadowroot||It.shadowrootmod)&&(h=gt.call(o,h,!0)),h}var p=Vt?r.outerHTML:r.innerHTML;return Vt&&Mt["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&R(Z,r.ownerDocument.doctype.name)&&(p="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+p),Ft&&(p=T(p,wt," "),p=T(p,vt," "),p=T(p,Ct," ")),at&&Gt?at.createHTML(p):p},i.setConfig=function(t){be(t),Ut=!0},i.clearConfig=function(){ge=null,Ut=!1},i.isValidAttribute=function(t,e,n){ge||be({});var i=yt(t),r=yt(e);return Ae(i,r,n)},i.addHook=function(t,e){"function"===typeof e&&(mt[t]=mt[t]||[],v(mt[t],e))},i.removeHook=function(t){if(mt[t])return w(mt[t])},i.removeHooks=function(t){mt[t]&&(mt[t]=[])},i.removeAllHooks=function(){mt={}},i}()}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return sy}));var i=n(188),r=n(0),o=n(11),s=n(2),a=n(48);class l extends i.a{static get EDITOR_TYPE(){return"handsontable"}open(){super.open(),this.htEditor&&this.htEditor.destroy(),"none"===this.htContainer.style.display&&(this.htContainer.style.display=""),this.htEditor=new this.hot.constructor(this.htContainer,this.htOptions),this.htEditor.init(),this.htEditor.rootElement.style.display="",this.cellProperties.strict?this.htEditor.selectCell(0,0):this.htEditor.deselectCell(),Object(r.V)(this.TEXTAREA,0,this.TEXTAREA.value.length),this.refreshDimensions()}close(){this.htEditor&&(this.htEditor.rootElement.style.display="none"),this.removeHooksByKey("beforeKeyDown"),super.close()}prepare(t,e,n,i,r,o){super.prepare(t,e,n,i,r,o);const a=this,l={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,autoColumnSize:!1,autoRowSize:!1,readOnly:!0,fillHandle:!1,autoWrapCol:!1,autoWrapRow:!1,ariaTags:!1,afterOnCellMouseDown(t,e){const n=this.getSourceData(e.row,e.col);void 0!==n&&a.setValue(n),a.hot.destroyEditor()},preventWheel:!0,layoutDirection:this.hot.isRtl()?"rtl":"ltr"};this.cellProperties.handsontable&&Object(s.h)(l,o.handsontable),this.htOptions=l}beginEditing(t,e){const n=this.hot.getSettings().onBeginEditing;n&&!1===n()||super.beginEditing(t,e)}createElements(){super.createElements();const t=this.hot.rootDocument.createElement("DIV");t.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(t),this.htContainer=t,this.assignHooks()}finishEditing(t,e,n){if(this.htEditor&&this.htEditor.isListening()&&this.hot.listen(),this.htEditor&&this.htEditor.getSelectedLast()){const t=this.htEditor.getValue();void 0!==t&&this.setValue(t)}super.finishEditing(t,e,n)}assignHooks(){this.hot.addHook("afterDestroy",()=>{this.htEditor&&this.htEditor.destroy()})}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor");super.registerShortcuts();const e={group:"handsontableEditor",relativeToGroup:a.a,position:"before"},n=(t,e)=>{const n=this.htEditor;if(void 0!==t&&(t<0||n.flipped&&t>n.countRows()-1?n.deselectCell():n.selectCell(t,0),n.getData().length))return e.preventDefault(),Object(o.f)(e),this.hot.listen(),this.TEXTAREA.focus(),!1};t.addShortcuts([{keys:[["ArrowUp"]],callback:t=>{const e=this.htEditor;let i,r;return!e.getSelectedLast()&&e.flipped?i=e.countRows()-1:e.getSelectedLast()&&(e.flipped?(r=e.getSelectedLast()[0],i=Math.max(0,r-1)):(r=e.getSelectedLast()[0],i=r-1)),n(i,t)},preventDefault:!1},{keys:[["ArrowDown"]],callback:t=>{const e=this.htEditor;let i,r;if(e.getSelectedLast()||e.flipped){if(e.getSelectedLast())if(e.flipped)i=e.getSelectedLast()[0]+1;else if(!e.flipped){const t=e.countRows()-1;r=e.getSelectedLast()[0],i=Math.min(t,r+1)}}else i=0;return n(i,t)},preventDefault:!1}],e)}unregisterShortcuts(){super.unregisterShortcuts();this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup("handsontableEditor")}}var c=n(1),u=n(4),h=n(16),d=n(22),f=n(15),g=n(186),p=n(6);function m(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function b(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){return t.get(function(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}(t,e))}var w=new WeakMap;class v extends l{constructor(){super(...arguments),b(this,"query",null),b(this,"strippedChoices",[]),b(this,"rawChoices",[]),m(this,w,this.hot.guid.slice(0,9)),b(this,"sortByRelevance",(function(t,e,n){const i=[],r=[],o=t.length;let s,a,l,c,d=e.length;if(0===o){for(l=0;l<d;l++)r.push(l);return r}for(l=0;l<d;l++){if(a=Object(h.d)(Object(u.f)(e[l])),n)c=a.indexOf(t);else{const e=this.cellProperties.locale;c=a.toLocaleLowerCase(e).indexOf(t.toLocaleLowerCase(e))}-1!==c&&(s=a.length-c-o,i.push({baseIndex:l,index:c,charsLeft:s,value:a}))}for(i.sort((t,e)=>{if(-1===e.index)return-1;if(-1===t.index)return 1;if(t.index<e.index)return-1;if(e.index<t.index)return 1;if(t.index===e.index){if(t.charsLeft<e.charsLeft)return-1;if(t.charsLeft>e.charsLeft)return 1}return 0}),l=0,d=i.length;l<d;l++)r.push(i[l].baseIndex);return r}))}static get EDITOR_TYPE(){return"autocomplete"}getValue(){const t=this.rawChoices.find(t=>this.stripValueIfNeeded(t)===this.TEXTAREA.value);return Object(u.b)(t)?t:this.TEXTAREA.value}createElements(){super.createElements(),Object(r.a)(this.htContainer,"autocompleteEditor"),Object(r.a)(this.htContainer,-1===this.hot.rootWindow.navigator.platform.indexOf("Mac")?"":"htMacScroll"),this.hot.getSettings().ariaTags&&Object(r.U)(this.TEXTAREA,[Object(p.M)(),Object(p.h)(),Object(p.m)("listbox"),Object(p.b)()])}prepare(t,e,n,i,o,s){super.prepare(t,e,n,i,o,s),this.hot.getSettings().ariaTags&&Object(r.U)(this.TEXTAREA,[Object(p.k)("false"),Object(p.i)(`${y(w,this)}-listbox-${t}-${e}`)])}open(){super.open();const t=void 0===this.cellProperties.trimDropdown||this.cellProperties.trimDropdown,e=this.hot.getSettings().ariaTags,n=Array.isArray(this.cellProperties.source)?this.cellProperties.source:null,i=null===n||void 0===n?void 0:n.length,{row:o,col:s}=this;this.showEditableElement(),this.focus();let a=Object(r.q)();0===a&&Object(f.h)()&&(a+=15),this.addHook("beforeKeyDown",t=>this.onBeforeKeyDown(t)),this.htEditor.updateSettings({colWidths:t?[Object(r.M)(this.TEXTAREA)-2]:void 0,width:t?Object(r.M)(this.TEXTAREA)+a:void 0,autoColumnSize:!0,renderer:(t,o,s,a,l,c,h)=>{Object(g.a)(t,o,s,a,l,c,h);const{filteringCaseSensitive:d,allowHtml:f,locale:m}=this.cellProperties,b=this.query;let y,w,v=Object(u.f)(c);v&&!f&&(y=!0===d?v.indexOf(b):v.toLocaleLowerCase(m).indexOf(b.toLocaleLowerCase(m)),-1!==y&&(w=v.substr(y,b.length),v=v.replace(w,`<strong>${w}</strong>`))),e&&Object(r.U)(o,[Object(p.w)(),...n?[Object(p.J)(i)]:[],...n?[Object(p.x)(n.indexOf(c)+1)]:[],["id",`${this.htEditor.rootElement.id}_${s}-${a}`]]),o.innerHTML=v},afterSelectionEnd:(t,n)=>{if(e){const e=this.htEditor.getCell(t,n,!0);Object(r.U)(e,[Object(p.I)()]),Object(r.U)(this.TEXTAREA,...Object(p.a)(e.id))}}}),e&&(Object(r.U)(this.htEditor.view._wt.wtOverlays.wtTable.TABLE,...Object(p.y)()),Object(r.U)(this.htEditor.rootElement,[Object(p.q)(),Object(p.r)("polite"),Object(p.A)("text"),["id",`${y(w,this)}-listbox-${o}-${s}`]]),Object(r.U)(this.TEXTAREA,...Object(p.k)("true"))),this.hot._registerTimeout(()=>{this.queryChoices(this.TEXTAREA.value)})}close(){this.removeHooksByKey("beforeKeyDown"),super.close(),this.hot.getSettings().ariaTags&&Object(r.U)(this.TEXTAREA,[Object(p.k)("false")])}discardEditor(t){super.discardEditor(t),this.hot.view.render()}queryChoices(t){const e=this.cellProperties.source;this.query=t,"function"===typeof e?e.call(this.cellProperties,t,t=>{this.rawChoices=t,this.updateChoicesList(this.stripValuesIfNeeded(t))}):Array.isArray(e)?(this.rawChoices=e,this.updateChoicesList(this.stripValuesIfNeeded(e))):this.updateChoicesList([])}updateChoicesList(t){const e=Object(r.h)(this.TEXTAREA),n=Object(r.r)(this.TEXTAREA),i=this.cellProperties.sortByRelevance,o=this.cellProperties.filter;let s=null,a=null,l=t;i&&(s=this.sortByRelevance(this.stripValueIfNeeded(this.getValue()),l,this.cellProperties.filteringCaseSensitive));const u=Array.isArray(s)?s.length:0;if(!1===o)u&&(a=s[0]);else{const t=[];for(let e=0,n=l.length;e<n&&!(i&&u<=e);e++)u?t.push(l[s[e]]):t.push(l[e]);a=0,l=t}this.strippedChoices=l,0===l.length?this.htEditor.rootElement.style.display="none":this.htEditor.rootElement.style.display="",this.htEditor.loadData(Object(c.h)([l])),l.length>0&&(this.updateDropdownDimensions(),this.flipDropdownIfNeeded(),!0===this.cellProperties.strict&&this.highlightBestMatchingChoice(a)),this.hot.listen(),Object(r.V)(this.TEXTAREA,e,e===n?void 0:n)}flipDropdownIfNeeded(){const t=Object(r.t)(this.hot.view._wt.wtTable.TABLE),e=t===this.hot.rootWindow,n=this.cellProperties.preventOverflow;if(e||!e&&(n||"horizontal"===n))return!1;const i=Object(r.K)(this.TEXTAREA),o=Object(r.L)(this.TEXTAREA),s=this.getDropdownHeight(),a=t.scrollTop,l=Object(r.L)(this.hot.view._wt.wtTable.THEAD),c=Object(r.K)(t),u=i.top-c.top-l+a,h=t.scrollHeight-u-l-o,d=s>h&&u>h;return d?this.flipDropdown(s):this.unflipDropdown(),this.limitDropdownIfNeeded(d?u:h,s),d}limitDropdownIfNeeded(t,e){if(e>t){let n=0,i=0,r=0,o=null;do{r=this.htEditor.getRowHeight(i)||this.htEditor.view._wt.getSetting("defaultRowHeight"),n+=r,i+=1}while(n<t);o=n-r,this.htEditor.flipped&&(this.htEditor.rootElement.style.top=parseInt(this.htEditor.rootElement.style.top,10)+e-o+"px"),this.setDropdownHeight(n-r)}}flipDropdown(t){const e=this.htEditor.rootElement.style;e.position="absolute",e.top=-t+"px",this.htEditor.flipped=!0}unflipDropdown(){const t=this.htEditor.rootElement.style;t.position="absolute",t.top="",this.htEditor.flipped=void 0}updateDropdownDimensions(){const t=this.htEditor.getColWidth(0)+Object(r.q)(this.hot.rootDocument)+2,e=this.cellProperties.trimDropdown;this.htEditor.updateSettings({height:this.getDropdownHeight(),width:e?void 0:t}),this.htEditor.view._wt.wtTable.alignOverlaysWithTrimmingContainer()}setDropdownHeight(t){this.htEditor.updateSettings({height:t})}highlightBestMatchingChoice(t){"number"===typeof t?this.htEditor.selectCell(t,0,void 0,void 0,void 0,!1):this.htEditor.deselectCell()}getDropdownHeight(){const t=this.htEditor.getRowHeight(0)||23,e=this.cellProperties.visibleRows;return this.strippedChoices.length>=e?e*t:this.strippedChoices.length*t+8}stripValueIfNeeded(t){return this.stripValuesIfNeeded([t])[0]}stripValuesIfNeeded(t){const{allowHtml:e}=this.cellProperties,n=Object(c.c)(t,t=>Object(u.f)(t));return Object(c.c)(n,t=>e?t:Object(h.d)(t))}allowKeyEventPropagation(t){const e=this.htEditor.getSelectedRangeLast(),n=e?e.from.row:-1;let i=!1;return t===d.a.ARROW_DOWN&&n>0&&n<this.htEditor.countRows()-1&&(i=!0),t===d.a.ARROW_UP&&n>-1&&(i=!0),i}onBeforeKeyDown(t){if(Object(d.e)(t.keyCode)||t.keyCode===d.a.BACKSPACE||t.keyCode===d.a.DELETE||t.keyCode===d.a.INSERT){let e=10;if(t.keyCode===d.a.C&&(t.ctrlKey||t.metaKey))return;this.isOpened()||(e+=10),this.htEditor&&this.hot._registerTimeout(()=>{this.queryChoices(this.TEXTAREA.value)},e)}}}var C=n(240);class S extends C.a{static get EDITOR_TYPE(){return"checkbox"}beginEditing(t,e){if(e&&"mouseup"===e.type&&"TD"===e.target.nodeName){const t=this.TD.querySelector('input[type="checkbox"]');Object(r.w)(t,"htBadValue")||t.click()}}finishEditing(){}init(){}open(){}close(){}getValue(){}setValue(){}focus(){}}var O=n(13);const T=()=>window,_=()=>window.document,E=(t,e)=>window.setTimeout(t,e),R=function(t,e,n,i){t.addEventListener(e,n,!!i)},M=function(t,e,n,i){t.removeEventListener(e,n,!!i)},x=function(t,e){return-1!==(" "+t.className+" ").indexOf(" "+e+" ")},I=function(t,e){x(t,e)||(t.className=""===t.className?e:t.className+" "+e)},k=function(t,e){var n;t.className=(n=(" "+t.className+" ").replace(" "+e+" "," ")).trim?n.trim():n.replace(/^\s+|\s+$/g,"")},A=function(t){return/Array/.test(Object.prototype.toString.call(t))},N=function(t){return/Date/.test(Object.prototype.toString.call(t))&&!isNaN(t.getTime())},j=function(t){let e=t.getDay();return 0===e||6===e},H=function(t){return t%4===0&&t%100!==0||t%400===0},D=function(t,e){return[31,H(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},P=function(t){N(t)&&t.setHours(0,0,0,0)},L=function(t,e){return t.getTime()===e.getTime()},F=function(t,e,n){let i,r;for(i in e)r=void 0!==t[i],r&&"object"===typeof e[i]&&null!==e[i]&&void 0===e[i].nodeName?N(e[i])?n&&(t[i]=new Date(e[i].getTime())):A(e[i])?n&&(t[i]=e[i].slice(0)):t[i]=F({},e[i],n):!n&&r||(t[i]=e[i]);return t},B=function(t,e,n){let i=_().createEvent("HTMLEvents");i.initEvent(e,!0,!1),i=F(i,n),t.dispatchEvent(i)},V=function(t){return t.month<0&&(t.year-=Math.ceil(Math.abs(t.month)/12),t.month+=12),t.month>11&&(t.year+=Math.floor(Math.abs(t.month)/12),t.month-=12),t},U={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,firstWeekOfYearMinDays:4,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0},W=function(t,e,n){for(e+=t.firstDay;e>=7;)e-=7;return n?t.i18n.weekdaysShort[e]:t.i18n.weekdays[e]},z=function(t){let e=[],n="false";if(t.isEmpty){if(!t.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';e.push("is-outside-current-month"),t.enableSelectionDaysInNextAndPreviousMonths||e.push("is-selection-disabled")}return t.isDisabled&&e.push("is-disabled"),t.isToday&&e.push("is-today"),t.isSelected&&(e.push("is-selected"),n="true"),t.hasEvent&&e.push("has-event"),t.isInRange&&e.push("is-inrange"),t.isStartRange&&e.push("is-startrange"),t.isEndRange&&e.push("is-endrange"),'<td data-day="'+t.day+'" class="'+e.join(" ")+'" aria-selected="'+n+'"><button class="pika-button pika-day" type="button" data-pika-year="'+t.year+'" data-pika-month="'+t.month+'" data-pika-day="'+t.day+'">'+t.day+"</button></td>"},Y=function(t,e,n,i,r){let o=new Date(i,n,e);return'<td class="pika-week">'+(t.hasMoment?t.moment(o).isoWeek():function(t,e){t.setHours(0,0,0,0);let n=t.getDate(),i=t.getDay(),r=e,o=r-1,s=function(t){return(t+7-1)%7};t.setDate(n+o-s(i));let a=new Date(t.getFullYear(),0,r),l=(t.getTime()-a.getTime())/864e5;return 1+Math.round((l-o+s(a.getDay()))/7)}(o,r))+"</td>"},G=function(t,e,n,i){return'<tr class="pika-row'+(n?" pick-whole-week":"")+(i?" is-selected":"")+'">'+(e?t.reverse():t).join("")+"</tr>"},$=function(t,e,n,i,r,o){let s,a,l,c,u,h=t._o,d=n===h.minYear,f=n===h.maxYear,g='<div id="'+o+'" class="pika-title" role="heading" aria-live="polite">',p=!0,m=!0;for(l=[],s=0;s<12;s++)l.push('<option value="'+(n===r?s-e:12+s-e)+'"'+(s===i?' selected="selected"':"")+(d&&s<h.minMonth||f&&s>h.maxMonth?' disabled="disabled"':"")+">"+h.i18n.months[s]+"</option>");for(c='<div class="pika-label">'+h.i18n.months[i]+'<select class="pika-select pika-select-month" tabindex="-1">'+l.join("")+"</select></div>",A(h.yearRange)?(s=h.yearRange[0],a=h.yearRange[1]+1):(s=n-h.yearRange,a=1+n+h.yearRange),l=[];s<a&&s<=h.maxYear;s++)s>=h.minYear&&l.push('<option value="'+s+'"'+(s===n?' selected="selected"':"")+">"+s+"</option>");return u='<div class="pika-label">'+n+h.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+l.join("")+"</select></div>",h.showMonthAfterYear?g+=u+c:g+=c+u,d&&(0===i||h.minMonth>=i)&&(p=!1),f&&(11===i||h.maxMonth<=i)&&(m=!1),0===e&&(g+='<button class="pika-prev'+(p?"":" is-disabled")+'" type="button">'+h.i18n.previousMonth+"</button>"),e===t._o.numberOfMonths-1&&(g+='<button class="pika-next'+(m?"":" is-disabled")+'" type="button">'+h.i18n.nextMonth+"</button>"),g+"</div>"},K=function(t,e,n){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+n+'">'+function(t){let e,n=[];for(t.showWeekNumber&&n.push("<th></th>"),e=0;e<7;e++)n.push('<th scope="col"><abbr title="'+W(t,e)+'">'+W(t,e,!0)+"</abbr></th>");return"<thead><tr>"+(t.isRTL?n.reverse():n).join("")+"</tr></thead>"}(t)+("<tbody>"+e.join("")+"</tbody></table>")};function X(t){let e=this,n=e.config(t);e._onMouseDown=function(t){if(!e._v)return;let i=(t=t||T().event).target||t.srcElement;if(i)if(x(i,"is-disabled")||(!x(i,"pika-button")||x(i,"is-empty")||x(i.parentNode,"is-disabled")?x(i,"pika-prev")?e.prevMonth():x(i,"pika-next")&&e.nextMonth():(e.setDate(new Date(i.getAttribute("data-pika-year"),i.getAttribute("data-pika-month"),i.getAttribute("data-pika-day"))),n.bound&&E((function(){e.hide(),n.blurFieldOnSelect&&n.field&&n.field.blur()}),100))),x(i,"pika-select"))e._c=!0;else{if(!t.preventDefault)return t.returnValue=!1,!1;t.preventDefault()}},e._onChange=function(t){let n=(t=t||T().event).target||t.srcElement;n&&(x(n,"pika-select-month")?e.gotoMonth(n.value):x(n,"pika-select-year")&&e.gotoYear(n.value))},e._onKeyChange=function(t){if(t=t||T().event,e.isVisible())switch(t.keyCode){case 13:case 27:n.field&&n.field.blur();break;case 37:e.adjustDate("subtract",1);break;case 38:e.adjustDate("subtract",7);break;case 39:e.adjustDate("add",1);break;case 40:e.adjustDate("add",7);break;case 8:case 46:e.setDate(null)}},e._parseFieldValue=function(){if(n.parse)return n.parse(n.field.value,n.format);if(this.hasMoment){let t=this.moment(n.field.value,n.format,n.formatStrict);return t&&t.isValid()?t.toDate():null}return new Date(Date.parse(n.field.value))},e._onInputChange=function(t){let n;t.firedBy!==e&&(n=e._parseFieldValue(),N(n)&&e.setDate(n),e._v||e.show())},e._onInputFocus=function(){e.show()},e._onInputClick=function(){e.show()},e._onInputBlur=function(){let t=_().activeElement;do{if(x(t,"pika-single"))return}while(t=t.parentNode);e._c||(e._b=E((function(){e.hide()}),50)),e._c=!1},e._onClick=function(t){let i=(t=t||T().event).target||t.srcElement,r=i;if(i){!hasEventListeners&&x(i,"pika-select")&&(i.onchange||(i.setAttribute("onchange","return;"),R(i,"change",e._onChange)));do{if(x(r,"pika-single")||r===n.trigger)return}while(r=r.parentNode);e._v&&i!==n.trigger&&r!==n.trigger&&e.hide()}},e.el=_().createElement("div"),e.el.className="pika-single"+(n.isRTL?" is-rtl":"")+(n.theme?" "+n.theme:""),R(e.el,"mousedown",e._onMouseDown,!0),R(e.el,"touchend",e._onMouseDown,!0),R(e.el,"change",e._onChange),n.keyboardInput&&R(_(),"keydown",e._onKeyChange),n.field&&(n.container?n.container.appendChild(e.el):n.bound?_().body.appendChild(e.el):n.field.parentNode.insertBefore(e.el,n.field.nextSibling),R(n.field,"change",e._onInputChange),n.defaultDate||(n.defaultDate=e._parseFieldValue(),n.setDefaultDate=!0));let i=n.defaultDate;N(i)?n.setDefaultDate?e.setDate(i,!0):e.gotoDate(i):e.gotoDate(new Date),n.bound?(this.hide(),e.el.className+=" is-bound",R(n.trigger,"click",e._onInputClick),R(n.trigger,"focus",e._onInputFocus),R(n.trigger,"blur",e._onInputBlur)):this.show()}function q(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}X.prototype={config:function(t){this._o||(this._o=F({},U,!0));let e=F(this._o,t,!0);e.isRTL=!!e.isRTL,e.field=e.field&&e.field.nodeName?e.field:null,e.theme="string"===typeof e.theme&&e.theme?e.theme:null,e.bound=!!(void 0!==e.bound?e.field&&e.bound:e.field),e.trigger=e.trigger&&e.trigger.nodeName?e.trigger:e.field,e.disableWeekends=!!e.disableWeekends,e.disableDayFn="function"===typeof e.disableDayFn?e.disableDayFn:null;let n=parseInt(e.numberOfMonths,10)||1;if(e.numberOfMonths=n>4?4:n,N(e.minDate)||(e.minDate=!1),N(e.maxDate)||(e.maxDate=!1),e.minDate&&e.maxDate&&e.maxDate<e.minDate&&(e.maxDate=e.minDate=!1),e.minDate&&this.setMinDate(e.minDate),e.maxDate&&this.setMaxDate(e.maxDate),A(e.yearRange)){let t=(new Date).getFullYear()-10;e.yearRange[0]=parseInt(e.yearRange[0],10)||t,e.yearRange[1]=parseInt(e.yearRange[1],10)||t}else e.yearRange=Math.abs(parseInt(e.yearRange,10))||U.yearRange,e.yearRange>100&&(e.yearRange=100);return e},toString:function(t){return t=t||this._o.format,N(this._d)?this._o.toString?this._o.toString(this._d,t):this.hasMoment?this.moment(this._d).format(t):this._d.toDateString():""},getMoment:function(){return this.hasMoment?this.moment(this._d):null},setMoment:function(t,e){this.hasMoment&&this.moment.isMoment(t)&&this.setDate(t.toDate(),e)},useMoment:function(t){this.hasMoment=!0,this.moment=t},getDate:function(){return N(this._d)?new Date(this._d.getTime()):null},setDate:function(t,e){if(!t)return this._d=null,this._o.field&&(this._o.field.value="",B(this._o.field,"change",{firedBy:this})),this.draw();if("string"===typeof t&&(t=new Date(Date.parse(t))),!N(t))return;let n=this._o.minDate,i=this._o.maxDate;N(n)&&t<n?t=n:N(i)&&t>i&&(t=i),this._d=new Date(t.getTime()),P(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),B(this._o.field,"change",{firedBy:this})),e||"function"!==typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())},clear:function(){this.setDate(null)},gotoDate:function(t){let e=!0;if(N(t)){if(this.calendars){let n=new Date(this.calendars[0].year,this.calendars[0].month,1),i=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),r=t.getTime();i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),e=r<n.getTime()||i.getTime()<r}e&&(this.calendars=[{month:t.getMonth(),year:t.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(t,e){let n,i=this.getDate()||new Date,r=24*parseInt(e)*60*60*1e3;"add"===t?n=new Date(i.valueOf()+r):"subtract"===t&&(n=new Date(i.valueOf()-r)),this.setDate(n)},adjustCalendars:function(){this.calendars[0]=V(this.calendars[0]);for(let t=1;t<this._o.numberOfMonths;t++)this.calendars[t]=V({month:this.calendars[0].month+t,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(t){isNaN(t)||(this.calendars[0].month=parseInt(t,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(t){isNaN(t)||(this.calendars[0].year=parseInt(t,10),this.adjustCalendars())},setMinDate:function(t){t instanceof Date?(P(t),this._o.minDate=t,this._o.minYear=t.getFullYear(),this._o.minMonth=t.getMonth()):(this._o.minDate=U.minDate,this._o.minYear=U.minYear,this._o.minMonth=U.minMonth,this._o.startRange=U.startRange),this.draw()},setMaxDate:function(t){t instanceof Date?(P(t),this._o.maxDate=t,this._o.maxYear=t.getFullYear(),this._o.maxMonth=t.getMonth()):(this._o.maxDate=U.maxDate,this._o.maxYear=U.maxYear,this._o.maxMonth=U.maxMonth,this._o.endRange=U.endRange),this.draw()},setStartRange:function(t){this._o.startRange=t},setEndRange:function(t){this._o.endRange=t},draw:function(t){if(!this._v&&!t)return;let e,n=this._o,i=n.minYear,r=n.maxYear,o=n.minMonth,s=n.maxMonth,a="";this._y<=i&&(this._y=i,!isNaN(o)&&this._m<o&&(this._m=o)),this._y>=r&&(this._y=r,!isNaN(s)&&this._m>s&&(this._m=s));for(let l=0;l<n.numberOfMonths;l++)e="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2),a+='<div class="pika-lendar">'+$(this,l,this.calendars[l].year,this.calendars[l].month,this.calendars[0].year,e)+this.render(this.calendars[l].year,this.calendars[l].month,e)+"</div>";this.el.innerHTML=a,n.bound&&"hidden"!==n.field.type&&E((function(){n.trigger.focus()}),1),"function"===typeof this._o.onDraw&&this._o.onDraw(this),n.bound&&n.field.setAttribute("aria-label",n.ariaLabel)},adjustPosition:function(){let t,e,n,i,r,o,s,a,l,c,u;this._o.container||(this.el.style.position="absolute",t=this._o.trigger,e=this.el.offsetWidth,n=this.el.offsetHeight,i=T().innerWidth||_().documentElement.clientWidth,r=T().innerHeight||_().documentElement.clientHeight,o=_().body.scrollTop||_().documentElement.scrollTop,c=!0,u=!0,l=t.getBoundingClientRect(),s=l.left+T().pageXOffset,a=l.bottom+T().pageYOffset,(this._o.reposition&&s+e>i||this._o.position.indexOf("right")>-1&&s-e+t.offsetWidth>0)&&(s=s-e+t.offsetWidth,c=!1),(this._o.reposition&&a+n>r+o||this._o.position.indexOf("top")>-1&&a-n-t.offsetHeight>0)&&(a=a-n-t.offsetHeight,u=!1),s<0&&(s=0),a<0&&(a=0),this.el.style.left=s+"px",this.el.style.top=a+"px",I(this.el,c?"left-aligned":"right-aligned"),I(this.el,u?"bottom-aligned":"top-aligned"),k(this.el,c?"right-aligned":"left-aligned"),k(this.el,u?"top-aligned":"bottom-aligned"))},render:function(t,e,n){let i=this._o,r=new Date,o=D(t,e),s=new Date(t,e,1).getDay(),a=[],l=[];P(r),i.firstDay>0&&(s-=i.firstDay,s<0&&(s+=7));let c=0===e?11:e-1,u=11===e?0:e+1,h=0===e?t-1:t,d=11===e?t+1:t,f=D(h,c),g=o+s,p=g;for(;p>7;)p-=7;g+=7-p;let m=!1;for(let b=0,y=0;b<g;b++){let n=new Date(t,e,b-s+1),g=!!N(this._d)&&L(n,this._d),p=L(n,r),w=-1!==i.events.indexOf(n.toDateString()),v=b<s||b>=o+s,C=b-s+1,S=e,O=t,T=i.startRange&&L(i.startRange,n),_=i.endRange&&L(i.endRange,n),E=i.startRange&&i.endRange&&i.startRange<n&&n<i.endRange,R=i.minDate&&n<i.minDate||i.maxDate&&n>i.maxDate||i.disableWeekends&&j(n)||i.disableDayFn&&i.disableDayFn(n);v&&(b<s?(C=f+C,S=c,O=h):(C-=o,S=u,O=d));let M={day:C,month:S,year:O,hasEvent:w,isSelected:g,isToday:p,isDisabled:R,isEmpty:v,isStartRange:T,isEndRange:_,isInRange:E,showDaysInNextAndPreviousMonths:i.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:i.enableSelectionDaysInNextAndPreviousMonths};i.pickWholeWeek&&g&&(m=!0),l.push(z(M)),7===++y&&(i.showWeekNumber&&l.unshift(Y(this,b-s,e,t,i.firstWeekOfYearMinDays)),a.push(G(l,i.isRTL,i.pickWholeWeek,m)),l=[],y=0,m=!1)}return K(i,a,n)},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),k(this.el,"is-hidden"),this._o.bound&&(R(_(),"click",this._onClick),this.adjustPosition()),"function"===typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){let t=this._v;!1!==t&&(this._o.bound&&M(_(),"click",this._onClick),this._o.container||(this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto"),I(this.el,"is-hidden"),this._v=!1,void 0!==t&&"function"===typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){let t=this._o;this.hide(),M(this.el,"mousedown",this._onMouseDown,!0),M(this.el,"touchend",this._onMouseDown,!0),M(this.el,"change",this._onChange),t.keyboardInput&&M(_(),"keydown",this._onKeyChange),t.field&&(M(t.field,"change",this._onInputChange),t.bound&&(M(t.trigger,"click",this._onInputClick),M(t.trigger,"focus",this._onInputFocus),M(t.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}};class Q extends i.a{constructor(){super(...arguments),q(this,"defaultDateFormat","DD/MM/YYYY"),q(this,"parentDestroyed",!1),q(this,"$datePicker",null)}static get EDITOR_TYPE(){return"date"}init(){if("function"!==typeof O)throw new Error("You need to include moment.js to your project.");super.init(),this.hot.addHook("afterDestroy",()=>{this.parentDestroyed=!0,this.destroyElements()})}createElements(){super.createElements(),this.datePicker=this.hot.rootDocument.createElement("DIV"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=9999,this.datePicker.setAttribute("dir",this.hot.isRtl()?"rtl":"ltr"),Object(r.a)(this.datePicker,"htDatepickerHolder"),this.hot.rootDocument.body.appendChild(this.datePicker),this.eventManager.addEventListener(this.datePicker,"mousedown",t=>{Object(r.w)(t.target,"pika-day")&&this.hideDatepicker(),t.stopPropagation()})}destroyElements(){const t=this.datePicker.parentNode;this.$datePicker&&this.$datePicker.destroy(),t&&t.removeChild(this.datePicker)}prepare(t,e,n,i,r,o){super.prepare(t,e,n,i,r,o)}open(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const e=this.hot.getShortcutManager().getContext("editor");this.showDatepicker(t),super.open(),e.addShortcuts([{keys:[["ArrowLeft"]],callback:()=>{this.$datePicker.adjustDate("subtract",1)}},{keys:[["ArrowRight"]],callback:()=>{this.$datePicker.adjustDate("add",1)}},{keys:[["ArrowUp"]],callback:()=>{this.$datePicker.adjustDate("subtract",7)}},{keys:[["ArrowDown"]],callback:()=>{this.$datePicker.adjustDate("add",7)}}],{group:"dateEditor"})}close(){var t;this._opened=!1,null!==(t=this.$datePicker)&&void 0!==t&&t.destroy&&this.$datePicker.destroy(),this.hot._registerTimeout(()=>{const t=this.hot._getEditorManager();t.closeEditor(),this.hot.view.render(),t.prepareEditor()});this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup("dateEditor"),super.close()}finishEditing(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super.finishEditing(t,e)}showDatepicker(t){const e=this.cellProperties.dateFormat||this.defaultDateFormat,n=this.hot.view.isMouseDown(),i=!!t&&Object(d.c)(t.keyCode);let r;this.datePicker.style.display="block",this.$datePicker=new X(this.getDatePickerConfig()),"function"===typeof this.$datePicker.useMoment&&this.$datePicker.useMoment(O),this.$datePicker._onInputFocus=function(){},this.originalValue?(r=this.originalValue,O(r,e,!0).isValid()&&this.$datePicker.setMoment(O(r,e),!0),this.getValue()!==this.originalValue&&this.setValue(this.originalValue),i||n||this.setValue("")):this.cellProperties.defaultDate?(r=this.cellProperties.defaultDate,O(r,e,!0).isValid()&&this.$datePicker.setMoment(O(r,e),!0),i||n||this.setValue("")):this.$datePicker.gotoToday()}hideDatepicker(){this.datePickerStyle.display="none",this.$datePicker.hide()}getDatePickerConfig(){const t=this.TEXTAREA,e={};this.cellProperties&&this.cellProperties.datePickerConfig&&Object(s.d)(e,this.cellProperties.datePickerConfig);const n=e.onSelect,i=e.onClose;return e.field=t,e.trigger=t,e.container=this.datePicker,e.bound=!1,e.keyboardInput=!1,e.format=e.format||this.defaultDateFormat,e.reposition=e.reposition||!1,e.isRTL=!1,e.onSelect=t=>{let e=t;isNaN(e.getTime())||(e=O(e).format(this.cellProperties.dateFormat||this.defaultDateFormat)),this.setValue(e),n&&n()},e.onClose=()=>{this.parentDestroyed||this.finishEditing(!1),i&&i()},e}refreshDimensions(t){var e;if(super.refreshDimensions(t),this.state!==C.b.EDITING)return;if(this.TD=this.getEditedCell(),!this.TD)return void this.hideDatepicker();const{rowIndexMapper:n,columnIndexMapper:i}=this.hot,{wtOverlays:o}=this.hot.view._wt,{wtTable:s}=null!==(e=o.getParentOverlay(this.TD))&&void 0!==e?e:this.hot.view._wt,a=n.getVisualFromRenderableIndex(s.getFirstPartiallyVisibleRow()),l=n.getVisualFromRenderableIndex(s.getLastPartiallyVisibleRow()),c=i.getVisualFromRenderableIndex(s.getFirstPartiallyVisibleColumn()),u=i.getVisualFromRenderableIndex(s.getLastPartiallyVisibleColumn());if(this.row>=a&&this.row<=l&&this.col>=c&&this.col<=u){const t=this.TD.getBoundingClientRect();this.datePickerStyle.top=this.hot.rootWindow.pageYOffset+t.top+Object(r.L)(this.TD)+"px";let e=this.hot.rootWindow.pageXOffset;this.hot.isRtl()?e+=t.right-Object(r.M)(this.datePicker):e+=t.left,this.datePickerStyle.left=e+"px"}else this.hideDatepicker()}}var Z=n(7);class J extends v{static get EDITOR_TYPE(){return"dropdown"}prepare(t,e,n,i,r,o){super.prepare(t,e,n,i,r,o),this.cellProperties.filter=!1,this.cellProperties.strict=!0}}Z.a.getSingleton().add("beforeValidate",(function(t,e,n){const i=this.propToCol(n);if(Number.isInteger(i)){const t=this.getCellMeta(e,i);t.editor===J&&void 0===t.strict&&(t.filter=!1,t.strict=!0)}}));class tt extends i.a{static get EDITOR_TYPE(){return"numeric"}}class et extends i.a{static get EDITOR_TYPE(){return"password"}createElements(){super.createElements(),this.TEXTAREA=this.hot.rootDocument.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.setAttribute("data-hot-input",""),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.hot.getSettings().ariaTags&&Object(r.U)(this.TEXTAREA,[Object(p.n)()]),Object(r.e)(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)}}class nt extends C.a{static get EDITOR_TYPE(){return"select"}init(){this.select=this.hot.rootDocument.createElement("select"),this.select.setAttribute("data-hot-input","true"),this.select.style.display="none",Object(r.a)(this.select,"htSelectEditor"),this.hot.rootElement.appendChild(this.select),this.registerHooks()}getValue(){return this.select.value}setValue(t){this.select.value=t}open(){this._opened=!0,this.refreshDimensions(),this.select.style.display="";this.hot.getShortcutManager().setActiveContextName("editor"),this.registerShortcuts()}close(){this._opened=!1,this.select.style.display="none",Object(r.w)(this.select,"ht_editor_visible")&&Object(r.P)(this.select,"ht_editor_visible"),this.unregisterShortcuts(),this.clearHooks()}focus(){this.select.focus()}registerHooks(){this.addHook("afterScrollHorizontally",()=>this.refreshDimensions()),this.addHook("afterScrollVertically",()=>this.refreshDimensions()),this.addHook("afterColumnResize",()=>this.refreshDimensions()),this.addHook("afterRowResize",()=>this.refreshDimensions())}prepare(t,e,n,i,o,a){super.prepare(t,e,n,i,o,a);const l=this.cellProperties.selectOptions;let c;c="function"===typeof l?this.prepareOptions(l(this.row,this.col,this.prop)):this.prepareOptions(l),Object(r.e)(this.select),Object(s.o)(c,(t,e)=>{const n=this.hot.rootDocument.createElement("OPTION");n.value=e,Object(r.f)(n,t),this.select.appendChild(n)})}prepareOptions(t){let e={};if(Array.isArray(t))for(let n=0,i=t.length;n<i;n++)e[t[n]]=t[n];else"object"===typeof t&&(e=t);return e}refreshValue(){const t=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=t,this.setValue(t),this.refreshDimensions()}refreshDimensions(){if(this.state!==C.b.EDITING)return;if(this.TD=this.getEditedCell(),!this.TD)return void this.close();const{top:t,start:e,width:n,height:i}=this.getEditedCellRect(),o=this.select.style;o.height=i+"px",o.width=n+"px",o.top=t+"px",o[this.hot.isRtl()?"right":"left"]=e+"px",o.margin="0px",Object(r.a)(this.select,"ht_editor_visible")}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor"),e={group:"selectEditor"};this.isInFullEditMode()&&t.addShortcuts([{keys:[["ArrowUp"]],callback:()=>{const t=this.select.selectedIndex-1;t>=0&&(this.select[t].selected=!0)}},{keys:[["ArrowDown"]],callback:()=>{const t=this.select.selectedIndex+1;t<=this.select.length-1&&(this.select[t].selected=!0)}}],e)}unregisterShortcuts(){this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup("selectEditor")}}class it extends i.a{static get EDITOR_TYPE(){return"time"}prepare(t,e,n,i,r,o){super.prepare(t,e,n,i,r,o),this.TEXTAREA.dir="ltr"}}var rt=n(17);var ot=n(187);function st(t,e,n,i,o,s,a){ot.a.apply(this,[t,e,n,i,o,s,a]),Object(r.f)(e,null===s||void 0===s?"":s,!1)}st.RENDERER_TYPE="html";var at=n(23);function lt(t,e,n,i,o,s,a){const{rootDocument:l}=t,c=a.allowHtml?st:g.a,u=l.createElement("DIV"),h=t.getSettings().ariaTags;if(u.className="htAutocompleteArrow",h&&u.setAttribute(...Object(p.n)()),u.appendChild(l.createTextNode(String.fromCharCode(9660))),c.apply(this,[t,e,n,i,o,s,a]),e.firstChild||e.appendChild(l.createTextNode(String.fromCharCode(160))),e.insertBefore(u,e.firstChild),Object(r.a)(e,"htAutocomplete"),!t.acArrowListener){const o=new at.a(t);t.acArrowListener=function(o){Object(r.w)(o.target,"htAutocompleteArrow")&&t.view._wt.getSetting("onCellDblClick",null,t._createCellCoords(n,i),e)},o.addEventListener(t.rootElement,"mousedown",t.acArrowListener),t.addHookOnce("afterDestroy",()=>{o.destroy()})}}lt.RENDERER_TYPE="autocomplete";function ct(t,e,n,i,r,o,s){lt.apply(this,[t,e,n,i,r,o,s])}ct.RENDERER_TYPE="dropdown";var ut=n(3);const ht=new WeakMap,dt=new WeakMap;function ft(t,e,n,i,o,s,l){const{rootDocument:c}=t,h=t.getSettings().ariaTags;ot.a.apply(this,[t,e,n,i,o,s,l]),function(t){let e=dt.get(t);if(!e){const{rootElement:n}=t;e=new at.a(t),e.addEventListener(n,"click",e=>function(t,e){const{target:n}=t;if(!gt(n))return;if(!n.hasAttribute("data-row")||!n.hasAttribute("data-col"))return;const i=parseInt(n.getAttribute("data-row"),10),r=parseInt(n.getAttribute("data-col"),10);e.getCellMeta(i,r).readOnly&&t.preventDefault()}(e,t)),e.addEventListener(n,"mouseup",e=>function(t,e){const{target:n}=t;if(!gt(n))return;if(!n.hasAttribute("data-row")||!n.hasAttribute("data-col"))return;setTimeout(e.listen,10)}(e,t)),e.addEventListener(n,"change",e=>function(t,e){const{target:n}=t;if(!gt(n))return;if(!n.hasAttribute("data-row")||!n.hasAttribute("data-col"))return;const i=parseInt(n.getAttribute("data-row"),10),r=parseInt(n.getAttribute("data-col"),10),o=e.getCellMeta(i,r);if(!o.readOnly){let n=null;n=t.target.checked?void 0===o.uncheckedTemplate||o.checkedTemplate:void 0!==o.uncheckedTemplate&&o.uncheckedTemplate,e.setDataAtCell(i,r,n)}}(e,t)),dt.set(t,e)}}(t);let d=function(t){const e=t.createElement("input");return e.className="htCheckboxRendererInput",e.type="checkbox",e.setAttribute("tabindex","-1"),e.cloneNode(!1)}(c);const f=l.label;let g=!1;if("undefined"===typeof l.checkedTemplate&&(l.checkedTemplate=!0),"undefined"===typeof l.uncheckedTemplate&&(l.uncheckedTemplate=!1),Object(r.e)(e),s===l.checkedTemplate||Object(u.f)(s).toLocaleLowerCase(l.locale)===Object(u.f)(l.checkedTemplate).toLocaleLowerCase(l.locale)?d.checked=!0:s===l.uncheckedTemplate||Object(u.f)(s).toLocaleLowerCase(l.locale)===Object(u.f)(l.uncheckedTemplate).toLocaleLowerCase(l.locale)?d.checked=!1:Object(u.c)(s)?Object(r.a)(d,"noValue"):(d.style.display="none",Object(r.a)(d,"htBadValue"),g=!0),Object(r.U)(d,[["data-row",n],["data-col",i]]),h&&Object(r.U)(d,[Object(p.p)(d.checked?t.getTranslatedPhrase(ut.CHECKBOX_CHECKED):t.getTranslatedPhrase(ut.CHECKBOX_UNCHECKED)),Object(p.d)(d.checked),Object(p.c)()]),!g&&f){let r="";if(f.value)r="function"===typeof f.value?f.value.call(this,n,i,o,s):f.value;else if(f.property){const e=t.getDataAtRowProp(n,f.property);r=null!==e?e:""}const a=function(t,e,n){const i=t.createElement("label");return i.className="htCheckboxRendererLabel "+(n?"fullWidth":""),i.appendChild(t.createTextNode(e)),i.cloneNode(!0)}(c,r,!0!==f.separated);"before"===f.position?f.separated?(e.appendChild(a),e.appendChild(d)):(a.appendChild(d),d=a):f.position&&"after"!==f.position||(f.separated?(e.appendChild(d),e.appendChild(a)):(a.insertBefore(d,a.firstChild),d=a))}function m(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=t.getSelectedRange(),i=[],r=new Map;let o=[],s=0;if(n){for(let a=0;a<n.length;a++){const{row:l,col:c}=n[a].getTopStartCorner(),{row:u,col:h}=n[a].getBottomEndCorner();for(let n=l;n<=u;n+=1)for(let a=c;a<=h;a+=1){const l=t.getCellMeta(n,a),c={checkedTemplate:l.checkedTemplate,uncheckedTemplate:l.uncheckedTemplate};if("checkbox"!==l.type){!0!==e||l.readOnly||(r.has(i.length)?r.set(i.length,[...r.get(i.length),[n,a,null]]):r.set(i.length,[[n,a,null]]));continue}if(!0===l.readOnly)continue;"undefined"===typeof l.checkedTemplate&&(l.checkedTemplate=!0),"undefined"===typeof l.uncheckedTemplate&&(l.uncheckedTemplate=!1);const u=t.getDataAtCell(n,a);!1===e?[l.checkedTemplate,l.checkedTemplate.toString()].includes(u)?o.push([n,a,l.uncheckedTemplate,c]):[l.uncheckedTemplate,l.uncheckedTemplate.toString(),null,void 0].includes(u)&&o.push([n,a,l.checkedTemplate,c]):o.push([n,a,l.uncheckedTemplate,c]),s+=1}i.push(s),s=0}o=o.every(t=>{let[,,e]=t;return e===o[0][2]})?o.map(t=>{let[e,n,i]=t;return[e,n,i]}):o.map(t=>{let[e,n,,i]=t;return[e,n,i.checkedTemplate]}),o.length>0&&i.forEach((e,n)=>{let i=o.splice(0,e);r.size&&r.has(n)&&(i=[...i,...r.get(n)]),t.setDataAtCell(i)})}}function b(){const e=t.getSelectedRange();if(e){for(let n=0;n<e.length;n++){const i=e[n].getTopStartCorner(),r=e[n].getBottomEndCorner();for(let e=i.row;e<=r.row;e++)for(let n=i.col;n<=r.col;n++){const i=t.getCellMeta(e,n),r=t.getCell(e,n);if(null===r||void 0===r)return!0;if(r.querySelectorAll("input[type=checkbox]").length>0&&!i.readOnly)return!0}}return!1}}(!f||f&&!f.separated)&&e.appendChild(d),g&&e.appendChild(c.createTextNode("#bad-value#")),ht.has(t)||(ht.set(t,!0),function(){const e=t.getShortcutManager().getContext("grid"),n={group:"checkboxRenderer",relativeToGroup:a.a,position:"before"};e.addShortcuts([{keys:[["space"]],callback:()=>(m(),!b()),runOnlyIf:()=>{var e;return null===(e=t.getSelectedRangeLast())||void 0===e?void 0:e.highlight.isCell()}},{keys:[["enter"]],callback:()=>(m(),!b()),runOnlyIf:()=>{const e=t.getSelectedRangeLast();return t.getSettings().enterBeginsEditing&&(null===e||void 0===e?void 0:e.isSingle())&&e.highlight.isCell()}},{keys:[["delete"],["backspace"]],callback:()=>(m(!0),!b()),runOnlyIf:()=>{var e;return null===(e=t.getSelectedRangeLast())||void 0===e?void 0:e.highlight.isCell()}}],n)}())}function gt(t){return"INPUT"===t.tagName&&"checkbox"===t.getAttribute("type")}Z.a.getSingleton().add("modifyAutoColumnSizeSeed",(function(t,e,n){const{label:i,type:r,row:o,column:s,prop:a}=e;if("checkbox"===r){if(i){const{value:e,property:r}=i;let l=n;if(e)l="function"===typeof e?e(o,s,a,n):e;else if(r){const t=this.getDataAtRowProp(o,r);l=null!==t?t:n}t=l}return t}})),ft.RENDERER_TYPE="checkbox";function pt(t,e,n,i,r,o,s){lt.apply(this,[t,e,n,i,r,o,s])}pt.RENDERER_TYPE="handsontable";var mt=n(42),bt=n(5);function yt(t,e){if(Object(bt.b)(t)){const n=e.numericFormat,i=n&&n.culture||"-",r=n&&n.pattern;if("undefined"!==typeof i&&!mt.languages()[i]){const t=i.replace("-",""),e=mt.allLanguages?mt.allLanguages[i]:mt[t];e&&mt.registerLanguage(e)}mt.setLanguage(i),t=mt(t).format(r||"0")}return t}function wt(t,e,n,i,r,o,s){let a=o;if(Object(bt.b)(a)){const t=s.className||"",n=t.length?t.split(" "):[];a=yt(a,s),n.indexOf("htLeft")<0&&n.indexOf("htCenter")<0&&n.indexOf("htRight")<0&&n.indexOf("htJustify")<0&&n.push("htRight"),n.indexOf("htNumeric")<0&&n.push("htNumeric"),s.className=n.join(" "),e.dir="ltr"}Object(g.a)(t,e,n,i,r,a,s)}wt.RENDERER_TYPE="numeric";function vt(t,e,n,i,o,s,a){g.a.apply(this,[t,e,n,i,o,s,a]);const l=a.hashLength||e.innerHTML.length,c=a.hashSymbol||"*";let u="";Object(bt.d)(l-1,()=>{u+=c}),Object(r.f)(e,u)}vt.RENDERER_TYPE="password";function Ct(t,e,n,i,r,o,s){g.a.apply(this,[t,e,n,i,r,o,s])}Ct.RENDERER_TYPE="select";function St(t,e,n,i,r,o,s){g.a.apply(this,[t,e,n,i,r,o,s]),e.dir="ltr"}St.RENDERER_TYPE="time";var Ot=n(20);function Tt(t,e){let n=t;null!==n&&void 0!==n||(n=""),this.allowEmpty&&""===n?e(!0):this.strict&&this.source?"function"===typeof this.source?this.source(n,_t(n,e)):_t(n,e)(this.source):e(!0)}function _t(t,e){const n=t;return function(t){let i=!1;for(let e=0,r=t.length;e<r;e++)if(n===t[e]){i=!0;break}e(i)}}Tt.VALIDATOR_TYPE="autocomplete";function Et(t,e){const n=Object(rt.b)("date",this.instance);let i=t,r=!0;null!==i&&void 0!==i||(i="");let o=O(i,this.dateFormat||n.defaultDateFormat,!0).isValid(),s=O(new Date(i)).isValid()||o;if(this.allowEmpty&&""===i&&(s=!0,o=!0),s||(r=!1),!s&&o&&(r=!0),s&&!o)if(!0===this.correctFormat){const t=function(t,e){const n=O(function(t){const e=new Date(t);return isNaN(new Date(t+"T00:00").getDate())?e:new Date(e.getTime()+6e4*e.getTimezoneOffset())}(t)),i=O(t,e),r=t.search(/[A-z]/g)>-1;let o;o=n.isValid()&&n.format("x")===i.format("x")||!i.isValid()||r?n:i;return o.format(e)}(i,this.dateFormat);this.instance.setDataAtCell(this.visualRow,this.visualCol,t,"dateValidator"),r=!0}else r=!1;e(r)}Et.VALIDATOR_TYPE="date";function Rt(t,e){Tt.apply(this,[t,e])}Rt.VALIDATOR_TYPE="dropdown";function Mt(t,e){let n=t;null!==n&&void 0!==n||(n=""),this.allowEmpty&&""===n?e(!0):e(""!==n&&Object(bt.b)(t))}Mt.VALIDATOR_TYPE="numeric";const xt=["YYYY-MM-DDTHH:mm:ss.SSSZ","X","x"];function It(t,e){const n=this.timeFormat||"h:mm:ss a";let i=!0,r=t;null===r&&(r=""),r=/^\d{3,}$/.test(r)?parseInt(r,10):r;const o=/^\d{1,2}$/.test(r);o&&(r+=":00");const s=O(r,xt,!0).isValid()?O(r):O(r,n);let a=s.isValid(),l=O(r,n,!0).isValid()&&!o;if(this.allowEmpty&&""===r&&(a=!0,l=!0),a||(i=!1),!a&&l&&(i=!0),a&&!l)if(!0===this.correctFormat){const t=s.format(n);this.instance.setDataAtCell(this.visualRow,this.visualCol,t,"timeValidator"),i=!0}else i=!1;e(i)}It.VALIDATOR_TYPE="time";var kt=n(25);const At={CELL_TYPE:"autocomplete",editor:v,renderer:lt,validator:Tt},Nt={CELL_TYPE:"checkbox",editor:S,renderer:ft};function jt(t,e,n,i,r,o,s){lt.apply(this,[t,e,n,i,r,o,s])}jt.RENDERER_TYPE="date";const Ht={CELL_TYPE:"date",editor:Q,renderer:jt,validator:Et},Dt={CELL_TYPE:"dropdown",editor:J,renderer:ct,validator:Rt},Pt={CELL_TYPE:"handsontable",editor:l,renderer:pt},Lt={CELL_TYPE:"numeric",editor:tt,renderer:wt,validator:Mt,dataType:"number"},Ft={CELL_TYPE:"password",editor:et,renderer:vt,copyable:!1},Bt={CELL_TYPE:"select",editor:nt,renderer:Ct};var Vt=n(235);const Ut={CELL_TYPE:"time",editor:it,renderer:St,validator:It};var Wt=n(21);var zt=n(14);function Yt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Gt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $t(t,e){return t.get(Kt(t,e))}function Kt(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}const Xt=new Map([["plugin",zt.c],["cell-type",Wt.b],["editor",rt.c],["renderer",Ot.b],["validator",kt.b]]),qt=[];let Qt=null;var Zt=new WeakMap,Jt=new WeakSet;class te{static get PLUGIN_KEY(){return"base"}static get SETTING_KEYS(){return[this.PLUGIN_KEY]}constructor(t){var e,n;Yt(e=this,n=Jt),n.add(e),Gt(this,"eventManager",new at.a(this)),Gt(this,"pluginName",null),Gt(this,"pluginsInitializedCallbacks",[]),Gt(this,"isPluginsReady",!1),Gt(this,"enabled",!1),Gt(this,"initialized",!1),function(t,e,n){Yt(t,e),e.set(t,n)}(this,Zt,{}),Object(s.f)(this,"hot",t,{writable:!1}),Qt=null,this.hot.addHook("afterPluginsInitialized",()=>this.onAfterPluginsInitialized()),this.hot.addHook("afterUpdateSettings",t=>this.onUpdateSettings(t)),this.hot.addHook("beforeInit",()=>this.init())}init(){this.pluginName=this.hot.getPluginName(this);const t=this.constructor.PLUGIN_DEPS,e=Array.isArray(t)?t:[];if(e.length>0){const t=[];if(e.forEach(e=>{const[n,i]=e.split(":");if(!Xt.has(n))throw new Error(`Unknown plugin dependency type "${n}" was found.`);Xt.get(n)(i)||t.push(` - ${i} (${n})`)}),t.length>0){const e=[`The ${this.pluginName} plugin requires the following modules:\n`,t.join("\n")+"\n"].join("");qt.push(e)}}Qt||(Qt=Object(zt.b)()),Qt.indexOf("UndoRedo")>=0&&Qt.splice(Qt.indexOf("UndoRedo"),1),Qt.indexOf(this.pluginName)>=0&&Qt.splice(Qt.indexOf(this.pluginName),1),this.hot.addHookOnce("afterPluginsInitialized",()=>{this.isEnabled&&this.isEnabled()&&this.enablePlugin()});if(0===Qt.length){if(qt.length>0){const t=[qt.join("\n")+"\n","You have to import and register them manually."].join("");throw new Error(t)}this.hot.runHooks("afterPluginsInitialized")}this.initialized=!0}enablePlugin(){this.enabled=!0}disablePlugin(){var t;null===(t=this.eventManager)||void 0===t||t.clear(),this.clearHooks(),this.enabled=!1}addHook(t,e,n){$t(Zt,this)[t]=$t(Zt,this)[t]||[];const i=$t(Zt,this)[t];this.hot.addHook(t,e,n),i.push(e),$t(Zt,this)[t]=i}removeHooks(t){Object(c.a)($t(Zt,this)[t]||[],e=>{this.hot.removeHook(t,e)})}clearHooks(){const t=$t(Zt,this);Object(s.o)(t,(t,e)=>this.removeHooks(e)),t.length=0}callOnPluginsReady(t){this.isPluginsReady?t():this.pluginsInitializedCallbacks.push(t)}onAfterPluginsInitialized(){Object(c.a)(this.pluginsInitializedCallbacks,t=>t()),this.pluginsInitializedCallbacks.length=0,this.isPluginsReady=!0}onUpdateSettings(t){const e=Kt(Jt,this,ee).call(this,t);this.isEnabled&&(this.enabled&&!this.isEnabled()&&this.disablePlugin(),!this.enabled&&this.isEnabled()&&this.enablePlugin(),this.enabled&&this.isEnabled()&&e&&this.updatePlugin(t))}updatePlugin(){}destroy(){var t;null===(t=this.eventManager)||void 0===t||t.destroy(),this.clearHooks(),Object(s.o)(this,(t,e)=>{"hot"!==e&&(this[e]=null)}),delete this.t,delete this.hot}}function ee(t){if(!t)return!1;const e=this.constructor.SETTING_KEYS;if("boolean"===typeof e)return e;for(let n=0;n<e.length;n++)if(void 0!==t[e[n]])return!0;return!1}var ne=n(26);function ie(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var re=class{constructor(t){ie(this,"hot",null),ie(this,"container",null),ie(this,"injected",!1),ie(this,"rows",[]),ie(this,"columns",[]),ie(this,"samples",null),ie(this,"settings",{useHeaders:!0}),this.hot=t}addRow(t,e){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));const n={row:t};this.rows.push(n),this.samples=e,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol(t)),this.table.tr.appendChild(this.createRow(t)),this.container.container.appendChild(this.table.fragment),n.table=this.table.table}addColumnHeadersRow(t){const e=this.hot.getColHeader(0);if(null!==e&&void 0!==e){const e={row:-1};this.rows.push(e),this.container=this.createContainer(this.hot.rootElement.className),this.samples=t,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}}addColumn(t,e){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));const n={col:t};this.columns.push(n),this.samples=e,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&null!==this.hot.getColHeader(t)&&this.hot.view.appendColHeader(t,this.table.th),this.table.tBody.appendChild(this.createCol(t)),this.container.container.appendChild(this.table.fragment),n.table=this.table.table}getHeights(t){this.injected||this.injectTable(),Object(c.a)(this.rows,e=>{const{height:n}=e.table.getBoundingClientRect();t(e.row,Math.ceil(n)-1)})}getWidths(t){this.injected||this.injectTable(),Object(c.a)(this.columns,e=>{const{width:n}=e.table.getBoundingClientRect();t(e.col,Math.ceil(n))})}setSettings(t){this.settings=t}setSetting(t,e){this.settings||(this.settings={}),this.settings[t]=e}getSettings(){return this.settings}getSetting(t){return this.settings?this.settings[t]:null}createColGroupsCol(t){const e=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&e.appendChild(this.createColElement(-1,-1)),this.samples.forEach(n=>{Object(c.a)(n.strings,n=>{e.appendChild(this.createColElement(n.col,t))})}),e}createRow(t){const{rootDocument:e}=this.hot,n=e.createDocumentFragment(),i=e.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(t,i),n.appendChild(i)),this.samples.forEach(i=>{Object(c.a)(i.strings,i=>{const r=i.col,o=this.hot.getCellMeta(t,r),s=this.hot.getCellRenderer(o),a=e.createElement("td");a.setAttribute("ghost-table",1),s(this.hot,a,t,r,this.hot.colToProp(r),i.value,o),n.appendChild(a)})}),n}appendColumnHeadersRow(){const{rootDocument:t}=this.hot,e=t.createDocumentFragment(),n=[];if(this.hot.hasRowHeaders()){const i=t.createElement("th");n.push([-1,i]),e.appendChild(i)}this.samples.forEach(i=>{Object(c.a)(i.strings,i=>{const r=i.col,o=t.createElement("th");n.push([r,o]),e.appendChild(o)})}),this.table.tHead.appendChild(e),Object(c.a)(n,t=>{const[e,n]=t;this.hot.view.appendColHeader(e,n)})}createCol(t){const{rootDocument:e}=this.hot,n=e.createDocumentFragment();return this.samples.forEach(i=>{Object(c.a)(i.strings,i=>{const r=i.row,o=this.hot.getCellMeta(r,t),s=this.hot.getCellRenderer(o),a=e.createElement("td"),l=e.createElement("tr");a.setAttribute("ghost-table",1),s(this.hot,a,r,t,this.hot.colToProp(t),i.value,o),l.appendChild(a),n.appendChild(l)})}),n}clean(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}injectTable(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.injected||((t||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}removeTable(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}createColElement(t,e){const n=this.hot.rootDocument.createElement("col");let i=0;e>=0&&t>=0&&(i=this.hot.getCellMeta(e,t).colspan);let r=this.hot.getColWidth(t);if(i>1)for(let o=t+1;o<t+i;o++)r+=this.hot.getColWidth(o);return n.style.width=r+"px",n}createTable(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{rootDocument:e}=this.hot,n=e.createDocumentFragment(),i=e.createElement("table"),o=e.createElement("thead"),s=e.createElement("tbody"),a=e.createElement("colgroup"),l=e.createElement("tr"),c=e.createElement("th");return this.isVertical()&&i.appendChild(a),this.isHorizontal()&&(l.appendChild(c),o.appendChild(l),i.style.tableLayout="auto",i.style.width="auto"),i.appendChild(o),this.isVertical()&&s.appendChild(l),i.appendChild(s),Object(r.a)(i,t),n.appendChild(i),{fragment:n,table:i,tHead:o,tBody:s,colGroup:a,tr:l,th:c}}createContainer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{rootDocument:e}=this.hot,n=e.createDocumentFragment(),i=e.createElement("div"),o="htGhostTable htAutoSize "+t.trim();return Object(r.a)(i,o),n.appendChild(i),{fragment:n,container:i}}isVertical(){return!(!this.rows.length||this.columns.length)}isHorizontal(){return!(!this.columns.length||this.rows.length)}};function oe(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class se{static get SAMPLE_COUNT(){return 3}constructor(t){oe(this,"samples",null),oe(this,"dataFactory",null),oe(this,"customSampleCount",null),oe(this,"allowDuplicates",!1),this.dataFactory=t}getSampleCount(){return this.customSampleCount?this.customSampleCount:se.SAMPLE_COUNT}setSampleCount(t){this.customSampleCount=t}setAllowDuplicates(t){this.allowDuplicates=t}generateRowSamples(t,e){return this.generateSamples("row",e,t)}generateColumnSamples(t,e){return this.generateSamples("col",e,t)}generateSamples(t,e,n){const i=new Map,{from:r,to:o}="number"===typeof n?{from:n,to:n}:n;return Object(bt.d)(r,o,n=>{const r=this.generateSample(t,e,n);i.set(n,r)}),i}generateSample(t,e,n){if("row"!==t&&"col"!==t)throw new Error("Unsupported sample type");const i=new Map,r="row"===t?"col":"row",o=[];return Object(bt.d)(e.from,e.to,e=>{const a="row"===t?this.dataFactory(n,e):this.dataFactory(e,n);if(!1===a)return;const{value:l,bundleSeed:c}=a,h="string"===typeof c&&c.length>0;let d;d=h?c:Object(s.l)(l)?""+Object.keys(l).length:Array.isArray(l)?""+l.length:""+Object(u.f)(l).length,i.has(d)||i.set(d,{needed:this.getSampleCount(),strings:[]});const f=i.get(d);if(f.needed){(!(o.indexOf(l)>-1)||this.allowDuplicates||h)&&(f.strings.push({value:l,[r]:e}),o.push(l),f.needed-=1)}}),i}}var ae=se,le=n(237),ce=n(47);function ue(t,e,n){he(t,e),e.set(t,n)}function he(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function de(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fe(t,e){return t.get(pe(t,e))}function ge(t,e,n){return t.set(pe(t,e),n),n}function pe(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}Z.a.getSingleton().register("modifyAutoColumnSizeSeed");var me=new WeakMap,be=new WeakMap,ye=new WeakSet;class we extends te{static get PLUGIN_KEY(){return"autoColumnSize"}static get PLUGIN_PRIORITY(){return 10}static get SETTING_KEYS(){return!0}static get CALCULATION_STEP(){return 50}static get SYNC_CALCULATION_LIMIT(){return 50}constructor(t){var e,n;super(t),he(e=this,n=ye),n.add(e),de(this,"ghostTable",new re(this.hot)),de(this,"samplesGenerator",new ae((t,e)=>{const n=this.hot.toPhysicalRow(t),i=this.hot.toPhysicalColumn(e);if(this.hot.rowIndexMapper.isHidden(n)||this.hot.columnIndexMapper.isHidden(i))return!1;const r=this.hot.getCellMeta(t,e);let o="";r.spanned||(o=this.hot.getDataAtCell(t,e));let s="";return this.hot.hasHook("modifyAutoColumnSizeSeed")&&(s=this.hot.runHooks("modifyAutoColumnSizeSeed",s,r,o)),{value:o,bundleSeed:s}})),de(this,"inProgress",!1),de(this,"measuredColumns",0),de(this,"columnWidthsMap",new ce.a),ue(this,me,[]),ue(this,be,[]),this.hot.columnIndexMapper.registerMap("autoColumnSize",this.columnWidthsMap),this.addHook("beforeColumnResize",(t,e,n)=>pe(ye,this,Te).call(this,t,e,n))}isEnabled(){return!1!==this.hot.getSettings().autoColumnSize&&!this.hot.getSettings().colWidths}enablePlugin(){var t=this;if(this.enabled)return;const e=this.hot.getSettings().autoColumnSize;e&&null!==e.useHeaders&&void 0!==e.useHeaders&&this.ghostTable.setSetting("useHeaders",e.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return pe(ye,t,Se).call(t,...n)})),this.addHook("beforeChangeRender",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return pe(ye,t,Oe).call(t,...n)})),this.addHook("afterFormulasValuesUpdate",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return pe(ye,t,Ee).call(t,...n)})),this.addHook("beforeRender",()=>pe(ye,this,Ce).call(this)),this.addHook("modifyColWidth",(t,e)=>this.getColumnWidth(e,t)),this.addHook("init",()=>pe(ye,this,_e).call(this)),super.enablePlugin()}updatePlugin(){ge(be,this,this.findColumnsWhereHeaderWasChanged()),super.updatePlugin()}disablePlugin(){super.disablePlugin(),this.addHook("beforeColumnResize",(t,e,n)=>pe(ye,this,Te).call(this,t,e,n))}calculateVisibleColumnsWidth(){if(!this.hot.countRows())return;const t=this.getFirstVisibleColumn(),e=this.getLastVisibleColumn();if(-1===t||-1===e)return;const n=this.hot.renderCall;this.calculateColumnsWidth({from:t,to:e},void 0,n)}calculateColumnsWidth(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countRows()-1},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i="number"===typeof t?{from:t,to:t}:t,r="number"===typeof e?{from:e,to:e}:e;Object(bt.d)(i.from,i.to,t=>{let e=this.hot.toPhysicalColumn(t);if(null===e&&(e=t),n||null===this.columnWidthsMap.getValueAtIndex(e)&&!this.hot._getColWidthFromSettings(e)){this.samplesGenerator.generateColumnSamples(t,r).forEach((t,e)=>this.ghostTable.addColumn(e,t))}}),this.ghostTable.columns.length&&(this.hot.batchExecution(()=>{this.ghostTable.getWidths((t,e)=>{const n=this.hot.toPhysicalColumn(t);this.columnWidthsMap.setValueAtIndex(n,e)})},!0),this.measuredColumns=i.to+1,this.ghostTable.clean())}calculateAllColumnsWidth(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0;const i=this.hot.countCols()-1;let r=null;this.inProgress=!0;const o=()=>{if(!this.hot)return Object(ne.a)(r),void(this.inProgress=!1);this.calculateColumnsWidth({from:n,to:Math.min(n+we.CALCULATION_STEP,i)},t,e),n=n+we.CALCULATION_STEP+1,n<i?r=Object(ne.e)(o):(Object(ne.a)(r),this.inProgress=!1,this.hot.view.adjustElementsSize())},s=this.getSyncCalculationLimit();s>=0&&(this.calculateColumnsWidth({from:0,to:s},t,e),n=s+1),n<i?o():this.inProgress=!1}setSamplingOptions(){const t=this.hot.getSettings().autoColumnSize,e=t&&Object(s.j)(t,"samplingRatio")?t.samplingRatio:void 0,n=t&&Object(s.j)(t,"allowSampleDuplicates")?t.allowSampleDuplicates:void 0;e&&!isNaN(e)&&this.samplesGenerator.setSampleCount(parseInt(e,10)),n&&this.samplesGenerator.setAllowDuplicates(n)}recalculateAllColumnsWidth(){this.hot.view.isVisible()&&this.calculateAllColumnsWidth({from:0,to:this.hot.countRows()-1},!0)}getSyncCalculationLimit(){const t=this.hot.getSettings().autoColumnSize;let e=we.SYNC_CALCULATION_LIMIT;const n=this.hot.countCols()-1;return Object(s.l)(t)&&(e=t.syncLimit,Object(h.a)(e)?e=Object(bt.f)(n,e):e>>=0),Math.min(e,n)}getColumnWidth(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e;return void 0===i&&(i=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(t)),n&&"number"===typeof i&&(i=Math.max(i,le.a))),i}getFirstVisibleColumn(){var t;return null!==(t=this.hot.view.getFirstRenderedVisibleColumn())&&void 0!==t?t:-1}getLastVisibleColumn(){var t;return null!==(t=this.hot.view.getLastRenderedVisibleColumn())&&void 0!==t?t:-1}findColumnsWhereHeaderWasChanged(){return this.hot.getColHeader().reduce((t,e,n)=>{const i=fe(me,this).length;return(i-1<n||fe(me,this)[n]!==e)&&t.push(this.hot.toVisualColumn(n)),i-1<n?fe(me,this).push(e):fe(me,this)[n]=e,t},[])}clearCache(t){Array.isArray(t)?this.hot.batchExecution(()=>{t.forEach(t=>{this.columnWidthsMap.setValueAtIndex(t,null)})},!0):this.columnWidthsMap.clear()}isNeedRecalculate(){return!!this.columnWidthsMap.getValues().slice(0,this.measuredColumns).filter(t=>null===t).length}destroy(){this.ghostTable.clean(),super.destroy()}}function ve(t){const e={from:0,to:this.hot.countRows()-1};t.forEach(t=>{const n=this.hot.toPhysicalColumn(t);if(null!==n&&!this.hot._getColWidthFromSettings(n)){this.samplesGenerator.generateColumnSamples(t,e).forEach((t,e)=>this.ghostTable.addColumn(e,t))}}),this.ghostTable.columns.length&&(this.hot.batchExecution(()=>{this.ghostTable.getWidths((t,e)=>{const n=this.hot.toPhysicalColumn(t);this.columnWidthsMap.setValueAtIndex(n,e)})},!0),this.ghostTable.clean())}function Ce(){this.calculateVisibleColumnsWidth(),this.inProgress||(pe(ye,this,ve).call(this,fe(be,this)),ge(be,this,[]))}function Se(t,e){e||this.recalculateAllColumnsWidth()}function Oe(t){const e=t.reduce((t,e)=>{let[,n]=e;const i=this.hot.propToCol(n);return Number.isInteger(i)&&-1===t.indexOf(i)&&t.push(i),t},[]);fe(be,this).push(...e)}function Te(t,e,n){let i=t;return n&&(this.calculateColumnsWidth(e,void 0,!0),i=this.getColumnWidth(e,void 0,!1)),i}function _e(){ge(me,this,this.hot.getColHeader()),this.recalculateAllColumnsWidth()}function Ee(t){const e=t.reduce((t,e)=>{var n;const i=null===(n=e.address)||void 0===n?void 0:n.col;if(Number.isInteger(i)){const e=this.hot.toVisualColumn(i);-1===t.indexOf(e)&&t.push(e)}return t},[]);fe(be,this).push(...e)}const Re={horizontal:"horizontal",vertical:"vertical"};function Me(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function xe(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ie(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}Z.a.getSingleton().register("modifyAutofillRange"),Z.a.getSingleton().register("beforeAutofill"),Z.a.getSingleton().register("afterAutofill");const ke=["fillHandle"];var Ae=new WeakSet;class Ne extends te{constructor(){super(...arguments),Me(this,Ae),xe(this,"addingStarted",!1),xe(this,"mouseDownOnCellCorner",!1),xe(this,"mouseDragOutside",!1),xe(this,"handleDraggedCells",0),xe(this,"directions",[]),xe(this,"autoInsertRow",!1)}static get PLUGIN_KEY(){return"autofill"}static get PLUGIN_PRIORITY(){return 20}static get SETTING_KEYS(){return["autofill",...ke]}isEnabled(){return this.hot.getSettings().fillHandle}enablePlugin(){this.enabled||(this.mapSettings(),this.registerEvents(),this.addHook("afterOnCellCornerMouseDown",t=>Ie(Ae,this,He).call(this,t)),this.addHook("afterOnCellCornerDblClick",t=>Ie(Ae,this,je).call(this,t)),this.addHook("beforeOnCellMouseOver",(t,e)=>Ie(Ae,this,De).call(this,e)),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.clearMappedSettings(),super.disablePlugin()}getSelectionData(){const t=this.hot.getSelectedRangeLast(),{row:e,col:n}=t.getTopStartCorner(),{row:i,col:r}=t.getBottomEndCorner(),o=this.hot.runHooks("modifyCopyableRange",[{startRow:e,startCol:n,endRow:i,endCol:r}]),s=[],a=[],l=[];return Object(c.a)(o,t=>{for(let e=t.startRow;e<=t.endRow;e+=1)-1===s.indexOf(e)&&s.push(e);for(let e=t.startCol;e<=t.endCol;e+=1)-1===a.indexOf(e)&&a.push(e)}),Object(c.a)(s,t=>{const e=[];Object(c.a)(a,n=>{e.push(this.hot.getCopyableData(t,n))}),l.push(e)}),l}fillIn(){if(this.hot.selection.highlight.getFill().isEmpty())return!1;const[t,e,n,i]=this.hot.selection.highlight.getFill().getVisualCorners(),r=this.hot.getSelectedRangeLast(),o=r.getTopStartCorner(),s=r.getBottomEndCorner();this.resetSelectionOfDraggedArea();const a=[o.row,o.col,s.row,s.col],l=this.hot.runHooks("modifyAutofillRange",[Math.min(o.row,t),Math.min(o.col,e),Math.max(s.row,n),Math.max(s.col,i)],a),{directionOfDrag:c,startOfDragCoords:u,endOfDragCoords:h}=function(t,e,n){let i,r,o;return e[0]===t[0]&&e[1]<t[1]?(o="left",i=n(e[0],e[1]),r=n(e[2],t[1]-1)):e[2]===t[2]&&e[0]===t[0]&&e[3]>t[3]?(o="right",i=n(e[0],t[3]+1),r=n(e[2],e[3])):e[0]<t[0]&&e[1]===t[1]?(o="up",i=n(e[0],e[1]),r=n(t[0]-1,e[3])):e[2]>t[2]&&e[1]===t[1]&&(o="down",i=n(t[2]+1,e[1]),r=n(e[2],e[3])),i&&i.normalize(),r&&r.normalize(),{directionOfDrag:o,startOfDragCoords:i,endOfDragCoords:r}}(a,l,(t,e)=>this.hot._createCellCoords(t,e));if(u&&u.row>-1&&u.col>-1){const t=this.getSelectionData(),e=r.clone(),n=this.hot._createCellRange(u,u,h),i=this.hot.runHooks("beforeAutofill",t,e,n,c);if(!1===i)return this.hot.selection.highlight.getFill().clear(),this.hot.render(),!1;let o=i;const s=i;if(["up","left"].indexOf(c)>-1&&(1!==s.length||0!==s[0].length))if(o=[],"up"===c){const t=h.row-u.row+1,e=t%s.length;for(let n=0;n<t;n++)o.push(s[(n+(s.length-e))%s.length])}else{const t=h.col-u.col+1,e=t%s[0].length;for(let n=0;n<s.length;n++){o.push([]);for(let i=0;i<t;i++)o[n].push(s[n][(i+(s[n].length-e))%s[n].length])}}this.hot.populateFromArray(u.row,u.col,o,h.row,h.col,this.pluginName+".fill",null),this.setSelection(l),this.hot.runHooks("afterAutofill",o,e,n,c),this.hot.render()}else this.hot.view.render();return!0}reduceSelectionAreaIfNeeded(t){return t.row<0&&(t.row=0),t.col<0&&(t.col=0),t}getCoordsOfDragAndDropBorders(t){const e=this.hot.getSelectedRangeLast(),n=e.getBottomEndCorner();let i=t;if(this.directions.includes(Re.vertical)&&this.directions.includes(Re.horizontal)){const r=e.getTopStartCorner();(n.col<=t.col||r.col>=t.col)&&(i=this.hot._createCellCoords(n.row,t.col)),(n.row<t.row||r.row>t.row)&&(i=this.hot._createCellCoords(t.row,n.col))}else if(this.directions.includes(Re.vertical))i=this.hot._createCellCoords(t.row,n.col);else{if(!this.directions.includes(Re.horizontal))return;i=this.hot._createCellCoords(n.row,t.col)}return this.reduceSelectionAreaIfNeeded(i)}showBorder(t){const e=this.getCoordsOfDragAndDropBorders(t);e&&this.redrawBorders(e)}addRow(){this.hot._registerTimeout(()=>{this.hot.alter("insert_row_below",void 0,1,this.pluginName+".fill"),this.addingStarted=!1},200)}addNewRowIfNeeded(){if(!this.hot.selection.highlight.getFill().isEmpty()&&!1===this.addingStarted&&this.autoInsertRow){const t=this.hot.getSelectedLast(),e=this.hot.selection.highlight.getFill().getVisualCorners(),n=this.hot.countRows();t[2]<n-1&&e[2]===n-1&&(this.addingStarted=!0,this.addRow())}}getIndexOfLastAdjacentFilledInRow(t){const e=this.hot.getData(),n=this.hot.countRows();let i;for(let r=t[2]+1;r<n;r++){for(let i=t[1];i<=t[3];i++){const t=e[r][i];if(!Object(u.c)(t))return-1}const n=e[r][t[1]-1],o=e[r][t[3]+1];Object(u.c)(n)&&Object(u.c)(o)||(i=r)}return i}addSelectionFromStartAreaToSpecificRowIndex(t,e){this.hot.selection.highlight.getFill().clear().add(this.hot._createCellCoords(t[0],t[1])).add(this.hot._createCellCoords(e,t[3])).commit()}setSelection(t){this.hot.selectCell(...Object(c.c)(t,t=>Math.max(t,0)),!1,!1)}selectAdjacent(){const t=this.hot.getSelectedLast(),e=this.getIndexOfLastAdjacentFilledInRow(t);return-1!==e&&void 0!==e&&(this.addSelectionFromStartAreaToSpecificRowIndex(t,e),!0)}resetSelectionOfDraggedArea(){this.handleDraggedCells=0,this.hot.selection.highlight.getFill().clear()}redrawBorders(t){this.hot.selection.highlight.getFill().clear().add(this.hot.getSelectedRangeLast().from).add(this.hot.getSelectedRangeLast().to).add(t).commit(),this.hot.view.render()}getIfMouseWasDraggedOutside(t){const{documentElement:e}=this.hot.rootDocument,n=Object(r.K)(this.hot.table).top-(this.hot.rootWindow.pageYOffset||e.scrollTop)+Object(r.L)(this.hot.table),i=Object(r.K)(this.hot.table).left-(this.hot.rootWindow.pageXOffset||e.scrollLeft)+Object(r.M)(this.hot.table);return t.clientY>n&&t.clientX<=i}registerEvents(){const{documentElement:t}=this.hot.rootDocument;this.eventManager.addEventListener(t,"mouseup",()=>Ie(Ae,this,Pe).call(this)),this.eventManager.addEventListener(t,"mousemove",t=>Ie(Ae,this,Le).call(this,t))}clearMappedSettings(){this.directions.length=0,this.autoInsertRow=!1}mapSettings(){const t=function(t){const e={};return!0===t?(e.directions=Object.keys(Re),e.autoInsertRow=!0):Object(s.l)(t)?(Object(u.b)(t.autoInsertRow)?t.direction===Re.horizontal?e.autoInsertRow=!1:e.autoInsertRow=t.autoInsertRow:e.autoInsertRow=!1,Object(u.b)(t.direction)?e.directions=[t.direction]:e.directions=Object.keys(Re)):"string"===typeof t?(e.directions=[t],e.autoInsertRow=!0):(e.directions=[],e.autoInsertRow=!1),e}(this.hot.getSettings().fillHandle);this.directions=t.directions,this.autoInsertRow=t.autoInsertRow}destroy(){super.destroy()}}function je(){this.selectAdjacent()&&this.fillIn()}function He(){this.handleDraggedCells=1,this.mouseDownOnCellCorner=!0}function De(t){this.mouseDownOnCellCorner&&!this.hot.view.isMouseDown()&&this.handleDraggedCells&&(this.handleDraggedCells+=1,this.showBorder(t),this.addNewRowIfNeeded())}function Pe(){this.handleDraggedCells&&(this.handleDraggedCells>1&&this.fillIn(),this.handleDraggedCells=0,this.mouseDownOnCellCorner=!1)}function Le(t){const e=this.getIfMouseWasDraggedOutside(t);!1===this.addingStarted&&this.handleDraggedCells>0&&e?(this.mouseDragOutside=!0,this.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&&this.autoInsertRow&&this.addRow()}function Fe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Be(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ve(t,e){return t.get(Ue(t,e))}function Ue(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var We=new WeakMap,ze=new WeakSet;class Ye extends te{static get PLUGIN_KEY(){return"autoRowSize"}static get PLUGIN_PRIORITY(){return 40}static get SETTING_KEYS(){return!0}static get CALCULATION_STEP(){return 50}static get SYNC_CALCULATION_LIMIT(){return 500}constructor(t){var e,n;super(t),Fe(e=this,n=ze),n.add(e),Be(this,"headerHeight",null),Be(this,"ghostTable",new re(this.hot)),Be(this,"samplesGenerator",new ae((t,e)=>{const n=this.hot.toPhysicalRow(t),i=this.hot.toPhysicalColumn(e);if(this.hot.rowIndexMapper.isHidden(n)||this.hot.columnIndexMapper.isHidden(i))return!1;if(t>=0&&e>=0){if(this.hot.getCellMeta(t,e).hidden)return!1}let r;return t>=0?r=this.hot.getDataAtCell(t,e):-1===t&&(r=this.hot.getColHeader(e)),{value:r}})),Be(this,"inProgress",!1),Be(this,"measuredRows",0),Be(this,"rowHeightsMap",new ce.a),function(t,e,n){Fe(t,e),e.set(t,n)}(this,We,[]),this.hot.rowIndexMapper.registerMap("autoRowSize",this.rowHeightsMap),this.addHook("beforeRowResize",(t,e,n)=>Ue(ze,this,Ke).call(this,t,e,n))}isEnabled(){const t=this.hot.getSettings().autoRowSize;return!0===t||Object(s.l)(t)}enablePlugin(){var t=this;this.enabled||(this.setSamplingOptions(),this.addHook("afterLoadData",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Ue(ze,t,Xe).call(t,...n)})),this.addHook("beforeChangeRender",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Ue(ze,t,qe).call(t,...n)})),this.addHook("beforeColumnResize",()=>this.recalculateAllRowsHeight()),this.addHook("afterFormulasValuesUpdate",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Ue(ze,t,Ze).call(t,...n)})),this.addHook("beforeRender",()=>Ue(ze,this,$e).call(this)),this.addHook("modifyRowHeight",(t,e)=>this.getRowHeight(e,t)),this.addHook("init",()=>Ue(ze,this,Qe).call(this)),this.addHook("modifyColumnHeaderHeight",()=>this.getColumnHeaderHeight()),super.enablePlugin())}disablePlugin(){this.headerHeight=null,super.disablePlugin(),this.addHook("beforeRowResize",(t,e,n)=>Ue(ze,this,Ke).call(this,t,e,n))}calculateVisibleRowsHeight(){if(!this.hot.countCols())return;const t=this.getFirstVisibleRow(),e=this.getLastVisibleRow();if(-1===t||-1===e)return;const n=this.hot.renderCall;this.calculateRowsHeight({from:t,to:e},void 0,n)}calculateRowsHeight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countCols()-1},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i="number"===typeof t?{from:t,to:t}:t,r="number"===typeof e?{from:e,to:e}:e;if(null!==this.hot.getColHeader(0)){const t=this.samplesGenerator.generateRowSamples(-1,r);this.ghostTable.addColumnHeadersRow(t.get(-1))}Object(bt.d)(i.from,i.to,t=>{let e=this.hot.toPhysicalRow(t);if(null===e&&(e=t),n||null===this.rowHeightsMap.getValueAtIndex(e)){this.samplesGenerator.generateRowSamples(t,r).forEach((t,e)=>this.ghostTable.addRow(e,t))}}),this.ghostTable.rows.length&&(this.hot.batchExecution(()=>{this.ghostTable.getHeights((t,e)=>{t<0?this.headerHeight=e:this.rowHeightsMap.setValueAtIndex(this.hot.toPhysicalRow(t),e)})},!0),this.measuredRows=i.to+1,this.ghostTable.clean())}calculateAllRowsHeight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0;const i=this.hot.countRows()-1;let r=null;this.inProgress=!0;const o=()=>{if(!this.hot)return Object(ne.a)(r),void(this.inProgress=!1);this.calculateRowsHeight({from:n,to:Math.min(n+Ye.CALCULATION_STEP,i)},t,e),n=n+Ye.CALCULATION_STEP+1,n<i?r=Object(ne.e)(o):(Object(ne.a)(r),this.inProgress=!1,this.hot.view.adjustElementsSize(),this.hot.view._wt.wtOverlays.inlineStartOverlay.needFullRender&&this.hot.view._wt.wtOverlays.inlineStartOverlay.clone.draw())},s=this.getSyncCalculationLimit();s>=0&&(this.calculateRowsHeight({from:0,to:s},t,e),n=s+1),n<i?o():(this.inProgress=!1,this.hot.view.adjustElementsSize())}setSamplingOptions(){const t=this.hot.getSettings().autoRowSize,e=t&&Object(s.j)(t,"samplingRatio")?t.samplingRatio:void 0,n=t&&Object(s.j)(t,"allowSampleDuplicates")?t.allowSampleDuplicates:void 0;e&&!isNaN(e)&&this.samplesGenerator.setSampleCount(parseInt(e,10)),n&&this.samplesGenerator.setAllowDuplicates(n)}recalculateAllRowsHeight(){this.hot.view.isVisible()&&this.calculateAllRowsHeight({from:0,to:this.hot.countCols()-1},!0)}getSyncCalculationLimit(){const t=this.hot.getSettings().autoRowSize;let e=Ye.SYNC_CALCULATION_LIMIT;const n=this.hot.countRows()-1;return Object(s.l)(t)&&(e=t.syncLimit,Object(h.a)(e)?e=Object(bt.f)(n,e):e>>=0),Math.min(e,n)}getRowHeight(t,e){const n=t<0?this.headerHeight:this.rowHeightsMap.getValueAtIndex(this.hot.toPhysicalRow(t));let i=e;return null!==n&&n>(e||0)&&(i=n),i}getColumnHeaderHeight(){return this.headerHeight}getFirstVisibleRow(){var t;return null!==(t=this.hot.view.getFirstRenderedVisibleRow())&&void 0!==t?t:-1}getLastVisibleRow(){var t;return null!==(t=this.hot.view.getLastRenderedVisibleRow())&&void 0!==t?t:-1}clearCache(t){this.headerHeight=null,Array.isArray(t)?this.hot.batchExecution(()=>{t.forEach(t=>{this.rowHeightsMap.setValueAtIndex(t,null)})},!0):this.rowHeightsMap.clear()}clearCacheByRange(t){const{from:e,to:n}="number"===typeof t?{from:t,to:t}:t;this.hot.batchExecution(()=>{Object(bt.d)(Math.min(e,n),Math.max(e,n),t=>{this.rowHeightsMap.setValueAtIndex(t,null)})},!0)}isNeedRecalculate(){return!!this.rowHeightsMap.getValues().slice(0,this.measuredRows).filter(t=>null===t).length}destroy(){this.ghostTable.clean(),super.destroy()}}function Ge(t){const e={from:0,to:this.hot.countCols()-1};t.forEach(t=>{this.samplesGenerator.generateRowSamples(t,e).forEach((t,e)=>this.ghostTable.addRow(e,t))}),this.ghostTable.rows.length&&(this.hot.batchExecution(()=>{this.ghostTable.getHeights((t,e)=>{const n=this.hot.toPhysicalRow(t);this.rowHeightsMap.setValueAtIndex(n,e)})},!0),this.ghostTable.clean())}function $e(){var t,e,n;this.calculateVisibleRowsHeight(),this.inProgress||(Ue(ze,this,Ge).call(this,Ve(We,this)),e=this,n=[],(t=We).set(Ue(t,e),n))}function Ke(t,e,n){let i=t;return n&&(this.calculateRowsHeight(e,void 0,!0),i=this.getRowHeight(e)),i}function Xe(t,e){e||this.recalculateAllRowsHeight()}function qe(t){const e=t.reduce((t,e)=>{let[n]=e;return-1===t.indexOf(n)&&t.push(n),t},[]);Ve(We,this).push(...e)}function Qe(){this.recalculateAllRowsHeight()}function Ze(t){const e=t.reduce((t,e)=>{var n;const i=null===(n=e.address)||void 0===n?void 0:n.row;if(Number.isInteger(i)){const e=this.hot.toVisualRow(i);-1===t.indexOf(e)&&t.push(e)}return t},[]);Ve(We,this).push(...e)}var Je=n(184),tn=n(36),en=n(41);const{getListWithInsertedItems:nn,getListWithRemovedItems:rn}=Object(Je.a)("physicallyIndexed");class on extends tn.a{constructor(){super(t=>t)}insert(t,e){const n=Object(en.b)(this.indexedValues,e);this.indexedValues=nn(n,t,e,this.initValueOrFn),super.insert(t,e)}remove(t){const e=rn(this.indexedValues,t);this.indexedValues=Object(en.a)(e,t),super.remove(t)}}var sn=on;const{getListWithInsertedItems:an,getListWithRemovedItems:ln}=Object(Je.a)("physicallyIndexed");class cn extends tn.a{constructor(){super(t=>t)}insert(t,e){this.indexedValues=an(this.indexedValues,t,e,(t,e)=>this.getNextValue(e)),super.insert(t,e)}remove(t){this.indexedValues=ln(this.indexedValues,t),super.remove(t)}getNextValue(t){return Math.max(...this.getValues())+1+t}}function un(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function hn(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const dn=new Map([["loose",sn],["strict",cn]]);var fn=new WeakSet;class gn extends te{constructor(){super(...arguments),un(this,fn),hn(this,"headerIndexes",null)}static get PLUGIN_KEY(){return"bindRowsWithHeaders"}static get PLUGIN_PRIORITY(){return 210}isEnabled(){return!!this.hot.getSettings().bindRowsWithHeaders}enablePlugin(){if(this.enabled)return;let t=this.hot.getSettings().bindRowsWithHeaders;"string"!==typeof t&&(t="loose");const e=dn.get(t);this.headerIndexes=this.hot.rowIndexMapper.registerMap("bindRowsWithHeaders",new e),this.addHook("modifyRowHeader",t=>function(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}(fn,this,pn).call(this,t)),super.enablePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("bindRowsWithHeaders"),super.disablePlugin()}destroy(){super.destroy()}}function pn(t){return this.headerIndexes.getValueAtIndex(this.hot.toPhysicalRow(t))}var mn=n(9);function bn(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function yn(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wn(t,e){return t.get(Cn(t,e))}function vn(t,e,n){return t.set(Cn(t,e),n),n}function Cn(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}const Sn=["nestedHeaders"],On=new Map([["collapse",{hideColumn:!0,beforeHook:"beforeColumnCollapse",afterHook:"afterColumnCollapse"}],["expand",{hideColumn:!1,beforeHook:"beforeColumnExpand",afterHook:"afterColumnExpand"}]]);var Tn=new WeakMap,_n=new WeakSet;class En extends te{constructor(){var t,e;super(...arguments),bn(t=this,e=_n),e.add(t),yn(this,"nestedHeadersPlugin",null),yn(this,"headerStateManager",null),function(t,e,n){bn(t,e),e.set(t,n)}(this,Tn,null)}static get PLUGIN_KEY(){return"collapsibleColumns"}static get PLUGIN_PRIORITY(){return 290}static get PLUGIN_DEPS(){return["plugin:NestedHeaders"]}static get SETTING_KEYS(){return["collapsibleColumns",...Sn]}isEnabled(){return!!this.hot.getSettings().collapsibleColumns}enablePlugin(){var t=this;if(this.enabled)return;const{nestedHeaders:e}=this.hot.getSettings();e||Object(mn.b)("You need to configure the Nested Headers plugin in order to use collapsible headers."),vn(Tn,this,this.hot.columnIndexMapper.createAndRegisterIndexMap(this.pluginName,"hiding")),this.nestedHeadersPlugin=this.hot.getPlugin("nestedHeaders"),this.headerStateManager=this.nestedHeadersPlugin.getStateManager(),this.addHook("init",()=>Cn(_n,this,xn).call(this)),this.addHook("afterLoadData",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Cn(_n,t,In).call(t,...n)})),this.addHook("afterGetColHeader",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Cn(_n,t,Rn).call(t,...n)})),this.addHook("beforeOnCellMouseDown",(t,e,n)=>Cn(_n,this,Mn).call(this,t,e,n)),this.registerShortcuts(),super.enablePlugin(),this.updatePlugin()}updatePlugin(){if(this.hot.view){if(!this.nestedHeadersPlugin.detectedOverlappedHeaders){const{collapsibleColumns:t}=this.hot.getSettings();"boolean"===typeof t?this.headerStateManager.mapState(t=>({collapsible:t.origColspan>1})):Array.isArray(t)&&(this.headerStateManager.mapState(()=>({collapsible:!1})),this.headerStateManager.mergeStateWith(t))}super.updatePlugin()}}disablePlugin(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),vn(Tn,this,null),this.nestedHeadersPlugin=null,this.unregisterShortcuts(),this.clearButtons(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{var t;const{row:e,col:n}=this.hot.getSelectedRangeLast().highlight,{collapsible:i,isCollapsed:r,columnIndex:o}=null!==(t=this.headerStateManager.getHeaderTreeNodeData(e,n))&&void 0!==t?t:{};if(i)return r?this.expandSection({row:e,col:o}):this.collapseSection({row:e,col:o}),!1},runOnlyIf:()=>{var t,e;return(null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.isSingle())&&(null===(e=this.hot.getSelectedRangeLast())||void 0===e?void 0:e.highlight.isHeader())},group:"collapsibleColumns",relativeToGroup:a.a,position:"before"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup("collapsibleColumns")}clearButtons(){if(!this.hot.view)return;const t=this.hot.view._wt.getSetting("columnHeaders").length,e=this.hot.view._wt.wtTable.THEAD,n=this.hot.view._wt.wtOverlays.topOverlay.clone.wtTable.THEAD,i=this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay?this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null,r=function(t){t&&t.parentNode.removeChild(t)};Object(bt.d)(0,t-1,t=>{const o=e.childNodes[t],s=n.childNodes[t],a=i?i.childNodes[t]:null;Object(bt.d)(0,o.childNodes.length-1,t=>{let e=o.childNodes[t].querySelector(".collapsibleIndicator");r(e),s&&s.childNodes[t]&&(e=s.childNodes[t].querySelector(".collapsibleIndicator"),r(e)),i&&a&&a.childNodes[t]&&(e=a.childNodes[t].querySelector(".collapsibleIndicator"),r(e))})},!0)}expandSection(t){this.toggleCollapsibleSection([t],"expand")}collapseSection(t){this.toggleCollapsibleSection([t],"collapse")}toggleAllCollapsibleSections(t){const e=this.headerStateManager.mapNodes(e=>{const{collapsible:n,origColspan:i,headerLevel:r,columnIndex:o,isCollapsed:s}=e;if(!0===n&&i>1&&(s&&"expand"===t||!s&&"collapse"===t))return{row:this.headerStateManager.levelToRowCoords(r),col:o}});this.toggleCollapsibleSection(e,t)}collapseAll(){this.toggleAllCollapsibleSections("collapse")}expandAll(){this.toggleAllCollapsibleSections("expand")}toggleCollapsibleSection(t,e){if(!On.has(e))throw new Error(`Unsupported action is passed (${e}).`);if(!Array.isArray(t))return;const n=Object(c.b)(t,t=>{let{row:e}=t;return e<0});let i=n.length>0;Object(c.a)(n,t=>{var n;let{row:r,col:o}=t;const{collapsible:s,isCollapsed:a}=null!==(n=this.headerStateManager.getHeaderSettings(r,o))&&void 0!==n?n:{};if(!s||a&&"collapse"===e||!a&&"expand"===e)return i=!1,!1});const r=[],o=[];i&&Object(c.a)(n,t=>{let{row:n,col:i}=t;const{colspanCompensation:s,affectedColumns:a,rollbackModification:l}=this.headerStateManager.triggerNodeModification(e,n,i);s>0&&(o.push(...a),r.push(l))});const s=this.getCollapsedColumns();let a=[];"collapse"===e?a=Object(c.e)([...s,...o]):"expand"===e&&(a=Object(c.b)(s,t=>!o.includes(t)));const l=On.get(e);if(!1===this.hot.runHooks(l.beforeHook,s,a,i))return void Object(c.a)(r,t=>{t()});this.hot.batchExecution(()=>{Object(c.a)(o,t=>{wn(Tn,this).setValueAtIndex(this.hot.toPhysicalColumn(t),l.hideColumn)})},!0);const u=this.getCollapsedColumns().length!==s.length,h=this.hot.getSelectedRangeLast();if("collapse"===e&&u&&h){const{row:t,col:e}=h.highlight;if((this.hot.rowIndexMapper.isHidden(t)||this.hot.columnIndexMapper.isHidden(e))&&o.includes(e)){const n=t>=0?this.hot.rowIndexMapper.getNearestNotHiddenIndex(t,1,!0):t,i=e>=0?this.hot.columnIndexMapper.getNearestNotHiddenIndex(e,1,!0):e;null!==n&&null!==i&&this.hot.selectCell(n,i)}}this.hot.runHooks(l.afterHook,s,a,i,u),this.hot.render(),this.hot.view.adjustElementsSize()}getCollapsedColumns(){return wn(Tn,this).getHiddenIndexes()}destroy(){vn(Tn,this,null),super.destroy()}}function Rn(t,e,n){var i;const{collapsible:o,origColspan:s,isCollapsed:a}=null!==(i=this.headerStateManager.getHeaderSettings(n,t))&&void 0!==i?i:{},l=o&&s>1&&t>=this.hot.getSettings().fixedColumnsStart,c=this.hot.getSettings().ariaTags;let u=e.querySelector(".collapsibleIndicator");var h;(Object(r.O)(e,[Object(p.k)("")[0]]),l)?(u||(u=this.hot.rootDocument.createElement("div"),Object(r.a)(u,"collapsibleIndicator"),e.querySelector("div:first-child").appendChild(u)),Object(r.P)(u,["collapsed","expanded"]),a?(Object(r.a)(u,"collapsed"),Object(r.g)(u,"+"),c&&Object(r.U)(e,...Object(p.k)(!1))):(Object(r.a)(u,"expanded"),Object(r.g)(u,"-"),c&&Object(r.U)(e,...Object(p.k)(!0))),c&&Object(r.U)(u,...Object(p.n)())):null===(h=u)||void 0===h||h.remove()}function Mn(t,e){Object(r.w)(t.target,"collapsibleIndicator")&&(Object(r.w)(t.target,"expanded")?(this.eventManager.fireEvent(t.target,"mouseup"),this.toggleCollapsibleSection([e],"collapse")):Object(r.w)(t.target,"collapsed")&&(this.eventManager.fireEvent(t.target,"mouseup"),this.toggleCollapsibleSection([e],"expand")),Object(o.f)(t))}function xn(){this.updatePlugin()}function In(t,e){e||this.updatePlugin()}var kn=n(8),An=n(103),Nn=n(69);function jn(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Hn=["sortEmptyCells","indicator","headerAction","compareFunctionFactory"];class Dn{constructor(t,e){jn(this,"hot",void 0),jn(this,"sortingStates",new Nn.a),jn(this,"sortEmptyCells",!1),jn(this,"indicator",!0),jn(this,"headerAction",!0),jn(this,"compareFunctionFactory",void 0),jn(this,"mapName",void 0),this.hot=t,this.mapName=e,this.hot.columnIndexMapper.registerMap(e,this.sortingStates)}updateAllColumnsProperties(t){Object(s.l)(t)&&Object(s.o)(t,(t,e)=>{Hn.includes(e)&&(this[e]=t)})}getAllColumnsProperties(){const t={sortEmptyCells:this.sortEmptyCells,indicator:this.indicator,headerAction:this.headerAction};return"function"===typeof this.compareFunctionFactory&&(t.compareFunctionFactory=this.compareFunctionFactory),t}getSortOrderOfColumn(t){var e;return null===(e=this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(t)))||void 0===e?void 0:e.sortOrder}getIndexOfColumnInSortQueue(t){return t=this.hot.toPhysicalColumn(t),this.sortingStates.getEntries().findIndex(e=>{let[n]=e;return n===t})}getNumberOfSortedColumns(){return this.sortingStates.getLength()}isListOfSortedColumnsEmpty(){return 0===this.getNumberOfSortedColumns()}isColumnSorted(t){return Object(s.l)(this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(t)))}getSortStates(){if(null===this.sortingStates)return[];return this.sortingStates.getEntries().map(t=>{let[e,n]=t;return{column:this.hot.toVisualColumn(e),...n}})}getColumnSortState(t){const e=this.getSortOrderOfColumn(t);if(Object(u.b)(e))return{column:t,sortOrder:e}}setSortStates(t){this.sortingStates.clear();for(let e=0;e<t.length;e+=1)this.sortingStates.setValueAtIndex(this.hot.toPhysicalColumn(t[e].column),{sortOrder:t[e].sortOrder})}destroy(){this.hot.columnIndexMapper.unregisterMap(this.mapName),this.sortingStates=null}}function Pn(t,e,n){const i=e.locale;return function(e,r){const{sortEmptyCells:o}=n;return"string"===typeof e&&(e=e.toLocaleLowerCase(i)),"string"===typeof r&&(r=r.toLocaleLowerCase(i)),e===r?Yn:Object(u.c)(e)?Object(u.c)(r)?Yn:o&&"asc"===t?Gn:$n:Object(u.c)(r)?o&&"asc"===t?$n:Gn:isNaN(e)&&!isNaN(r)?"asc"===t?$n:Gn:!isNaN(e)&&isNaN(r)?"asc"===t?Gn:$n:(isNaN(e)||isNaN(r)||(e=parseFloat(e),r=parseFloat(r)),e<r?"asc"===t?Gn:$n:e>r?"asc"===t?$n:Gn:Yn)}}var Ln=n(24);const{register:Fn,getItem:Bn,hasItem:Vn}=Object(Ln.a)("sorting.compareFunctionFactory"),{register:Un,getItem:Wn}=Object(Ln.a)("sorting.mainSortComparator");function zn(t){return Vn(t)?Bn(t):Bn("default")}Fn("checkbox",(function(t,e,n){const i=e.checkedTemplate,r=e.uncheckedTemplate,{sortEmptyCells:o}=n;return function(s,a){const l=Object(u.c)(s),c=Object(u.c)(a),h=l?r:s,d=c?r:a,f=h===r||h===i,g=d===r||d===i;if(!1===o){if(l&&!1===c)return $n;if(!1===l&&c)return Gn}return!1===f&&g?"asc"===t?Gn:$n:f&&!1===g?"asc"===t?$n:Gn:!1===f&&!1===g?Pn(t,e,n)(s,a):h===r&&d===i?"asc"===t?Gn:$n:h===i&&d===r?"asc"===t?$n:Gn:Yn}})),Fn("date",(function(t,e,n){return ei(t,e.dateFormat,n)})),Fn("default",Pn),Fn("numeric",(function(t,e,n){return function(e,i){const r=parseFloat(e),o=parseFloat(i),{sortEmptyCells:s}=n;if(r===o||isNaN(r)&&isNaN(o))return Yn;if(s){if(Object(u.c)(e))return"asc"===t?Gn:$n;if(Object(u.c)(i))return"asc"===t?$n:Gn}return isNaN(r)?$n:isNaN(o)?Gn:r<o?"asc"===t?Gn:$n:r>o?"asc"===t?$n:Gn:Yn}})),Fn("time",(function(t,e,n){return ei(t,e.timeFormat,n)}));const Yn=0,Gn=-1,$n=1;const Kn="asc",Xn="desc";function qn(t){if(t.some(t=>!1===function(t){if(!1===Object(s.l)(t))return!1;const{column:e,sortOrder:n}=t;return Number.isInteger(e)&&[Kn,Xn].includes(n)}(t)))return!1;const e=t.map(t=>{let{column:e}=t;return e});return new Set(e).size===e.length}function Qn(t){if(t!==Xn)return t===Kn?Xn:Kn}function Zn(t){return t.querySelector(".colHeader")}function Jn(t,e){if(t<0||!e.parentNode)return!1;const n=e.parentNode.parentNode.childNodes;return-1===Array.from(n).indexOf(e.parentNode)-n.length}function ti(t,e,n){return-1===t&&e>=0&&!1===Object(o.c)(n)}function ei(t,e,n){return function(i,r){const{sortEmptyCells:o}=n;if(i===r)return Yn;if(Object(u.c)(i))return Object(u.c)(r)?Yn:o&&"asc"===t?Gn:$n;if(Object(u.c)(r))return o&&"asc"===t?$n:Gn;const s=O(i,e),a=O(r,e);return s.isValid()?a.isValid()?a.isAfter(s)?"asc"===t?Gn:$n:a.isBefore(s)?"asc"===t?$n:Gn:Yn:Gn:$n}}const ni=new Map([[Kn,"ascending"],[Xn,"descending"]]);function ii(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function ri(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oi(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}Un("columnSorting",(function(t,e){return function(n,i){const[,...r]=n,[,...o]=i;return function(n){const i=t[n],s=e[n],a=r[n],l=o[n],c=s.columnSorting;return(c.compareFunctionFactory?c.compareFunctionFactory:zn(s.type))(i,s,c)(a,l)}(0)}})),Z.a.getSingleton().register("beforeColumnSort"),Z.a.getSingleton().register("afterColumnSort");var si=new WeakSet;class ai extends te{constructor(){super(...arguments),ii(this,si),ri(this,"columnStatesManager",null),ri(this,"columnMetaCache",null),ri(this,"pluginKey","columnSorting"),ri(this,"indexesSequenceCache",null)}static get PLUGIN_KEY(){return"columnSorting"}static get PLUGIN_PRIORITY(){return 50}isEnabled(){return!!this.hot.getSettings()[this.pluginKey]}enablePlugin(){var t=this;this.enabled||(this.columnStatesManager=new Dn(this.hot,this.pluginKey+".sortingStates"),this.columnMetaCache=new ce.a(t=>{let e=this.hot.toVisualColumn(t);return null===e&&(e=t),this.getMergedPluginSettings(e)}),this.hot.columnIndexMapper.registerMap(this.pluginKey+".columnMeta",this.columnMetaCache),this.addHook("afterGetColHeader",(t,e)=>oi(si,this,ci).call(this,t,e)),this.addHook("beforeOnCellMouseDown",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return oi(si,t,hi).call(t,...n)})),this.addHook("afterOnCellMouseDown",(t,e)=>this.onAfterOnCellMouseDown(t,e)),this.addHook("afterInit",()=>oi(si,this,li).call(this)),this.addHook("afterLoadData",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return oi(si,t,ui).call(t,...n)})),this.hot.view&&oi(si,this,li).call(this),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){const t=(t,e)=>{const n=Zn(e);!1!==Jn(t,e)&&null!==n&&this.updateHeaderClasses(n)};this.hot.addHook("afterGetColHeader",t),this.hot.addHookOnce("afterViewRender",()=>{this.hot.removeHook("afterGetColHeader",t)}),this.hot.batchExecution(()=>{null!==this.indexesSequenceCache&&(this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues()),this.hot.rowIndexMapper.unregisterMap(this.pluginKey),this.indexesSequenceCache=null)},!0),this.hot.columnIndexMapper.unregisterMap(this.pluginKey+".columnMeta"),this.columnStatesManager.destroy(),this.columnMetaCache=null,this.columnStatesManager=null,this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{const{highlight:t}=this.hot.getSelectedRangeLast();return this.sort(this.getColumnNextConfig(t.col)),!1},runOnlyIf:()=>{var t,e;const n=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return n&&(null===(e=this.hot.getSelectedRangeLast())||void 0===e?void 0:e.isSingle())&&this.hot.selection.isCellVisible(n)&&-1===n.row&&n.col>=0},relativeToGroup:a.a,position:"before",group:"columnSorting"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup("columnSorting")}sort(t){const e=this.getSortConfig(),n=this.getNormalizedSortConfigs(t),i=this.areValidSortConfigs(n);!1!==this.hot.runHooks("beforeColumnSort",e,n,i)&&(0===e.length&&null===this.indexesSequenceCache&&(this.indexesSequenceCache=this.hot.rowIndexMapper.registerMap(this.pluginKey,new An.a),this.indexesSequenceCache.setValues(this.hot.rowIndexMapper.getIndexesSequence())),i&&(this.columnStatesManager.setSortStates(n),this.sortByPresetSortStates(n),this.saveAllSortSettings(n)),this.hot.runHooks("afterColumnSort",e,i?n:e,i),i&&(this.hot.render(),this.hot.forceFullRender=!1,this.hot.view.render()))}clearSort(){this.sort([])}isSorted(){return this.enabled&&!this.columnStatesManager.isListOfSortedColumnsEmpty()}getSortConfig(t){return Object(u.b)(t)?this.columnStatesManager.getColumnSortState(t):this.columnStatesManager.getSortStates()}setSortConfig(t){const e=this.getNormalizedSortConfigs(t);this.areValidSortConfigs(e)&&this.columnStatesManager.setSortStates(e)}getNormalizedSortConfigs(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)?t.slice(0,1):[t]}areValidSortConfigs(t){const e=this.hot.countCols();return qn(t)&&t.every(t=>{let{column:n}=t;return n<=e&&n>=0})}saveAllSortSettings(t){const e=this.columnStatesManager.getAllColumnsProperties();e.initialConfig=Object(c.c)(t,t=>{let{column:e,...n}=t;return{column:this.hot.toPhysicalColumn(e),...n}}),this.hot.runHooks("persistentStateSave","columnSorting",e)}getAllSavedSortSettings(){const t={};this.hot.runHooks("persistentStateLoad","columnSorting",t);const e=t.value,n=t=>{let{column:e,...n}=t;return{column:this.hot.toVisualColumn(e),...n}};return Object(u.b)(e)&&Array.isArray(e.initialConfig)&&(e.initialConfig=Object(c.c)(e.initialConfig,n)),e}getColumnNextConfig(t){const e=this.columnStatesManager.getSortOrderOfColumn(t);if(Object(u.b)(e)){const n=Qn(e);return Object(u.b)(n)?{column:t,sortOrder:n}:void 0}const n=this.hot.countCols();if(Number.isInteger(t)&&t>=0&&t<n)return{column:t,sortOrder:Qn()}}getNextSortConfig(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";const n=this.columnStatesManager.getIndexOfColumnInSortQueue(t),i=-1!==n,r=this.getSortConfig(),o=this.getColumnNextConfig(t);if(i){if(Object(u.e)(o))return[...r.slice(0,n),...r.slice(n+1)];if("append"===e)return[...r.slice(0,n),...r.slice(n+1),o];if("replace"===e)return[...r.slice(0,n),o,...r.slice(n+1)]}return Object(u.b)(o)?r.concat(o):r}getPluginColumnConfig(t){if(Object(s.l)(t)){const e=t[this.pluginKey];if(Object(s.l)(e))return e}return{}}getMergedPluginSettings(t){const e=this.hot.getSettings()[this.pluginKey],n=this.columnStatesManager.getAllColumnsProperties(),i=this.hot.getCellMeta(0,t),r=Object.getPrototypeOf(i);return Array.isArray(r.columns)?Object.assign(n,e,this.getPluginColumnConfig(r.columns[t])):Object(kn.d)(r.columns)?Object.assign(n,e,this.getPluginColumnConfig(r.columns(t))):Object.assign(n,e)}getFirstCellSettings(t){const e=this.hot.getCellMeta(0,t),n=Object.create(e);return n[this.pluginKey]=this.columnMetaCache.getValueAtIndex(this.hot.toPhysicalColumn(t)),n}getNumberOfRowsToSort(t){const e=this.hot.getSettings();return e.maxRows<=t?e.maxRows:t-e.minSpareRows}sortByPresetSortStates(t){if(this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues()),0===t.length)return;const e=[],n=this.hot.countRows(),i=e=>Object(c.c)(t,t=>this.hot.getDataAtCell(e,t.column));for(let l=0;l<this.getNumberOfRowsToSort(n);l+=1)e.push([this.hot.toPhysicalRow(l)].concat(i(l)));const r=Object(c.c)(e,t=>t[0]);!function(t,e){const n=Wn(e);for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];t.sort(n(...r))}(e,this.pluginKey,Object(c.c)(t,t=>t.sortOrder),Object(c.c)(t,t=>this.getFirstCellSettings(t.column)));for(let l=e.length;l<n;l+=1)e.push([l].concat(i(l)));const o=Object(c.c)(e,t=>t[0]),s=new Map(Object(c.c)(r,(t,e)=>[t,o[e]])),a=Object(c.c)(this.hot.rowIndexMapper.getIndexesSequence(),t=>s.has(t)?s.get(t):t);this.hot.rowIndexMapper.setIndexesSequence(a)}sortBySettings(t){if(Object(s.l)(t)){this.columnStatesManager.updateAllColumnsProperties(t);const e=t.initialConfig;(Array.isArray(e)||Object(s.l)(e))&&this.sort(e)}else this.hot.render()}updateHeaderClasses(t){if(Object(r.P)(t,Array.from(ni.values()).concat("sortAction","indicatorDisabled","columnSorting")),!1!==this.enabled){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];Object(r.a)(t,function(t,e,n,i){const r=["columnSorting"];if(i&&r.push("sortAction"),!1===n)return r.push("indicatorDisabled"),r;const o=t.getSortOrderOfColumn(e);return Object(u.b)(o)&&r.push(ni.get(o)),r}(...n))}}onUpdateSettings(t){super.onUpdateSettings(),null!==this.columnMetaCache&&this.columnMetaCache.init(this.hot.columnIndexMapper.getNumberOfIndexes()),Object(u.b)(t[this.pluginKey])&&this.sortBySettings(t[this.pluginKey])}wasClickableHeaderClicked(t,e){return this.getFirstCellSettings(e)[this.pluginKey].headerAction&&Object(r.w)(t.target,"colHeader")}onAfterOnCellMouseDown(t,e){if(!1!==ti(e.row,e.col,t)&&this.wasClickableHeaderClicked(t,e.col)){this.hot.getShortcutManager().isCtrlPressed()&&(this.hot.deselectCell(),this.hot.selectColumns(e.col));const t=this.hot.getActiveEditor(),n=this.getColumnNextConfig(e.col);null!==t&&void 0!==t&&t.isOpened()&&this.hot.getCellValidator(t.row,t.col)?this.hot.addHookOnce("postAfterValidate",()=>{this.sort(n)}):this.sort(n)}}destroy(){var t;null===(t=this.columnStatesManager)||void 0===t||t.destroy(),super.destroy()}}function li(){const t=this.getAllSavedSortSettings();if(Object(s.l)(t))this.sortBySettings(t);else{const t=this.hot.getSettings()[this.pluginKey];this.sortBySettings(t)}}function ci(t,e){const n=Zn(e);if(!1===Jn(t,e)||null===n)return;const i=this.getFirstCellSettings(t)[this.pluginKey],o=i.indicator,s=i.headerAction;if(this.updateHeaderClasses(n,this.columnStatesManager,t,o,s),this.hot.getSettings().ariaTags){const n=this.columnStatesManager.getSortOrderOfColumn(t);Object(r.U)(e,...Object(p.K)(n?n+"ending":"none"))}}function ui(t){!0===t&&this.hot.view&&oi(si,this,li).call(this)}function hi(t,e,n,i){!1!==ti(e.row,e.col,t)&&this.wasClickableHeaderClicked(t,e.col)&&this.hot.getShortcutManager().isCtrlPressed()&&(i.column=!0)}function di(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var fi=class{constructor(t,e){di(this,"plugin",void 0),di(this,"hot",void 0),di(this,"endpoints",[]),di(this,"settings",void 0),di(this,"settingsType","array"),di(this,"currentEndpoint",null),di(this,"cellsToSetCache",[]),this.plugin=t,this.hot=this.plugin.hot,this.settings=e}initEndpoints(){this.endpoints=this.parseSettings(),this.refreshAllEndpoints()}getEndpoint(t){return"function"===this.settingsType?this.fillMissingEndpointData(this.settings)[t]:this.endpoints[t]}getAllEndpoints(){return"function"===this.settingsType?this.fillMissingEndpointData(this.settings):this.endpoints}fillMissingEndpointData(t){return this.parseSettings(t.call(this))}parseSettings(t){const e=[];let n=t;if(n||"function"!==typeof this.settings)return n||(n=this.settings),Object(c.a)(n,t=>{const n={};this.assignSetting(t,n,"ranges",[[0,this.hot.countRows()-1]]),this.assignSetting(t,n,"reversedRowCoords",!1),this.assignSetting(t,n,"destinationRow",new Error("\n        You must provide a destination row for the Column Summary plugin in order to work properly!\n      ")),this.assignSetting(t,n,"destinationColumn",new Error("\n        You must provide a destination column for the Column Summary plugin in order to work properly!\n      ")),this.assignSetting(t,n,"sourceColumn",t.destinationColumn),this.assignSetting(t,n,"type","sum"),this.assignSetting(t,n,"forceNumeric",!1),this.assignSetting(t,n,"suppressDataTypeErrors",!0),this.assignSetting(t,n,"customFunction",null),this.assignSetting(t,n,"readOnly",!0),this.assignSetting(t,n,"roundFloat",!1),e.push(n)}),e;this.settingsType="function"}assignSetting(t,e,n,i){if("ranges"!==n||void 0!==t[n]){if("ranges"!==n||0!==t[n].length)if(void 0===t[n]){if(i instanceof Error)throw i;e[n]=i}else"destinationRow"===n&&e.reversedRowCoords?e[n]=this.hot.countRows()-t[n]-1:e[n]=t[n]}else e[n]=i}resetSetupBeforeStructureAlteration(t,e,n){if("function"!==this.settingsType)return;const i=t.indexOf("row")>-1?"row":"col",r=this.getAllEndpoints();Object(c.a)(r,r=>{"row"===i&&r.destinationRow>=e&&("insert_row"===t?r.alterRowOffset=n:"remove_row"===t&&(r.alterRowOffset=-1*n)),"col"===i&&r.destinationColumn>=e&&("insert_col"===t?r.alterColumnOffset=n:"remove_col"===t&&(r.alterColumnOffset=-1*n))}),this.resetAllEndpoints(r,!1)}resetSetupAfterStructureAlteration(t,e,n,i,r){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if("function"===this.settingsType){const t=()=>(this.hot.removeHook("beforeViewRender",t),this.refreshAllEndpoints());return void this.hot.addHookOnce("beforeViewRender",t)}const s=t.indexOf("row")>-1?"row":"col",a=t.indexOf("remove")>-1?-1:1,l=this.getAllEndpoints(),u=0===t.indexOf("move_row"),h=e;Object(c.a)(l,t=>{"row"===s&&t.destinationRow>=h&&(t.alterRowOffset=a*n),"col"===s&&t.destinationColumn>=h&&(t.alterColumnOffset=a*n)}),this.resetAllEndpoints(l,!u),u?Object(c.a)(l,t=>{this.extendEndpointRanges(t,h,i[0],i.length),this.recreatePhysicalRanges(t),this.clearOffsetInformation(t)}):Object(c.a)(l,t=>{this.shiftEndpointCoordinates(t,h)}),o&&this.refreshAllEndpoints()}clearOffsetInformation(t){t.alterRowOffset=void 0,t.alterColumnOffset=void 0}extendEndpointRanges(t,e,n,i){Object(c.a)(t.ranges,t=>{t[1]&&(e>=t[0]&&e<=t[1]?n>t[1]?t[1]+=i:n<t[0]&&(t[0]-=i):n>=t[0]&&n<=t[1]&&(t[1]-=i,e<=t[0]&&(t[0]+=1,t[1]+=1)))})}recreatePhysicalRanges(t){const e=t.ranges,n=[],i=[];Object(c.a)(e,t=>{const e=[];if(t[1])for(let n=t[0];n<=t[1];n++)e.push(this.hot.toPhysicalRow(n));else e.push(this.hot.toPhysicalRow(t[0]));i.push(e)}),Object(c.a)(i,t=>{let e=[];Object(c.a)(t,(i,r)=>{0===r?e.push(i):t[r]!==t[r-1]+1&&(e.push(t[r-1]),n.push(e),e=[],e.push(i)),r===t.length-1&&(e.push(i),n.push(e))})}),t.ranges=n}shiftEndpointCoordinates(t,e){t.alterRowOffset&&0!==t.alterRowOffset?(t.destinationRow+=t.alterRowOffset||0,Object(c.a)(t.ranges,n=>{Object(c.a)(n,(i,r)=>{i>=e&&(n[r]+=t.alterRowOffset||0)})})):t.alterColumnOffset&&0!==t.alterColumnOffset&&(t.destinationColumn+=t.alterColumnOffset||0,t.sourceColumn+=t.alterColumnOffset||0)}resetAllEndpoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAllEndpoints(),e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.some(t=>{const e=t.alterRowOffset||0,n=t.alterColumnOffset||0;return t.destinationRow+e>=this.hot.countRows()||t.destinationColumn+n>=this.hot.countCols()})||(this.cellsToSetCache=[],Object(c.a)(t,t=>{this.resetEndpointValue(t,e)}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[])}refreshAllEndpoints(){this.cellsToSetCache=[],Object(c.a)(this.getAllEndpoints(),t=>{this.currentEndpoint=t,this.plugin.calculate(t),this.setEndpointValue(t,"init")}),this.currentEndpoint=null,this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}refreshChangedEndpoints(t){const e=[];this.cellsToSetCache=[],Object(c.a)(t,(t,n,i)=>{""+(t[2]||"")!==""+t[3]&&Object(c.a)(this.getAllEndpoints(),(t,r)=>{this.hot.propToCol(i[n][1])===t.sourceColumn&&-1===e.indexOf(r)&&e.push(r)})}),Object(c.a)(e,t=>{this.refreshEndpoint(this.getEndpoint(t))}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}refreshCellMetas(){this.endpoints.forEach(t=>{const e=this.hot.toVisualRow(t.destinationRow);if(null!==e){const n=this.hot.getCellMeta(e,t.destinationColumn);n.readOnly=t.readOnly,n.className="columnSummaryResult"}})}refreshEndpoint(t){this.currentEndpoint=t,this.plugin.calculate(t),this.setEndpointValue(t),this.currentEndpoint=null}resetEndpointValue(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=t.alterRowOffset||0,i=t.alterColumnOffset||0;this.cellsToSetCache.push([this.hot.toVisualRow(t.destinationRow+(e?n:0)),this.hot.toVisualColumn(t.destinationColumn+(e?i:0)),""])}setEndpointValue(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.hot.toVisualRow(t.destinationRow);if(t.destinationRow>=this.hot.countRows()||t.destinationColumn>=this.hot.countCols())return void this.throwOutOfBoundsWarning();const r=this.hot.toVisualRow(t.destinationRow);if(null!==r){const n=this.hot.getCellMeta(r,t.destinationColumn);"init"!==e&&n.readOnly===t.readOnly||(n.readOnly=t.readOnly,n.className="columnSummaryResult")}if((!0===t.roundFloat||Number.isInteger(t.roundFloat))&&!isNaN(t.result)){const e=t.roundFloat;let n=0;Number.isInteger(e)&&(n=Math.min(Math.max(0,e),100)),t.result=t.result.toFixed(n)}n?this.hot.setDataAtCell(i,t.destinationColumn,t.result,"ColumnSummary.set"):this.cellsToSetCache.push([i,t.destinationColumn,t.result]),t.alterRowOffset=void 0,t.alterColumnOffset=void 0}throwOutOfBoundsWarning(){Object(mn.b)("One of the Column Summary plugins' destination points you provided is beyond the table boundaries!")}},gi=n(10);function pi(t){return null===t||void 0===t||isNaN(t)}function mi(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function bi(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yi(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var wi=new WeakSet;class vi extends te{constructor(){super(...arguments),mi(this,wi),bi(this,"endpoints",null)}static get PLUGIN_KEY(){return"columnSummary"}static get PLUGIN_PRIORITY(){return 220}isEnabled(){return!!this.hot.getSettings().columnSummary}enablePlugin(){var t=this;this.enabled||(this.settings=this.hot.getSettings().columnSummary,this.endpoints=new fi(this,this.settings),this.addHook("afterInit",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return yi(wi,t,Ci).call(t,...n)})),this.addHook("afterChange",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return yi(wi,t,Oi).call(t,...n)})),this.addHook("afterUpdateSettings",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return yi(wi,t,Si).call(t,...n)})),this.addHook("beforeCreateRow",(t,e,n)=>this.endpoints.resetSetupBeforeStructureAlteration("insert_row",t,e,null,n)),this.addHook("beforeCreateCol",(t,e,n)=>this.endpoints.resetSetupBeforeStructureAlteration("insert_col",t,e,null,n)),this.addHook("beforeRemoveRow",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.endpoints.resetSetupBeforeStructureAlteration("remove_row",...n)})),this.addHook("beforeRemoveCol",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.endpoints.resetSetupBeforeStructureAlteration("remove_col",...n)})),this.addHook("afterCreateRow",(t,e,n)=>this.endpoints.resetSetupAfterStructureAlteration("insert_row",t,e,null,n)),this.addHook("afterCreateCol",(t,e,n)=>this.endpoints.resetSetupAfterStructureAlteration("insert_col",t,e,null,n)),this.addHook("afterRemoveRow",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.endpoints.resetSetupAfterStructureAlteration("remove_row",...n)})),this.addHook("afterRemoveCol",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.endpoints.resetSetupAfterStructureAlteration("remove_col",...n)})),this.addHook("afterRowMove",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return yi(wi,t,Ti).call(t,...n)})),super.enablePlugin())}disablePlugin(){this.endpoints=null,this.settings=null,this.currentEndpoint=null,super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.endpoints.initEndpoints(),super.updatePlugin()}calculate(t){switch(t.type.toLowerCase()){case"sum":t.result=this.calculateSum(t);break;case"min":case"max":t.result=this.calculateMinMax(t,t.type);break;case"count":t.result=this.countEntries(t);break;case"average":t.result=this.calculateAverage(t);break;case"custom":t.result=t.customFunction.call(this,t)}}calculateSum(t){let e=0;return Object(s.o)(t.ranges,n=>{e+=this.getPartialSum(n,t.sourceColumn)}),e}getPartialSum(t,e){let n=0,i=t[1]||t[0],r=null,o=0;do{if(r=this.getCellValue(i,e),r=pi(r)?null:r,null!==r){const t=((""+r).split(".")[1]||[]).length||1;t>o&&(o=t)}n+=r||0,i-=1}while(i>=t[0]);return Math.round(n*10**o)/10**o}calculateMinMax(t,e){let n=null;return Object(s.o)(t.ranges,i=>{const r=this.getPartialMinMax(i,t.sourceColumn,e);if(null===n&&null!==r&&(n=r),null!==r)switch(e){case"min":n=Math.min(n,r);break;case"max":n=Math.max(n,r)}}),null===n?"Not enough data":n}getPartialMinMax(t,e,n){let i,r=null,o=t[1]||t[0];do{if(i=this.getCellValue(o,e),i=pi(i)?null:i,null===r)r=i;else if(null!==i)switch(n){case"min":r=Math.min(r,i);break;case"max":r=Math.max(r,i)}o-=1}while(o>=t[0]);return r}countEmpty(t,e){let n,i=0,r=t[1]||t[0];do{n=this.getCellValue(r,e),n=pi(n)?null:n,null===n&&(i+=1),r-=1}while(r>=t[0]);return i}countEntries(t){let e=0;const n=t.ranges;return Object(s.o)(n,n=>{const i=void 0===n[1]?1:n[1]-n[0]+1,r=this.countEmpty(n,t.sourceColumn);e+=i,e-=r}),e}calculateAverage(t){return this.calculateSum(t)/this.countEntries(t)}getCellValue(t,e){const n=this.hot.toVisualRow(t),i=this.hot.toVisualColumn(e);let r=this.hot.getSourceDataAtCell(t,e),o="";if(null!==n&&null!==i&&(o=this.hot.getCellMeta(n,i).className||""),o.indexOf("columnSummaryResult")>-1)return null;if(this.endpoints.currentEndpoint.forceNumeric&&("string"===typeof r&&(r=r.replace(/,/,".")),r=parseFloat(r)),isNaN(r)&&!this.endpoints.currentEndpoint.suppressDataTypeErrors)throw new Error(gi.a`ColumnSummary plugin: cell at (${t}, ${e}) is not in a\x20
          numeric format. Cannot do the calculation.`);return r}}function Ci(){this.endpoints.initEndpoints()}function Si(t){void 0!==t.columns&&this.endpoints.refreshCellMetas()}function Oi(t,e){t&&"ColumnSummary.reset"!==e&&"ColumnSummary.set"!==e&&"loadData"!==e&&this.endpoints.refreshChangedEndpoints(t)}function Ti(t,e){this.endpoints.resetSetupBeforeStructureAlteration("move_row",t[0],t.length,t,this.pluginName),this.endpoints.resetSetupAfterStructureAlteration("move_row",e,t.length,t,this.pluginName)}var _i=n(18);function Ei(t,e,n){Ri(t,e),e.set(t,n)}function Ri(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Mi(t,e){return t.get(Ii(t,e))}function xi(t,e,n){return t.set(Ii(t,e),n),n}function Ii(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var ki=new WeakMap,Ai=new WeakMap,Ni=new WeakMap,ji=new WeakSet;class Hi{constructor(){var t,e;Ri(t=this,e=ji),e.add(t),Ei(this,ki,!0),Ei(this,Ai,null),Ei(this,Ni,new ResizeObserver(t=>Ii(ji,this,Di).call(this,t)))}setObservedElement(t){xi(Ai,this,t)}unobserve(){Mi(Ni,this).unobserve(Mi(Ai,this))}observe(){xi(ki,this,!0),Mi(Ni,this).observe(Mi(Ai,this))}destroy(){Mi(Ni,this).disconnect()}}function Di(t){!Mi(ki,this)&&Array.isArray(t)&&t.length?t.forEach(t=>{let{borderBoxSize:e}=t;const{inlineSize:n,blockSize:i}=e[0];this.runLocalHooks("resize",n,i)}):xi(ki,this,!1)}function Pi(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function Li(t,e){return t.get(Bi(t,e))}function Fi(t,e,n){return t.set(Bi(t,e),n),n}function Bi(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}Object(s.n)(Hi,_i.a);var Vi=new WeakMap,Ui=new WeakMap,Wi=new WeakMap,zi=new WeakMap,Yi=new WeakMap,Gi=new WeakMap,$i=new WeakMap;class Ki{static get CLASS_EDITOR_CONTAINER(){return"htCommentsContainer"}static get CLASS_EDITOR(){return"htComments"}static get CLASS_INPUT(){return"htCommentTextArea"}static get CLASS_CELL(){return"htCommentCell"}constructor(t,e){var n=this;Pi(this,Vi,void 0),Pi(this,Ui,!1),Pi(this,Wi,null),Pi(this,zi,void 0),Pi(this,Yi,void 0),Pi(this,Gi,!0),Pi(this,$i,new Hi),Fi(Vi,this,t),Fi(Ui,this,e),Fi(zi,this,this.createEditor()),Fi(Yi,this,Li(zi,this).style),Li($i,this).setObservedElement(this.getInputElement()),Li($i,this).addLocalHook("resize",(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.runLocalHooks("resize",...e)})),this.hide()}setPosition(t,e){Li(Yi,this).left=t+"px",Li(Yi,this).top=e+"px"}setSize(t,e){if(t&&e){const n=this.getInputElement();n.style.width=t+"px",n.style.height=e+"px"}}getSize(){return{width:Object(r.M)(this.getInputElement()),height:Object(r.L)(this.getInputElement())}}observeSize(){Li($i,this).observe()}resetSize(){const t=this.getInputElement();t.style.width="",t.style.height=""}setReadOnlyState(t){this.getInputElement().readOnly=t}show(){Li(Yi,this).display="block",Fi(Gi,this,!1)}hide(){Li($i,this).unobserve(),Li(Gi,this)||(Li(Yi,this).display="none"),Fi(Gi,this,!0)}isVisible(){return"block"===Li(Yi,this).display}setValue(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")||"";this.getInputElement().value=t}getValue(){return this.getInputElement().value}isFocused(){return Li(Vi,this).activeElement===this.getInputElement()}focus(){this.getInputElement().focus()}createEditor(){const t=Li(Vi,this).createElement("div"),e=Li(Vi,this).createElement("textarea");return t.style.display="none",Fi(Wi,this,Li(Vi,this).createElement("div")),Li(Wi,this).setAttribute("dir",Li(Ui,this)?"rtl":"ltr"),Object(r.a)(Li(Wi,this),Ki.CLASS_EDITOR_CONTAINER),Li(Vi,this).body.appendChild(Li(Wi,this)),Object(r.a)(t,Ki.CLASS_EDITOR),Object(r.a)(e,Ki.CLASS_INPUT),e.setAttribute("data-hot-input",!0),t.appendChild(e),Li(Wi,this).appendChild(t),t}getInputElement(){return Li(zi,this).querySelector("."+Ki.CLASS_INPUT)}destroy(){const t=Li(Wi,this)?Li(Wi,this).parentNode:null;Li(zi,this).parentNode.removeChild(Li(zi,this)),Fi(zi,this,null),Fi(Yi,this,null),Li($i,this).destroy(),t&&t.removeChild(Li(Wi,this))}}Object(s.n)(Ki,_i.a);var Xi=Ki;function qi(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Qi{constructor(t){qi(this,"wasLastActionShow",!0),qi(this,"showDebounced",null),qi(this,"hidingTimer",null),this.updateDelay(t)}hide(){this.wasLastActionShow=!1,this.hidingTimer=setTimeout(()=>{!1===this.wasLastActionShow&&this.runLocalHooks("hide")},250)}show(t){this.wasLastActionShow=!0,this.showDebounced(t)}cancelHiding(){this.wasLastActionShow=!0,clearTimeout(this.hidingTimer),this.hidingTimer=null}updateDelay(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;this.showDebounced=Object(kn.b)(t=>{this.wasLastActionShow&&this.runLocalHooks("show",t.from.row,t.from.col)},t)}destroy(){this.clearLocalHooks()}}Object(s.n)(Qi,_i.a);var Zi=Qi;const Ji="---------";function tr(t,e){const n={};return Object(c.a)(t,t=>{t.forAll((t,i)=>{t>=0&&i>=0&&(n[t]||(n[t]=[]),n[t][i]=e(t,i))})}),n}function er(t,e,n,i,r){Object(c.a)(t,t=>{t.forAll((t,o)=>{t>=0&&o>=0&&function(t,e,n,i,r,o){const s=r(t,e);let a=i;s.className&&(a="vertical"===n?function(t,e){return-1!==t.indexOf(e)?t:`${t.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ","")} ${e}`}(s.className,i):function(t,e){return-1!==t.indexOf(e)?t:`${t.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ","")} ${e}`}(s.className,i));o(t,e,"className",a)}(t,o,e,n,i,r)})})}function nr(t){return`<span class="selected">${String.fromCharCode(10003)}</span>${t}`}function ir(t,e){let n=!1;return Array.isArray(t)&&Object(c.a)(t,t=>(t.forAll((t,i)=>{if(t>=0&&i>=0&&e(t,i))return n=!0,!1}),n)),n}function rr(t,e){const n={top:0,left:0};if(e!==t.ownerDocument){const{frameElement:t}=e.defaultView,{top:i,left:r}=t.getBoundingClientRect();n.top=i,n.left=r}return n}function or(t,e){return ir(t.getSelectedRange(),function(t){return function(e,n){const i=this.getCellMeta(e,n).className;return i&&-1!==i.indexOf(t)}}(e).bind(t))}function sr(t,e,n){ar(t,e),e.set(t,n)}function ar(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function lr(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cr(t,e,n){return t.set(hr(t,e),n),n}function ur(t,e){return t.get(hr(t,e))}function hr(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}const dr="readOnly";var fr=new WeakMap,gr=new WeakMap,pr=new WeakMap,mr=new WeakMap,br=new WeakMap,yr=new WeakMap,wr=new WeakSet;class vr extends te{constructor(){var t,e;super(...arguments),ar(t=this,e=wr),e.add(t),lr(this,"range",{}),sr(this,fr,null),sr(this,gr,null),sr(this,pr,!1),sr(this,mr,!1),sr(this,br,null),sr(this,yr,"")}static get PLUGIN_KEY(){return"comments"}static get PLUGIN_PRIORITY(){return 60}isEnabled(){return!!this.hot.getSettings().comments}enablePlugin(){var t=this;this.enabled||(ur(fr,this)||(cr(fr,this,new Xi(this.hot.rootDocument,this.hot.isRtl())),ur(fr,this).addLocalHook("resize",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return hr(wr,t,Rr).call(t,...n)}))),ur(gr,this)||cr(gr,this,new Zi(this.getDisplayDelaySetting())),this.addHook("afterContextMenuDefaultOptions",t=>this.addToContextMenu(t)),this.addHook("afterRenderer",(t,e,n,i,r,o)=>hr(wr,this,Tr).call(this,t,o)),this.addHook("afterScroll",()=>hr(wr,this,xr).call(this)),this.addHook("afterBeginEditing",()=>this.hide()),this.addHook("afterDocumentKeyDown",t=>hr(wr,this,Mr).call(this,t)),ur(gr,this).addLocalHook("hide",()=>this.hide()),ur(gr,this).addLocalHook("show",(t,e)=>this.showAtCell(t,e)),this.registerShortcuts(),this.registerListeners(),super.enablePlugin())}updatePlugin(){ur(gr,this).updateDelay(this.getDisplayDelaySetting()),super.updatePlugin()}disablePlugin(){this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){const t=this.hot.getShortcutManager(),e=t.getContext("grid"),n=t.addContext("plugin:comments");e.addShortcut({keys:[["Control","Alt","M"]],callback:()=>{const e=this.hot.getSelectedRangeLast();cr(mr,this,!0),this.hot.scrollToFocusedCell(()=>{this.setRange(e),this.show(),this.focusEditor(),t.setActiveContextName("plugin:comments"),this.hot._registerTimeout(()=>{cr(mr,this,!1)})})},stopPropagation:!0,runOnlyIf:()=>{var t;return(null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight.isCell())&&!ur(fr,this).isVisible()},group:"comments"}),n.addShortcut({keys:[["Escape"]],callback:()=>{ur(fr,this).setValue(ur(yr,this)),this.hide(),t.setActiveContextName("grid")},runOnlyIf:()=>ur(fr,this).isVisible()&&ur(fr,this).isFocused(),group:"comments"}),n.addShortcut({keys:[["Control/Meta","Enter"]],callback:()=>{this.hide(),t.setActiveContextName("grid")},runOnlyIf:()=>ur(fr,this).isVisible()&&ur(fr,this).isFocused(),group:"comments"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup("comments")}registerListeners(){const{rootDocument:t}=this.hot,e=this.getEditorInputElement();this.eventManager.addEventListener(t,"mouseover",t=>hr(wr,this,Sr).call(this,t)),this.eventManager.addEventListener(t,"mousedown",t=>hr(wr,this,Cr).call(this,t)),this.eventManager.addEventListener(t,"mouseup",()=>hr(wr,this,Or).call(this)),this.eventManager.addEventListener(e,"focus",()=>hr(wr,this,Er).call(this)),this.eventManager.addEventListener(e,"blur",()=>hr(wr,this,_r).call(this))}setRange(t){this.range=t}clearRange(){this.range={}}targetIsCellWithComment(t){const e=Object(r.c)(t.target,"TD","TBODY");return!!(e&&Object(r.w)(e,"htCommentCell")&&Object(r.c)(e,[this.hot.rootElement]))}targetIsCommentTextArea(t){return this.getEditorInputElement()===t.target}setComment(t){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');const e=ur(fr,this).getValue();let n="";null!==t&&void 0!==t?n=t:null!==e&&void 0!==e&&(n=e);const i=this.range.from.row,r=this.range.from.col;this.updateCommentMeta(i,r,{value:n}),this.hot.render()}setCommentAtCell(t,e,n){this.setRange({from:this.hot._createCellCoords(t,e)}),this.setComment(n)}removeComment(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');this.hot.setCellMeta(this.range.from.row,this.range.from.col,"comment"),t&&this.hot.render(),this.hide()}removeCommentAtCell(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.setRange({from:this.hot._createCellCoords(t,e)}),this.removeComment(n)}getComment(){const t=this.range.from.row,e=this.range.from.col;return this.getCommentMeta(t,e,"value")}getCommentAtCell(t,e){return this.getCommentMeta(t,e,"value")}show(){var t;if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');const{from:{row:e,col:n}}=this.range;if(e<0||e>this.hot.countSourceRows()-1||n<0||n>this.hot.countSourceCols()-1)return!1;const i=this.hot.getCellMeta(this.range.from.row,this.range.from.col);return ur(gr,this).cancelHiding(),ur(fr,this).setValue(null!==(t=i.comment?i.comment.value:null)&&void 0!==t?t:""),ur(fr,this).show(),this.refreshEditor(!0),!0}showAtCell(t,e){return this.setRange({from:this.hot._createCellCoords(t,e)}),this.show()}hide(){ur(fr,this).hide()}refreshEditor(){var t,e;if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&(!this.range.from||!ur(fr,this).isVisible()))return;const{rowIndexMapper:n,columnIndexMapper:i}=this.hot,{row:o,col:s}=this.range.from;let a=n.getRenderableFromVisualIndex(o),l=i.getRenderableFromVisualIndex(s);const c=null===a;ur(fr,this).setPosition(0,0),null===a&&(a=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(o,-1))),null===l&&(l=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(s,-1)));const u=null===a,h=null===l;a=null!==(t=a)&&void 0!==t?t:0,l=null!==(e=l)&&void 0!==e?e:0;const{rootWindow:d,view:{_wt:f}}=this.hot,{wtTable:g}=f,p=f.getCell({row:a,col:l},!0),m=this.getCommentMeta(o,s,"style");m?ur(fr,this).setSize(m.width,m.height):ur(fr,this).resetSize();const b=h?0:g.getStretchedColumnWidth(l),y=c&&!u?Object(r.L)(p):0,{left:w,top:v,width:C,height:S}=p.getBoundingClientRect(),{width:O,height:T}=ur(fr,this).getSize(),{innerWidth:_,innerHeight:E}=this.hot.rootWindow,R=this.hot.rootDocument.documentElement;let M=w+d.scrollX+b,x=v+d.scrollY+y;this.hot.isRtl()&&(M-=O+b),this.hot.isLtr()&&w+C+O>_?M=w+d.scrollX-O-1:this.hot.isRtl()&&M<-(R.scrollWidth-R.clientWidth)&&(M=w+d.scrollX+b+1),v+T>E&&(x-=T-S+1),ur(fr,this).setPosition(M,x),ur(fr,this).setReadOnlyState(this.getCommentMeta(o,s,dr)),ur(fr,this).observeSize()}focusEditor(){ur(fr,this).focus()}updateCommentMeta(t,e,n){const i=this.hot.getCellMeta(t,e).comment;let r;i?(r=Object(s.c)(i),Object(s.d)(r,n)):r=n,this.hot.setCellMeta(t,e,"comment",r)}getCommentMeta(t,e,n){const i=this.hot.getCellMeta(t,e);if(i.comment)return i.comment[n]}addToContextMenu(t){var e;t.items.push({name:Ji},(e=this,{key:"commentsAddEdit",name(){var t;const n=null===(t=this.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return null!==n&&void 0!==n&&n.isCell()&&e.getCommentAtCell(n.row,n.col)?this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_EDIT_COMMENT):this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ADD_COMMENT)},callback(){const t=this.getSelectedRangeLast();e.setRange(t),e.show(),e.focusEditor()},disabled(){const t=this.getSelectedRangeLast();return!!(!t||t.highlight.isHeader()||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||0===this.countRenderedRows()||0===this.countRenderedCols())}}),function(t){return{key:"commentsRemove",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_REMOVE_COMMENT)},callback(){this.getSelectedRangeLast().forAll((e,n)=>{e>=0&&n>=0&&t.removeCommentAtCell(e,n,!1)}),this.render()},disabled(){const t=this.getSelectedRangeLast();return!!(!t||t.highlight.isHeader()||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||0===this.countRenderedRows()||0===this.countRenderedCols())}}}(this),function(t){return{key:"commentsReadOnly",name(){const e=this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_READ_ONLY_COMMENT);return ir(this.getSelectedRange(),(e,n)=>t.getCommentMeta(e,n,dr))?nr(e):e},callback(){this.getSelectedRangeLast().forAll((e,n)=>{if(e>=0&&n>=0){const i=!!t.getCommentMeta(e,n,dr);t.updateCommentMeta(e,n,{[dr]:!i})}})},disabled(){const e=this.getSelectedRangeLast();return!!(!e||e.highlight.isHeader()||!t.getCommentAtCell(e.highlight.row,e.highlight.col)||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||0===this.countRenderedRows()||0===this.countRenderedCols())}}}(this))}getDisplayDelaySetting(){const t=this.hot.getSettings().comments;if(Object(s.l)(t))return t.displayDelay}getEditorInputElement(){return ur(fr,this).getInputElement()}destroy(){var t,e;null===(t=ur(fr,this))||void 0===t||t.destroy(),null===(e=ur(gr,this))||void 0===e||e.destroy(),super.destroy()}}function Cr(t){if(this.hot.view&&this.hot.view._wt&&!ur(pr,this)&&!this.targetIsCommentTextArea(t)){const e=Object(r.c)(t.target,"TD","TBODY");let n=null;e&&(n=this.hot.getCoords(e)),(!e||this.range.from&&n&&(this.range.from.row!==n.row||this.range.from.col!==n.col))&&this.hide()}}function Sr(t){const{rootDocument:e}=this.hot;if(!(ur(pr,this)||ur(fr,this).isFocused()||Object(r.w)(t.target,"wtBorder")||ur(br,this)===t.target)&&ur(fr,this))if(cr(br,this,e.elementFromPoint(t.clientX,t.clientY)),this.targetIsCellWithComment(t)){const e=this.hot._createCellRange(this.hot.getCoords(t.target));ur(gr,this).show(e)}else Object(r.C)(t.target,e)&&!this.targetIsCommentTextArea(t)&&ur(gr,this).hide()}function Or(){cr(pr,this,!1)}function Tr(t,e){e.comment&&e.comment.value&&Object(r.a)(t,e.commentedCellClassName)}function _r(){cr(yr,this,""),this.hot.getShortcutManager().setActiveContextName("grid"),this.setComment()}function Er(){cr(yr,this,this.getComment()),this.hot.listen(),this.hot.getShortcutManager().setActiveContextName("plugin:comments")}function Rr(t,e){this.updateCommentMeta(this.range.from.row,this.range.from.col,{style:{width:t,height:e}})}function Mr(t){ur(fr,this).isVisible()&&Object(o.f)(t)}function xr(){ur(mr,this)||this.hide()}function Ir(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class kr{constructor(t){Ir(this,"hot",void 0),Ir(this,"commands",{}),Ir(this,"commonCallback",null),this.hot=t}registerCommand(t,e){this.commands[t]=e}setCommonCallback(t){this.commonCallback=t}execute(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=t.split(":"),o=r[0],a=2===r.length?r[1]:null;let l=this.commands[o];if(!l)throw new Error(`Menu command '${o}' not exists.`);if(a&&l.submenu&&(l=function(t,e){let n;return Object(c.a)(e,e=>{const i=e.key?e.key.split(":"):null;if(Array.isArray(i)&&i[1]===t)return n=e,!1}),n}(a,l.submenu.items)),!0===l.disabled)return;if("function"===typeof l.disabled&&!0===l.disabled.call(this.hot))return;if(Object(s.j)(l,"submenu"))return;const u=[];"function"===typeof l.callback&&u.push(l.callback),"function"===typeof this.commonCallback&&u.push(this.commonCallback),n.unshift(r.join(":")),Object(c.a)(u,t=>t.apply(this.hot,n))}}var Ar=n(38);const Nr=["row_above","row_below","col_left","col_right","clear_column","remove_row","remove_col","undo","redo","make_read_only","alignment",Ji,"no_items"],jr={[Ji]:function(){return{name:Ji}},no_items:function(){return{key:"no_items",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_NO_ITEMS)},disabled:!0,isCommand:!1}},row_above:function(){return{key:"row_above",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ROW_ABOVE)},callback(){const t=this.getSelectedRangeLast().getTopLeftCorner();this.alter("insert_row_above",t.row,1,"ContextMenu.rowAbove")},disabled(){const t=this.getSelectedRangeLast();if(!t)return!0;if(t.isSingleHeader()&&t.highlight.row<0)return!0;if(this.selection.isSelectedByCorner()){return 0===this.countRows()}return this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows},hidden(){return!this.getSettings().allowInsertRow}}},row_below:function(){return{key:"row_below",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ROW_BELOW)},callback(){const t=this.getSelectedRangeLast().getBottomRightCorner();this.alter("insert_row_below",t.row,1,"ContextMenu.rowBelow")},disabled(){const t=this.getSelectedRangeLast();return!t||(!!(t.isSingleHeader()&&t.highlight.row<0)||!this.selection.isSelectedByCorner()&&(this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows))},hidden(){return!this.getSettings().allowInsertRow}}},col_left:function(){return{key:"col_left",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_INSERT_LEFT)},callback(){const t=this.getSelectedRangeLast().getTopLeftCorner(),e=this.isRtl()?"insert_col_end":"insert_col_start";this.alter(e,t.col,1,"ContextMenu.columnLeft")},disabled(){if(!this.isColumnModificationAllowed())return!0;const t=this.getSelectedRangeLast();if(!t)return!0;if(t.isSingleHeader()&&t.highlight.col<0)return!0;if(this.selection.isSelectedByCorner()){return 0===this.countCols()}return this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols},hidden(){return!this.getSettings().allowInsertColumn}}},col_right:function(){return{key:"col_right",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_INSERT_RIGHT)},callback(){const t=this.getSelectedRangeLast().getTopRightCorner(),e=this.isRtl()?"insert_col_start":"insert_col_end";this.alter(e,t.col,1,"ContextMenu.columnRight")},disabled(){if(!this.isColumnModificationAllowed())return!0;const t=this.getSelectedRangeLast();return!t||(!!(t.isSingleHeader()&&t.highlight.col<0)||!this.selection.isSelectedByCorner()&&(this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols))},hidden(){return!this.getSettings().allowInsertColumn}}},clear_column:function(){return{key:"clear_column",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_CLEAR_COLUMN)},callback(t,e){const n=e[0].start.col,i=e[0].end.col;this.countRows()&&this.populateFromArray(0,n,[[null]],Math.max(e[0].start.row,e[0].end.row),i,"ContextMenu.clearColumn")},disabled(){const t=this.getSelectedRangeLast();return!t||(!!(t.isSingleHeader()&&t.highlight.col<0)||!this.selection.isSelectedByColumnHeader())}}},remove_row:function(){return{key:"remove_row",name(){const t=this.getSelected();let e=0;if(t)if(t.length>1)e=1;else{const[n,,i]=t[0];n-i!==0&&(e=1)}return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_REMOVE_ROW,e)},callback(){this.alter("remove_row",Object(Ar.f)(this),1,"ContextMenu.removeRow")},disabled(){const t=this.getSelectedRangeLast();if(!t)return!0;if(t.isSingleHeader()&&t.highlight.row<0)return!0;const e=this.countRows();return this.selection.isSelectedByCorner()?0===e:this.selection.isSelectedByColumnHeader()||0===e},hidden(){return!this.getSettings().allowRemoveRow}}},remove_col:function(){return{key:"remove_col",name(){const t=this.getSelected();let e=0;if(t)if(t.length>1)e=1;else{const[,n,,i]=t[0];n-i!==0&&(e=1)}return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_REMOVE_COLUMN,e)},callback(){this.alter("remove_col",Object(Ar.e)(this),null,"ContextMenu.removeColumn")},disabled(){if(!this.isColumnModificationAllowed())return!0;const t=this.getSelectedRangeLast();if(!t)return!0;if(t.isSingleHeader()&&t.highlight.col<0)return!0;const e=this.countCols();return this.selection.isSelectedByCorner()?0===e:this.selection.isSelectedByRowHeader()||0===e},hidden(){return!this.getSettings().allowRemoveColumn}}},undo:function(){return{key:"undo",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_UNDO)},callback(){this.undo()},hidden(){const t=this.getPlugin("undoRedo");return!t||!t.isEnabled()},disabled(){return!this.getPlugin("undoRedo").isUndoAvailable()}}},redo:function(){return{key:"redo",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_REDO)},callback(){this.redo()},hidden(){const t=this.getPlugin("undoRedo");return!t||!t.isEnabled()},disabled(){return!this.getPlugin("undoRedo").isRedoAvailable()}}},make_read_only:function(){return{key:"make_read_only",checkable:!0,ariaChecked(){return ir(this.getSelectedRange(),(t,e)=>this.getCellMeta(t,e).readOnly)},ariaLabel(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_READ_ONLY)},name(){let t=this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_READ_ONLY);return ir(this.getSelectedRange(),(t,e)=>this.getCellMeta(t,e).readOnly)&&(t=nr(t)),t},callback(){const t=this.getSelectedRange(),e=ir(t,(t,e)=>this.getCellMeta(t,e).readOnly);Object(c.a)(t,t=>{t.forAll((t,n)=>{t>=0&&n>=0&&this.setCellMeta(t,n,"readOnly",!e)})}),this.render()},disabled(){const t=this.getSelectedRangeLast();return!t||(!!t.isSingleHeader()||(!!this.selection.isSelectedByCorner()||(0===this.countRows()||0===this.countCols()||(!this.getSelectedRange()||0===this.getSelectedRange().length))))}}},alignment:function(){return{key:"alignment",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ALIGNMENT)},disabled(){if(0===this.countRows()||0===this.countCols())return!0;const t=this.getSelectedRangeLast();return!t||(!!t.isSingleHeader()||!(this.getSelectedRange()&&!this.selection.isSelectedByCorner()))},submenu:{items:[{key:"alignment:left",checkable:!0,ariaLabel(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ALIGNMENT_LEFT)},ariaChecked(){return or(this,"htLeft")},name(){let t=this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ALIGNMENT_LEFT);return or(this,"htLeft")&&(t=nr(t)),t},callback(){const t=this.getSelectedRange(),e=tr(t,(t,e)=>this.getCellMeta(t,e).className);this.runHooks("beforeCellAlignment",e,t,"horizontal","htLeft"),er(t,"horizontal","htLeft",(t,e)=>this.getCellMeta(t,e),(t,e,n,i)=>this.setCellMeta(t,e,n,i)),this.render()},disabled:!1},{key:"alignment:center",checkable:!0,ariaLabel(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ALIGNMENT_CENTER)},ariaChecked(){return or(this,"htCenter")},name(){let t=this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ALIGNMENT_CENTER);return or(this,"htCenter")&&(t=nr(t)),t},callback(){const t=this.getSelectedRange(),e=tr(t,(t,e)=>this.getCellMeta(t,e).className);this.runHooks("beforeCellAlignment",e,t,"horizontal","htCenter"),er(t,"horizontal","htCenter",(t,e)=>this.getCellMeta(t,e),(t,e,n,i)=>this.setCellMeta(t,e,n,i)),this.render()},disabled:!1},{key:"alignment:right",checkable:!0,ariaLabel(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ALIGNMENT_RIGHT)},ariaChecked(){return or(this,"htRight")},name(){let t=this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ALIGNMENT_RIGHT);return or(this,"htRight")&&(t=nr(t)),t},callback(){const t=this.getSelectedRange(),e=tr(t,(t,e)=>this.getCellMeta(t,e).className);this.runHooks("beforeCellAlignment",e,t,"horizontal","htRight"),er(t,"horizontal","htRight",(t,e)=>this.getCellMeta(t,e),(t,e,n,i)=>this.setCellMeta(t,e,n,i)),this.render()},disabled:!1},{key:"alignment:justify",checkable:!0,ariaLabel(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ALIGNMENT_JUSTIFY)},ariaChecked(){return or(this,"htJustify")},name(){let t=this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ALIGNMENT_JUSTIFY);return or(this,"htJustify")&&(t=nr(t)),t},callback(){const t=this.getSelectedRange(),e=tr(t,(t,e)=>this.getCellMeta(t,e).className);this.runHooks("beforeCellAlignment",e,t,"horizontal","htJustify"),er(t,"horizontal","htJustify",(t,e)=>this.getCellMeta(t,e),(t,e,n,i)=>this.setCellMeta(t,e,n,i)),this.render()},disabled:!1},{name:Ji},{key:"alignment:top",checkable:!0,ariaLabel(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ALIGNMENT_TOP)},ariaChecked(){return or(this,"htTop")},name(){let t=this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ALIGNMENT_TOP);return or(this,"htTop")&&(t=nr(t)),t},callback(){const t=this.getSelectedRange(),e=tr(t,(t,e)=>this.getCellMeta(t,e).className);this.runHooks("beforeCellAlignment",e,t,"vertical","htTop"),er(t,"vertical","htTop",(t,e)=>this.getCellMeta(t,e),(t,e,n,i)=>this.setCellMeta(t,e,n,i)),this.render()},disabled:!1},{key:"alignment:middle",checkable:!0,ariaLabel(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ALIGNMENT_MIDDLE)},ariaChecked(){return or(this,"htMiddle")},name(){let t=this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ALIGNMENT_MIDDLE);return or(this,"htMiddle")&&(t=nr(t)),t},callback(){const t=this.getSelectedRange(),e=tr(t,(t,e)=>this.getCellMeta(t,e).className);this.runHooks("beforeCellAlignment",e,t,"vertical","htMiddle"),er(t,"vertical","htMiddle",(t,e)=>this.getCellMeta(t,e),(t,e,n,i)=>this.setCellMeta(t,e,n,i)),this.render()},disabled:!1},{key:"alignment:bottom",checkable:!0,ariaLabel(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ALIGNMENT_BOTTOM)},ariaChecked(){return or(this,"htBottom")},name(){let t=this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_ALIGNMENT_BOTTOM);return or(this,"htBottom")&&(t=nr(t)),t},callback(){const t=this.getSelectedRange(),e=tr(t,(t,e)=>this.getCellMeta(t,e).className);this.runHooks("beforeCellAlignment",e,t,"vertical","htBottom"),er(t,"vertical","htBottom",(t,e)=>this.getCellMeta(t,e),(t,e,n,i)=>this.setCellMeta(t,e,n,i)),this.render()},disabled:!1}]}}}};function Hr(){const t={};return Object(s.o)(jr,(e,n)=>{t[n]=e()}),t}function Dr(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Pr{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Dr(this,"hot",void 0),Dr(this,"predefinedItems",Hr()),Dr(this,"defaultOrderPattern",void 0),this.hot=t,this.defaultOrderPattern=e}setPredefinedItems(t){const e={};this.defaultOrderPattern.length=0,Object(s.o)(t,(t,n)=>{let i="";t.name===Ji?(e[Ji]=t,i=Ji):isNaN(parseInt(n,10))?(t.key=void 0===t.key?n:t.key,e[n]=t,i=t.key):(e[t.key]=t,i=t.key),this.defaultOrderPattern.push(i)}),this.predefinedItems=e}getItems(){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=[];let r=t;r&&r.items?r=r.items:Array.isArray(r)||(r=e);Object(s.l)(r)?Object(s.o)(r,(t,e)=>{let r=n["string"===typeof t?t:e];r||(r=t),Object(s.l)(t)?Object(s.h)(r,t):"string"===typeof r&&(r={name:r}),void 0===r.key&&(r.key=e),i.push(r)}):Object(c.a)(r,(t,e)=>{let r=n[t];!r&&Nr.indexOf(t)>=0||(r||(r={name:t,key:""+e}),Object(s.l)(t)&&Object(s.h)(r,t),void 0===r.key&&(r.key=e),i.push(r))});return i}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,this.defaultOrderPattern,this.predefinedItems)}}function Lr(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Fr{constructor(t,e){Lr(this,"top",void 0),Lr(this,"topRelative",void 0),Lr(this,"left",void 0),Lr(this,"leftRelative",void 0),Lr(this,"scrollTop",void 0),Lr(this,"scrollLeft",void 0),Lr(this,"cellHeight",void 0),Lr(this,"cellWidth",void 0);const n=e.scrollY,i=e.scrollX;let r,o,s,a,l,c;this.rootWindow=e,this.type=this.getSourceType(t),"literal"===this.type?(r=parseInt(t.top,10),s=parseInt(t.left,10),l=t.height||0,c=t.width||0,o=r,a=s,r+=n,s+=i):"event"===this.type&&(r=parseInt(t.pageY,10),s=parseInt(t.pageX,10),l=t.target.clientHeight,c=t.target.clientWidth,o=r-n,a=s-i),this.top=r,this.topRelative=o,this.left=s,this.leftRelative=a,this.scrollTop=n,this.scrollLeft=i,this.cellHeight=l,this.cellWidth=c}getSourceType(t){let e="literal";return t instanceof Event&&(e="event"),e}fitsAbove(t){return this.topRelative>=t.offsetHeight}fitsBelow(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rootWindow.innerHeight;return this.topRelative+t.offsetHeight<=e}fitsOnRight(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rootWindow.innerWidth;return this.leftRelative+this.cellWidth+t.offsetWidth<=e}fitsOnLeft(t){return this.leftRelative>=t.offsetWidth}}function Br(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function Vr(t,e){return t.get(Wr(t,e))}function Ur(t,e,n){return t.set(Wr(t,e),n),n}function Wr(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var zr=new WeakMap,Yr=new WeakMap,Gr=new WeakMap,$r=new WeakMap,Kr=new WeakMap;class Xr{constructor(t){Br(this,zr,void 0),Br(this,Yr,void 0),Br(this,Gr,void 0),Br(this,$r,!1),Br(this,Kr,{above:0,below:0,left:0,right:0}),Ur($r,this,t)}setOffset(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Vr(Kr,this)[t]=e,this}setElement(t){return Ur(zr,this,t),this}setParentElement(t){return Ur(Yr,this,t),this}updatePosition(t){Ur(Gr,this,new Fr(t,Vr(zr,this).ownerDocument.defaultView)),Vr($r,this)?(Vr(Gr,this).fitsBelow(Vr(zr,this))?this.setPositionBelowCursor():Vr(Gr,this).fitsAbove(Vr(zr,this))?this.setPositionAboveCursor():this.setPositionBelowCursor(),this.updateHorizontalPosition()):(this.setPositionBelowCursor(),this.setPositionOnRightOfCursor())}updateHorizontalPosition(){"rtl"===Vr(zr,this).dir?Vr(Gr,this).fitsOnLeft(Vr(zr,this))?this.setPositionOnLeftOfCursor():this.setPositionOnRightOfCursor():Vr(Gr,this).fitsOnRight(Vr(zr,this))?this.setPositionOnRightOfCursor():this.setPositionOnLeftOfCursor()}setPositionAboveCursor(){let t=Vr(Kr,this).above+Vr(Gr,this).top-Vr(zr,this).offsetHeight;Vr(Yr,this)&&(t=Vr(Gr,this).top+Vr(Gr,this).cellHeight-Vr(zr,this).offsetHeight+3),Vr(zr,this).style.top=t+"px"}setPositionBelowCursor(){let t=Vr(Kr,this).below+Vr(Gr,this).top+1;Vr(Yr,this)&&(t=Vr(Gr,this).top-1),Vr(zr,this).style.top=t+"px"}setPositionOnRightOfCursor(){let t=Vr(Gr,this).left;if(Vr(Yr,this)){const e=Number.parseInt(getComputedStyle(Vr(Yr,this).querySelector(".htCore")).borderRightWidth,10);t+=Vr(Gr,this).cellWidth+e}else t+=Vr(Kr,this).right;Vr(zr,this).style.left=t+"px"}setPositionOnLeftOfCursor(){let t=Vr(Kr,this).left+Vr(Gr,this).left-Vr(zr,this).offsetWidth;if(Vr(Yr,this)){t-=Number.parseInt(getComputedStyle(Vr(Yr,this).querySelector(".htCore")).borderLeftWidth,10)}Vr(zr,this).style.left=t+"px"}}function qr(t){let{initialPage:e=-1,size:n=(()=>0),onItemSelect:i=(()=>{}),onClear:r=(()=>{})}=t;const o=new Set;let s=Object(bt.a)(e,-1,l()-1);function a(t,e){const n=l()-1;if(t<0&&(t=n),t>n&&(t=0),o.has(t))return-1;o.add(t);return!1===i(t,!1)&&(t=a(1===e?++t:--t,e)),t}function l(){return Math.max(n(),0)}return{setCurrentPage:function(t){t>-1&&t<l()&&!1!==i(t,!0)&&(s=t)},getCurrentPage:function(){return s},toFirstItem:function(){l()>0&&(o.clear(),s=a(0,1))},toLastItem:function(){l()>0&&(o.clear(),s=a(l()-1,-1))},toNextItem:function(){l()>0&&(o.clear(),s=a(++s,1))},toPreviousItem:function(){l()>0&&(o.clear(),s=a(--s,-1))},getSize:l,clear:function(){o.clear(),s=e,r()}}}function Qr(t){return Object(s.j)(t,"submenu")}function Zr(t){return new RegExp(Ji,"i").test(t.name)}function Jr(t,e){return!0===t.disabled||"function"===typeof t.disabled&&!0===t.disabled.call(e)}function to(t){return Object(s.j)(t,"disableSelection")}function eo(t,e){const n=t.slice(0);for(let i=0;i<n.length&&n[i].name===e;)n.shift();return n}function no(t,e){let n=t.slice(0);return n.reverse(),n=eo(n,e),n.reverse(),n}function io(t){const e=[];return Object(c.a)(t,(t,n)=>{n>0?e[e.length-1].name!==t.name&&e.push(t):e.push(t)}),e}function ro(t){return qr({size:()=>t.countRows(),onItemSelect(e,n){const i=t.getCell(e,0);if(!i||function(t){return Object(r.w)(t,"htSeparator")}(i)||function(t){return Object(r.w)(t,"htDisabled")}(i)||function(t){return Object(r.w)(t,"htSelectionDisabled")}(i))return!1;t.selectCell(e,0,...n?[e,0,!1,!1]:[])},onClear(){t.deselectCell()}})}function oo(t){const{hot:e,hotMenu:n}=t;return[{keys:[["Control/Meta","A"]],forwardToContext:e.getShortcutManager().getContext("grid"),callback:()=>t.close(!0)},{keys:[["Tab"],["Shift","Tab"]],callback:(n,i)=>{const r=e.getSettings(),o="function"===typeof r.tabMoves?r.tabMoves(n):r.tabMoves;i.includes("shift")?e.selection.transformStart(-o.row,-o.col):e.selection.transformStart(o.row,o.col),t.close(!0)}},{keys:[["Escape"]],callback:()=>t.close()},{keys:[["ArrowDown"]],callback:()=>t.getNavigator().toNextItem()},{keys:[["ArrowUp"]],callback:()=>t.getNavigator().toPreviousItem()},{keys:[["ArrowRight"]],callback:()=>{const e=n.getSelectedLast();if(e){const n=t.openSubMenu(e[0]);n&&n.getNavigator().toFirstItem()}}},{keys:[["ArrowLeft"]],callback:()=>{n.getSelectedLast()&&t.isSubMenu()&&(t.close(),t.isSubMenu()&&t.parentMenu.hotMenu.listen())}},{keys:[["Control/Meta","ArrowUp"],["Home"]],callback:()=>t.getNavigator().toFirstItem()},{keys:[["Control/Meta","ArrowDown"],["End"]],callback:()=>t.getNavigator().toLastItem()},{keys:[["Enter"],["Space"]],callback:e=>{const i=n.getSelectedLast();i&&(n.getSourceDataAtRow(i[0]).submenu?t.openSubMenu(i[0]).getNavigator().toFirstItem():(t.executeCommand(e),t.close(!0)))}},{keys:[["PageUp"]],callback:()=>{n.getSelectedLast()?n.selection.transformStart(-n.countVisibleRows(),0):t.getNavigator().toFirstItem()}},{keys:[["PageDown"]],callback:()=>{n.getSelectedLast()?n.selection.transformStart(n.countVisibleRows(),0):t.getNavigator().toLastItem()}}]}function so(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function ao(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lo(t,e,n){return t.set(uo(t,e),n),n}function co(t,e){return t.get(uo(t,e))}function uo(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var ho=new WeakMap,fo=new WeakMap,go=new WeakMap;class po{get tableBorderWidth(){return void 0===co(go,this)&&this.hotMenu&&lo(go,this,parseInt(Object(r.i)(this.hotMenu.view._wt.wtTable.TABLE).borderWidth,10)),co(go,this)}constructor(t,e){var n=this;ao(this,"hot",void 0),ao(this,"options",void 0),ao(this,"eventManager",new at.a(this)),ao(this,"container",void 0),ao(this,"positioner",void 0),ao(this,"hotMenu",null),ao(this,"hotSubMenus",{}),ao(this,"parentMenu",void 0),ao(this,"menuItems",null),ao(this,"origOutsideClickDeselects",null),so(this,ho,void 0),so(this,fo,void 0),so(this,go,void 0),this.hot=t,this.options=e||{parent:null,name:null,className:"",keepInViewport:!0,standalone:!1,minWidth:215,container:this.hot.rootDocument.documentElement},this.container=this.createContainer(this.options.name),this.positioner=new Xr(this.options.keepInViewport),this.parentMenu=this.options.parent||null,this.registerEvents(),this.isSubMenu()&&this.addLocalHook("afterSelectionChange",(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.parentMenu.runLocalHooks("afterSelectionChange",...e)}))}registerEvents(){let t=this.hot.rootWindow;for(;t;)this.eventManager.addEventListener(t.document,"mousedown",t=>this.onDocumentMouseDown(t)),this.eventManager.addEventListener(t.document,"touchstart",t=>this.onDocumentMouseDown(t)),this.eventManager.addEventListener(t.document,"contextmenu",t=>this.onDocumentContextMenu(t)),t=Object(r.m)(t)}setMenuItems(t){this.menuItems=t}getNavigator(){return co(ho,this)}getKeyboardShortcutsCtrl(){return co(fo,this)}getSelectedItem(){return this.hasSelectedItem()?this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]):null}hasSelectedItem(){return Array.isArray(this.hotMenu.getSelectedLast())}isSubMenu(){return null!==this.parentMenu}open(){this.runLocalHooks("beforeOpen"),this.container.removeAttribute("style"),this.container.style.display="block";const t=Object(kn.b)(t=>this.openSubMenu(t),300),e=this.options.minWidth||215;let n=!1,i=Object(c.b)(this.menuItems,t=>("no_items"===t.key&&(n=!0),function(t,e){return!t.hidden||!("function"===typeof t.hidden&&t.hidden.call(e))}(t,this.hot)));if(i.length<1&&!n)i.push(Hr().no_items);else if(0===i.length)return;i=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ji,n=t.slice(0);return n=eo(n,e),n=no(n,e),n=io(n),n}(i,Ji);let s=!1;const a={data:i,colHeaders:!1,autoColumnSize:!0,autoWrapRow:!1,modifyColWidth:t=>Object(u.b)(t)&&t<e?e:t,autoRowSize:!1,readOnly:!0,editor:!1,copyPaste:!1,hiddenRows:!0,maxCols:1,columns:[{data:"name",renderer:(l=this.hot,(t,e,n,i,o,s)=>{const a=t.getSourceDataAtRow(n),c=l.rootDocument.createElement("div"),u="function"===typeof s?s.call(l):s,h="function"===typeof a.ariaLabel?a.ariaLabel.call(l):a.ariaLabel,d="function"===typeof a.ariaChecked?a.ariaChecked.call(l):a.ariaChecked;if(Object(r.e)(e),Object(r.a)(c,"htItemWrapper"),l.getSettings().ariaTags){const t=!Jr(a,l)&&!to(a)&&!Zr(a);Object(r.U)(e,[...(f=a,!0===f.checkable?[Object(p.u)(),Object(p.p)(h),Object(p.d)(d)]:[Object(p.t)(),Object(p.p)(u)]),...t?[Object(p.L)(-1)]:[],...Jr(a,l)?[Object(p.j)()]:[],...Qr(a)?[Object(p.k)(!1)]:[]])}var f;e.className="",e.appendChild(c),Zr(a)?Object(r.a)(e,"htSeparator"):"function"===typeof a.renderer?(Object(r.a)(e,"htCustomMenuRenderer"),e.appendChild(a.renderer(t,c,n,i,o,u))):Object(r.f)(c,u),Jr(a,l)?Object(r.a)(e,"htDisabled"):to(a)?Object(r.a)(e,"htSelectionDisabled"):Qr(a)&&Object(r.a)(e,"htSubmenu")})}],renderAllRows:!0,fragmentSelection:!1,outsideClickDeselects:!1,disableVisualSelection:"area",layoutDirection:this.hot.isRtl()?"rtl":"ltr",ariaTags:!1,beforeOnCellMouseOver:(t,e)=>{co(ho,this).setCurrentPage(e.row)},afterOnCellMouseOver:(e,n)=>{this.isAllSubMenusClosed()?t(n.row):this.openSubMenu(n.row)},rowHeights:t=>i[t].name===Ji?1:void 0,afterOnCellContextMenu:t=>{t.preventDefault(),Object(f.k)()&&s&&this.hasSelectedItem()&&this.close(!0)},afterSelection:(t,e,n,i,r)=>{this.hotMenu.view.isMouseDown()&&(r.value=!0),this.runLocalHooks("afterSelectionChange",this.getSelectedItem())},beforeOnCellMouseUp:t=>{this.hasSelectedItem()&&(s=!this.isCommandPassive(this.getSelectedItem()),this.executeCommand(t))},afterOnCellMouseUp:t=>{Object(f.k)()&&Object(o.c)(t)||!s||!this.hasSelectedItem()||(Object(f.i)()||Object(f.g)()?this.hot._registerTimeout(()=>this.close(!0),325):this.close(!0))},afterUnlisten:()=>{!this.hasSelectedItem()&&this.isOpened()&&this.hotMenu.listen()}};var l;this.origOutsideClickDeselects=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1,this.hotMenu=new this.hot.constructor(this.container,a),this.hotMenu.addHook("afterInit",()=>this.onAfterInit()),this.hotMenu.init(),lo(ho,this,ro(this.hotMenu)),lo(fo,this,function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=[];function i(t,e){a(e).addShortcuts(t,{group:"menu"})}function r(t,e){const r=a(e);t.forEach(t=>{let{keys:e}=t;e.forEach(t=>r.removeShortcutsByKeys(t))}),n.push({shortcuts:t,contextName:e}),i(t,e)}function o(){return[...n]}function s(t){return t?"menu:"+t:"menu"}function a(e){var n;const i=t.hotMenu.getShortcutManager(),r=s(e);return null!==(n=i.getContext(r))&&void 0!==n?n:i.addContext(r)}function l(e){t.hotMenu.getShortcutManager().setActiveContextName(s(e))}return i(oo(t)),e.forEach(t=>{let{shortcuts:e,contextName:n}=t;r(e,n)}),{addCustomShortcuts:r,getCustomShortcuts:o,getContext:a,listen:l}}(this)),co(fo,this).listen(),this.focus(),this.isSubMenu()&&this.addLocalHook("afterOpen",()=>this.parentMenu.runLocalHooks("afterSubmenuOpen",this)),this.runLocalHooks("afterOpen",this)}close(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isOpened())if(t&&this.isSubMenu())this.parentMenu.close();else if(co(ho,this).clear(),this.closeAllSubMenus(),this.container.style.display="none",this.hotMenu.destroy(),this.hotMenu=null,this.hot.getSettings().outsideClickDeselects=this.origOutsideClickDeselects,this.runLocalHooks("afterClose"),this.isSubMenu()){if(this.hot.getSettings().ariaTags){const t=this.parentMenu.hotMenu.getSelectedLast();if(t){const e=this.parentMenu.hotMenu.getCell(t[0],0);Object(r.U)(e,[Object(p.k)(!1)])}}this.parentMenu.hotMenu.listen()}}openSubMenu(t){if(!this.hotMenu)return!1;const e=this.hotMenu.getCell(t,0);if(this.closeAllSubMenus(),!e||!function(t){return Object(r.w)(t,"htSubmenu")}(e))return!1;const n=this.hotMenu.getSourceDataAtRow(t),i=new po(this.hot,{parent:this,name:n.name,className:this.options.className,keepInViewport:!0,container:this.options.container});return i.setMenuItems(n.submenu.items),i.open(),i.setPosition(e.getBoundingClientRect()),this.hotSubMenus[n.key]=i,this.hot.getSettings().ariaTags&&Object(r.U)(e,[Object(p.k)(!0)]),i}closeSubMenu(t){const e=this.hotMenu.getSourceDataAtRow(t),n=this.hotSubMenus[e.key];if(n){n.destroy(),delete this.hotSubMenus[e.key];const i=this.hotMenu.getCell(t,0);this.hot.getSettings().ariaTags&&Object(r.U)(i,[Object(p.k)(!1)])}}closeAllSubMenus(){Object(c.a)(this.hotMenu.getData(),(t,e)=>this.closeSubMenu(e))}isAllSubMenusClosed(){return 0===Object.keys(this.hotSubMenus).length}focus(){this.isOpened()&&(this.hotMenu.rootElement.focus({preventScroll:!0}),this.getKeyboardShortcutsCtrl().listen(),this.hotMenu.listen())}destroy(){const t=this.container.parentNode;this.clearLocalHooks(),this.close(),this.parentMenu=null,this.eventManager.destroy(),t&&t.removeChild(this.container)}isOpened(){return null!==this.hotMenu}executeCommand(t){if(!this.isOpened()||!this.hasSelectedItem())return;const e=this.getSelectedItem();if(this.runLocalHooks("select",e,t),this.isCommandPassive(e))return;const n=this.hot.getSelectedRange(),i=n?function(t){return Object(c.c)(t,t=>({start:t.getTopStartCorner(),end:t.getBottomEndCorner()}))}(n):[];this.runLocalHooks("executeCommand",e.key,i,t),this.isSubMenu()&&this.parentMenu.runLocalHooks("executeCommand",e.key,i,t)}isCommandPassive(t){return!1===t.isCommand||Zr(t)||Jr(t,this.hot)||Qr(t)}setOffset(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.positioner.setOffset(t,e)}setPosition(t){this.isSubMenu()&&this.positioner.setParentElement(this.parentMenu.container),this.positioner.setElement(this.container).updatePosition(t)}updateMenuDimensions(){const{wtTable:t}=this.hotMenu.view._wt,e=this.hotMenu.getSettings().data,n=t.hider.style,i=t.holder.style,o=parseInt(n.width,10),s=Object(c.d)(e,(t,e,n)=>{const i=this.hotMenu.getCell(n,0)?Object(r.L)(this.hotMenu.getCell(n,0)):0;return t+(e.name===Ji?1:i)},0);i.width=o+3+"px",i.height=s+3+"px",n.height=i.height}createContainer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const e=this.options.container.ownerDocument;let n,i=t;return i&&(Object(kn.d)(i)&&(i=i.call(this.hot),i=null===i||Object(u.e)(i)?"":i.toString()),i=i.replace(/[^A-z0-9]/g,"_"),i=`${this.options.className}Sub_${i}`,n=e.querySelector(`.${this.options.className}.${i}`)),n||(n=e.createElement("div"),Object(r.a)(n,"htMenu "+this.options.className),i&&Object(r.a)(n,i),this.options.container.appendChild(n)),n}onAfterInit(){this.updateMenuDimensions(),this.hot.getSettings().ariaTags&&Object(r.U)(this.hotMenu.rootElement,[Object(p.s)(),Object(p.L)(-1)])}onDocumentMouseDown(t){this.isOpened()&&(this.options.standalone&&this.hotMenu&&!Object(r.C)(t.target,this.hotMenu.rootElement)?this.close(!0):!this.isAllSubMenusClosed()&&!this.isSubMenu()||Object(r.C)(t.target,".htMenu")||this.close(!0))}onDocumentContextMenu(t){this.isOpened()&&Object(r.w)(t.target,"htCore")&&Object(r.C)(t.target,this.hotMenu.rootElement)&&t.preventDefault()}}function mo(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function bo(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yo(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}Object(s.n)(po,_i.a);Z.a.getSingleton().register("afterContextMenuDefaultOptions"),Z.a.getSingleton().register("beforeContextMenuShow"),Z.a.getSingleton().register("afterContextMenuShow"),Z.a.getSingleton().register("afterContextMenuHide"),Z.a.getSingleton().register("afterContextMenuExecute");var wo=new WeakSet;class vo extends te{constructor(){super(...arguments),mo(this,wo),bo(this,"commandExecutor",new kr(this.hot)),bo(this,"itemsFactory",null),bo(this,"menu",null)}static get PLUGIN_KEY(){return"contextMenu"}static get PLUGIN_PRIORITY(){return 70}static get PLUGIN_DEPS(){return["plugin:AutoColumnSize"]}static get DEFAULT_ITEMS(){return["row_above","row_below",Ji,"col_left","col_right",Ji,"remove_row","remove_col",Ji,"undo","redo",Ji,"make_read_only",Ji,"alignment"]}isEnabled(){return!!this.hot.getSettings().contextMenu}enablePlugin(){var t=this;if(this.enabled)return;const e=this.hot.getSettings().contextMenu;"function"===typeof e.callback&&this.commandExecutor.setCommonCallback(e.callback),this.menu=new po(this.hot,{className:"htContextMenu",keepInViewport:!0,container:e.uiContainer||this.hot.rootDocument.body}),this.menu.addLocalHook("beforeOpen",()=>yo(wo,this,So).call(this)),this.menu.addLocalHook("afterOpen",()=>yo(wo,this,Oo).call(this)),this.menu.addLocalHook("afterClose",()=>yo(wo,this,To).call(this)),this.menu.addLocalHook("executeCommand",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.executeCommand.call(t,...n)})),this.addHook("afterOnCellContextMenu",t=>yo(wo,this,Co).call(this,t)),this.registerShortcuts(),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.close(),this.menu&&(this.menu.destroy(),this.menu=null),this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Control/Meta","Shift","Backslash"],["Shift","F10"]],callback:()=>{const{highlight:t}=this.hot.getSelectedRangeLast();this.hot.scrollToFocusedCell();const e=this.hot.getCell(t.row,t.col,!0).getBoundingClientRect(),n=rr(this.menu.container,this.hot.rootDocument);this.open({left:e.left+n.left,top:e.top+n.top-1+e.height},{left:e.width,above:-e.height}),this.menu.getNavigator().toFirstItem()},runOnlyIf:()=>{var t;const e=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return e&&this.hot.selection.isCellVisible(e)&&!this.menu.isOpened()},group:"contextMenu"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup("contextMenu")}open(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{above:0,below:0,left:0,right:0};if(null!==(e=this.menu)&&void 0!==e&&e.isOpened())return;this.prepareMenuItems(),this.menu.open();this.menu.tableBorderWidth>0||(n.below+=1,n.right+=1,n.above-=1,n.left-=1),Object(s.o)(n,(t,e)=>{this.menu.setOffset(e,t)}),this.menu.setPosition(t)}close(){var t;null===(t=this.menu)||void 0===t||t.close(),this.itemsFactory=null}executeCommand(t){null===this.itemsFactory&&this.prepareMenuItems();for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.commandExecutor.execute(t,...n)}prepareMenuItems(){this.itemsFactory=new Pr(this.hot,vo.DEFAULT_ITEMS);const t=this.hot.getSettings().contextMenu,e={items:this.itemsFactory.getItems(t)};this.hot.runHooks("afterContextMenuDefaultOptions",e),this.itemsFactory.setPredefinedItems(e.items);const n=this.itemsFactory.getItems(t);this.hot.runHooks("beforeContextMenuSetItems",n),this.menu.setMenuItems(n),Object(c.a)(n,t=>this.commandExecutor.registerCommand(t.key,t))}destroy(){this.close(),this.menu&&this.menu.destroy(),super.destroy()}}function Co(t){const e=this.hot.getSettings(),n=e.rowHeaders,i=e.colHeaders;const o=t.target;if(this.close(),Object(r.w)(o,"handsontableInput"))return;if(t.preventDefault(),t.stopPropagation(),!n&&!i&&!function(t){return"TD"===t.nodeName||"TD"===t.parentNode.nodeName}(o)&&(!Object(r.w)(o,"current")||!Object(r.w)(o,"wtBorder")))return;const s=rr(this.menu.container,this.hot.rootDocument);this.open({top:t.clientY+s.top,left:t.clientX+s.left})}function So(){this.hot.runHooks("beforeContextMenuShow",this)}function Oo(){this.hot.runHooks("afterContextMenuShow",this)}function To(){this.hot.listen(),this.hot.runHooks("afterContextMenuHide",this)}vo.SEPARATOR={name:Ji};var _o=n(239);class Eo{constructor(){this.data={}}setData(t,e){this.data[t]=e}getData(t){return this.data[t]||void 0}}class Ro{constructor(){this.clipboardData=new Eo}preventDefault(){}}function Mo(t,e,n){xo(t,e),e.set(t,n)}function xo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Io(t,e){return t.get(Ao(t,e))}function ko(t,e,n){return t.set(Ao(t,e),n),n}function Ao(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var No=new WeakMap,jo=new WeakMap,Ho=new WeakMap,Do=new WeakMap,Po=new WeakMap,Lo=new WeakMap,Fo=new WeakSet;class Bo{constructor(t){let{countRows:e,countColumns:n,rowsLimit:i,columnsLimit:r,countColumnHeaders:o}=t;var s,a;xo(s=this,a=Fo),a.add(s),Mo(this,No,void 0),Mo(this,jo,void 0),Mo(this,Ho,void 0),Mo(this,Do,void 0),Mo(this,Po,void 0),Mo(this,Lo,void 0),ko(jo,this,e),ko(Ho,this,n),ko(Do,this,i),ko(Po,this,r),ko(Lo,this,o)}setSelectedRange(t){ko(No,this,t)}getCellsRange(){if(0===Io(jo,this).call(this)||0===Io(Ho,this).call(this))return null;const{row:t,col:e}=Io(No,this).getTopStartCorner(),{row:n,col:i}=Io(No,this).getBottomEndCorner(),r=Ao(Fo,this,Uo).call(this,t,n),o=Ao(Fo,this,Vo).call(this,e,i);return{isRangeTrimmed:n!==r||i!==o,startRow:t,startCol:e,endRow:r,endCol:o}}getMostBottomColumnHeadersRange(){if(0===Io(Ho,this).call(this)||0===Io(Lo,this).call(this))return null;const{col:t}=Io(No,this).getTopStartCorner(),{col:e}=Io(No,this).getBottomEndCorner(),n=Ao(Fo,this,Vo).call(this,t,e);return{isRangeTrimmed:e!==n,startRow:-1,startCol:t,endRow:-1,endCol:n}}getAllColumnHeadersRange(){if(0===Io(Ho,this).call(this)||0===Io(Lo,this).call(this))return null;const{col:t}=Io(No,this).getTopStartCorner(),{col:e}=Io(No,this).getBottomEndCorner(),n=Ao(Fo,this,Vo).call(this,t,e);return{isRangeTrimmed:e!==n,startRow:-Io(Lo,this).call(this),startCol:t,endRow:-1,endCol:n}}}function Vo(t,e){return Math.min(e,Math.max(t+Io(Po,this).call(this)-1,t))}function Uo(t,e){return Math.min(e,Math.max(t+Io(Do,this).call(this)-1,t))}function Wo(t){const e=[],n=[];return Object(c.a)(t,t=>{const i=Math.min(t.startRow,t.endRow),r=Math.max(t.startRow,t.endRow);Object(bt.d)(i,r,t=>{-1===e.indexOf(t)&&e.push(t)});const o=Math.min(t.startCol,t.endCol),s=Math.max(t.startCol,t.endCol);Object(bt.d)(o,s,t=>{-1===n.indexOf(t)&&n.push(t)})}),{rows:e,columns:n}}var zo=n(49);function Yo(t,e,n){Go(t,e),e.set(t,n)}function Go(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $o(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ko(t,e){return t.get(qo(t,e))}function Xo(t,e,n){return t.set(qo(t,e),n),n}function qo(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}Z.a.getSingleton().register("afterCopyLimit"),Z.a.getSingleton().register("modifyCopyableRange"),Z.a.getSingleton().register("beforeCut"),Z.a.getSingleton().register("afterCut"),Z.a.getSingleton().register("beforePaste"),Z.a.getSingleton().register("afterPaste"),Z.a.getSingleton().register("beforeCopy"),Z.a.getSingleton().register("afterCopy");const Qo="copyPaste",Zo=["fragmentSelection"],Jo=['<meta name="generator" content="Handsontable"/>','<style type="text/css">td{white-space:normal}br{mso-data-placement:same-cell}</style>'].join("");var ts=new WeakMap,es=new WeakMap,ns=new WeakMap,is=new WeakMap,rs=new WeakMap,os=new WeakMap,ss=new WeakMap,as=new WeakMap,ls=new WeakSet;class cs extends te{constructor(){var t,e;super(...arguments),Go(t=this,e=ls),e.add(t),$o(this,"columnsLimit",1/0),$o(this,"rowsLimit",1/0),$o(this,"pasteMode","overwrite"),$o(this,"uiContainer",this.hot.rootDocument.body),Yo(this,ts,!1),Yo(this,es,!1),Yo(this,ns,!1),Yo(this,is,"cells-only"),Yo(this,rs,!1),Yo(this,os,!1),Yo(this,ss,new Bo({countRows:()=>this.hot.countRows(),countColumns:()=>this.hot.countCols(),rowsLimit:()=>this.rowsLimit,columnsLimit:()=>this.columnsLimit,countColumnHeaders:()=>this.hot.view.getColumnHeadersCount()})),Yo(this,as,!1),$o(this,"copyableRanges",[])}static get PLUGIN_KEY(){return Qo}static get SETTING_KEYS(){return[Qo,...Zo]}static get PLUGIN_PRIORITY(){return 80}isEnabled(){return!!this.hot.getSettings()[Qo]}enablePlugin(){var t=this;if(this.enabled)return;const{[Qo]:e}=this.hot.getSettings();var n,i;"object"===typeof e&&(this.pasteMode=null!==(n=e.pasteMode)&&void 0!==n?n:this.pasteMode,this.rowsLimit=isNaN(e.rowsLimit)?this.rowsLimit:e.rowsLimit,this.columnsLimit=isNaN(e.columnsLimit)?this.columnsLimit:e.columnsLimit,Xo(ts,this,!!e.copyColumnHeaders),Xo(es,this,!!e.copyColumnGroupHeaders),Xo(ns,this,!!e.copyColumnHeadersOnly),this.uiContainer=null!==(i=e.uiContainer)&&void 0!==i?i:this.uiContainer);this.addHook("afterContextMenuDefaultOptions",t=>qo(ls,this,gs).call(this,t)),this.addHook("afterSelection",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return qo(ls,t,ps).call(t,...n)})),this.addHook("afterSelectionEnd",()=>qo(ls,this,ms).call(this)),this.eventManager.addEventListener(this.hot.rootDocument,"copy",(function(){return t.onCopy(...arguments)})),this.eventManager.addEventListener(this.hot.rootDocument,"cut",(function(){return t.onCut(...arguments)})),this.eventManager.addEventListener(this.hot.rootDocument,"paste",(function(){return t.onPaste(...arguments)})),Object(f.j)()&&(this.eventManager.addEventListener(this.hot.rootDocument.body,"mouseenter",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return qo(ls,t,bs).call(t,...n)})),this.eventManager.addEventListener(this.hot.rootDocument.body,"mouseleave",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return qo(ls,t,ys).call(t,...n)})),this.addHook("afterSelection",()=>qo(ls,this,ws).call(this))),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){super.disablePlugin()}copy(){Xo(is,this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cells-only"),Xo(rs,this,!0),qo(ls,this,us).call(this,"copy")}copyCellsOnly(){this.copy("cells-only")}copyColumnHeadersOnly(){this.copy("column-headers-only")}copyWithAllColumnHeaders(){this.copy("with-column-group-headers")}copyWithColumnHeaders(){this.copy("with-column-headers")}cut(){Xo(os,this,!0),qo(ls,this,us).call(this,"cut")}getRangedCopyableData(t){return Object(_o.b)(this.getRangedData(t))}getRangedData(t){const e=[],{rows:n,columns:i}=Wo(t);return Object(c.a)(n,t=>{const n=[];Object(c.a)(i,e=>{t<0?n.push(this.hot.getColHeader(e,t)):n.push(this.hot.getCopyableData(t,e))}),e.push(n)}),e}paste(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(!t&&!e)return;const n=new Ro;t&&n.clipboardData.setData("text/plain",t),e&&n.clipboardData.setData("text/html",e),this.onPaste(n)}setCopyableText(){const t=this.hot.getSelectedRangeLast();if(!t)return;if(t.isSingleHeader())return void(this.copyableRanges=[]);Ko(ss,this).setSelectedRange(t);const e=new Map([["headers",null],["cells",null]]);"column-headers-only"===Ko(is,this)?e.set("headers",Ko(ss,this).getMostBottomColumnHeadersRange()):("with-column-headers"===Ko(is,this)?e.set("headers",Ko(ss,this).getMostBottomColumnHeadersRange()):"with-column-group-headers"===Ko(is,this)&&e.set("headers",Ko(ss,this).getAllColumnHeadersRange()),e.set("cells",Ko(ss,this).getCellsRange())),this.copyableRanges=Array.from(e.values()).filter(t=>null!==t).map(t=>{let{startRow:e,startCol:n,endRow:i,endCol:r}=t;return{startRow:e,startCol:n,endRow:i,endCol:r}}),this.copyableRanges=this.hot.runHooks("modifyCopyableRange",this.copyableRanges);const n=e.get("cells");if(null!==n&&n.isRangeTrimmed){const{startRow:t,startCol:e,endRow:i,endCol:r}=n;this.hot.runHooks("afterCopyLimit",i-t+1,r-e+1,this.rowsLimit,this.columnsLimit)}}isEditorOpened(){var t;return null===(t=this.hot.getActiveEditor())||void 0===t?void 0:t.isOpened()}populateValues(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.hot.getSelectedRangeLast();if(!t.length)return;const n=t.length,i=t[0].length,r=[],{row:o,col:s}=e.getTopStartCorner(),{row:a,col:l}=e.getBottomEndCorner();let c=o,u=s,h=o,d=s;for(;r.length<n||c<=a;){const{skipRowOnPaste:e,visualRow:a}=this.hot.getCellMeta(c,s);if(c=a+1,!0===e)continue;h=a,u=s;const f=[],g=r.length%n;for(;f.length<i||u<=l;){const{skipColumnOnPaste:e,visualCol:n}=this.hot.getCellMeta(o,u);if(u=n+1,!0===e)continue;d=n;const r=f.length%i;f.push(t[g][r])}r.push(f)}return Xo(as,this,!0),this.hot.populateFromArray(o,s,r,void 0,void 0,"CopyPaste.paste",this.pasteMode),[o,s,h,d]}onCopy(t){var e;const n=this.hot.getFocusManager().getRefocusElement(),i=null===(e=t.target)||void 0===e?void 0:e.hasAttribute("data-hot-input");if(!this.hot.isListening()&&!Ko(rs,this)||this.isEditorOpened()||t.target instanceof HTMLElement&&(i&&t.target!==n||!i&&t.target!==this.hot.rootDocument.body))return;t.preventDefault(),this.setCopyableText(),Xo(rs,this,!1);const r=this.getRangedData(this.copyableRanges),o=qo(ls,this,hs).call(this,this.copyableRanges);if(!!this.hot.runHooks("beforeCopy",r,this.copyableRanges,o)){const e=Object(_o.b)(r);if(t&&t.clipboardData){const n=Object(zo.a)(r,this.hot.rootDocument);t.clipboardData.setData("text/plain",e),t.clipboardData.setData("text/html",[Jo,n].join(""))}else"undefined"===typeof ClipboardEvent&&this.hot.rootWindow.clipboardData.setData("Text",e);this.hot.runHooks("afterCopy",r,this.copyableRanges,o)}Xo(is,this,"cells-only")}onCut(t){var e;const n=this.hot.getFocusManager().getRefocusElement(),i=null===(e=t.target)||void 0===e?void 0:e.hasAttribute("data-hot-input");if(!this.hot.isListening()&&!Ko(os,this)||this.isEditorOpened()||t.target instanceof HTMLElement&&(i&&t.target!==n||!i&&t.target!==this.hot.rootDocument.body))return;t.preventDefault(),this.setCopyableText(),Xo(os,this,!1);const r=this.getRangedData(this.copyableRanges);if(!!this.hot.runHooks("beforeCut",r,this.copyableRanges)){const e=Object(_o.b)(r);if(t&&t.clipboardData){const n=Object(zo.a)(r,this.hot.rootDocument);t.clipboardData.setData("text/plain",e),t.clipboardData.setData("text/html",[Jo,n].join(""))}else"undefined"===typeof ClipboardEvent&&this.hot.rootWindow.clipboardData.setData("Text",e);this.hot.emptySelectedCells("CopyPaste.cut"),this.hot.runHooks("afterCut",r,this.copyableRanges)}}onPaste(t){var e;const n=this.hot.getFocusManager().getRefocusElement(),i=null===(e=t.target)||void 0===e?void 0:e.hasAttribute("data-hot-input");if(!this.hot.isListening()||this.isEditorOpened()||!this.hot.getSelected()||t.target instanceof HTMLElement&&(i&&t.target!==n||!i&&t.target!==this.hot.rootDocument.body))return;let r;if(t.preventDefault(),t&&"undefined"!==typeof t.clipboardData){const e=Object(h.c)(t.clipboardData.getData("text/html"),{ADD_TAGS:["meta"],ADD_ATTR:["content"],FORCE_BODY:!0});if(e&&/(<table)|(<TABLE)/g.test(e)){r=Object(zo.b)(e,this.hot.rootDocument).data}else r=t.clipboardData.getData("text/plain")}else"undefined"===typeof ClipboardEvent&&"undefined"!==typeof this.hot.rootWindow.clipboardData&&(r=this.hot.rootWindow.clipboardData.getData("Text"));if("string"===typeof r&&(r=Object(_o.a)(r)),void 0===r||r&&0===r.length)return;if(!1===this.hot.runHooks("beforePaste",r,this.copyableRanges))return;const[o,s,a,l]=this.populateValues(r);this.hot.selectCell(o,s,Math.min(this.hot.countRows()-1,a),Math.min(this.hot.countCols()-1,l)),this.hot.runHooks("afterPaste",r,this.copyableRanges)}destroy(){super.destroy()}}function us(t){if(Object(f.j)()){const e=this.hot.getSelectedRangeLast();if(e){const{row:n,col:i}=e.highlight,o=this.hot.getCell(n,i,!0);o&&Object(r.T)(o,()=>{this.hot.rootDocument.execCommand(t)})}}else this.hot.rootDocument.execCommand(t)}function hs(t){const{rows:e}=Wo(t);let n=0;for(let i=0;i<e.length&&!(e[i]>=0);i++)n+=1;return{columnHeadersCount:n}}function ds(){if(this.hot.isListening()){const t=this.hot.getSelectedRangeLast();if(t){const{row:e,col:n}=t.highlight,i=this.hot.getCell(e,n,!0);i&&Object(r.I)(i)}}}function fs(){if(this.hot.isListening()){const t=this.hot.getSelectedRangeLast();if(t){const{row:e,col:n}=t.highlight,i=this.hot.getCell(e,n,!0);null!==i&&void 0!==i&&i.hasAttribute("contenteditable")&&Object(r.Q)(i)}}}function gs(t){var e;t.items.push({name:"---------"},(e=this,{key:"copy",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_COPY)},callback(){e.copyCellsOnly()},disabled(){if(0===this.countRows()||0===this.countCols())return!0;const t=this.getSelectedRangeLast();if(!t)return!0;if(t.isSingleHeader())return!0;const e=this.getSelected();return!e||e.length>1},hidden:!1})),Ko(ts,this)&&t.items.push(function(t){return{key:"copy_with_column_headers",name(){const t=this.getSelectedRangeLast(),e=t?Object(bt.a)(t.getWidth()-1,0,1):0;return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_HEADERS,e)},callback(){t.copyWithColumnHeaders()},disabled(){if(!this.hasColHeaders())return!0;const t=this.getSelectedRangeLast();if(!t)return!0;if(t.isSingleHeader())return!0;const e=this.getSelected();return!e||e.length>1},hidden:!1}}(this)),Ko(es,this)&&t.items.push(function(t){return{key:"copy_with_column_group_headers",name(){const t=this.getSelectedRangeLast(),e=t?Object(bt.a)(t.getWidth()-1,0,1):0;return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_GROUP_HEADERS,e)},callback(){t.copyWithAllColumnHeaders()},disabled(){if(!this.hasColHeaders()||!this.getSettings().nestedHeaders)return!0;const t=this.getSelectedRangeLast();if(!t)return!0;if(t.isSingleHeader())return!0;const e=this.getSelected();return!e||e.length>1},hidden:!1}}(this)),Ko(ns,this)&&t.items.push(function(t){return{key:"copy_column_headers_only",name(){const t=this.getSelectedRangeLast(),e=t?Object(bt.a)(t.getWidth()-1,0,1):0;return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_COPY_COLUMN_HEADERS_ONLY,e)},callback(){t.copyColumnHeadersOnly()},disabled(){if(!this.hasColHeaders())return!0;const t=this.getSelectedRangeLast();if(!t)return!0;if(t.isSingleHeader())return!0;const e=this.getSelected();return!e||e.length>1},hidden:!1}}(this)),t.items.push(function(t){return{key:"cut",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_CUT)},callback(){t.cut()},disabled(){if(0===this.countRows()||0===this.countCols())return!0;const t=this.getSelectedRangeLast();if(!t)return!0;if(t.isSingleHeader())return!0;const e=this.getSelected();return!e||e.length>1},hidden:!1}}(this))}function ps(t,e,n,i,r){Ko(as,this)&&(r.value=!0),Xo(as,this,!1)}function ms(){this.isEditorOpened()||this.hot.getSettings().fragmentSelection||this.setCopyableText()}function bs(){qo(ls,this,fs).call(this)}function ys(){qo(ls,this,ds).call(this)}function ws(){qo(ls,this,fs).call(this)}function vs(t,e){return`border_row${t}col${e}`}function Cs(t){var e,n;(Object(u.b)(t.start)||Object(u.b)(t.left))&&(t.start=null!==(e=t.start)&&void 0!==e?e:t.left);(Object(u.b)(t.end)||Object(u.b)(t.right))&&(t.end=null!==(n=t.end)&&void 0!==n?n:t.right);return delete t.left,delete t.right,t}function Ss(t){return Object(u.b)(t.start)&&(t.left=t.start),Object(u.b)(t.end)&&(t.right=t.end),t}function Os(t,e){return{id:vs(t,e),border:{width:1,color:"#000",cornerVisible:!1},row:t,col:e,top:{hide:!0},bottom:{hide:!0},start:{hide:!0},end:{hide:!0}}}function Ts(t,e){let n=!1;return Object(c.a)(t.getSelectedRange(),i=>{i.forAll((i,r)=>{if(i<0||r<0)return;const o=t.getCellMeta(i,r).borders;if(o){if(!e)return n=!0,!1;if(!Object(s.j)(o[e],"hide")||!1===o[e].hide)return n=!0,!1}})}),n}function _s(t){return`<span class="selected">${String.fromCharCode(10003)}</span>${t}`}const Es=new Map([["left","start"],["right","end"]]);function Rs(t){const e=t.hot.isRtl()?"start":"end";return{key:"borders:right",name(){let t=this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_BORDERS_RIGHT);return Ts(this,e)&&(t=_s(t)),t},callback(n,i){const r=Ts(this,e);t.prepareBorder(i,e,r)}}}function Ms(t){return{key:"borders:bottom",name(){let t=this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_BORDERS_BOTTOM);return Ts(this,"bottom")&&(t=_s(t)),t},callback(e,n){const i=Ts(this,"bottom");t.prepareBorder(n,"bottom",i)}}}function xs(t){const e=t.hot.isRtl()?"end":"start";return{key:"borders:left",name(){let t=this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_BORDERS_LEFT);return Ts(this,e)&&(t=_s(t)),t},callback(n,i){const r=Ts(this,e);t.prepareBorder(i,e,r)}}}function Is(t){return{key:"borders:no_borders",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_REMOVE_BORDERS)},callback(e,n){t.prepareBorder(n,"noBorders")},disabled(){return!Ts(this)}}}function ks(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function As(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ns(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var js=new WeakSet;class Hs extends te{constructor(){super(...arguments),ks(this,js),As(this,"savedBorders",[])}static get PLUGIN_KEY(){return"customBorders"}static get PLUGIN_PRIORITY(){return 90}isEnabled(){return!!this.hot.getSettings().customBorders}enablePlugin(){this.enabled||(this.addHook("afterContextMenuDefaultOptions",t=>Ns(js,this,Ds).call(this,t)),this.addHook("init",()=>Ns(js,this,Ps).call(this)),super.enablePlugin())}disablePlugin(){this.hideBorders(),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.changeBorderSettings(),super.updatePlugin()}setBorders(t,e){let n=["top","bottom","start","end"],i=null;e&&(this.checkSettingsCohesion([e]),n=Object.keys(e),i=Cs(e));const r=Object(Ar.c)(t),o=Object(Ar.d)(r,{createCellCoords:this.hot._createCellCoords.bind(this.hot),createCellRange:this.hot._createCellRange.bind(this.hot)});Object(c.a)(t,t=>{o(t).forAll((t,e)=>{Object(c.a)(n,n=>{this.prepareBorderFromCustomAdded(t,e,i,function(t){var e;return null!==(e=Es.get(t))&&void 0!==e?e:t}(n))})})}),this.hot.view.render()}getBorders(t){if(!Array.isArray(t))return this.savedBorders;const e=Object(Ar.c)(t),n=Object(Ar.d)(e,{createCellCoords:this.hot._createCellCoords.bind(this.hot),createCellRange:this.hot._createCellRange.bind(this.hot)}),i=[];return Object(c.a)(t,t=>{n(t).forAll((t,e)=>{Object(c.a)(this.savedBorders,n=>{n.row===t&&n.col===e&&i.push(Ss(n))})})}),i}clearBorders(t){t?this.setBorders(t):(Object(c.a)(this.savedBorders,t=>{this.clearBordersFromSelectionSettings(t.id),this.clearNullCellRange(),this.hot.removeCellMeta(t.row,t.col,"borders")}),this.savedBorders.length=0)}insertBorderIntoSettings(t,e){this.checkSavedBorders(t)||this.savedBorders.push(t);const n=this.hot._createCellRange(this.hot._createCellCoords(t.row,t.col));this.checkCustomSelections(t,n,e)||this.hot.selection.highlight.addCustomSelection({border:t,visualCellRange:n})}prepareBorderFromCustomAdded(t,e,n,i){const r=this.hot.countRows(),o=this.hot.countCols();if(t>=r||e>=o)return;let a=Os(t,e);var l,h;n&&(l=a,h=n,Object(s.j)(h,"border")&&h.border&&(l.border=h.border),Object(s.j)(h,"top")&&Object(u.b)(h.top)&&(h.top?(Object(s.l)(h.top)||(h.top={width:1,color:"#000"}),l.top=h.top):(h.top={hide:!0},l.top=h.top)),Object(s.j)(h,"bottom")&&Object(u.b)(h.bottom)&&(h.bottom?(Object(s.l)(h.bottom)||(h.bottom={width:1,color:"#000"}),l.bottom=h.bottom):(h.bottom={hide:!0},l.bottom=h.bottom)),Object(s.j)(h,"start")&&Object(u.b)(h.start)&&(h.start?(Object(s.l)(h.start)||(h.start={width:1,color:"#000"}),l.start=h.start):(h.start={hide:!0},l.start=h.start)),Object(s.j)(h,"end")&&Object(u.b)(h.end)&&(h.end?(Object(s.l)(h.end)||(h.end={width:1,color:"#000"}),l.end=h.end):(h.end={hide:!0},l.end=h.end)),a=l,Object(c.a)(this.hot.selection.highlight.customSelections,t=>{if(a.id===t.settings.id)return Object.assign(t.settings,n),a.id=t.settings.id,a.top=t.settings.top,a.bottom=t.settings.bottom,a.start=t.settings.start,a.end=t.settings.end,!1})),this.hot.setCellMeta(t,e,"borders",Ss(a)),this.insertBorderIntoSettings(a,i)}prepareBorderFromCustomAddedRange(t,e){const n=Math.min(t.to.row,this.hot.countRows()-1),i=Math.min(t.to.col,this.hot.countCols()-1);Object(bt.d)(t.from.row,n,n=>{Object(bt.d)(t.from.col,i,i=>{const r=Os(n,i);let o=0;n===t.from.row&&Object(s.j)(e,"top")&&(o+=1,r.top=e.top),n===t.to.row&&Object(s.j)(e,"bottom")&&(o+=1,r.bottom=e.bottom),i===t.from.col&&Object(s.j)(e,"start")&&(o+=1,r.start=e.start),i===t.to.col&&Object(s.j)(e,"end")&&(o+=1,r.end=e.end),o>0&&(this.hot.setCellMeta(n,i,"borders",Ss(r)),this.insertBorderIntoSettings(r))})})}removeAllBorders(t,e){const n=vs(t,e);this.spliceBorder(n),this.clearBordersFromSelectionSettings(n),this.clearNullCellRange(),this.hot.removeCellMeta(t,e,"borders")}setBorder(t,e,n,i){let r=this.hot.getCellMeta(t,e).borders;if(r=r&&void 0!==r.border?Cs(r):Os(t,e),i){r[n]={hide:!0};if(4===this.countHide(r))this.removeAllBorders(t,e);else{this.checkCustomSelectionsFromContextMenu(r,n,i)||this.insertBorderIntoSettings(r),this.hot.setCellMeta(t,e,"borders",Ss(r))}}else{r[n]={width:1,color:"#000"};this.checkCustomSelectionsFromContextMenu(r,n,i)||this.insertBorderIntoSettings(r),this.hot.setCellMeta(t,e,"borders",Ss(r))}}prepareBorder(t,e,n){Object(c.a)(t,t=>{let{start:i,end:r}=t;if(i.row===r.row&&i.col===r.col)"noBorders"===e?this.removeAllBorders(i.row,i.col):this.setBorder(i.row,i.col,e,n);else switch(e){case"noBorders":Object(bt.d)(i.col,r.col,t=>{Object(bt.d)(i.row,r.row,e=>{this.removeAllBorders(e,t)})});break;case"top":Object(bt.d)(i.col,r.col,t=>{this.setBorder(i.row,t,e,n)});break;case"bottom":Object(bt.d)(i.col,r.col,t=>{this.setBorder(r.row,t,e,n)});break;case"start":Object(bt.d)(i.row,r.row,t=>{this.setBorder(t,i.col,e,n)});break;case"end":Object(bt.d)(i.row,r.row,t=>{this.setBorder(t,r.col,e,n)})}})}createCustomBorders(t){Object(c.a)(t,t=>{const e=Cs(t);t.range?this.prepareBorderFromCustomAddedRange(t.range,e):this.prepareBorderFromCustomAdded(t.row,t.col,e)})}countHide(t){const{top:e,bottom:n,start:i,end:r}=t,o=[e,n,i,r];return Object(c.d)(o,(t,e)=>{let n=t;return e&&e.hide&&(n+=1),n},0)}clearBordersFromSelectionSettings(t){const e=Object(c.c)(this.hot.selection.highlight.customSelections,t=>t.settings.id).indexOf(t);e>-1&&this.hot.selection.highlight.customSelections[e].clear()}clearNullCellRange(){Object(c.a)(this.hot.selection.highlight.customSelections,(t,e)=>{if(null===t.cellRange)return this.hot.selection.highlight.customSelections[e].destroy(),this.hot.selection.highlight.customSelections.splice(e,1),!1})}hideBorders(){Object(c.a)(this.savedBorders,t=>{this.clearBordersFromSelectionSettings(t.id),this.clearNullCellRange()})}spliceBorder(t){const e=Object(c.c)(this.savedBorders,t=>t.id).indexOf(t);e>-1&&this.savedBorders.splice(e,1)}checkSavedBorders(t){let e=!1;return 4===this.countHide(t)?(this.spliceBorder(t.id),e=!0):Object(c.a)(this.savedBorders,(n,i)=>{if(t.id===n.id)return this.savedBorders[i]=t,e=!0,!1}),e}checkCustomSelectionsFromContextMenu(t,e,n){let i=!1;return Object(c.a)(this.hot.selection.highlight.customSelections,r=>{if(t.id===r.settings.id){const t=this.hot.view._wt.selectionManager.getBorderInstances(r);return Object(c.a)(t,t=>{t.toggleHiddenClass(e,n)}),i=!0,!1}}),i}checkCustomSelections(t,e,n){const i=this.countHide(t);let r=!1;return 4===i?(this.removeAllBorders(t.row,t.col),r=!0):Object(c.a)(this.hot.selection.highlight.customSelections,i=>{if(t.id===i.settings.id){if(i.visualCellRange=e,i.commit(),n){const e=this.hot.view._wt.selectionManager.getBorderInstances(i);Object(c.a)(e,e=>{e.changeBorderStyle(n,t)})}return r=!0,!1}}),r}changeBorderSettings(){const t=this.hot.getSettings().customBorders;if(Array.isArray(t)){const e=Object(s.c)(t);this.checkSettingsCohesion(e),e.length||(this.savedBorders=e),this.createCustomBorders(e)}else void 0!==t&&this.createCustomBorders(this.savedBorders)}checkSettingsCohesion(t){const e=t.some(t=>Object(u.b)(t.left)||Object(u.b)(t.right));const n=function(t){return t.some(t=>Object(u.b)(t.start)||Object(u.b)(t.end))}(t);if(e&&n)throw new Error('The "left"/"right" and "start"/"end" options should not be used together. Please use only the option "start"/"end".');if(this.hot.isRtl()&&e)throw new Error('The "left"/"right" properties are not supported for RTL. Please use option "start"/"end".')}destroy(){super.destroy()}}function Ds(t){var e;this.hot.getSettings().customBorders&&t.items.push({name:"---------"},{key:"borders",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_BORDERS)},disabled(){const t=this.getSelectedRangeLast();return!t||(!!t.isSingleHeader()||this.selection.isSelectedByCorner())},submenu:{items:[(e=this,{key:"borders:top",name(){let t=this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_BORDERS_TOP);return Ts(this,"top")&&(t=_s(t)),t},callback(t,n){const i=Ts(this,"top");e.prepareBorder(n,"top",i)}}),Rs(this),Ms(this),xs(this),Is(this)]}})}function Ps(){this.changeBorderSettings()}function Ls(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function Fs(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bs(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Vs=new WeakSet;class Us extends te{constructor(){super(...arguments),Ls(this,Vs),Fs(this,"boundaries",null),Fs(this,"callback",null),Fs(this,"listening",!1)}static get PLUGIN_KEY(){return"dragToScroll"}static get PLUGIN_PRIORITY(){return 100}isEnabled(){return!!this.hot.getSettings().dragToScroll}enablePlugin(){this.enabled||(this.addHook("afterOnCellMouseDown",t=>Bs(Vs,this,Ws).call(this,t)),this.addHook("afterOnCellCornerMouseDown",t=>Bs(Vs,this,Ws).call(this,t)),this.registerEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.unregisterEvents(),super.disablePlugin()}setBoundaries(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:0,right:this.hot.rootWindow.innerWidth,top:0,bottom:this.hot.rootWindow.innerHeight};this.boundaries=t}setCallback(t){this.callback=t}check(t,e){let n=0,i=0;e<this.boundaries.top?i=e-this.boundaries.top:e>this.boundaries.bottom&&(i=e-this.boundaries.bottom),t<this.boundaries.left?n=t-this.boundaries.left:t>this.boundaries.right&&(n=t-this.boundaries.right),this.callback(n,i)}listen(){this.listening=!0}unlisten(){this.listening=!1}isListening(){return this.listening}registerEvents(){const{rootWindow:t}=this.hot;let e=t;for(;e;)this.eventManager.addEventListener(e.document,"contextmenu",()=>this.unlisten()),this.eventManager.addEventListener(e.document,"mouseup",()=>this.unlisten()),this.eventManager.addEventListener(e.document,"mousemove",t=>this.onMouseMove(t)),e=Object(r.m)(e)}unregisterEvents(){this.eventManager.clear()}onMouseMove(t){this.isListening()&&this.check(t.clientX,t.clientY)}destroy(){super.destroy()}}function Ws(t){if(Object(o.c)(t))return;const e=this.hot.view._wt.wtOverlays.topOverlay.mainTableScrollableElement;this.setBoundaries(e!==this.hot.rootWindow?e.getBoundingClientRect():void 0),this.setCallback((t,n)=>{var i,r;const o=null!==(i=e.scrollLeft)&&void 0!==i?i:e.scrollX,s=null!==(r=e.scrollTop)&&void 0!==r?r:e.scrollY;e.scroll(o+50*Math.sign(t),s+20*Math.sign(n))}),this.listen()}function zs(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ys(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gs(t,e,n){return t.set($s(t,e),n),n}function $s(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}Z.a.getSingleton().register("afterDropdownMenuDefaultOptions"),Z.a.getSingleton().register("beforeDropdownMenuShow"),Z.a.getSingleton().register("afterDropdownMenuShow"),Z.a.getSingleton().register("afterDropdownMenuHide"),Z.a.getSingleton().register("afterDropdownMenuExecute");var Ks=new WeakMap,Xs=new WeakSet;class qs extends te{static get PLUGIN_KEY(){return"dropdownMenu"}static get PLUGIN_PRIORITY(){return 230}static get PLUGIN_DEPS(){return["plugin:AutoColumnSize"]}static get DEFAULT_ITEMS(){return["col_left","col_right",Ji,"remove_col",Ji,"clear_column",Ji,"make_read_only",Ji,"alignment"]}constructor(t){var e,n;super(t),zs(e=this,n=Xs),n.add(e),Ys(this,"commandExecutor",new kr(this.hot)),Ys(this,"itemsFactory",null),Ys(this,"menu",null),function(t,e,n){zs(t,e),e.set(t,n)}(this,Ks,!1),this.hot.addHook("afterGetColHeader",(t,e)=>$s(Xs,this,Js).call(this,t,e))}isEnabled(){return this.hot.getSettings().dropdownMenu}enablePlugin(){var t=this;if(this.enabled)return;this.itemsFactory=new Pr(this.hot,qs.DEFAULT_ITEMS),this.addHook("beforeOnCellMouseDown",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return $s(Xs,t,oa).call(t,...n)})),this.addHook("beforeViewportScrollHorizontally",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return $s(Xs,t,ra).call(t,...n)}));const e=this.hot.getSettings().dropdownMenu,n={items:this.itemsFactory.getItems(e)};this.registerEvents(),"function"===typeof e.callback&&this.commandExecutor.setCommonCallback(e.callback),this.registerShortcuts(),super.enablePlugin(),this.callOnPluginsReady(()=>{this.hot.runHooks("afterDropdownMenuDefaultOptions",n),this.itemsFactory.setPredefinedItems(n.items);const i=this.itemsFactory.getItems(e);this.menu&&this.menu.destroy(),this.menu=new po(this.hot,{className:"htDropdownMenu",keepInViewport:!0,container:e.uiContainer||this.hot.rootDocument.body}),this.hot.runHooks("beforeDropdownMenuSetItems",i),this.menu.setMenuItems(i),this.menu.addLocalHook("beforeOpen",()=>$s(Xs,this,ta).call(this)),this.menu.addLocalHook("afterOpen",()=>$s(Xs,this,ea).call(this)),this.menu.addLocalHook("afterSubmenuOpen",t=>$s(Xs,this,na).call(this,t)),this.menu.addLocalHook("afterClose",()=>$s(Xs,this,ia).call(this)),this.menu.addLocalHook("executeCommand",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.executeCommand.call(t,...n)})),Object(c.a)(i,t=>this.commandExecutor.registerCommand(t.key,t))})}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.close(),this.menu&&this.menu.destroy(),this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){const t=()=>{const{highlight:t}=this.hot.getSelectedRangeLast();if((t.isHeader()&&-1===t.row||t.isCell())&&t.col>=0){this.hot.selectColumns(t.col,t.col,-1);const{from:e}=this.hot.getSelectedRangeLast(),n=rr(this.menu.container,this.hot.rootDocument),i=this.hot.getCell(-1,e.col,!0).querySelector(".changeType"),r=i.getBoundingClientRect();this.open({left:r.left+n.left,top:r.top+i.offsetHeight+n.top},{left:r.width,right:0,above:0,below:3}),this.menu.getNavigator().toFirstItem()}};this.hot.getShortcutManager().getContext("grid").addShortcuts([{keys:[["Shift","Alt","ArrowDown"],["Control/Meta","Enter"]],callback:t,runOnlyIf:()=>{var t;const e=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return e&&this.hot.selection.isCellVisible(e)&&e.isHeader()&&!this.menu.isOpened()},captureCtrl:!0,group:"dropdownMenu"},{keys:[["Shift","Alt","ArrowDown"]],callback:t,runOnlyIf:()=>{var t;const e=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return e&&this.hot.selection.isCellVisible(e)&&e.isCell()&&!this.menu.isOpened()},group:"dropdownMenu"}])}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup("dropdownMenu")}registerEvents(){this.eventManager.addEventListener(this.hot.rootElement,"click",t=>$s(Xs,this,Zs).call(this,t))}open(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{above:0,below:0,left:0,right:0};null!==(e=this.menu)&&void 0!==e&&e.isOpened()||(this.menu.open(),Object(s.o)(n,(t,e)=>{this.menu.setOffset(e,t)}),this.menu.setPosition(t))}close(){var t;null===(t=this.menu)||void 0===t||t.close()}executeCommand(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.commandExecutor.execute(t,...n)}setListening(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.menu.isOpened()&&(t?this.menu.hotMenu.listen():this.menu.hotMenu.unlisten())}destroy(){this.close(),this.menu&&this.menu.destroy(),super.destroy()}}function Qs(t){t.getKeyboardShortcutsCtrl().addCustomShortcuts([{keys:[["Control/Meta","A"]],callback:()=>!1}])}function Zs(t){if(Object(r.w)(t.target,"changeType")){const e=rr(this.menu.container,this.hot.rootDocument),n=t.target.getBoundingClientRect();t.stopPropagation(),Gs(Ks,this,!1),this.open({left:n.left+e.left,top:n.top+t.target.offsetHeight+e.top},{left:n.width,right:0,above:0,below:3})}}function Js(t,e){const n=e.parentNode;if(!n)return;const i=n.parentNode.childNodes,o=Array.prototype.indexOf.call(i,n);if(t<0||o!==i.length-1)return;const s=e.querySelector(".changeType");if(this.enabled&&s)return;if(!this.enabled)return void(s&&s.parentNode.removeChild(s));const a=this.hot.rootDocument.createElement("button");a.className="changeType",a.type="button",a.tabIndex=-1,this.hot.getSettings().ariaTags&&(Object(r.U)(a,[Object(p.n)(),Object(p.p)(" ")]),Object(r.U)(e,[Object(p.m)("menu")])),a.onclick=function(){return!1},e.firstChild.insertBefore(a,e.firstChild.firstChild)}function ta(){this.hot.runHooks("beforeDropdownMenuShow",this)}function ea(){this.hot.runHooks("afterDropdownMenuShow",this),$s(Xs,this,Qs).call(this,this.menu)}function na(t){$s(Xs,this,Qs).call(this,t)}function ia(){this.hot.listen(),this.hot.runHooks("afterDropdownMenuHide",this)}function ra(t){return n=this,(e=Ks).get($s(e,n))?null:t;var e,n}function oa(t){Object(r.w)(t.target,"changeType")&&Gs(Ks,this,!0)}function sa(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}qs.SEPARATOR={name:Ji};var aa=class{constructor(t){sa(this,"hot",void 0),sa(this,"options",{}),this.hot=t}setOptions(t){this.options=t}getData(){const{startRow:t,startCol:e,endRow:n,endCol:i}=this._getDataRange(),r=this.options,o=[];return Object(bt.d)(t,n,t=>{const n=[];!r.exportHiddenRows&&this._isHiddenRow(t)||(Object(bt.d)(e,i,e=>{!r.exportHiddenColumns&&this._isHiddenColumn(e)||n.push(this.hot.getDataAtCell(t,e))}),o.push(n))}),o}getRowHeaders(){const t=[];if(this.options.rowHeaders){const{startRow:e,endRow:n}=this._getDataRange(),i=this.hot.getRowHeader();Object(bt.d)(e,n,e=>{!this.options.exportHiddenRows&&this._isHiddenRow(e)||t.push(i[e])})}return t}getColumnHeaders(){const t=[];if(this.options.columnHeaders){const{startCol:e,endCol:n}=this._getDataRange(),i=this.hot.getColHeader();Object(bt.d)(e,n,e=>{!this.options.exportHiddenColumns&&this._isHiddenColumn(e)||t.push(i[e])})}return t}_getDataRange(){const t=this.hot.countCols()-1,e=this.hot.countRows()-1;let[n=0,i=0,r=e,o=t]=this.options.range;return n=Math.max(n,0),i=Math.max(i,0),r=Math.min(r,e),o=Math.min(o,t),{startRow:n,startCol:i,endRow:r,endCol:o}}_isHiddenRow(t){return this.hot.rowIndexMapper.isHidden(this.hot.toPhysicalRow(t))}_isHiddenColumn(t){return this.hot.columnIndexMapper.isHidden(this.hot.toPhysicalColumn(t))}};function la(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class ca{static get DEFAULT_OPTIONS(){return{mimeType:"text/plain",fileExtension:"txt",filename:"Handsontable [YYYY]-[MM]-[DD]",encoding:"utf-8",bom:!1,columnHeaders:!1,rowHeaders:!1,exportHiddenColumns:!1,exportHiddenRows:!1,range:[]}}constructor(t,e){la(this,"dataProvider",void 0),la(this,"options",void 0),this.dataProvider=t,this.options=this._mergeOptions(e),this.dataProvider.setOptions(this.options)}_mergeOptions(t){let e=Object(s.a)(this.constructor.DEFAULT_OPTIONS);const n=new Date;return e=Object(s.h)(Object(s.a)(ca.DEFAULT_OPTIONS),e),e=Object(s.h)(e,t),e.filename=Object(h.e)(e.filename,{YYYY:n.getFullYear(),MM:(""+(n.getMonth()+1)).padStart(2,"0"),DD:(""+n.getDate()).padStart(2,"0")}),e}}var ua=ca;const ha=String.fromCharCode(13),da=String.fromCharCode(34),fa=String.fromCharCode(10);const ga={csv:class extends ua{static get DEFAULT_OPTIONS(){return{mimeType:"text/csv",fileExtension:"csv",bom:!0,columnDelimiter:",",rowDelimiter:"\r\n"}}export(){const t=this.options,e=this.dataProvider.getData();let n=this.dataProvider.getColumnHeaders();const i=n.length>0,r=this.dataProvider.getRowHeaders(),o=r.length>0;let s=t.bom?String.fromCharCode(65279):"";return i&&(n=Object(c.c)(n,t=>this._escapeCell(t,!0)),o&&(s+=t.columnDelimiter),s+=n.join(t.columnDelimiter),s+=t.rowDelimiter),Object(c.a)(e,(e,n)=>{n>0&&(s+=t.rowDelimiter),o&&(s+=this._escapeCell(r[n])+t.columnDelimiter),s+=e.map(t=>this._escapeCell(t)).join(t.columnDelimiter)}),s}_escapeCell(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(u.f)(t);return""!==n&&(e||n.indexOf(ha)>=0||n.indexOf(da)>=0||n.indexOf(fa)>=0||n.indexOf(this.options.columnDelimiter)>=0)&&(n=n.replace(new RegExp('"',"g"),'""'),n=`"${n}"`),n}}};class pa extends te{static get PLUGIN_KEY(){return"exportFile"}static get PLUGIN_PRIORITY(){return 240}isEnabled(){return!0}exportAsString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._createTypeFormatter(t,e).export()}exportAsBlob(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._createBlob(this._createTypeFormatter(t,e))}downloadFile(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{rootDocument:n,rootWindow:i}=this.hot,r=this._createTypeFormatter(t,e),o=this._createBlob(r),s=i.URL||i.webkitURL,a=n.createElement("a"),l=`${r.options.filename}.${r.options.fileExtension}`;if(void 0!==a.download){const t=s.createObjectURL(o);a.style.display="none",a.setAttribute("href",t),a.setAttribute("download",l),n.body.appendChild(a),a.dispatchEvent(new MouseEvent("click")),n.body.removeChild(a),setTimeout(()=>{s.revokeObjectURL(t)},100)}else navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob(o,l)}_createTypeFormatter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ga[t])throw new Error(`Export format type "${t}" is not supported.`);return function(t,e,n){return"function"===typeof ga[t]?new ga[t](e,n):null}(t,new aa(this.hot),e)}_createBlob(t){let e=null;return"undefined"!==typeof Blob&&(e=new Blob([t.export()],{type:`${t.options.mimeType};charset=${t.options.encoding}`})),e}}function ma(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class ba{constructor(t,e){let{id:n,stateless:i=!0}=e;ma(this,"hot",void 0),ma(this,"id",void 0),ma(this,"elements",[]),ma(this,"hidden",!1),ma(this,"stateId",""),ma(this,"state",void 0),this.hot=t,this.id=n,this.stateId="Filters.component."+this.id,this.state=i?null:this.hot.columnIndexMapper.registerMap(this.stateId,new Nn.a)}getElements(){return this.elements}reset(){Object(c.a)(this.elements,t=>t.reset())}hide(){this.hidden=!0}show(){this.hidden=!1}isHidden(){return null===this.hot||this.hidden}restoreState(t){this.state&&this.setState(this.state.getValueAtIndex(t))}setState(){throw new Error("The state setting logic is not implemented")}saveState(t){this.state&&this.state.setValueAtIndex(t,this.getState())}getState(){throw new Error("The state gathering logic is not implemented")}destroy(){this.hot.columnIndexMapper.unregisterMap(this.stateId),this.clearLocalHooks(),Object(c.a)(this.elements,t=>t.destroy()),this.state=null,this.elements=null,this.hot=null}}Object(s.n)(ba,_i.a);const ya={};function wa(t,e){if(!ya[t])throw Error(`Filter condition "${t}" does not exist.`);const{condition:n,descriptor:i}=ya[t];let r=e;return i.inputValuesDecorator&&(r=i.inputValuesDecorator(r)),function(t){return n.apply(t.meta.instance,[].concat([t],[r]))}}function va(t){if(!ya[t])throw Error(`Filter condition "${t}" does not exist.`);return ya[t].descriptor}function Ca(t,e,n){n.key=t,ya[t]={condition:e,descriptor:n}}Ca("none",(function(){return!0}),{name:ut.FILTERS_CONDITIONS_NONE,inputsCount:0,showOperators:!1});Ca("empty",(function(t){return Object(u.c)(t.value)}),{name:ut.FILTERS_CONDITIONS_EMPTY,inputsCount:0,showOperators:!0});Ca("not_empty",(function(t,e){return!wa("empty",e)(t)}),{name:ut.FILTERS_CONDITIONS_NOT_EMPTY,inputsCount:0,showOperators:!0});Ca("eq",(function(t,e){let[n]=e;return Object(u.f)(t.value).toLocaleLowerCase(t.meta.locale)===Object(u.f)(n)}),{name:ut.FILTERS_CONDITIONS_EQUAL,inputsCount:1,showOperators:!0});Ca("neq",(function(t,e){return!wa("eq",e)(t)}),{name:ut.FILTERS_CONDITIONS_NOT_EQUAL,inputsCount:1,showOperators:!0});Ca("gt",(function(t,e){let[n]=e,i=n;return"numeric"===t.meta.type&&(i=parseFloat(i,10)),t.value>i}),{name:ut.FILTERS_CONDITIONS_GREATER_THAN,inputsCount:1,showOperators:!0});Ca("gte",(function(t,e){let[n]=e,i=n;return"numeric"===t.meta.type&&(i=parseFloat(i,10)),t.value>=i}),{name:ut.FILTERS_CONDITIONS_GREATER_THAN_OR_EQUAL,inputsCount:1,showOperators:!0});Ca("lt",(function(t,e){let[n]=e,i=n;return"numeric"===t.meta.type&&(i=parseFloat(i,10)),t.value<i}),{name:ut.FILTERS_CONDITIONS_LESS_THAN,inputsCount:1,showOperators:!0});Ca("lte",(function(t,e){let[n]=e,i=n;return"numeric"===t.meta.type&&(i=parseFloat(i,10)),t.value<=i}),{name:ut.FILTERS_CONDITIONS_LESS_THAN_OR_EQUAL,inputsCount:1,showOperators:!0});Ca("date_after",(function(t,e){let[n]=e;const i=O(t.value,t.meta.dateFormat),r=O(n,t.meta.dateFormat);return!(!i.isValid()||!r.isValid())&&i.diff(r)>=0}),{name:ut.FILTERS_CONDITIONS_AFTER,inputsCount:1,showOperators:!0});Ca("date_before",(function(t,e){let[n]=e;const i=O(t.value,t.meta.dateFormat),r=O(n,t.meta.dateFormat);return!(!i.isValid()||!r.isValid())&&i.diff(r)<=0}),{name:ut.FILTERS_CONDITIONS_BEFORE,inputsCount:1,showOperators:!0});Ca("between",(function(t,e){let[n,i]=e,r=n,o=i;if("numeric"===t.meta.type){const t=parseFloat(r,10),e=parseFloat(o,10);r=Math.min(t,e),o=Math.max(t,e)}else if("date"===t.meta.type){const e=wa("date_before",[o]),n=wa("date_after",[r]);return e(t)&&n(t)}return t.value>=r&&t.value<=o}),{name:ut.FILTERS_CONDITIONS_BETWEEN,inputsCount:2,showOperators:!0});Ca("not_between",(function(t,e){return!wa("between",e)(t)}),{name:ut.FILTERS_CONDITIONS_NOT_BETWEEN,inputsCount:2,showOperators:!0});Ca("begins_with",(function(t,e){let[n]=e;return Object(u.f)(t.value).toLocaleLowerCase(t.meta.locale).startsWith(Object(u.f)(n))}),{name:ut.FILTERS_CONDITIONS_BEGINS_WITH,inputsCount:1,showOperators:!0});Ca("ends_with",(function(t,e){let[n]=e;return Object(u.f)(t.value).toLocaleLowerCase(t.meta.locale).endsWith(Object(u.f)(n))}),{name:ut.FILTERS_CONDITIONS_ENDS_WITH,inputsCount:1,showOperators:!0});Ca("contains",(function(t,e){let[n]=e;return Object(u.f)(t.value).toLocaleLowerCase(t.meta.locale).indexOf(Object(u.f)(n))>=0}),{name:ut.FILTERS_CONDITIONS_CONTAINS,inputsCount:1,showOperators:!0});Ca("not_contains",(function(t,e){return!wa("contains",e)(t)}),{name:ut.FILTERS_CONDITIONS_NOT_CONTAIN,inputsCount:1,showOperators:!0});Ca("date_tomorrow",(function(t){const e=O(t.value,t.meta.dateFormat);return!!e.isValid()&&e.isSame(O().subtract(-1,"days").startOf("day"),"d")}),{name:ut.FILTERS_CONDITIONS_TOMORROW,inputsCount:0});Ca("date_today",(function(t){const e=O(t.value,t.meta.dateFormat);return!!e.isValid()&&e.isSame(O().startOf("day"),"d")}),{name:ut.FILTERS_CONDITIONS_TODAY,inputsCount:0});Ca("date_yesterday",(function(t){const e=O(t.value,t.meta.dateFormat);return!!e.isValid()&&e.isSame(O().subtract(1,"days").startOf("day"),"d")}),{name:ut.FILTERS_CONDITIONS_YESTERDAY,inputsCount:0});const Sa={numeric:["none",Ji,"empty","not_empty",Ji,"eq","neq",Ji,"gt","gte","lt","lte","between","not_between"],text:["none",Ji,"empty","not_empty",Ji,"eq","neq",Ji,"begins_with","ends_with",Ji,"contains","not_contains"],date:["none",Ji,"empty","not_empty",Ji,"eq","neq",Ji,"date_before","date_after","between",Ji,"date_tomorrow","date_today","date_yesterday"]};function Oa(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Ta=["click","input","keydown","keypress","keyup","focus","blur","change"];class _a{static get DEFAULTS(){return Object(s.a)({className:"",value:"",tagName:"div",children:[],wrapIt:!0})}constructor(t,e){Oa(this,"hot",void 0),Oa(this,"eventManager",new at.a(this)),Oa(this,"options",void 0),Oa(this,"_element",void 0),Oa(this,"buildState",void 0),this.hot=t,this.options=Object(s.h)(_a.DEFAULTS,e),this._element=this.hot.rootDocument.createElement(this.options.wrapIt?"div":this.options.tagName)}setValue(t){this.options.value=t,this.update()}getValue(){return this.options.value}get element(){return"building"===this.buildState?this._element:"built"===this.buildState?(this.update(),this._element):(this.buildState="building",this.build(),this.buildState="built",this._element)}isBuilt(){return"built"===this.buildState}translateIfPossible(t){return"string"===typeof t&&t.startsWith(ut.FILTERS_NAMESPACE)?this.hot.getTranslatedPhrase(t):t}build(){const t=(t,e)=>{this.eventManager.addEventListener(t,e,t=>this.runLocalHooks(e,t,this))};if(this.buildState||(this.buildState="building"),this._element.setAttribute("data-hot-input",!0),void 0!==this.options.tabIndex&&this._element.setAttribute("tabindex",this.options.tabIndex),void 0!==this.options.role&&this._element.setAttribute("role",this.options.role),this.options.className&&Object(r.a)(this._element,this.options.className),this.options.children.length)Object(c.a)(this.options.children,t=>this._element.appendChild(t.element));else if(this.options.wrapIt){const e=this.hot.rootDocument.createElement(this.options.tagName);e.setAttribute("data-hot-input",!0),Object(s.o)(this.options,(t,n)=>{void 0!==e[n]&&"className"!==n&&"tagName"!==n&&"children"!==n&&(e[n]=this.translateIfPossible(t))}),this._element.appendChild(e),Object(c.a)(Ta,n=>t(e,n))}else Object(c.a)(Ta,e=>t(this._element,e))}update(){}reset(){this.options.value="",this.update()}show(){this.element.style.display=""}hide(){this.element.style.display="none"}focus(){}destroy(){this.eventManager.destroy(),this.eventManager=null,this.hot=null,this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null}}function Ea(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ra(t,e){return t.get(Ma(t,e))}function Ma(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}Object(s.n)(_a,_i.a);var xa=new WeakMap,Ia=new WeakSet;class ka extends _a{static get DEFAULTS(){return Object(s.a)({placeholder:"",type:"text",tagName:"input",tabIndex:-1})}constructor(t,e){var n,i;super(t,Object(s.h)(ka.DEFAULTS,e)),Ea(n=this,i=Ia),i.add(n),function(t,e,n){Ea(t,e),e.set(t,n)}(this,xa,void 0),this.registerHooks()}registerHooks(){this.addLocalHook("keyup",t=>Ma(Ia,this,Aa).call(this,t))}build(){super.build();const t=this.hot.rootDocument.createElement("div");var e,n,i;e=xa,n=this,i=this._element.firstChild,e.set(Ma(e,n),i),Object(r.a)(this._element,"htUIInput"),Object(r.a)(t,"htUIInputIcon"),this._element.appendChild(t),this.update()}update(){this.isBuilt()&&(Ra(xa,this).type=this.options.type,Ra(xa,this).placeholder=this.translateIfPossible(this.options.placeholder),Ra(xa,this).value=this.translateIfPossible(this.options.value))}focus(){this.isBuilt()&&Ra(xa,this).focus()}}function Aa(t){this.options.value=t.target.value}function Na(t,e,n){ja(t,e),e.set(t,n)}function ja(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ha(t,e,n){return t.set(Pa(t,e),n),n}function Da(t,e){return t.get(Pa(t,e))}function Pa(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var La=new WeakMap,Fa=new WeakMap,Ba=new WeakMap,Va=new WeakMap,Ua=new WeakMap,Wa=new WeakSet;class za extends _a{static get DEFAULTS(){return Object(s.a)({className:"htUISelect",wrapIt:!1,tabIndex:-1})}constructor(t,e){var n,i;super(t,Object(s.h)(za.DEFAULTS,e)),ja(n=this,i=Wa),i.add(n),Na(this,La,null),Na(this,Fa,[]),Na(this,Ba,void 0),Na(this,Va,void 0),Na(this,Ua,void 0),this.registerHooks()}getMenu(){return Da(La,this)}registerHooks(){this.addLocalHook("click",()=>Pa(Wa,this,$a).call(this))}setItems(t){Ha(Fa,this,this.translateNames(t)),Da(La,this)&&Da(La,this).setMenuItems(Da(Fa,this))}translateNames(t){return Object(c.a)(t,t=>{t.name=this.translateIfPossible(t.name)}),t}build(){super.build(),Ha(La,this,new po(this.hot,{className:"htSelectUI htFiltersConditionsMenu",keepInViewport:!1,standalone:!0,container:this.options.menuContainer})),Da(La,this).setMenuItems(Da(Fa,this));const t=new _a(this.hot,{className:"htUISelectCaption"}),e=new _a(this.hot,{className:"htUISelectDropdown"});Ha(Ba,this,t),Ha(Va,this,t.element),Ha(Ua,this,e),this.hot.getSettings().ariaTags&&(Object(r.U)(e.element,[Object(p.n)()]),Object(r.U)(this._element,[Object(p.q)()])),Object(c.a)([t,e],t=>this._element.appendChild(t.element)),Da(La,this).addLocalHook("select",t=>Pa(Wa,this,Ya).call(this,t)),Da(La,this).addLocalHook("afterClose",()=>Pa(Wa,this,Ga).call(this)),this.update()}update(){if(!this.isBuilt())return;let t;t=this.options.value?this.options.value.name:Da(La,this).hot.getTranslatedPhrase(ut.FILTERS_CONDITIONS_NONE),Da(Va,this).textContent=t,super.update()}openOptions(){const t=this.element.getBoundingClientRect();Da(La,this)&&(Da(La,this).open(),Da(La,this).setPosition({left:this.hot.isLtr()?t.left-5:t.left-31,top:t.top-1,width:t.width,height:t.height}),Da(La,this).getNavigator().toFirstItem(),Da(La,this).getKeyboardShortcutsCtrl().addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],callback:t=>{this.closeOptions(),this.runLocalHooks("tabKeydown",t)}},{keys:[["Control/Meta","A"]],callback:()=>!1}]))}closeOptions(){Da(La,this)&&Da(La,this).close()}focus(){this.isBuilt()&&this.element.focus()}destroy(){Da(La,this)&&(Da(La,this).destroy(),Ha(La,this,null)),Da(Ba,this)&&Da(Ba,this).destroy(),Da(Ua,this)&&Da(Ua,this).destroy(),super.destroy()}}function Ya(t){t.name!==Ji&&(this.options.value=t,this.update(),this.runLocalHooks("select",this.options.value))}function Ga(){this.runLocalHooks("afterClose")}function $a(){this.openOptions()}function Ka(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function Xa(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qa(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Qa=new WeakSet;class Za extends ba{constructor(t,e){super(t,{id:e.id,stateless:!1}),Ka(this,Qa),Xa(this,"name",""),Xa(this,"addSeparator",!1),this.name=e.name,this.addSeparator=e.addSeparator,this.elements.push(new za(this.hot,{menuContainer:e.menuContainer})),this.elements.push(new ka(this.hot,{placeholder:ut.FILTERS_BUTTONS_PLACEHOLDER_VALUE})),this.elements.push(new ka(this.hot,{placeholder:ut.FILTERS_BUTTONS_PLACEHOLDER_SECOND_VALUE})),this.registerHooks()}registerHooks(){this.getSelectElement().addLocalHook("select",t=>qa(Qa,this,Ja).call(this,t)).addLocalHook("afterClose",()=>this.runLocalHooks("afterClose")).addLocalHook("tabKeydown",t=>this.runLocalHooks("selectTabKeydown",t)),Object(c.a)(this.getInputElements(),t=>{t.addLocalHook("keydown",t=>qa(Qa,this,tl).call(this,t))})}setState(t){if(this.reset(),!t)return;const e=Object(s.a)(t.command);e.name.startsWith(ut.FILTERS_CONDITIONS_NAMESPACE)&&(e.name=this.hot.getTranslatedPhrase(e.name)),this.getSelectElement().setValue(e),Object(c.a)(t.args,(t,n)=>{if(n>e.inputsCount-1)return!1;const i=this.getInputElement(n);i.setValue(t),i[e.inputsCount>n?"show":"hide"](),n||this.hot._registerTimeout(()=>i.focus(),10)})}getState(){const t=this.getSelectElement().getValue()||va("none"),e=[];return Object(c.a)(this.getInputElements(),(n,i)=>{t.inputsCount>i&&e.push(n.getValue())}),{command:t,args:e}}updateState(t,e){const n=va(t?t.name:"none");this.state.setValueAtIndex(e,{command:n,args:t?t.args:[]}),t||Object(c.a)(this.getInputElements(),t=>t.setValue(null))}getSelectElement(){return this.elements.filter(t=>t instanceof za)[0]}getInputElement(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.getInputElements()[t]}getInputElements(){return this.elements.filter(t=>t instanceof ka)}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(t,e,n,i,o,s)=>{Object(r.a)(e.parentNode,"htFiltersMenuCondition"),this.addSeparator&&Object(r.a)(e.parentNode,"border");const a=this.hot.rootDocument.createElement("div");return Object(r.a)(a,"htFiltersMenuLabel"),a.textContent=s,e.appendChild(a),e.parentElement.hasAttribute("ghost-table")||Object(c.a)(this.elements,t=>e.appendChild(t.element)),e}}}reset(){const t=this.hot.getPlugin("filters").getSelectedColumn();let e=[va("none")];if(null!==t){const{visualIndex:n}=t;e=function(t){const e=[];let n=t;return Sa[n]||(n="text"),Object(c.a)(Sa[n],t=>{let n;n=t===Ji?{name:Ji}:Object(s.a)(va(t)),e.push(n)}),e}(this.hot.getDataType(0,n,this.hot.countRows(),n))}Object(c.a)(this.getInputElements(),t=>t.hide()),this.getSelectElement().setItems(e),super.reset(),this.getSelectElement().setValue(e[0])}}function Ja(t){Object(c.a)(this.getInputElements(),(e,n)=>{e[t.inputsCount>n?"show":"hide"](),0===n&&this.hot._registerTimeout(()=>e.focus(),10)}),this.runLocalHooks("change",t)}function tl(t){Object(d.d)(t.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),Object(o.f)(t))}const el={};function nl(t,e,n){el[t]={name:e,func:n}}nl("conjunction",ut.FILTERS_LABELS_CONJUNCTION,(function(t,e){return t.every(t=>t.func(e))}));nl("disjunction",ut.FILTERS_LABELS_DISJUNCTION,(function(t,e){return t.some(t=>t.func(e))}));function il(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function rl(t,e){return t.get(sl(t,e))}function ol(t,e,n){return t.set(sl(t,e),n),n}function sl(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}nl("disjunctionWithExtraCondition",ut.FILTERS_LABELS_DISJUNCTION,(function(t,e){if(t.length<3)throw Error("Operation doesn't work on less then three conditions.");return t.slice(0,t.length-1).some(t=>t.func(e))&&t[t.length-1].func(e)}));var al=new WeakMap,ll=new WeakMap;class cl extends _a{static get DEFAULTS(){return Object(s.a)({type:"radio",tagName:"input",className:"htUIRadio",label:{}})}constructor(t,e){super(t,Object(s.h)(cl.DEFAULTS,e)),il(this,al,void 0),il(this,ll,void 0)}build(){super.build();const t=this.hot.rootDocument.createElement("label");t.textContent=this.translateIfPossible(this.options.label.textContent),t.htmlFor=this.translateIfPossible(this.options.label.htmlFor),ol(ll,this,t),ol(al,this,this._element.firstChild),rl(al,this).checked=this.options.checked,this._element.appendChild(t),this.update()}update(){this.isBuilt()&&(rl(ll,this).textContent=this.translateIfPossible(this.options.label.textContent))}isChecked(){return!!this.isBuilt()&&rl(al,this).checked}setChecked(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isBuilt()&&(rl(al,this).checked=t)}focus(){this.isBuilt()&&rl(al,this).focus()}}function ul(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function hl(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var dl=new WeakSet;class fl extends ba{constructor(t,e){super(t,{id:e.id,stateless:!1}),ul(this,dl),hl(this,"name",""),this.name=e.name,this.buildOperatorsElement()}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(t,e)=>(Object(r.a)(e.parentNode,"htFiltersMenuOperators"),Object(c.a)(this.elements,t=>e.appendChild(t.element)),e)}}buildOperatorsElement(){const t=["conjunction","disjunction"];Object(c.a)(t,e=>{const n=new cl(this.hot,{name:"operator",label:{htmlFor:e,textContent:(i=e,el[i].name)},value:e,checked:e===t[0],id:e});var i;n.addLocalHook("change",t=>function(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}(dl,this,gl).call(this,t)),this.elements.push(n)})}setChecked(t){if(this.elements.length<t)throw Error(gi.a`Radio button with index ${t} doesn't exist.`);Object(c.a)(this.elements,(e,n)=>{e.setChecked(n===t)})}getActiveOperationId(){const t=this.elements.find(t=>t instanceof cl&&t.isChecked());return t?t.getValue():"conjunction"}getState(){return this.getActiveOperationId()}setState(t){this.reset(),t&&this.getActiveOperationId()!==t&&Object(c.a)(this.elements,e=>{e.setChecked(e.getValue()===t)})}updateState(){let t=arguments.length>1?arguments[1]:void 0,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"conjunction";"disjunctionWithExtraCondition"===e&&(e="disjunction"),this.state.setValueAtIndex(t,e)}reset(){this.setChecked(0)}}function gl(t){this.setState(t.target.value)}Object(ne.b)();function pl(t,e){let n=t;return""===n&&(n=`(${e})`),n}const ml=new Set([1]).has(1),bl=ml&&"function"===typeof Array.from;function yl(t){let e=t;return ml&&(e=new Set(e)),function(t){let n;return n=ml?e.has(t):!!~e.indexOf(t),n}}function wl(t){return null===t||void 0===t?"":t}function vl(t){let e=t;return e=bl?Array.from(new Set(e)):Object(c.e)(e),e=e.sort((t,e)=>"number"===typeof t&&"number"===typeof e?t-e:t===e?0:t>e?1:-1),e}function Cl(t,e,n,i){const r=[],o=t===e;let s;return o||(s=yl(e)),Object(c.a)(t,t=>{let e=!1;(o||s(t))&&(e=!0);const a={checked:e,value:t,visualValue:pl(t,n)};i&&i(a),r.push(a)}),r}var Sl=n(30);function Ol(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function Tl(t,e){return t.get(_l(t,e))}function _l(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var El=new WeakMap;class Rl extends _a{static get DEFAULTS(){return Object(s.a)({href:"#",tagName:"a",tabIndex:-1,role:"button"})}constructor(t,e){super(t,Object(s.h)(Rl.DEFAULTS,e)),Ol(this,El,void 0)}build(){var t,e,n;super.build(),t=El,e=this,n=this._element.firstChild,t.set(_l(t,e),n)}update(){this.isBuilt()&&(Tl(El,this).textContent=this.translateIfPossible(this.options.textContent))}focus(){this.isBuilt()&&Tl(El,this).focus()}activate(){Tl(El,this).click()}}function Ml(t,e,n){xl(t,e),e.set(t,n)}function xl(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Il(t,e){return t.get(Al(t,e))}function kl(t,e,n){return t.set(Al(t,e),n),n}function Al(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Nl=new WeakMap,jl=new WeakMap,Hl=new WeakMap,Dl=new WeakMap,Pl=new WeakMap,Ll=new WeakMap,Fl=new WeakSet;class Bl extends _a{static get DEFAULTS(){return Object(s.a)({className:"htUIMultipleSelect",value:[]})}constructor(t,e){var n,i;super(t,Object(s.h)(Bl.DEFAULTS,e)),xl(n=this,i=Fl),i.add(n),Ml(this,Nl,[]),Ml(this,jl,void 0),Ml(this,Hl,void 0),Ml(this,Dl,void 0),Ml(this,Pl,void 0),Ml(this,Ll,void 0),kl(Dl,this,new ka(this.hot,{placeholder:ut.FILTERS_BUTTONS_PLACEHOLDER_SEARCH,className:"htUIMultipleSelectSearch"})),kl(Pl,this,new Rl(this.hot,{textContent:ut.FILTERS_BUTTONS_SELECT_ALL,className:"htUISelectAll"})),kl(Ll,this,new Rl(this.hot,{textContent:ut.FILTERS_BUTTONS_CLEAR,className:"htUIClearAll"})),this.registerHooks()}getItemsBox(){return Il(jl,this)}registerHooks(){Il(Dl,this).addLocalHook("keydown",t=>Al(Fl,this,Ul).call(this,t)),Il(Dl,this).addLocalHook("input",t=>Al(Fl,this,Vl).call(this,t)),Il(Pl,this).addLocalHook("click",t=>Al(Fl,this,Wl).call(this,t)),Il(Ll,this).addLocalHook("click",t=>Al(Fl,this,zl).call(this,t))}setItems(t){var e;kl(Nl,this,t),null===(e=Il(jl,this))||void 0===e||e.loadData(Il(Nl,this))}setLocale(t){kl(Hl,this,t)}getLocale(){return Il(Hl,this)}getItems(){return[...Il(Nl,this)]}getValue(){return function(t){const e=[];return t.forEach(t=>{t.checked&&e.push(t.value)}),e}(Il(Nl,this))}getSearchInputElement(){return Il(Dl,this)}getSelectAllElement(){return Il(Pl,this)}getClearAllElement(){return Il(Ll,this)}isSelectedAllValues(){return Il(Nl,this).length===this.getValue().length}build(){super.build();const{rootDocument:t}=this.hot,e=t.createElement("div"),n=new _a(this.hot,{className:"htUISelectionControls",children:[Il(Pl,this),Il(Ll,this)]});this._element.appendChild(Il(Dl,this).element),this._element.appendChild(n.element),this._element.appendChild(e);const i=e=>{var n;if(!this._element)return;null===(n=Il(jl,this))||void 0===n||n.destroy(),Object(r.a)(e,"htUIMultipleSelectHot"),kl(jl,this,new this.hot.constructor(e,{data:Il(Nl,this),columns:[{data:"checked",type:"checkbox",label:{property:"visualValue",position:"after"}}],beforeRenderer:(t,e,n,i,r,o)=>{t.title=o.instance.getDataAtRowProp(e,o.label.property)},afterListen:()=>{this.runLocalHooks("focus",this)},beforeOnCellMouseUp:()=>{Il(jl,this).listen()},colWidths:()=>Il(jl,this).container.scrollWidth-Object(r.q)(t),maxCols:1,autoWrapCol:!0,height:110,copyPaste:!1,disableVisualSelection:"area",fillHandle:!1,fragmentSelection:"cell",tabMoves:{row:1,col:0},layoutDirection:this.hot.isRtl()?"rtl":"ltr"})),Il(jl,this).init();const i=Il(jl,this).getShortcutManager().getContext("grid");i.removeShortcutsByKeys(["Tab"]),i.removeShortcutsByKeys(["Shift","Tab"]),i.addShortcut({keys:[["Escape"]],callback:t=>{this.runLocalHooks("keydown",t,this)},group:"multipleSelect.itemBox"}),i.addShortcut({keys:[["Tab"],["Shift","Tab"]],callback:t=>{Il(jl,this).deselectCell(),this.runLocalHooks("keydown",t,this),this.runLocalHooks("listTabKeydown",t,this)},group:"multipleSelect.itemBox"})};i(e),this.hot._registerTimeout(()=>i(e),100)}focus(){this.isBuilt()&&Il(jl,this).listen()}reset(){Il(Dl,this).reset(),Il(Pl,this).reset(),Il(Ll,this).reset()}update(){this.isBuilt()&&(Il(jl,this).loadData(function(t,e){const n=yl(e);return t.map(t=>(t.checked=n(t.value),t))}(Il(Nl,this),this.options.value)),super.update())}destroy(){var t;null===(t=Il(jl,this))||void 0===t||t.destroy(),Il(Dl,this).destroy(),Il(Ll,this).destroy(),Il(Pl,this).destroy(),kl(Dl,this,null),kl(Ll,this,null),kl(Pl,this,null),kl(jl,this,null),kl(Nl,this,null),super.destroy()}}function Vl(t){const e=t.target.value.toLocaleLowerCase(this.getLocale());let n;n=""===e?[...Il(Nl,this)]:Il(Nl,this).filter(t=>(""+t.value).toLocaleLowerCase(this.getLocale()).indexOf(e)>=0),Il(jl,this).loadData(n)}function Ul(t){this.runLocalHooks("keydown",t,this);Object(kn.e)(d.d,t.keyCode)("ARROW_DOWN")&&(t.preventDefault(),Object(o.f)(t),Il(jl,this).listen(),Il(jl,this).selectCell(0,0))}function Wl(t){const e=[];t.preventDefault(),Il(jl,this).getSourceData().forEach((t,n)=>{t.checked=!0,e.push(Object(Sl.b)(t,n)[0])}),Il(jl,this).setSourceDataAtCell(e)}function zl(t){const e=[];t.preventDefault(),Il(jl,this).getSourceData().forEach((t,n)=>{t.checked=!1,e.push(Object(Sl.b)(t,n)[0])}),Il(jl,this).setSourceDataAtCell(e)}function Yl(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function Gl(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $l(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}Ca("by_value",(function(t,e){let[n]=e;return n(t.value)}),{name:"By value",inputsCount:0,inputValuesDecorator(t){let[e]=t;return[yl(e)]},showOperators:!1});var Kl,Xl=new WeakSet;class ql extends ba{constructor(t,e){super(t,{id:e.id,stateless:!1}),Yl(this,Xl),Gl(this,"name",""),this.name=e.name,this.elements.push(new Bl(this.hot)),this.registerHooks()}registerHooks(){this.getMultipleSelectElement().addLocalHook("keydown",t=>$l(Xl,this,Ql).call(this,t)).addLocalHook("listTabKeydown",t=>this.runLocalHooks("listTabKeydown",t)),this.hot.addHook("modifyFiltersMultiSelectValue",(t,e)=>$l(Xl,this,Jl).call(this,t,e))}getElements(){const t=this.getMultipleSelectElement();return[t.getSearchInputElement(),t.getSelectAllElement(),t.getClearAllElement(),this.getMultipleSelectElement()]}setState(t){if(this.reset(),t&&"by_value"===t.command.key){const e=this.getMultipleSelectElement();e.setItems(t.itemsSnapshot),e.setValue(t.args[0]),e.setLocale(t.locale)}}getState(){const t=this.getMultipleSelectElement(),e=t.getItems();return{command:{key:t.isSelectedAllValues()||!e.length?"none":"by_value"},args:[t.getValue()],itemsSnapshot:e}}updateState(t){const e=(e,n,i,r,o)=>{const[s]=Object(c.b)(n,t=>"by_value"===t.name),a={},l=this.hot.getTranslatedPhrase(ut.FILTERS_VALUES_BLANK_CELLS);if(s){const n=r(e,o),u=Object(c.c)(n,t=>t.value),h=new Map(n.map(t=>[t.value,this.hot.getCellMeta(t.meta.visualRow,t.meta.visualCol)])),d=vl(u);i&&(s.args[0]=i);const f=[],g=Cl(d,s.args[0],l,t=>{t.checked&&f.push(t.value),$l(Xl,this,Zl).call(this,t,h)}),p=t.editedConditionStack.column;a.locale=this.hot.getCellMeta(0,p).locale,a.args=[f],a.command=va("by_value"),a.itemsSnapshot=g}else a.args=[],a.command=va("none");this.state.setValueAtIndex(e,a)};e(t.editedConditionStack.column,t.editedConditionStack.conditions,t.conditionArgsChange,t.filteredRowsFactory),t.dependentConditionStacks.length&&e(t.dependentConditionStacks[0].column,t.dependentConditionStacks[0].conditions,t.conditionArgsChange,t.filteredRowsFactory,t.editedConditionStack)}getMultipleSelectElement(){return this.elements.filter(t=>t instanceof Bl)[0]}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(t,e,n,i,o,s)=>{Object(r.a)(e.parentNode,"htFiltersMenuValue");const a=this.hot.rootDocument.createElement("div");return Object(r.a)(a,"htFiltersMenuLabel"),a.textContent=s,e.appendChild(a),e.parentElement.hasAttribute("ghost-table")||Object(c.a)(this.elements,t=>e.appendChild(t.element)),e}}}reset(){const t=this.hot.getTranslatedPhrase(ut.FILTERS_VALUES_BLANK_CELLS),e=this._getColumnVisibleValues(),n=e.map(t=>t.value),i=new Map(e.map(t=>[t.value,t.meta])),r=vl(n),o=Cl(r,r,t,t=>{$l(Xl,this,Zl).call(this,t,i)});this.getMultipleSelectElement().setItems(o),super.reset(),this.getMultipleSelectElement().setValue(r);const s=this.hot.getPlugin("filters").getSelectedColumn();null!==s&&this.getMultipleSelectElement().setLocale(this.hot.getCellMeta(0,s.visualIndex).locale)}_getColumnVisibleValues(){const t=this.hot.getPlugin("filters").getSelectedColumn();return null===t?[]:Object(c.c)(this.hot.getDataAtCol(t.visualIndex),(e,n)=>({value:wl(e),meta:this.hot.getCellMeta(n,t.visualIndex)}))}}function Ql(t){Object(d.d)(t.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),Object(o.f)(t))}function Zl(t,e){this.hot.hasHook("modifyFiltersMultiSelectValue")&&(t.visualValue=this.hot.runHooks("modifyFiltersMultiSelectValue",t.visualValue,e.get(t.value)))}function Jl(t,e){switch(e.type){case"numeric":return yt(t,e);default:return t}}function tc(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function ec(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var nc=new WeakSet;class ic extends ba{static get BUTTON_OK(){return"ok"}static get BUTTON_CANCEL(){return"cancel"}constructor(t,e){super(t,{id:e.id,stateless:!0}),tc(this,nc),ec(this,"name",""),this.name=e.name,this.elements.push(new ka(this.hot,{type:"button",value:ut.FILTERS_BUTTONS_OK,className:"htUIButton htUIButtonOK",identifier:ic.BUTTON_OK})),this.elements.push(new ka(this.hot,{type:"button",value:ut.FILTERS_BUTTONS_CANCEL,className:"htUIButton htUIButtonCancel",identifier:ic.BUTTON_CANCEL})),this.registerHooks()}registerHooks(){Object(c.a)(this.elements,t=>{t.addLocalHook("click",(t,e)=>function(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}(nc,this,rc).call(this,t,e))})}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(t,e)=>(Object(r.a)(e.parentNode,"htFiltersMenuActionBar"),Object(c.a)(this.elements,t=>e.appendChild(t.element)),e)}}accept(){this.runLocalHooks("accept")}cancel(){this.runLocalHooks("cancel")}}function rc(t,e){e.options.identifier===Kl.BUTTON_OK?this.accept():this.cancel()}function oc(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Kl=ic;const sc="ConditionCollection.filteringStates";class ac{constructor(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];oc(this,"hot",void 0),oc(this,"isMapRegistrable",void 0),oc(this,"filteringStates",new Nn.a),oc(this,"previousConditionStack",null),this.hot=t,this.isMapRegistrable=e,!0===this.isMapRegistrable?this.hot.columnIndexMapper.registerMap(sc,this.filteringStates):this.filteringStates.init(this.hot.columnIndexMapper.getNumberOfIndexes())}isEmpty(){return 0===this.getFilteredColumns().length}isMatch(t,e){var n;const i=this.filteringStates.getValueAtIndex(e),r=null!==(n=null===i||void 0===i?void 0:i.conditions)&&void 0!==n?n:[],o=null===i||void 0===i?void 0:i.operation;return this.isMatchInConditions(r,t,o)}isMatchInConditions(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"conjunction";return!t.length||function(t){if(!el[t])throw Error(`Operation with id "${t}" does not exist.`);const e=el[t].func;return function(t,n){return e(t,n)}}(n)(t,e)}addCondition(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"conjunction",i=arguments.length>3?arguments[3]:void 0;const r=this.hot.getCellMeta(0,t).locale,o=Object(c.c)(e.args,t=>"string"===typeof t?t.toLocaleLowerCase(r):t),s=e.name||e.command.key;null===this.previousConditionStack&&this.setPreviousConditionStack(this.exportAllConditions()),this.runLocalHooks("beforeAdd",t);const a=this.getOperation(t);if(a){if(a!==n)throw Error(gi.a`The column of index ${t} has been already applied with a \`${a}\`\x20
        filter operation. Use \`removeConditions\` to clear the current conditions and then add new ones.\x20
        Mind that you cannot mix different types of operations (for instance, if you use \`conjunction\`,\x20
        use it consequently for a particular column).`)}else if(Object(u.e)(el[n]))throw new Error(gi.a`Unexpected operation named \`${n}\`. Possible ones are\x20
        \`disjunction\` and \`conjunction\`.`);const l=this.getConditions(t);0===l.length?this.filteringStates.setValueAtIndex(t,{operation:n,conditions:[{name:s,args:o,func:wa(s,o)}]},i):l.push({name:s,args:o,func:wa(s,o)}),this.runLocalHooks("afterAdd",t)}getConditions(t){var e,n;return null!==(e=null===(n=this.filteringStates.getValueAtIndex(t))||void 0===n?void 0:n.conditions)&&void 0!==e?e:[]}getOperation(t){var e;return null===(e=this.filteringStates.getValueAtIndex(t))||void 0===e?void 0:e.operation}getFilteredColumns(){return this.filteringStates.getEntries().map(t=>{let[e]=t;return e})}getColumnStackPosition(t){return this.getFilteredColumns().indexOf(t)}exportAllConditions(){return Object(c.d)(this.filteringStates.getEntries(),(t,e)=>{let[n,{operation:i,conditions:r}]=e;return t.push({column:n,operation:i,conditions:Object(c.c)(r,t=>{let{name:e,args:n}=t;return{name:e,args:n}})}),t},[])}importAllConditions(t){this.clean(),Object(c.a)(t,t=>{Object(c.a)(t.conditions,e=>this.addCondition(t.column,e))})}removeConditions(t){this.setPreviousConditionStack(this.exportAllConditions()),this.runLocalHooks("beforeRemove",t),this.filteringStates.clearValue(t),this.runLocalHooks("afterRemove",t)}clean(){this.runLocalHooks("beforeClean"),this.filteringStates.clear(),this.runLocalHooks("afterClean")}hasConditions(t,e){const n=this.getConditions(t);return e?n.some(t=>t.name===e):n.length>0}setPreviousConditionStack(t){this.previousConditionStack=t}destroy(){this.isMapRegistrable&&this.hot.columnIndexMapper.unregisterMap(sc),this.filteringStates=null,this.clearLocalHooks()}}Object(s.n)(ac,_i.a);var lc=ac;function cc(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var uc=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>[];cc(this,"conditionCollection",void 0),cc(this,"columnDataFactory",void 0),this.conditionCollection=t,this.columnDataFactory=e}filter(){let t=[];return Object(c.a)(this.conditionCollection.getFilteredColumns(),(e,n)=>{let i=this.columnDataFactory(e);n&&(i=this._getIntersectData(i,t)),t=this.filterByColumn(e,i)}),t}filterByColumn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=[];return Object(c.a)(e,e=>{void 0!==e&&this.conditionCollection.isMatch(e,t)&&n.push(e)}),n}_getIntersectData(t,e){const n=[];return Object(c.a)(e,e=>{const i=e.meta.visualRow;void 0!==t[i]&&(n[i]=t[i])}),n}};function hc(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function dc(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fc(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var gc=new WeakSet;class pc{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>[];hc(this,gc),dc(this,"hot",void 0),dc(this,"conditionCollection",void 0),dc(this,"columnDataFactory",void 0),dc(this,"changes",[]),dc(this,"grouping",!1),dc(this,"latestEditedColumnPosition",-1),dc(this,"latestOrderStack",[]),this.hot=t,this.conditionCollection=e,this.columnDataFactory=n,this.conditionCollection.addLocalHook("beforeRemove",t=>fc(gc,this,mc).call(this,t)),this.conditionCollection.addLocalHook("afterRemove",t=>this.updateStatesAtColumn(t)),this.conditionCollection.addLocalHook("afterAdd",t=>this.updateStatesAtColumn(t)),this.conditionCollection.addLocalHook("beforeClean",()=>fc(gc,this,bc).call(this)),this.conditionCollection.addLocalHook("afterClean",()=>fc(gc,this,yc).call(this))}groupChanges(){this.grouping=!0}flush(){this.grouping=!1,Object(c.a)(this.changes,t=>{this.updateStatesAtColumn(t)}),this.changes.length=0}updateStatesAtColumn(t,e){var n=this;if(this.grouping)return void(-1===this.changes.indexOf(t)&&this.changes.push(t));const i=this.conditionCollection.exportAllConditions();let r=this.conditionCollection.getColumnStackPosition(t);-1===r&&(r=this.latestEditedColumnPosition);const o=i.slice(0,r),s=i.slice(r);s.length&&s[0].column===t&&s.shift();const a=Object(kn.a)((function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const r=new lc(n.hot,!1),o=[].concat(t,i);r.importAllConditions(o);const s=n.columnDataFactory(e);let a;a=r.isEmpty()?s:new uc(r,t=>n.columnDataFactory(t)).filter(),a=Object(c.c)(a,t=>t.meta.visualRow);const l=yl(a);return r.destroy(),Object(c.b)(s,t=>l(t.meta.visualRow))}))(o),l=[].concat(this.conditionCollection.getConditions(t));this.runLocalHooks("update",{editedConditionStack:{column:t,conditions:l},dependentConditionStacks:s,filteredRowsFactory:a,conditionArgsChange:e})}destroy(){this.clearLocalHooks(),Object(s.o)(this,(t,e)=>{this[e]=null})}}function mc(t){this.latestEditedColumnPosition=this.conditionCollection.getColumnStackPosition(t)}function bc(){this.latestOrderStack=this.conditionCollection.getFilteredColumns()}function yc(){Object(c.a)(this.latestOrderStack,t=>{this.updateStatesAtColumn(t)})}Object(s.n)(pc,_i.a);var wc=pc;function vc(t,e){let n=-1;const i=(o=e,qr({initialPage:0,size:()=>o.length,onItemSelect:(t,e)=>{const n=o[t];return n instanceof Bl?e:!(n.element&&!Object(r.H)(n.element))&&void n.focus()}}));var o;const s=n=>()=>{t.isOpened()&&t.getKeyboardShortcutsCtrl().listen("filters"),i.setCurrentPage(e.indexOf(n))};function a(r){const o=t.getKeyboardShortcutsCtrl(),s=r.getKeyboardShortcutsCtrl();i.clear(),s.addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],forwardToContext:o.getContext("filters"),callback:()=>{r.isSubMenu()&&r.close(),o.listen("filters")}}]),r.isSubMenu()||o.addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],callback:e=>{const r=t.getNavigator();r.getCurrentPage()>-1&&(n=r.getCurrentPage()),r.clear(),e.shiftKey?i.toPreviousItem():i.toNextItem()}},{keys:[["Escape"]],callback:()=>{t.close()}},{keys:[["Enter"],["Space"]],preventDefault:!1,callback:t=>{const n=e[i.getCurrentPage()];n instanceof za&&(n.openOptions(),t.preventDefault()),n instanceof Rl&&(n.activate(),t.preventDefault()),n instanceof _a||t.preventDefault()}}],"filters")}return e.forEach(t=>{t instanceof _a&&(t.addLocalHook("click",s(t)),t.addLocalHook("focus",s(t)),t.addLocalHook("afterClose",s(t)))}),t.addLocalHook("afterSelectionChange",t=>{t.key.startsWith("filter_")||i.clear()}),t.addLocalHook("afterSubmenuOpen",a),t.addLocalHook("afterOpen",a),{...i,listen:function(){t.focus(),t.getKeyboardShortcutsCtrl().listen("filters")},getLastMenuPage:function(){return n}}}var Cc=n(70);function Sc(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Oc(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tc(t,e){return t.get(_c(t,e))}function _c(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Ec=new WeakMap,Rc=new WeakSet;class Mc extends te{static get PLUGIN_KEY(){return"filters"}static get PLUGIN_PRIORITY(){return 250}static get PLUGIN_DEPS(){return["plugin:DropdownMenu","plugin:HiddenRows","cell-type:checkbox"]}constructor(t){var e,n;super(t),Sc(e=this,n=Rc),n.add(e),Oc(this,"dropdownMenuPlugin",null),Oc(this,"conditionCollection",null),Oc(this,"conditionUpdateObserver",null),Oc(this,"components",new Map([["filter_by_condition",null],["filter_operators",null],["filter_by_condition2",null],["filter_by_value",null],["filter_action_bar",null]])),Oc(this,"filtersRowsMap",null),function(t,e,n){Sc(t,e),e.set(t,n)}(this,Ec,void 0),this.hot.addHook("afterGetColHeader",(t,e)=>_c(Rc,this,Dc).call(this,t,e))}isEnabled(){return!!this.hot.getSettings().filters}enablePlugin(){if(this.enabled)return;this.filtersRowsMap=this.hot.rowIndexMapper.registerMap(this.pluginName,new Cc.a),this.dropdownMenuPlugin=this.hot.getPlugin("dropdownMenu");const t=this.hot.getSettings().dropdownMenu,e=t&&t.uiContainer||this.hot.rootDocument.body,n=t=>(t.addLocalHook("accept",()=>_c(Rc,this,Nc).call(this,"accept")),t.addLocalHook("cancel",()=>_c(Rc,this,Nc).call(this,"cancel")),t.addLocalHook("change",e=>_c(Rc,this,jc).call(this,t,e)),t),i=()=>this.hot.getTranslatedPhrase(ut.FILTERS_DIVS_FILTER_BY_CONDITION)+":",r=()=>this.hot.getTranslatedPhrase(ut.FILTERS_DIVS_FILTER_BY_VALUE)+":";if(!this.components.get("filter_by_condition")){const t=new Za(this.hot,{id:"filter_by_condition",name:i,addSeparator:!1,menuContainer:e});t.addLocalHook("afterClose",()=>_c(Rc,this,Hc).call(this)),this.components.set("filter_by_condition",n(t))}if(this.components.get("filter_operators")||this.components.set("filter_operators",new fl(this.hot,{id:"filter_operators",name:"Operators"})),!this.components.get("filter_by_condition2")){const t=new Za(this.hot,{id:"filter_by_condition2",name:"",addSeparator:!0,menuContainer:e});t.addLocalHook("afterClose",()=>_c(Rc,this,Hc).call(this)),this.components.set("filter_by_condition2",n(t))}if(this.components.get("filter_by_value")||this.components.set("filter_by_value",n(new ql(this.hot,{id:"filter_by_value",name:r}))),this.components.get("filter_action_bar")||this.components.set("filter_action_bar",n(new ic(this.hot,{id:"filter_action_bar",name:"Action bar"}))),this.conditionCollection||(this.conditionCollection=new lc(this.hot)),this.conditionUpdateObserver||(this.conditionUpdateObserver=new wc(this.hot,this.conditionCollection,t=>this.getDataMapAtColumn(t)),this.conditionUpdateObserver.addLocalHook("update",t=>_c(Rc,this,Pc).call(this,t))),this.components.forEach(t=>t.show()),this.addHook("afterDropdownMenuDefaultOptions",t=>_c(Rc,this,Ac).call(this,t)),this.addHook("afterDropdownMenuShow",()=>_c(Rc,this,Ic).call(this)),this.addHook("afterDropdownMenuHide",()=>_c(Rc,this,kc).call(this)),this.addHook("afterChange",t=>_c(Rc,this,xc).call(this,t)),this.hot.getSettings().dropdownMenu&&this.dropdownMenuPlugin&&(this.dropdownMenuPlugin.disablePlugin(),this.dropdownMenuPlugin.enablePlugin()),!Tc(Ec,this)&&this.dropdownMenuPlugin.enabled){const t=this.dropdownMenuPlugin.menu,e=[{focus:()=>{const e=t.getNavigator(),n=Tc(Ec,this).getLastMenuPage();t.focus(),n>0?e.setCurrentPage(n):e.toFirstItem()}},...Array.from(this.components).map(t=>{let[,e]=t;return e.getElements()}).flat()];o=Ec,s=this,a=vc(t,e),o.set(_c(o,s),a);const n=t=>{Tc(Ec,this).listen(),t.preventDefault(),Object(d.d)(t.keyCode,"TAB")&&(t.shiftKey?Tc(Ec,this).toPreviousItem():Tc(Ec,this).toNextItem())};this.components.get("filter_by_value").addLocalHook("listTabKeydown",n),this.components.get("filter_by_condition").addLocalHook("selectTabKeydown",n)}var o,s,a;this.registerShortcuts(),super.enablePlugin()}disablePlugin(){var t;this.enabled&&(null!==(t=this.dropdownMenuPlugin)&&void 0!==t&&t.enabled&&this.dropdownMenuPlugin.menu.clearLocalHooks(),this.components.forEach((t,e)=>{t.destroy(),this.components.set(e,null)}),this.conditionCollection.destroy(),this.conditionCollection=null,this.hot.rowIndexMapper.unregisterMap(this.pluginName));this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Alt","A"]],stopPropagation:!0,callback:()=>{const t=this.hot.getSelected();this.clearConditions(),this.filter(),t&&this.hot.selectCells(t)},group:"filters"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup("filters")}addCondition(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"conjunction";const r=this.hot.toPhysicalColumn(t);this.conditionCollection.addCondition(r,{command:{key:e},args:n},i)}removeConditions(t){const e=this.hot.toPhysicalColumn(t);this.conditionCollection.removeConditions(e)}clearConditions(t){if(void 0===t)this.conditionCollection.clean();else{const e=this.hot.toPhysicalColumn(t);this.conditionCollection.removeConditions(e)}}filter(){const{navigableHeaders:t}=this.hot.getSettings(),e=this._createDataFilter(),n=!this.conditionCollection.isEmpty();let i=[];const r=this.conditionCollection.exportAllConditions();if(!1!==this.hot.runHooks("beforeFilter",r,this.conditionCollection.previousConditionStack))if(n){const n=[];this.hot.batchExecution(()=>{this.filtersRowsMap.clear(),i=Object(c.c)(e.filter(),t=>t.meta.visualRow);const t=yl(i);Object(bt.d)(this.hot.countSourceRows()-1,e=>{t(e)||n.push(e)}),Object(c.a)(n,t=>{this.filtersRowsMap.setValueAtIndex(t,!0)})},!0),t||i.length||this.hot.deselectCell()}else this.filtersRowsMap.clear();this.hot.runHooks("afterFilter",r),this.conditionCollection.setPreviousConditionStack(null),this.hot.view.adjustElementsSize(),this.hot.render(),this.hot.selection.isSelected()&&this.hot.selectCell(t?-1:0,this.hot.getSelectedRangeLast().highlight.col)}getSelectedColumn(){var t;const e=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return e?{visualIndex:e.col,physicalIndex:this.hot.toPhysicalColumn(e.col)}:null}getDataMapAtColumn(t){const e=this.hot.toVisualColumn(t),n=[];return Object(c.a)(this.hot.getSourceDataAtCol(e),(t,i)=>{var r;const{row:o,col:s,visualCol:a,visualRow:l,type:c,instance:u,dateFormat:h,locale:d}=this.hot.getCellMeta(i,e),f=null!==(r=this.hot.getDataAtCell(this.hot.toVisualRow(i),e))&&void 0!==r?r:t;n.push({meta:{row:o,col:s,visualCol:a,visualRow:l,type:c,instance:u,dateFormat:h,locale:d},value:wl(f)})}),n}updateValueComponentCondition(t){const e=vl(this.hot.getDataAtCol(t));this.conditionUpdateObserver.updateStatesAtColumn(t,e)}restoreComponents(t){var e;const n=null===(e=this.getSelectedColumn())||void 0===e?void 0:e.physicalIndex;t.forEach(t=>{t.isHidden()||t.restoreState(n)}),this.updateDependentComponentsVisibility()}getOperationBasedOnArguments(t,e,n,i){let r=t;return"disjunction"===r&&"none"!==e.command.key&&"none"!==n.command.key&&"none"!==i.command.key?r="disjunctionWithExtraCondition":"none"!==i.command.key&&("none"!==e.command.key&&"none"!==n.command.key||(r="conjunction")),r}setListeningDropdownMenu(){this.dropdownMenuPlugin&&this.dropdownMenuPlugin.setListening()}updateDependentComponentsVisibility(){const t=this.components.get("filter_by_condition"),{command:e}=t.getState(),n=[this.components.get("filter_by_condition2"),this.components.get("filter_operators")];e.showOperators?this.showComponents(...n):this.hideComponents(...n)}_createDataFilter(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.conditionCollection;return new uc(t,t=>this.getDataMapAtColumn(t))}getIndexesOfComponents(){const t=[];if(!this.dropdownMenuPlugin)return t;const e=this.dropdownMenuPlugin.menu;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return Object(c.a)(i,n=>{Object(c.a)(e.menuItems,(e,i)=>{e.key===n.getMenuItemDescriptor().key&&t.push(i)})}),t}changeComponentsVisibility(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.dropdownMenuPlugin)return;const e=this.dropdownMenuPlugin.menu.hotMenu,n=e.getPlugin("hiddenRows");for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];const s=this.getIndexesOfComponents(...r);t?n.showRows(s):n.hideRows(s),e.render()}hideComponents(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.changeComponentsVisibility(!1,...e)}showComponents(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.changeComponentsVisibility(!0,...e)}destroy(){this.enabled&&(this.components.forEach((t,e)=>{null!==t&&(t.destroy(),this.components.set(e,null))}),this.conditionCollection.destroy(),this.conditionUpdateObserver.destroy(),this.hot.rowIndexMapper.unregisterMap(this.pluginName)),super.destroy()}}function xc(t){t&&Object(c.a)(t,t=>{const[,e]=t,n=this.hot.propToCol(e);this.conditionCollection.hasConditions(n)&&this.updateValueComponentCondition(n)})}function Ic(){const t=this.dropdownMenuPlugin.menu;this.restoreComponents(Array.from(this.components.values())),t.updateMenuDimensions()}function kc(){this.components.get("filter_by_condition").getSelectElement().closeOptions(),this.components.get("filter_by_condition2").getSelectElement().closeOptions()}function Ac(t){t.items.push({name:Ji}),this.components.forEach(e=>{t.items.push(e.getMenuItemDescriptor())})}function Nc(t){var e;if("accept"===t){const t=this.getSelectedColumn();var n;if(null===t)return void(null===(n=this.dropdownMenuPlugin)||void 0===n||n.close());const{physicalIndex:e}=t,i=this.components.get("filter_by_condition").getState(),r=this.components.get("filter_by_condition2").getState(),o=this.components.get("filter_by_value").getState(),s=this.getOperationBasedOnArguments(this.components.get("filter_operators").getActiveOperationId(),i,r,o);this.conditionUpdateObserver.groupChanges();let a=this.conditionCollection.getColumnStackPosition(e);-1===a&&(a=void 0),this.conditionCollection.removeConditions(e),"none"!==i.command.key&&(this.conditionCollection.addCondition(e,i,s,a),"none"!==r.command.key&&this.conditionCollection.addCondition(e,r,s,a)),"none"!==o.command.key&&this.conditionCollection.addCondition(e,o,s,a),this.conditionUpdateObserver.flush(),this.components.forEach(t=>t.saveState(e)),this.filtersRowsMap.clear(),this.filter()}null===(e=this.dropdownMenuPlugin)||void 0===e||e.close()}function jc(t,e){this.updateDependentComponentsVisibility(),t.constructor!==Za||e.inputsCount||this.setListeningDropdownMenu()}function Hc(){this.setListeningDropdownMenu()}function Dc(t,e){const n=this.hot.toPhysicalColumn(t);this.enabled&&this.conditionCollection.hasConditions(n)?Object(r.a)(e,"htFiltersActive"):Object(r.P)(e,"htFiltersActive")}function Pc(t){var e;if(null===(e=this.dropdownMenuPlugin)||void 0===e||!e.enabled)return;const{editedConditionStack:{conditions:n,column:i}}=t,r=n.filter(t=>"by_value"===t.name),o=n.filter(t=>"by_value"!==t.name);if(r.length>=2||o.length>=3)Object(mn.b)(gi.a`The filter conditions have been applied properly, but couldn’t be displayed visually.\x20
        The overall amount of conditions exceed the capability of the dropdown menu.\x20
        For more details see the documentation.`);else{const e=this.conditionCollection.getOperation(i);this.components.get("filter_by_condition").updateState(o[0],i),this.components.get("filter_by_condition2").updateState(o[1],i),this.components.get("filter_operators").updateState(e,i),this.components.get("filter_by_value").updateState(t)}}const Lc={licenseKey:"internal-use-in-handsontable",useArrayArithmetic:!0,useColumnIndex:!1,useStats:!1,evaluateNullToZero:!0,precisionEpsilon:1e-13,precisionRounding:14,smartRounding:!0,leapYear1900:!1,nullDate:{year:1899,month:12,day:30},nullYear:30,dateFormats:["DD/MM/YYYY","DD/MM/YY"],timeFormats:["hh:mm","hh:mm:ss.sss"],matchWholeCell:!0,useRegularExpressions:!1,useWildcards:!0,functionArgSeparator:",",thousandSeparator:"",decimalSeparator:".",language:"enGB"};function Fc(t){var e;return{maxColumns:t.maxColumns,maxRows:t.maxRows,language:null===(e=t[xu])||void 0===e||null===(e=e.language)||void 0===e?void 0:e.langCode}}function Bc(t){return Object.keys(t).reduce((e,n)=>("hyperformula"!==n&&(e[n]=t[n]),e),{})}function Vc(){const t=Object(Ln.a)(xu);return t.hasItem("engine_relationship")||t.register("engine_relationship",new Map),t.getItem("engine_relationship")}function Uc(){const t=Object(Ln.a)(xu);return t.hasItem("shared_engine_usage")||t.register("shared_engine_usage",new Map),t.getItem("shared_engine_usage")}function Wc(t){const e=t.getSettings(),n=e[xu],i=null===n||void 0===n?void 0:n.engine;if(!0===n)return null;if(Object(u.e)(i))return null;var r;if("function"===typeof i.hyperformula||"function"===typeof i)return function(t,e,n){const i=e[xu],r=function(t){var e;const n=t[xu],i=Bc(null!==n&&void 0!==n&&null!==(e=n.engine)&&void 0!==e&&e.hyperformula?n.engine:{}),r=Fc(t);return{...Lc,...i,...r}}(e),o=Vc(),s=Uc();(function(t,e){e&&e.forEach(e=>{const{name:n,plugin:i,translations:r}=e;try{t.registerFunction(n,i,r)}catch(o){Object(mn.b)(o.message)}})})(t,i.functions),function(t,e){if(e){const{langCode:i}=e;try{t.registerLanguage(i,e)}catch(n){Object(mn.b)(n.message)}}}(t,i.language);const a=t.buildEmpty(r);return o.set(a,[n]),s.set(a,[n.guid]),function(t,e){e&&(t.suspendEvaluation(),e.forEach(e=>{const{name:n,expression:i,scope:r,options:o}=e;try{t.addNamedExpression(n,i,r,o)}catch(s){Object(mn.b)(s.message)}}),t.resumeEvaluation())}(a,i.namedExpressions),a.on("sheetAdded",()=>{a.rebuildAndRecalculate()}),a.on("sheetRemoved",()=>{a.rebuildAndRecalculate()}),a}(null!==(r=i.hyperformula)&&void 0!==r?r:i,e,t);if("object"===typeof i&&Object(u.e)(i.hyperformula)){const e=Vc(),n=Uc().get(i);return e.has(i)||e.set(i,[]),e.get(i).push(t),n&&n.push(t.guid),i.getConfig().licenseKey||i.updateConfig({licenseKey:"internal-use-in-handsontable"}),i.getConfig().leapYear1900===Lc.leapYear1900&&!1!==Object(s.m)(i.getConfig().nullDate,Lc.nullDate)||Object(mn.b)(gi.a`If you use HyperFormula with Handsontable, keep the default \`leapYear1900\` and \`nullDate\` 
      settings. Otherwise, HyperFormula's dates may not sync correctly with Handsontable's dates.`),i}return null}function zc(t){var e;const n=Vc(),i=0===n.size?[]:Array.from(null!==(e=n.get(t))&&void 0!==e?e:[]);return new Map(i.map(t=>[t.getPlugin("formulas").sheetId,t]))}function Yc(t,e){if(t){const n=Vc(),i=n.get(t),r=Uc(),o=r.get(t);i&&i.includes(e)&&(i.splice(i.indexOf(e),1),0===i.length&&n.delete(t)),o&&o.includes(e.guid)&&(o.splice(o.indexOf(e.guid),1),0===o.length&&(r.delete(t),t.destroy()))}}function Gc(t,e){return!Object(u.e)(e)&&t.doesSheetExist(e)||(e=t.addSheet(e)),e}function $c(t){return"string"===typeof t&&"'"===t.charAt(0)&&"="===t.charAt(1)}function Kc(t,e){return"string"===typeof t&&"date"===e}function Xc(t,e){return O(t,e,!0).isValid()}function qc(t,e){return O(t,e,!0).format("DD/MM/YYYY")}function Qc(t,e){const n=new Date(Date.UTC(0,0,t+-1));return O(n).format(e)}function Zc(t,e,n){return function(t){return t.forEach((e,n)=>{t.slice(n+1).forEach(t=>{const n=t.from<t.to;t.from>e.from&&n&&(t.from-=1)})}),t}(function(t,e){const n=[];return t.forEach(t=>{const i={from:t,to:e};n.forEach(t=>{const e=t.from>t.to,n=t.to<=i.from;t.from>i.from&&n&&e&&(i.from+=1)}),i.from>=e&&(e+=1),n.push(i)}),n}(t,function(t,e,n){const i=Array.from(Array(n).keys()).filter(e=>!1===t.includes(e));var r;return 0===e?null!==(r=i[e])&&void 0!==r?r:0:i[e-1]+1}(t,e,n)))}function Jc(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function tu(t,e){return t.get(nu(t,e))}function eu(t,e,n){return t.set(nu(t,e),n),n}function nu(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var iu=new WeakMap,ru=new WeakMap,ou=new WeakMap,su=new WeakMap,au=new WeakMap,lu=new WeakMap,cu=new WeakMap;var uu=class{constructor(t,e,n){Jc(this,iu,void 0),Jc(this,ru,void 0),Jc(this,ou,void 0),Jc(this,su,[]),Jc(this,au,[]),Jc(this,lu,void 0),Jc(this,cu,[]),eu(iu,this,t),eu(ru,this,e),eu(ou,this,n)}setRemovedHfIndexes(t){return eu(cu,this,t.map(t=>{const e=tu(ru,this).getVisualFromPhysicalIndex(t);return this.getHfIndexFromVisualIndex(e)})),tu(cu,this)}getRemovedHfIndexes(){return tu(cu,this)}getHfIndexFromVisualIndex(t){const e=tu(ru,this).getIndexesSequence(),n=tu(ru,this).getNotTrimmedIndexes();return e.indexOf(n[t])}syncMoves(t){const e=`move${Object(h.f)(tu(iu,this))}s`;tu(ou,this).getEngine().batch(()=>{t.forEach(t=>{const n=t.from!==t.to,i=t.from+1!==t.to;n&&i&&tu(ou,this).getEngine()[e](tu(ou,this).getSheetId(),t.from,1,t.to)})})}storeMovesInformation(t,e,n){!1!==n&&(eu(au,this,t.map(t=>this.getHfIndexFromVisualIndex(t))),eu(lu,this,this.getHfIndexFromVisualIndex(e)))}calculateAndSyncMoves(t,e){if(tu(ou,this).isPerformingUndoRedo())return;if(!1===t||!1===e)return;const n=Zc(tu(au,this),tu(lu,this),tu(ru,this).getNumberOfIndexes());null===tu(ou,this).getSheetId()?tu(ou,this).getPostponeAction(()=>this.syncMoves(n)):this.syncMoves(n)}getIndexesChangeSyncMethod(){const t=`set${Object(h.f)(tu(iu,this))}Order`;return e=>{if(tu(ou,this).isPerformingUndoRedo())return;const n=tu(ru,this).getIndexesSequence();if("update"===e&&n.length>0){const e=tu(su,this).map(t=>n.indexOf(t)),i=tu(ou,this).getEngine().getSheetDimensions(tu(ou,this).getSheetId());let r;r="row"===tu(iu,this)?i.height:i.width;for(let t=e.length;t<r;t+=1)e.push(t);tu(ou,this).getEngine()[t](tu(ou,this).getSheetId(),e)}eu(su,this,n)}}init(){eu(su,this,tu(ru,this).getIndexesSequence())}};function hu(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function du(t,e){return t.get(gu(t,e))}function fu(t,e,n){return t.set(gu(t,e),n),n}function gu(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var pu=new WeakMap,mu=new WeakMap,bu=new WeakMap,yu=new WeakMap,wu=new WeakMap,vu=new WeakMap,Cu=new WeakMap;var Su=class{constructor(t,e,n){hu(this,pu,void 0),hu(this,mu,void 0),hu(this,bu,void 0),hu(this,yu,!1),hu(this,wu,!1),hu(this,vu,null),hu(this,Cu,null),fu(pu,this,new uu("row",t,this)),fu(mu,this,new uu("column",e,this)),fu(bu,this,n)}getForAxis(t){return du("row"===t?pu:mu,this)}setPerformUndo(t){fu(yu,this,t)}setPerformRedo(t){fu(wu,this,t)}isPerformingUndoRedo(){return du(yu,this)||du(wu,this)}getSheetId(){return du(Cu,this)}getEngine(){return du(vu,this)}getPostponeAction(){return du(bu,this)}setupSyncEndpoint(t,e){fu(vu,this,t),fu(Cu,this,e),du(pu,this).init(),du(mu,this).init()}};function Ou(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tu(t,e,n){_u(t,e),e.set(t,n)}function _u(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Eu(t,e,n){return t.set(Mu(t,e),n),n}function Ru(t,e){return t.get(Mu(t,e))}function Mu(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}const xu="formulas",Iu=["maxRows","maxColumns","language"];Z.a.getSingleton().register("afterNamedExpressionAdded"),Z.a.getSingleton().register("afterNamedExpressionRemoved"),Z.a.getSingleton().register("afterSheetAdded"),Z.a.getSingleton().register("afterSheetRemoved"),Z.a.getSingleton().register("afterSheetRenamed"),Z.a.getSingleton().register("afterFormulasValuesUpdate");const ku=t=>"UndoRedo.undo"===t||"UndoRedo.redo"===t||"auto"===t;var Au=new WeakMap,Nu=new WeakMap,ju=new WeakMap,Hu=new WeakSet;class Du extends te{constructor(){var t,e,n;super(...arguments),t=this,_u(e=this,n=Hu),n.add(e),Tu(this,Au,!1),Tu(this,Nu,!1),Tu(this,ju,[["valuesUpdated",function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Mu(Hu,t,eh).call(t,...n)}],["namedExpressionAdded",function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Mu(Hu,t,nh).call(t,...n)}],["namedExpressionRemoved",function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Mu(Hu,t,ih).call(t,...n)}],["sheetAdded",function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Mu(Hu,t,rh).call(t,...n)}],["sheetRenamed",function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Mu(Hu,t,oh).call(t,...n)}],["sheetRemoved",function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Mu(Hu,t,sh).call(t,...n)}]]),Ou(this,"staticRegister",Object(Ln.a)("formulas")),Ou(this,"engine",null),Ou(this,"sheetName",null),Ou(this,"indexSyncer",null),Ou(this,"rowAxisSyncer",null),Ou(this,"columnAxisSyncer",null)}static get PLUGIN_KEY(){return xu}static get PLUGIN_PRIORITY(){return 260}static get SETTING_KEYS(){return[xu,...Iu]}get sheetId(){return null===this.sheetName?null:this.engine.getSheetId(this.sheetName)}isEnabled(){return!!this.hot.getSettings()[xu]}enablePlugin(){var t,e=this;if(!this.enabled)if(this.engine=null!==(t=Wc(this.hot))&&void 0!==t?t:this.engine,this.engine){if(null!==this.sheetName&&!this.engine.doesSheetExist(this.sheetName)){const t=this.addSheet(this.sheetName,this.hot.getSourceDataArray());!1!==t&&(this.sheetName=t)}this.addHook("beforeLoadData",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,Fu).call(e,...n)})),this.addHook("afterLoadData",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,Vu).call(e,...n)})),this.addHook("beforeUpdateData",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,Fu).call(e,...n)})),this.addHook("afterUpdateData",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,Vu).call(e,...n)})),this.addHook("modifyData",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,Uu).call(e,...n)})),this.addHook("modifySourceData",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,Wu).call(e,...n)})),this.addHook("beforeValidate",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,Pu).call(e,...n)})),this.addHook("afterSetSourceDataAtCell",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,Yu).call(e,...n)})),this.addHook("afterSetDataAtCell",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,zu).call(e,...n)})),this.addHook("afterSetDataAtRowProp",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,zu).call(e,...n)})),this.addHook("beforeCreateRow",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,Gu).call(e,...n)})),this.addHook("beforeCreateCol",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,$u).call(e,...n)})),this.addHook("afterCreateRow",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,qu).call(e,...n)})),this.addHook("afterCreateCol",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,Qu).call(e,...n)})),this.addHook("beforeRemoveRow",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,Ku).call(e,...n)})),this.addHook("beforeRemoveCol",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,Xu).call(e,...n)})),this.addHook("afterRemoveRow",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,Zu).call(e,...n)})),this.addHook("afterRemoveCol",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,Ju).call(e,...n)})),this.indexSyncer=new Su(this.hot.rowIndexMapper,this.hot.columnIndexMapper,t=>{this.hot.addHookOnce("init",()=>{t()})}),this.rowAxisSyncer=this.indexSyncer.getForAxis("row"),this.columnAxisSyncer=this.indexSyncer.getForAxis("column"),this.hot.addHook("afterRowSequenceChange",this.rowAxisSyncer.getIndexesChangeSyncMethod()),this.hot.addHook("afterColumnSequenceChange",this.columnAxisSyncer.getIndexesChangeSyncMethod()),this.hot.addHook("beforeRowMove",(t,e,n,i)=>{this.rowAxisSyncer.storeMovesInformation(t,e,i)}),this.hot.addHook("beforeColumnMove",(t,e,n,i)=>{this.columnAxisSyncer.storeMovesInformation(t,e,i)}),this.hot.addHook("afterRowMove",(t,e,n,i,r)=>{this.rowAxisSyncer.calculateAndSyncMoves(i,r)}),this.hot.addHook("afterColumnMove",(t,e,n,i,r)=>{this.columnAxisSyncer.calculateAndSyncMoves(i,r)}),this.hot.addHook("beforeColumnFreeze",(t,e)=>{this.columnAxisSyncer.storeMovesInformation([t],this.hot.getSettings().fixedColumnsStart,e)}),this.hot.addHook("afterColumnFreeze",(t,e)=>{this.columnAxisSyncer.calculateAndSyncMoves(e,e)}),this.hot.addHook("beforeColumnUnfreeze",(t,e)=>{this.columnAxisSyncer.storeMovesInformation([t],this.hot.getSettings().fixedColumnsStart-1,e)}),this.hot.addHook("afterColumnUnfreeze",(t,e)=>{this.columnAxisSyncer.calculateAndSyncMoves(e,e)}),this.addHook("afterCellMetaReset",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,Bu).call(e,...n)})),this.addHook("beforeUndo",()=>{this.indexSyncer.setPerformUndo(!0),this.engine.undo()}),this.addHook("beforeRedo",()=>{this.indexSyncer.setPerformRedo(!0),this.engine.redo()}),this.addHook("afterUndo",()=>{this.indexSyncer.setPerformUndo(!1)}),this.addHook("afterUndo",()=>{this.indexSyncer.setPerformRedo(!1)}),this.addHook("afterDetachChild",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,th).call(e,...n)})),this.addHook("beforeAutofill",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mu(Hu,e,Lu).call(e,...n)})),Ru(ju,this).forEach(t=>{let[e,n]=t;return this.engine.on(e,n)}),super.enablePlugin()}else Object(mn.b)("Missing the required `engine` key in the Formulas settings. Please fill it with either an engine class or an engine instance.")}disablePlugin(){Ru(ju,this).forEach(t=>{let[e,n]=t;return this.engine.off(e,n)}),Yc(this.engine,this.hot),this.engine=null,super.disablePlugin()}updatePlugin(t){const e=function(t){var e;const n=t[xu];return{...Bc(null!==n&&void 0!==n&&null!==(e=n.engine)&&void 0!==e&&e.hyperformula?n.engine:{}),...Fc(t)}}(this.hot.getSettings());(function(t,e){return Object.keys(e).some(n=>void 0!==e[n]&&e[n]!==t[n])})(this.engine.getConfig(),e)&&this.engine.updateConfig(e);const n=this.hot.getSettings()[xu];if(Object(u.b)(n)&&Object(u.b)(n.sheetName)&&n.sheetName!==this.sheetName&&this.switchSheet(n.sheetName),!t.data&&null===this.sheetName){const t=this.hot.getSettings()[xu].sheetName;t&&this.engine.doesSheetExist(t)?this.switchSheet(this.sheetName):this.sheetName=this.addSheet(null!==t&&void 0!==t?t:void 0,this.hot.getSourceDataArray())}super.updatePlugin(t)}destroy(){Ru(ju,this).forEach(t=>{var e;let[n,i]=t;return null===(e=this.engine)||void 0===e?void 0:e.off(n,i)}),Eu(ju,this,null),Yc(this.engine,this.hot),this.engine=null,super.destroy()}addSheet(t,e){if(Object(u.b)(e)&&!Object(Sl.c)(e))return Object(mn.b)("The provided data should be an array of arrays."),!1;if(void 0!==t&&null!==t&&this.engine.doesSheetExist(t))return Object(mn.b)("Sheet with the provided name already exists."),!1;try{const n=this.engine.addSheet(null!==t&&void 0!==t?t:void 0);return e&&this.engine.setSheetContent(this.engine.getSheetId(n),e),n}catch(n){return Object(mn.b)(n.message),!1}}switchSheet(t){if(!this.engine.doesSheetExist(t))return void Object(mn.a)(`The sheet named \`${t}\` does not exist, switch aborted.`);this.sheetName=t;const e=this.engine.getSheetSerialized(this.sheetId);e.length>0&&this.hot.loadData(e,Object(h.f)(xu)+".switchSheet")}getCellType(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.sheetId;const i=this.hot.toPhysicalRow(t),r=this.hot.toPhysicalColumn(e);return null!==i&&null!==r?this.engine.getCellType({sheet:n,row:this.rowAxisSyncer.getHfIndexFromVisualIndex(t),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(e)}):"EMPTY"}isFormulaCellType(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.sheetId;return this.engine.doesCellHaveFormula({sheet:n,row:this.rowAxisSyncer.getHfIndexFromVisualIndex(t),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(e)})}renderDependentSheets(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=new Set;t.forEach(t=>{var e;const i=null===t||void 0===t||null===(e=t.address)||void 0===e?void 0:e.sheet;void 0!==i&&(n.has(i)||n.add(i))}),zc(this.engine).forEach((t,i)=>{var r;(e||i!==this.sheetId)&&n.has(i)&&(t.render(),null===(r=t.view)||void 0===r||r.adjustElementsSize())})}validateDependentCells(t){const e=t=>{var e;const{row:n,col:i,sheet:r}=null!==(e=null===t||void 0===t?void 0:t.address)&&void 0!==e?e:{};return Object(u.b)(r)?`${r}:${n}x${i}`:""},n=new Set((arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map(t=>e(t)));t.forEach(t=>{var i,r;const{row:o,col:s}=null!==(i=t.address)&&void 0!==i?i:{};if(!1===Object(u.b)(o)||!1===Object(u.b)(s)||o>=this.hot.countRows()||s>=this.hot.countCols())return;const a=null===t||void 0===t||null===(r=t.address)||void 0===r?void 0:r.sheet,l=e(t);if(void 0!==a&&!n.has(l)){const t=zc(this.engine).get(a);if(!t)return;t.validateCell(t.getDataAtCell(o,s),t.getCellMeta(o,s),()=>{})}})}syncChangeWithEngine(t,e,n){const i={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(t),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(e),sheet:this.sheetId};if(!this.engine.isItPossibleToSetCellContents(i))return void Object(mn.b)("Not possible to set cell data at "+JSON.stringify(i));const r=this.hot.getCellMeta(t,e);var o;return Kc(n,r.type)&&(Xc(n,r.dateFormat)?n=qc(n,r.dateFormat):!1===("string"===typeof(o=n)&&o.startsWith("="))&&(n="'"+n)),this.engine.setCellContents(i,n)}}function Pu(t,e,n){const i=this.hot.propToCol(n);if(this.isFormulaCellType(e,i)){const t={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(i),sheet:this.sheetId},n=this.hot.getCellMeta(e,i);let r=this.engine.getCellValue(t);return"date"===n.type&&Object(bt.b)(r)&&(r=Qc(r,n.dateFormat)),"object"===typeof r&&null!==r?r.value:r}return t}function Lu(t,e,n){const{row:i,col:r}=e.getTopStartCorner(),{row:o,col:s}=e.getBottomEndCorner(),{row:a,col:l}=n.getTopStartCorner(),{row:c,col:u}=n.getBottomEndCorner(),h={start:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(i),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(r),sheet:this.sheetId},end:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(o),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(s),sheet:this.sheetId}},d={start:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(a),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(l),sheet:this.sheetId},end:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(c),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(u),sheet:this.sheetId}};if(!1===this.engine.isItPossibleToSetCellContents(d))return!1;const f=this.engine.getFillRangeData(h,d),{row:g,col:p}=h.start,{row:m,col:b}=h.end,y=m-g+1,w=b-p+1;for(let S=0;S<f.length;S+=1)for(let t=0;t<f[S].length;t+=1){const e=f[S][t],n=g+S%y,i=p+t%w,r=this.hot.getCellMeta(n,i);Kc(e,r.type)&&(e.startsWith("'")?f[S][t]=e.slice(1):!1===this.isFormulaCellType(n,i,this.sheetId)&&(f[S][t]=(v=e,C=r.dateFormat,O(v,"DD/MM/YYYY",!0).format(C))))}var v,C;return f}function Fu(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";n.includes(Object(h.f)(xu))||Eu(Nu,this,Object(u.e)(this.hot.getSettings().data))}function Bu(){const t=this.hot.getSourceDataArray();let e=!1;t.forEach((n,i)=>{n.forEach((n,r)=>{const o=this.hot.getCellMeta(i,r),s=o.dateFormat;Kc(n,o.type)&&(e=!0,Xc(n,s)?t[i][r]=qc(n,s):!1===this.isFormulaCellType(i,r)&&(t[i][r]="'"+n))})}),!0===e&&(Eu(Au,this,!0),this.engine.setSheetContent(this.sheetId,t),Eu(Au,this,!1))}function Vu(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!n.includes(Object(h.f)(xu)))if(this.sheetName=Gc(this.engine,this.hot.getSettings()[xu].sheetName),Ru(Nu,this))this.switchSheet(this.sheetName);else{const t=this.hot.getSourceDataArray();if(this.engine.isItPossibleToReplaceSheetContent(this.sheetId,t)){Eu(Au,this,!0);const e=this.engine.setSheetContent(this.sheetId,t);this.indexSyncer.setupSyncEndpoint(this.engine,this.sheetId),this.renderDependentSheets(e),Eu(Au,this,!1)}}}function Uu(t,e,n,i){if("get"!==i||Ru(Au,this)||null===this.sheetName||!this.engine.doesSheetExist(this.sheetName))return;const r=this.hot.toVisualRow(t);if(null===r||null===e)return;if(!this.isFormulaCellType(r,e)){if("ARRAY"!==this.getCellType(r,e))return void($c(n.value)&&(n.value=$c(o=n.value)?o.substr(1):o))}var o;const s={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(r),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(e),sheet:this.sheetId};let a=this.engine.getCellValue(s),l=this.hot.getCellsMeta().find(t=>t.visualRow===r&&t.visualCol===e);void 0===l&&(l={}),"date"===l.type&&Object(bt.b)(a)&&(a=Qc(a,l.dateFormat));const c="object"===typeof a&&null!==a?a.value:a;n.value=c}function Wu(t,e,n,i){if("get"!==i||Ru(Au,this)||null===this.sheetName||!this.engine.doesSheetExist(this.sheetName))return;const r=this.hot.toVisualRow(t),o=this.hot.propToCol(e);if(null===r||null===o)return;if(!this.isFormulaCellType(r,o)){if("ARRAY"!==this.getCellType(r,o))return}const s=this.engine.getSheetDimensions(this.engine.getSheetId(this.sheetName));if(0===s.width&&0===s.height)return;const a={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(r),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(o),sheet:this.sheetId};n.value=this.engine.getCellSerialized(a)}function zu(t,e){if(ku(e))return;const n=[],i=[],r=this.engine.batch(()=>{t.forEach(t=>{let[e,r,,o]=t;const s=this.hot.propToCol(r),a=this.hot.toPhysicalRow(e),l=this.hot.toPhysicalColumn(s),c={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(s),sheet:this.sheetId};null!==a&&null!==l?this.syncChangeWithEngine(e,s,o):n.push([e,s,o]),i.push({address:c})})});n.length&&this.hot.addHookOnce("afterChange",()=>{const t=this.engine.batch(()=>{n.forEach(t=>{let[e,n,i]=t;this.syncChangeWithEngine(e,n,i)})});this.renderDependentSheets(t,!0)}),this.renderDependentSheets(r),this.validateDependentCells(r,i)}function Yu(t,e){if(ku(e))return;const n=[],i=[];t.forEach(t=>{let[e,r,,o]=t;const s=this.hot.propToCol(r);if(!Object(bt.b)(s))return;const a={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(s),sheet:this.sheetId};this.engine.isItPossibleToSetCellContents(a)?(i.push({address:a}),n.push(...this.engine.setCellContents(a,o))):Object(mn.b)("Not possible to set source cell data at "+JSON.stringify(a))}),this.renderDependentSheets(n),this.validateDependentCells(n,i)}function Gu(t,e){let n=this.rowAxisSyncer.getHfIndexFromVisualIndex(t);if(t>=this.hot.countRows()&&(n=t),null===this.sheetId||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddRows(this.sheetId,[n,e]))return!1}function $u(t,e){let n=this.columnAxisSyncer.getHfIndexFromVisualIndex(t);if(t>=this.hot.countCols()&&(n=t),null===this.sheetId||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddColumns(this.sheetId,[n,e]))return!1}function Ku(t,e,n){return!1!==this.rowAxisSyncer.setRemovedHfIndexes(n).every(t=>this.engine.isItPossibleToRemoveRows(this.sheetId,[t,1]))&&void 0}function Xu(t,e,n){return!1!==this.columnAxisSyncer.setRemovedHfIndexes(n).every(t=>this.engine.isItPossibleToRemoveColumns(this.sheetId,[t,1]))&&void 0}function qu(t,e,n){if(ku(n))return;const i=this.engine.addRows(this.sheetId,[this.rowAxisSyncer.getHfIndexFromVisualIndex(t),e]);this.renderDependentSheets(i)}function Qu(t,e,n){if(ku(n))return;const i=this.engine.addColumns(this.sheetId,[this.columnAxisSyncer.getHfIndexFromVisualIndex(t),e]);this.renderDependentSheets(i)}function Zu(t,e,n,i){if(ku(i))return;const r=this.rowAxisSyncer.getRemovedHfIndexes().sort((t,e)=>e-t),o=this.engine.batch(()=>{r.forEach(t=>{this.engine.removeRows(this.sheetId,[t,1])})});this.renderDependentSheets(o)}function Ju(t,e,n,i){if(ku(i))return;const r=this.columnAxisSyncer.getRemovedHfIndexes().sort((t,e)=>e-t),o=this.engine.batch(()=>{r.forEach(t=>{this.engine.removeColumns(this.sheetId,[t,1])})});this.renderDependentSheets(o)}function th(t,e,n){var i;Eu(Au,this,!0);const r=this.hot.getSourceDataArray(n,0,n+((null===(i=e.__children)||void 0===i?void 0:i.length)||0),this.hot.countSourceCols());Eu(Au,this,!1),r.forEach((t,e)=>{t.forEach((t,i)=>{this.engine.setCellContents({col:i,row:n+e,sheet:this.sheetId},[[t]])})})}function eh(t){this.hot.runHooks("afterFormulasValuesUpdate",t)}function nh(t,e){this.hot.runHooks("afterNamedExpressionAdded",t,e)}function ih(t,e){this.hot.runHooks("afterNamedExpressionRemoved",t,e)}function rh(t){this.hot.runHooks("afterSheetAdded",t)}function oh(t,e){this.sheetName=e,this.hot.runHooks("afterSheetRenamed",t,e)}function sh(t,e){this.hot.runHooks("afterSheetRemoved",t,e)}var ah=n(68);function lh(t,e,n){ch(t,e),e.set(t,n)}function ch(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function uh(t,e){return t.get(dh(t,e))}function hh(t,e,n){return t.set(dh(t,e),n),n}function dh(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}Z.a.getSingleton().register("beforeHideColumns"),Z.a.getSingleton().register("afterHideColumns"),Z.a.getSingleton().register("beforeUnhideColumns"),Z.a.getSingleton().register("afterUnhideColumns");var fh=new WeakMap,gh=new WeakMap,ph=new WeakSet;class mh extends te{constructor(){var t,e;super(...arguments),ch(t=this,e=ph),e.add(t),lh(this,fh,{}),lh(this,gh,null)}static get PLUGIN_KEY(){return"hiddenColumns"}static get PLUGIN_PRIORITY(){return 310}isEnabled(){return!!this.hot.getSettings().hiddenColumns}enablePlugin(){var t=this;if(this.enabled)return;const e=this.hot.getSettings().hiddenColumns;Object(s.l)(e)&&(hh(fh,this,e),Object(u.e)(e.copyPasteEnabled)&&(e.copyPasteEnabled=!0)),hh(gh,this,new ah.a),uh(gh,this).addLocalHook("init",()=>dh(ph,this,Sh).call(this)),this.hot.columnIndexMapper.registerMap(this.pluginName,uh(gh,this)),this.addHook("afterContextMenuDefaultOptions",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return dh(ph,t,Ch).call(t,...n)})),this.addHook("afterGetCellMeta",(t,e,n)=>dh(ph,this,yh).call(this,t,e,n)),this.addHook("modifyColWidth",(t,e)=>dh(ph,this,bh).call(this,t,e),2),this.addHook("afterGetColHeader",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return dh(ph,t,vh).call(t,...n)})),this.addHook("modifyCopyableRange",t=>dh(ph,this,wh).call(this,t)),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),hh(fh,this,{}),super.disablePlugin(),this.resetCellsMeta()}showColumns(t){const e=this.getHiddenColumns(),n=this.isValidConfig(t);let i=e;const r=uh(gh,this).getValues().slice(),o=t.length>0;if(n&&o){const e=t.map(t=>this.hot.toPhysicalColumn(t));Object(c.a)(e,t=>{r[t]=!1}),i=Object(c.d)(r,(t,e,n)=>(e&&t.push(this.hot.toVisualColumn(n)),t),[])}!1!==this.hot.runHooks("beforeUnhideColumns",e,i,n&&o)&&(n&&o&&uh(gh,this).setValues(r),this.hot.view.adjustElementsSize(),this.hot.runHooks("afterUnhideColumns",e,i,n&&o,n&&i.length<e.length))}showColumn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.showColumns(e)}hideColumns(t){const e=this.getHiddenColumns(),n=this.isValidConfig(t);let i=e;n&&(i=Array.from(new Set(e.concat(t))));!1!==this.hot.runHooks("beforeHideColumns",e,i,n)&&(n&&this.hot.batchExecution(()=>{Object(c.a)(t,t=>{uh(gh,this).setValueAtIndex(this.hot.toPhysicalColumn(t),!0)})},!0),this.hot.runHooks("afterHideColumns",e,i,n,n&&i.length>e.length))}hideColumn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.hideColumns(e)}getHiddenColumns(){return Object(c.c)(uh(gh,this).getHiddenIndexes(),t=>this.hot.toVisualColumn(t))}isHidden(t){return uh(gh,this).getValueAtIndex(this.hot.toPhysicalColumn(t))||!1}isValidConfig(t){const e=this.hot.countCols();return!!(Array.isArray(t)&&t.length>0)&&t.every(t=>Number.isInteger(t)&&t>=0&&t<e)}resetCellsMeta(){Object(c.a)(this.hot.getCellsMeta(),t=>{t&&(t.skipColumnOnPaste=!1)})}destroy(){hh(fh,this,null),hh(gh,this,null),super.destroy()}}function bh(t,e){return this.isHidden(e)?0:uh(fh,this).indicators&&(this.isHidden(e+1)||this.isHidden(e-1))&&"number"===typeof t&&this.hot.hasColHeaders()?t+15:void 0}function yh(t,e,n){if(!1===uh(fh,this).copyPasteEnabled&&this.isHidden(e)&&(n.skipColumnOnPaste=!0),this.isHidden(e-1))n.className=n.className||"",-1===n.className.indexOf("afterHiddenColumn")&&(n.className+=" afterHiddenColumn");else if(n.className){const t=n.className.split(" ");if(t.length>0){const e=t.indexOf("afterHiddenColumn");e>-1&&t.splice(e,1),n.className=t.join(" ")}}}function wh(t){if(uh(fh,this).copyPasteEnabled)return t;const e=[],n=(t,n,i,r)=>{e.push({startRow:t,endRow:n,startCol:i,endCol:r})};return Object(c.a)(t,t=>{let e=!0,i=0;Object(bt.d)(t.startCol,t.endCol,r=>{this.isHidden(r)?(e||n(t.startRow,t.endRow,i,r-1),e=!0):(e&&(i=r),r===t.endCol&&n(t.startRow,t.endRow,i,r),e=!1)})}),e}function vh(t,e){if(!uh(fh,this).indicators||t<0)return;const n=[];t>=1&&this.isHidden(t-1)&&n.push("afterHiddenColumn"),t<this.hot.countCols()-1&&this.isHidden(t+1)&&n.push("beforeHiddenColumn"),Object(r.a)(e,n)}function Ch(t){var e;t.items.push({name:Ji},(e=this,{key:"hidden_columns_hide",name(){const t=this.getSelectedLast();let e=0;if(Array.isArray(t)){const[,n,,i]=t;n-i!==0&&(e=1)}return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_HIDE_COLUMN,e)},callback(){const{from:t,to:n}=this.getSelectedRangeLast(),i=Math.max(Math.min(t.col,n.col),0),r=Math.max(t.col,n.col),o=[];for(let e=i;e<=r;e+=1)o.push(e);e.hideColumns(o);const s=o[o.length-1],a=this.columnIndexMapper.getNearestNotHiddenIndex(s,1,!0);Number.isInteger(a)&&a>=0?this.selectColumns(a):this.deselectCell(),this.render(),this.view.adjustElementsSize()},disabled:!1,hidden(){return!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())}}),function(t){const e=[];return{key:"hidden_columns_show",name(){const t=e.length>1?1:0;return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_SHOW_COLUMN,t)},callback(){var n,i;if(0===e.length)return;let r=e[0],o=e[e.length-1];r=null!==(n=this.columnIndexMapper.getNearestNotHiddenIndex(r-1,-1))&&void 0!==n?n:0,o=null!==(i=this.columnIndexMapper.getNearestNotHiddenIndex(o+1,1))&&void 0!==i?i:this.countCols()-1,t.showColumns(e),this.render(),this.view.adjustElementsSize();o-r+1===this.countCols()||this.selectColumns(r,o)},disabled:!1,hidden(){const n=Object(c.c)(t.getHiddenColumns(),t=>this.toPhysicalColumn(t));if(!this.selection.isSelectedByColumnHeader()&&!this.selection.isSelectedByCorner()||n.length<1)return!0;e.length=0;const i=this.getSelectedRangeLast(),r=i.getTopStartCorner().col,o=i.getBottomEndCorner().col,s=this.columnIndexMapper,a=s.getRenderableFromVisualIndex(r),l=s.getRenderableFromVisualIndex(o),u=s.getNotTrimmedIndexes(),h=[];if(r!==o){if(o-r+1>l-a+1){const t=u.slice(r,o+1);h.push(...t.filter(t=>n.includes(t)))}}else if(0===a&&a<r)h.push(...u.slice(0,r));else if(null===a)h.push(...u.slice(0,this.countCols()));else{const t=this.countCols()-1;l===s.getRenderableFromVisualIndex(s.getNearestNotHiddenIndex(t,-1))&&t>o&&h.push(...u.slice(o+1))}return Object(c.a)(h,t=>{e.push(this.toVisualColumn(t))}),0===e.length}}}(this))}function Sh(){Array.isArray(uh(fh,this).columns)&&this.hideColumns(uh(fh,this).columns)}function Oh(t,e,n){Th(t,e),e.set(t,n)}function Th(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _h(t,e){return t.get(Rh(t,e))}function Eh(t,e,n){return t.set(Rh(t,e),n),n}function Rh(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}Z.a.getSingleton().register("beforeHideRows"),Z.a.getSingleton().register("afterHideRows"),Z.a.getSingleton().register("beforeUnhideRows"),Z.a.getSingleton().register("afterUnhideRows");var Mh=new WeakMap,xh=new WeakMap,Ih=new WeakSet;class kh extends te{constructor(){var t,e;super(...arguments),Th(t=this,e=Ih),e.add(t),Oh(this,Mh,{}),Oh(this,xh,null)}static get PLUGIN_KEY(){return"hiddenRows"}static get PLUGIN_PRIORITY(){return 320}isEnabled(){return!!this.hot.getSettings().hiddenRows}enablePlugin(){var t=this;if(this.enabled)return;const e=this.hot.getSettings().hiddenRows;Object(s.l)(e)&&(Eh(Mh,this,e),Object(u.e)(e.copyPasteEnabled)&&(e.copyPasteEnabled=!0)),Eh(xh,this,new ah.a),_h(xh,this).addLocalHook("init",()=>Rh(Ih,this,Ph).call(this)),this.hot.rowIndexMapper.registerMap(this.pluginName,_h(xh,this)),this.addHook("afterContextMenuDefaultOptions",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Rh(Ih,t,Dh).call(t,...n)})),this.addHook("afterGetCellMeta",(t,e,n)=>Rh(Ih,this,Nh).call(this,t,e,n)),this.addHook("modifyRowHeight",(t,e)=>Rh(Ih,this,Ah).call(this,t,e)),this.addHook("afterGetRowHeader",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Rh(Ih,t,Hh).call(t,...n)})),this.addHook("modifyCopyableRange",t=>Rh(Ih,this,jh).call(this,t)),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap(this.pluginName),Eh(Mh,this,{}),super.disablePlugin(),this.resetCellsMeta()}showRows(t){const e=this.getHiddenRows(),n=this.isValidConfig(t);let i=e;const r=_h(xh,this).getValues().slice(),o=t.length>0;if(n&&o){const e=t.map(t=>this.hot.toPhysicalRow(t));Object(c.a)(e,t=>{r[t]=!1}),i=Object(c.d)(r,(t,e,n)=>(e&&t.push(this.hot.toVisualRow(n)),t),[])}!1!==this.hot.runHooks("beforeUnhideRows",e,i,n&&o)&&(n&&o&&_h(xh,this).setValues(r),this.hot.runHooks("afterUnhideRows",e,i,n&&o,n&&i.length<e.length))}showRow(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.showRows(e)}hideRows(t){const e=this.getHiddenRows(),n=this.isValidConfig(t);let i=e;n&&(i=Array.from(new Set(e.concat(t))));!1!==this.hot.runHooks("beforeHideRows",e,i,n)&&(n&&this.hot.batchExecution(()=>{Object(c.a)(t,t=>{_h(xh,this).setValueAtIndex(this.hot.toPhysicalRow(t),!0)})},!0),this.hot.runHooks("afterHideRows",e,i,n,n&&i.length>e.length))}hideRow(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.hideRows(e)}getHiddenRows(){return Object(c.c)(_h(xh,this).getHiddenIndexes(),t=>this.hot.toVisualRow(t))}isHidden(t){return _h(xh,this).getValueAtIndex(this.hot.toPhysicalRow(t))||!1}isValidConfig(t){const e=this.hot.countRows();return!!(Array.isArray(t)&&t.length>0)&&t.every(t=>Number.isInteger(t)&&t>=0&&t<e)}resetCellsMeta(){Object(c.a)(this.hot.getCellsMeta(),t=>{t&&(t.skipRowOnPaste=!1)})}destroy(){Eh(Mh,this,null),Eh(xh,this,null),super.destroy()}}function Ah(t,e){return this.isHidden(e)?0:t}function Nh(t,e,n){if(!1===_h(Mh,this).copyPasteEnabled&&this.isHidden(t)&&(n.skipRowOnPaste=!0),this.isHidden(t-1))n.className=n.className||"",-1===n.className.indexOf("afterHiddenRow")&&(n.className+=" afterHiddenRow");else if(n.className){const t=n.className.split(" ");if(t.length>0){const e=t.indexOf("afterHiddenRow");e>-1&&t.splice(e,1),n.className=t.join(" ")}}}function jh(t){if(_h(Mh,this).copyPasteEnabled)return t;const e=[],n=(t,n,i,r)=>{e.push({startRow:t,endRow:n,startCol:i,endCol:r})};return Object(c.a)(t,t=>{let e=!0,i=0;Object(bt.d)(t.startRow,t.endRow,r=>{this.isHidden(r)?(e||n(i,r-1,t.startCol,t.endCol),e=!0):(e&&(i=r),r===t.endRow&&n(i,r,t.startCol,t.endCol),e=!1)})}),e}function Hh(t,e){if(!_h(Mh,this).indicators||t<0)return;const n=[];t>=1&&this.isHidden(t-1)&&n.push("afterHiddenRow"),t<this.hot.countRows()-1&&this.isHidden(t+1)&&n.push("beforeHiddenRow"),Object(r.a)(e,n)}function Dh(t){var e;t.items.push({name:Ji},(e=this,{key:"hidden_rows_hide",name(){const t=this.getSelectedLast();let e=0;if(Array.isArray(t)){const[n,,i]=t;n-i!==0&&(e=1)}return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_HIDE_ROW,e)},callback(){const{from:t,to:n}=this.getSelectedRangeLast(),i=Math.max(Math.min(t.row,n.row),0),r=Math.max(t.row,n.row),o=[];for(let e=i;e<=r;e+=1)o.push(e);e.hideRows(o);const s=o[o.length-1],a=this.rowIndexMapper.getNearestNotHiddenIndex(s,1,!0);Number.isInteger(a)&&a>=0?this.selectRows(a):this.deselectCell(),this.render(),this.view.adjustElementsSize()},disabled:!1,hidden(){return!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())}}),function(t){const e=[];return{key:"hidden_rows_show",name(){const t=e.length>1?1:0;return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_SHOW_ROW,t)},callback(){var n,i;if(0===e.length)return;let r=e[0],o=e[e.length-1];r=null!==(n=this.rowIndexMapper.getNearestNotHiddenIndex(r-1,-1))&&void 0!==n?n:0,o=null!==(i=this.rowIndexMapper.getNearestNotHiddenIndex(o+1,1))&&void 0!==i?i:this.countRows()-1,t.showRows(e),this.render(),this.view.adjustElementsSize();o-r+1===this.countRows()||this.selectRows(r,o)},disabled:!1,hidden(){const n=Object(c.c)(t.getHiddenRows(),t=>this.toPhysicalRow(t));if(!this.selection.isSelectedByRowHeader()&&!this.selection.isSelectedByCorner()||n.length<1)return!0;e.length=0;const i=this.getSelectedRangeLast(),r=i.getTopStartCorner().row,o=i.getBottomEndCorner().row,s=this.rowIndexMapper,a=s.getRenderableFromVisualIndex(r),l=s.getRenderableFromVisualIndex(o),u=s.getNotTrimmedIndexes(),h=[];if(r!==o){if(o-r+1>l-a+1){const t=u.slice(r,o+1);h.push(...t.filter(t=>n.includes(t)))}}else if(0===a&&a<r)h.push(...u.slice(0,r));else if(null===a)h.push(...u.slice(0,this.countRows()));else{const t=this.countRows()-1;l===s.getRenderableFromVisualIndex(s.getNearestNotHiddenIndex(t,-1))&&t>o&&h.push(...u.slice(o+1))}return Object(c.a)(h,t=>{e.push(this.toVisualRow(t))}),0===e.length}}}(this))}function Ph(){Array.isArray(_h(Mh,this).rows)&&this.hideRows(_h(Mh,this).rows)}function Lh(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fh(t,e){return t.get(Vh(t,e))}function Bh(t,e,n){return t.set(Vh(t,e),n),n}function Vh(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}Z.a.getSingleton().register("beforeColumnFreeze"),Z.a.getSingleton().register("afterColumnFreeze"),Z.a.getSingleton().register("beforeColumnUnfreeze"),Z.a.getSingleton().register("afterColumnUnfreeze");var Uh=new WeakMap,Wh=new WeakSet;class zh extends te{constructor(){var t,e;super(...arguments),Lh(t=this,e=Wh),e.add(t),function(t,e,n){Lh(t,e),e.set(t,n)}(this,Uh,!1)}static get PLUGIN_KEY(){return"manualColumnFreeze"}static get PLUGIN_PRIORITY(){return 110}isEnabled(){return!!this.hot.getSettings().manualColumnFreeze}enablePlugin(){this.enabled||(this.addHook("afterContextMenuDefaultOptions",t=>Vh(Wh,this,Yh).call(this,t)),this.addHook("beforeColumnMove",(t,e)=>Vh(Wh,this,Gh).call(this,t,e)),super.enablePlugin())}disablePlugin(){Bh(Uh,this,!1),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}freezeColumn(t){const e=this.hot.getSettings(),n=e.fixedColumnsStart<this.hot.countCols()&&t>e.fixedColumnsStart-1;Fh(Uh,this)||Bh(Uh,this,!0);!1!==this.hot.runHooks("beforeColumnFreeze",t,n)&&(n&&(this.hot.columnIndexMapper.moveIndexes(t,e.fixedColumnsStart),e._fixedColumnsStart+=1),this.hot.runHooks("afterColumnFreeze",t,n))}unfreezeColumn(t){const e=this.hot.getSettings(),n=e.fixedColumnsStart>0&&t<=e.fixedColumnsStart-1;Fh(Uh,this)||Bh(Uh,this,!0);!1!==this.hot.runHooks("beforeColumnUnfreeze",t,n)&&(n&&(e._fixedColumnsStart-=1,this.hot.columnIndexMapper.moveIndexes(t,e.fixedColumnsStart)),this.hot.runHooks("afterColumnUnfreeze",t,n))}}function Yh(t){var e;t.items.push({name:"---------"},(e=this,{key:"freeze_column",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_FREEZE_COLUMN)},callback(t,n){const[{start:{col:i}}]=n;e.freezeColumn(i),this.render(),this.view.adjustElementsSize()},hidden(){const t=this.getSelectedRange();let e=!1;return(void 0===t||t.length>1||t[0].from.col!==t[0].to.col||t[0].from.col<=this.getSettings().fixedColumnsStart-1)&&(e=!0),e}}),function(t){return{key:"unfreeze_column",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_UNFREEZE_COLUMN)},callback(e,n){const[{start:{col:i}}]=n;t.unfreezeColumn(i),this.render(),this.view.adjustElementsSize()},hidden(){const t=this.getSelectedRange();let e=!1;return(void 0===t||t.length>1||t[0].from.col!==t[0].to.col||t[0].from.col>=this.getSettings().fixedColumnsStart)&&(e=!0),e}}}(this))}function Gh(t,e){if(Fh(Uh,this)){const n=this.hot.getSettings().fixedColumnsStart;if(e<n)return!1;if(t.some(t=>t<n))return!1}}function $h(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Kh=class{constructor(t){$h(this,"hot",void 0),$h(this,"_element",null),$h(this,"state",0),$h(this,"inlineProperty",void 0),this.hot=t,this.inlineProperty=t.isRtl()?"right":"left"}appendTo(t){t.appendChild(this._element),this.state=2}build(){0===this.state&&(this._element=this.hot.rootDocument.createElement("div"),this.state=1)}destroy(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=0}isAppended(){return 2===this.state}isBuilt(){return this.state>=1}setPosition(t,e){Object(bt.b)(t)&&(this._element.style.top=t+"px"),Object(bt.b)(e)&&(this._element.style[this.inlineProperty]=e+"px")}getPosition(){const t=this._element.style;return{top:t.top?parseInt(t.top,10):0,start:t[this.inlineProperty]?parseInt(t[this.inlineProperty],10):0}}setSize(t,e){Object(bt.b)(t)&&(this._element.style.width=t+"px"),Object(bt.b)(e)&&(this._element.style.height=e+"px")}getSize(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}setOffset(t,e){Object(bt.b)(t)&&(this._element.style.marginTop=t+"px"),Object(bt.b)(e)&&(this._element.style["margin"+Object(h.f)(this.inlineProperty)]=e+"px")}getOffset(){const t=this._element.style,e="margin"+Object(h.f)(this.inlineProperty);return{top:t.marginTop?parseInt(t.marginTop,10):0,start:t[e]?parseInt(t[e],10):0}}};var Xh=class extends Kh{build(){super.build(),Object(r.a)(this._element,"ht__manualColumnMove--backlight")}};var qh=class extends Kh{build(){super.build(),Object(r.a)(this._element,"ht__manualColumnMove--guideline")}};function Qh(t,e,n){Zh(t,e),e.set(t,n)}function Zh(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Jh(t,e,n){return t.set(ed(t,e),n),n}function td(t,e){return t.get(ed(t,e))}function ed(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}Z.a.getSingleton().register("beforeColumnMove"),Z.a.getSingleton().register("afterColumnMove");var nd=new WeakMap,id=new WeakMap,rd=new WeakMap,od=new WeakMap,sd=new WeakMap,ad=new WeakMap,ld=new WeakMap,cd=new WeakMap,ud=new WeakMap,hd=new WeakMap,dd=new WeakMap,fd=new WeakSet;class gd extends te{constructor(){var t,e;super(...arguments),Zh(t=this,e=fd),e.add(t),Qh(this,nd,new Xh(this.hot)),Qh(this,id,new qh(this.hot)),Qh(this,rd,[]),Qh(this,od,0),Qh(this,sd,!1),Qh(this,ad,{}),Qh(this,ld,void 0),Qh(this,cd,void 0),Qh(this,ud,void 0),Qh(this,hd,void 0),Qh(this,dd,void 0)}static get PLUGIN_KEY(){return"manualColumnMove"}static get PLUGIN_PRIORITY(){return 120}isEnabled(){return!!this.hot.getSettings().manualColumnMove}enablePlugin(){var t=this;this.enabled||(this.addHook("beforeOnCellMouseDown",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ed(fd,t,pd).call(t,...n)})),this.addHook("beforeOnCellMouseOver",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ed(fd,t,bd).call(t,...n)})),this.addHook("afterScrollVertically",()=>ed(fd,this,wd).call(this)),this.addHook("afterLoadData",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ed(fd,t,vd).call(t,...n)})),this.buildPluginUI(),this.registerEvents(),Object(r.a)(this.hot.rootElement,"ht__manualColumnMove"),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),super.updatePlugin()}disablePlugin(){Object(r.P)(this.hot.rootElement,"ht__manualColumnMove"),this.unregisterEvents(),td(nd,this).destroy(),td(id,this).destroy(),super.disablePlugin()}moveColumn(t,e){return this.moveColumns([t],e)}moveColumns(t,e){const n=td(ld,this),i=this.isMovePossible(t,e),r=this.hot.runHooks("beforeColumnMove",t,e,n,i);if(Jh(ld,this,void 0),!1===r)return;i&&this.hot.columnIndexMapper.moveIndexes(t,e);const o=i&&this.isColumnOrderChanged(t,e);return this.hot.runHooks("afterColumnMove",t,e,n,i,o),o}dragColumn(t,e){return this.dragColumns([t],e)}dragColumns(t,e){const n=this.countFinalIndex(t,e);return Jh(ld,this,e),this.moveColumns(t,n)}isMovePossible(t,e){const n=this.hot.columnIndexMapper.getNotTrimmedIndexesLength(),i=t.length+e>n,r=e<0,o=t.some(t=>t<0),s=t.some(t=>t>=n);return!(i||r||o||s)}isColumnOrderChanged(t,e){return t.some((t,n)=>t-n!==e)}countFinalIndex(t,e){const n=Object(c.d)(t,(t,n)=>(n<e&&(t+=1),t),0);return e-n}getColumnsWidth(t,e){const n=this.hot.columnIndexMapper;let i=0;for(let r=t;r<=e;r+=1){const t=n.getRenderableFromVisualIndex(r);r<0?i+=this.hot.view._wt.wtViewport.getRowHeaderWidth()||0:null!==t&&(i+=this.hot.view._wt.wtTable.getStretchedColumnWidth(t)||0)}return i}moveBySettingsOrLoad(){const t=this.hot.getSettings().manualColumnMove;if(Array.isArray(t))this.moveColumns(t,0);else if(void 0!==t){const t=this.persistentStateLoad();t.length&&this.moveColumns(t,0)}}isFixedColumnsStart(t){return t<this.hot.getSettings().fixedColumnsStart}persistentStateSave(){this.hot.runHooks("persistentStateSave","manualColumnMove",this.hot.columnIndexMapper.getIndexesSequence())}persistentStateLoad(){const t={};return this.hot.runHooks("persistentStateLoad","manualColumnMove",t),t.value?t.value:[]}prepareColumnsToMoving(t,e){const n=[];return Object(bt.d)(t,e,t=>{n.push(t)}),n}refreshPositions(){const t=this.hot.view.getFirstFullyVisibleColumn();this.isFixedColumnsStart(td(cd,this))&&t>0&&this.hot.scrollViewportTo({col:this.hot.columnIndexMapper.getNearestNotHiddenIndex(t-1,-1)});const e=this.hot.view._wt.wtTable,n=this.hot.view._wt.wtOverlays.scrollableElement,i="number"===typeof n.scrollX?n.scrollX:n.scrollLeft;let o=this.hot.view.THEAD.offsetLeft+this.getColumnsWidth(0,td(cd,this)-1);const s=e.hider.offsetWidth,a=e.TBODY.offsetLeft,l=td(nd,this).getOffset().start,c=td(nd,this).getSize().width;let u=0,h=0;if(this.hot.isRtl()){const t=this.hot.rootWindow,e=Object(r.M)(this.hot.rootElement),o=t.innerWidth-td(ud,this)-e;h=t.innerWidth-td(ad,this).eventPageX-o-(void 0===n.scrollX?i:0)}else h=td(ad,this).eventPageX-(td(ud,this)-(void 0===n.scrollX?i:0));if(td(hd,this)&&(u=this.hot.view._wt.wtOverlays.inlineStartOverlay.clone.wtTable.getColumnHeader(-1).offsetWidth),this.isFixedColumnsStart(td(cd,this))&&(o+=i),o+=u,td(cd,this)<0)td(dd,this)>0?td(ad,this).col=0:td(ad,this).col=t>0?t-1:t;else if(td(ad,this).TD.offsetWidth/2+o<=h){const t=td(cd,this)>=td(od,this)?td(od,this)-1:td(cd,this);td(ad,this).col=t+1,o+=td(ad,this).TD.offsetWidth}else td(ad,this).col=td(cd,this);let d=h,f=o;h+c+l>=s?d=s-c-l:h+l<a+u&&(d=a+u+Math.abs(l)),o>=s-1?f=s-1:0===f?f=1:void 0!==n.scrollX&&td(cd,this)<td(dd,this)&&(f-=td(ud,this)<=n.scrollX?td(ud,this):0),td(nd,this).setPosition(null,d),td(id,this).setPosition(null,f)}registerEvents(){const{documentElement:t}=this.hot.rootDocument;this.eventManager.addEventListener(t,"mousemove",t=>ed(fd,this,md).call(this,t)),this.eventManager.addEventListener(t,"mouseup",()=>ed(fd,this,yd).call(this))}unregisterEvents(){this.eventManager.clear()}buildPluginUI(){td(nd,this).build(),td(id,this).build()}destroy(){td(nd,this).destroy(),td(id,this).destroy(),super.destroy()}}function pd(t,e,n,i){const s=this.hot.view._wt.wtTable,a=this.hot.selection.isSelectedByColumnHeader(),l=this.hot.getSelectedRangeLast(),c=Object(r.w)(t.target,"sortAction");if(!l||!a||td(sd,this)||0!==t.button||c)return Jh(sd,this,!1),td(rd,this).length=0,void Object(r.P)(this.hot.rootElement,["on-moving--columns","show-ui"]);const u=td(id,this).isBuilt()&&!td(id,this).isAppended(),h=td(nd,this).isBuilt()&&!td(nd,this).isAppended();u&&h&&(td(id,this).appendTo(s.hider),td(nd,this).appendTo(s.hider));const{from:d,to:f}=l,g=Math.min(d.col,f.col),p=Math.max(d.col,f.col);if(e.row<0&&e.col>=g&&e.col<=p){i.column=!0,Jh(sd,this,!0);const a=n.firstChild?Object(o.e)(t,n.firstChild).x:t.offsetX;td(ad,this).eventPageX=t.pageX,Jh(cd,this,e.col),td(ad,this).TD=n,td(ad,this).col=e.col,Jh(rd,this,this.prepareColumnsToMoving(g,p)),Jh(hd,this,!!this.hot.getSettings().rowHeaders),Jh(od,this,this.hot.countCols()),Jh(dd,this,this.hot.getSettings().fixedColumnsStart),Jh(ud,this,Object(r.K)(this.hot.rootElement).left);const l=td(hd,this)?-1:0,c=s.holder.scrollTop+s.getColumnHeaderHeight(0)+1,u=e.col<td(dd,this),h=this.hot.view._wt.wtOverlays.inlineStartOverlay.getOverlayOffset(),d=Math.abs(a-(this.hot.isRtl()?n.offsetWidth:0)),f=this.getColumnsWidth(g,e.col-1)+d,m=this.getColumnsWidth(l,g-1)+(u?h:0)+f;td(nd,this).setPosition(c,m),td(nd,this).setSize(this.getColumnsWidth(g,p),s.hider.offsetHeight-c),td(nd,this).setOffset(null,-f),Object(r.a)(this.hot.rootElement,"on-moving--columns")}else Object(r.P)(this.hot.rootElement,"after-selection--columns"),Jh(sd,this,!1),td(rd,this).length=0}function md(t){td(sd,this)&&(td(ad,this).eventPageX=t.pageX,this.refreshPositions())}function bd(t,e,n,i){this.hot.getSelectedRangeLast()&&td(sd,this)&&(td(rd,this).indexOf(e.col)>-1?Object(r.P)(this.hot.rootElement,"show-ui"):Object(r.a)(this.hot.rootElement,"show-ui"),i.row=!0,i.column=!0,i.cell=!0,Jh(cd,this,e.col),td(ad,this).TD=n)}function yd(){const t=td(ad,this).col,e=td(rd,this).length;if(Jh(cd,this,void 0),Jh(sd,this,!1),Object(r.P)(this.hot.rootElement,["on-moving--columns","show-ui","after-selection--columns"]),this.hot.selection.isSelectedByColumnHeader()&&Object(r.a)(this.hot.rootElement,"after-selection--columns"),e<1||void 0===t)return;const n=td(rd,this)[0],i=this.hot.toPhysicalColumn(n),o=this.dragColumns(td(rd,this),t);if(td(rd,this).length=0,!0===o){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize();const t=this.hot.toVisualColumn(i),n=t+e-1;this.hot.selectColumns(t,n)}}function wd(){const t=this.hot.view._wt.wtTable,e=t.getColumnHeaderHeight(0)+1+t.holder.scrollTop;td(nd,this).setPosition(e),td(nd,this).setSize(null,t.hider.offsetHeight-e)}function vd(){this.moveBySettingsOrLoad()}function Cd(t,e,n){Sd(t,e),e.set(t,n)}function Sd(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Od(t,e,n){return t.set(_d(t,e),n),n}function Td(t,e){return t.get(_d(t,e))}function _d(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Ed=new WeakMap,Rd=new WeakMap,Md=new WeakMap,xd=new WeakMap,Id=new WeakMap,kd=new WeakMap,Ad=new WeakMap,Nd=new WeakMap,jd=new WeakMap,Hd=new WeakMap,Dd=new WeakMap,Pd=new WeakMap,Ld=new WeakMap,Fd=new WeakMap,Bd=new WeakMap,Vd=new WeakMap,Ud=new WeakSet;class Wd extends te{static get PLUGIN_KEY(){return"manualColumnResize"}static get PLUGIN_PRIORITY(){return 130}constructor(t){var e,n;super(t),Sd(e=this,n=Ud),n.add(e),Cd(this,Ed,null),Cd(this,Rd,null),Cd(this,Md,[]),Cd(this,xd,null),Cd(this,Id,null),Cd(this,kd,null),Cd(this,Ad,null),Cd(this,Nd,null),Cd(this,jd,this.hot.rootDocument.createElement("DIV")),Cd(this,Hd,this.hot.rootDocument.createElement("DIV")),Cd(this,Dd,null),Cd(this,Pd,!1),Cd(this,Ld,0),Cd(this,Fd,null),Cd(this,Bd,void 0),Cd(this,Vd,void 0),Object(r.a)(Td(jd,this),"manualColumnResizer"),Object(r.a)(Td(Hd,this),"manualColumnResizerGuide")}get inlineDir(){return this.hot.isRtl()?"right":"left"}isEnabled(){return this.hot.getSettings().manualColumnResize}enablePlugin(){this.enabled||(Od(Bd,this,new ce.a),Td(Bd,this).addLocalHook("init",()=>_d(Ud,this,zd).call(this)),this.hot.columnIndexMapper.registerMap(this.pluginName,Td(Bd,this)),this.addHook("modifyColWidth",(t,e)=>_d(Ud,this,qd).call(this,t,e),1),this.addHook("beforeStretchingColumnWidth",(t,e)=>_d(Ud,this,Qd).call(this,t,e)),this.addHook("beforeColumnResize",(t,e,n)=>_d(Ud,this,Zd).call(this,t,e,n)),this.bindEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){Od(Vd,this,Td(Bd,this).getValues()),this.hot.columnIndexMapper.unregisterMap(this.pluginName),super.disablePlugin()}saveManualColumnWidths(){this.hot.runHooks("persistentStateSave","manualColumnWidths",Td(Bd,this).getValues())}loadManualColumnWidths(){const t={};return this.hot.runHooks("persistentStateLoad","manualColumnWidths",t),t.value}setManualSize(t,e){const n=Math.max(e,20),i=this.hot.toPhysicalColumn(t);return Td(Bd,this).setValueAtIndex(i,n),n}clearManualSize(t){const e=this.hot.toPhysicalColumn(t);Td(Bd,this).setValueAtIndex(e,null)}setupHandlePosition(t){if(!t.parentNode)return;Od(Ed,this,t);const{_wt:e}=this.hot.view,n=e.wtTable.getCoords(Td(Ed,this)),i=n.col;if(i<0)return;const o=Object(r.L)(Td(Ed,this)),s=Td(Ed,this).getBoundingClientRect();let a;i<e.getSetting("fixedColumnsStart")&&(a=e.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(Td(Ed,this),n.row,n.col)),a||(a=e.wtOverlays.topOverlay.getRelativeCellPosition(Td(Ed,this),n.row,n.col)),Od(Rd,this,this.hot.columnIndexMapper.getVisualFromRenderableIndex(i)),Od(Md,this,[]);const l=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByColumnHeader();if(this.hot.selection.isSelected()&&l){const t=this.hot.getSelectedRange();Object(c.a)(t,t=>{const e=t.getTopStartCorner().col,n=t.getBottomEndCorner().col;Object(bt.d)(e,n,t=>{Td(Md,this).includes(t)||Td(Md,this).push(t)})})}Td(Md,this).includes(Td(Rd,this))||Od(Md,this,[Td(Rd,this)]),Od(Nd,this,a.start-6),Od(Ad,this,parseInt(s.width,10)),Td(jd,this).style.top=a.top+"px",Td(jd,this).style[this.inlineDir]=Td(Nd,this)+Td(Ad,this)+"px",Td(jd,this).style.height=o+"px",this.hot.rootElement.appendChild(Td(jd,this))}refreshHandlePosition(){Td(jd,this).style[this.inlineDir]=Td(Nd,this)+Td(xd,this)+"px"}setupGuidePosition(){const t=parseInt(Object(r.L)(Td(jd,this)),10),e=parseInt(Td(jd,this).style.top,10)+t,n=parseInt(this.hot.view.maximumVisibleElementHeight(0),10);Object(r.a)(Td(jd,this),"active"),Object(r.a)(Td(Hd,this),"active"),Td(Hd,this).style.top=e+"px",this.refreshGuidePosition(),Td(Hd,this).style.height=n-t+"px",this.hot.rootElement.appendChild(Td(Hd,this))}refreshGuidePosition(){Td(Hd,this).style[this.inlineDir]=Td(jd,this).style[this.inlineDir]}hideHandleAndGuide(){Object(r.P)(Td(jd,this),"active"),Object(r.P)(Td(Hd,this),"active")}checkIfColumnHeader(t){const e=Object(r.c)(t,["THEAD"],this.hot.rootElement),{topOverlay:n,topInlineStartCornerOverlay:i}=this.hot.view._wt.wtOverlays;return[n.clone.wtTable.THEAD,i.clone.wtTable.THEAD].includes(e)}getClosestTHParent(t){return"TABLE"!==t.tagName?"TH"===t.tagName?t:this.getClosestTHParent(t.parentNode):null}afterMouseDownTimeout(){const t=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(e,n)=>{const i=this.hot.runHooks("beforeColumnResize",Td(Id,this),e,!0);void 0!==i&&Od(Id,this,i),"all"===this.hot.getSettings().stretchH?this.clearManualSize(e):this.setManualSize(e,Td(Id,this)),this.saveManualColumnWidths(),this.hot.runHooks("afterColumnResize",Td(Id,this),e,!0),n&&t()};if(Td(Ld,this)>=2){Td(Md,this).length>1?(Object(c.a)(Td(Md,this),t=>{e(t)}),t()):Object(c.a)(Td(Md,this),t=>{e(t,!0)})}Od(Ld,this,0),Od(Fd,this,null)}bindEvents(){const{rootWindow:t,rootElement:e}=this.hot;this.eventManager.addEventListener(e,"mouseover",t=>_d(Ud,this,Yd).call(this,t)),this.eventManager.addEventListener(e,"mousedown",t=>_d(Ud,this,Gd).call(this,t)),this.eventManager.addEventListener(t,"mousemove",t=>_d(Ud,this,$d).call(this,t)),this.eventManager.addEventListener(t,"mouseup",()=>_d(Ud,this,Kd).call(this)),this.eventManager.addEventListener(Td(jd,this),"contextmenu",()=>_d(Ud,this,Xd).call(this))}destroy(){super.destroy()}}function zd(){const t=this.hot.getSettings().manualColumnResize,e=this.loadManualColumnWidths();"undefined"!==typeof e?this.hot.batchExecution(()=>{e.forEach((t,e)=>{Td(Bd,this).setValueAtIndex(e,t)})},!0):Array.isArray(t)?(this.hot.batchExecution(()=>{t.forEach((t,e)=>{Td(Bd,this).setValueAtIndex(e,t)})},!0),Od(Vd,this,t)):!0===t&&Array.isArray(Td(Vd,this))&&this.hot.batchExecution(()=>{Td(Vd,this).forEach((t,e)=>{Td(Bd,this).setValueAtIndex(e,t)})},!0)}function Yd(t){if(!Object(r.D)(t.target)&&!0!==Td(Pd,this)&&this.checkIfColumnHeader(t.target)){const e=this.getClosestTHParent(t.target);if(!e)return;const n=e.getAttribute("colspan");!e||null!==n&&"1"!==n||Td(Dd,this)||this.setupHandlePosition(e)}}function Gd(t){t.target.parentNode===this.hot.rootElement&&Object(r.w)(t.target,"manualColumnResizer")&&(this.setupHandlePosition(Td(Ed,this)),this.setupGuidePosition(),Od(Dd,this,!0),null===Td(Fd,this)&&(Od(Fd,this,setTimeout(()=>this.afterMouseDownTimeout(),500)),this.hot._registerTimeout(Td(Fd,this))),Od(Ld,this,Td(Ld,this)+1),this.startX=t.pageX,Od(Id,this,Td(Ad,this)))}function $d(t){if(Td(Dd,this)){const e=(t.pageX-this.startX)*this.hot.getDirectionFactor();Od(xd,this,Td(Ad,this)+e),Object(c.a)(Td(Md,this),t=>{Od(Id,this,this.setManualSize(t,Td(xd,this)))}),this.refreshHandlePosition(),this.refreshGuidePosition()}}function Kd(){const t=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(e,n)=>{this.hot.runHooks("beforeColumnResize",Td(Id,this),e,!1),n&&t(),this.saveManualColumnWidths(),this.hot.runHooks("afterColumnResize",Td(Id,this),e,!1)};if(Td(Dd,this)){if(this.hideHandleAndGuide(),Od(Dd,this,!1),Td(Id,this)!==Td(Ad,this)){Td(Md,this).length>1?(Object(c.a)(Td(Md,this),t=>{e(t)}),t()):Object(c.a)(Td(Md,this),t=>{e(t,!0)})}this.setupHandlePosition(Td(Ed,this))}}function Xd(){this.hideHandleAndGuide(),this.hot.rootElement.removeChild(Td(jd,this)),this.hot.rootElement.removeChild(Td(Hd,this)),Od(Dd,this,!1),Od(Pd,this,!0),this.hot._registerImmediate(()=>{Od(Pd,this,!1)})}function qd(t,e){let n=t;if(this.enabled){const t=this.hot.toPhysicalColumn(e),i=Td(Bd,this).getValueAtIndex(t);this.hot.getSettings().manualColumnResize&&i&&(n=i)}return n}function Qd(t,e){let n=Td(Bd,this).getValueAtIndex(e);return null===n&&(n=t),n}function Zd(){this.hot.view._wt.wtViewport.resetHasOversizedColumnHeadersMarked()}function Jd(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tf=class{constructor(t){Jd(this,"hot",void 0),Jd(this,"_element",null),Jd(this,"state",0),this.hot=t}appendTo(t){t.appendChild(this._element),this.state=2}build(){0===this.state&&(this._element=this.hot.rootDocument.createElement("div"),this.state=1)}destroy(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=0}isAppended(){return 2===this.state}isBuilt(){return this.state>=1}setPosition(t,e){void 0!==t&&(this._element.style.top=t+"px"),void 0!==e&&(this._element.style.left=e+"px")}getPosition(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}}setSize(t,e){t&&(this._element.style.width=t+"px"),e&&(this._element.style.height=e+"px")}getSize(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}setOffset(t,e){t&&(this._element.style.marginTop=t+"px"),e&&(this._element.style.marginLeft=e+"px")}getOffset(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}};var ef=class extends tf{build(){super.build(),Object(r.a)(this._element,"ht__manualRowMove--backlight")}};var nf=class extends tf{build(){super.build(),Object(r.a)(this._element,"ht__manualRowMove--guideline")}};function rf(t,e,n){of(t,e),e.set(t,n)}function of(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function sf(t,e,n){return t.set(lf(t,e),n),n}function af(t,e){return t.get(lf(t,e))}function lf(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}Z.a.getSingleton().register("beforeRowMove"),Z.a.getSingleton().register("afterRowMove");var cf=new WeakMap,uf=new WeakMap,hf=new WeakMap,df=new WeakMap,ff=new WeakMap,gf=new WeakMap,pf=new WeakSet;class mf extends te{constructor(){var t,e;super(...arguments),of(t=this,e=pf),e.add(t),rf(this,cf,new ef(this.hot)),rf(this,uf,new nf(this.hot)),rf(this,hf,[]),rf(this,df,void 0),rf(this,ff,{}),rf(this,gf,void 0)}static get PLUGIN_KEY(){return"manualRowMove"}static get PLUGIN_PRIORITY(){return 140}isEnabled(){return!!this.hot.getSettings().manualRowMove}enablePlugin(){var t=this;this.enabled||(this.addHook("beforeOnCellMouseDown",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lf(pf,t,bf).call(t,...n)})),this.addHook("beforeOnCellMouseOver",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lf(pf,t,wf).call(t,...n)})),this.addHook("afterScrollHorizontally",()=>lf(pf,this,Cf).call(this)),this.addHook("afterLoadData",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lf(pf,t,Sf).call(t,...n)})),this.buildPluginUI(),this.registerEvents(),Object(r.a)(this.hot.rootElement,"ht__manualRowMove"),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),super.updatePlugin()}disablePlugin(){Object(r.P)(this.hot.rootElement,"ht__manualRowMove"),this.unregisterEvents(),af(cf,this).destroy(),af(uf,this).destroy(),super.disablePlugin()}moveRow(t,e){return this.moveRows([t],e)}moveRows(t,e){const n=af(gf,this),i=this.isMovePossible(t,e),r=this.hot.runHooks("beforeRowMove",t,e,n,i);if(sf(gf,this,void 0),!1===r)return;i&&this.hot.rowIndexMapper.moveIndexes(t,e);const o=i&&this.isRowOrderChanged(t,e);return this.hot.runHooks("afterRowMove",t,e,n,i,o),o}dragRow(t,e){return this.dragRows([t],e)}dragRows(t,e){const n=this.countFinalIndex(t,e);return sf(gf,this,e),this.moveRows(t,n)}isMovePossible(t,e){const n=this.hot.rowIndexMapper.getNotTrimmedIndexesLength(),i=t.length+e>n,r=e<0,o=t.some(t=>t<0),s=t.some(t=>t>=n);return!(i||r||o||s)}isRowOrderChanged(t,e){return t.some((t,n)=>t-n!==e)}countFinalIndex(t,e){const n=Object(c.d)(t,(t,n)=>(n<e&&(t+=1),t),0);return e-n}getRowsHeight(t,e){const n=this.hot.rowIndexMapper;let i=0;for(let r=t;r<=e;r++){const t=n.getRenderableFromVisualIndex(r);null!==t&&(i+=this.hot.view._wt.wtTable.getRowHeight(t)||23)}return i}moveBySettingsOrLoad(){const t=this.hot.getSettings().manualRowMove;if(Array.isArray(t))this.moveRows(t,0);else if(void 0!==t){const t=this.persistentStateLoad();t.length&&this.moveRows(t,0)}}isFixedRowTop(t){return t<this.hot.getSettings().fixedRowsTop}isFixedRowBottom(t){return t>this.hot.countRows()-1-this.hot.getSettings().fixedRowsBottom}persistentStateSave(){this.hot.runHooks("persistentStateSave","manualRowMove",this.hot.rowIndexMapper.getIndexesSequence())}persistentStateLoad(){const t={};return this.hot.runHooks("persistentStateLoad","manualRowMove",t),t.value?t.value:[]}prepareRowsToMoving(){const t=this.hot.getSelectedRangeLast(),e=[];if(!t)return e;const{from:n,to:i}=t,r=Math.min(n.row,i.row),o=Math.max(n.row,i.row);return Object(bt.d)(r,o,t=>{e.push(t)}),e}refreshPositions(){const t=af(ff,this).coords,e=this.hot.view.getFirstFullyVisibleRow(),n=this.hot.view.getLastFullyVisibleRow(),i=this.hot.countRows();this.isFixedRowTop(t.row)&&e>0&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(e-1,-1)),this.isFixedRowBottom(t.row)&&n<i&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(n+1,1),void 0,!0);const o=this.hot.view._wt.wtTable,s=af(ff,this).TD,a=this.hot.rootElement,l=Object(r.K)(a),c=Object(r.t)(a),u=o.holder.scrollTop,h=this.hot.rootWindow!==c?c.scrollTop:0,d=l.top-h,f=af(ff,this).eventPageY-d+u,g=o.hider.offsetHeight,p=o.TBODY.offsetTop,m=af(cf,this).getOffset().top,b=af(cf,this).getSize().height,y=s.offsetHeight/2,w=s.offsetHeight;let v=this.hot.view.THEAD.offsetHeight+this.getRowsHeight(0,t.row-1);const C=f>=v+y;this.isFixedRowTop(t.row)&&(v+=this.hot.view._wt.wtOverlays.topOverlay.getOverlayOffset()),t.row<0?af(ff,this).row=e>0?e-1:e:C?(af(ff,this).row=t.row+1,v+=0===t.row?w-1:w):af(ff,this).row=t.row;let S=f,O=v;f+b+m>=g?S=g-b-m:f+m<p&&(S=p+Math.abs(m)),v>=g-1&&(O=g-1),af(cf,this).setPosition(S),af(uf,this).setPosition(O)}registerEvents(){const{documentElement:t}=this.hot.rootDocument;this.eventManager.addEventListener(t,"mousemove",t=>lf(pf,this,yf).call(this,t)),this.eventManager.addEventListener(t,"mouseup",()=>lf(pf,this,vf).call(this))}unregisterEvents(){this.eventManager.clear()}buildPluginUI(){af(cf,this).build(),af(uf,this).build()}destroy(){af(cf,this).destroy(),af(uf,this).destroy(),super.destroy()}}function bf(t,e,n,i){const{wtTable:o,wtViewport:s}=this.hot.view._wt,a=this.hot.selection.isSelectedByRowHeader(),l=this.hot.getSelectedRangeLast();if(!l||!a||af(df,this)||0!==t.button)return sf(df,this,!1),af(hf,this).length=0,void Object(r.P)(this.hot.rootElement,["on-moving--rows","show-ui"]);const c=af(uf,this).isBuilt()&&!af(uf,this).isAppended(),u=af(cf,this).isBuilt()&&!af(cf,this).isAppended();c&&u&&(af(uf,this).appendTo(o.hider),af(cf,this).appendTo(o.hider));const{from:h,to:d}=l,f=Math.min(h.row,d.row),g=Math.max(h.row,d.row);if(e.col<0&&e.row>=f&&e.row<=g){i.row=!0,sf(df,this,!0),af(ff,this).eventPageY=t.pageY,af(ff,this).coords=e,af(ff,this).TD=n,sf(hf,this,this.prepareRowsToMoving());const a=o.holder.scrollLeft+s.getRowHeaderWidth(),l=this.getRowsHeight(f,e.row-1)+t.offsetY;af(cf,this).setPosition(null,a),af(cf,this).setSize(o.hider.offsetWidth-a,this.getRowsHeight(f,g)),af(cf,this).setOffset(-l,null),Object(r.a)(this.hot.rootElement,"on-moving--rows"),this.refreshPositions()}else Object(r.P)(this.hot.rootElement,"after-selection--rows"),sf(df,this,!1),af(hf,this).length=0}function yf(t){af(df,this)&&(af(ff,this).eventPageY=t.pageY,this.refreshPositions())}function wf(t,e,n,i){this.hot.getSelectedRangeLast()&&af(df,this)&&(af(hf,this).indexOf(e.row)>-1?Object(r.P)(this.hot.rootElement,"show-ui"):Object(r.a)(this.hot.rootElement,"show-ui"),i.row=!0,i.column=!0,i.cell=!0,af(ff,this).coords=e,af(ff,this).TD=n)}function vf(){const t=af(ff,this).row,e=af(hf,this).length;if(sf(df,this,!1),Object(r.P)(this.hot.rootElement,["on-moving--rows","show-ui","after-selection--rows"]),this.hot.selection.isSelectedByRowHeader()&&Object(r.a)(this.hot.rootElement,"after-selection--rows"),e<1||void 0===t)return;const n=af(hf,this)[0],i=this.hot.toPhysicalRow(n),o=this.dragRows(af(hf,this),t);if(af(hf,this).length=0,!0===o){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize();const t=this.hot.toVisualRow(i),n=t+e-1;this.hot.selectRows(t,n)}}function Cf(){const t=this.hot.view._wt.wtTable,e=this.hot.view._wt.wtViewport.getRowHeaderWidth()+t.holder.scrollLeft;af(cf,this).setPosition(null,e),af(cf,this).setSize(t.hider.offsetWidth-e)}function Sf(){this.moveBySettingsOrLoad()}var Of=n(238);function Tf(t,e,n){_f(t,e),e.set(t,n)}function _f(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ef(t,e,n){return t.set(Mf(t,e),n),n}function Rf(t,e){return t.get(Mf(t,e))}function Mf(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var xf=new WeakMap,If=new WeakMap,kf=new WeakMap,Af=new WeakMap,Nf=new WeakMap,jf=new WeakMap,Hf=new WeakMap,Df=new WeakMap,Pf=new WeakMap,Lf=new WeakMap,Ff=new WeakMap,Bf=new WeakMap,Vf=new WeakMap,Uf=new WeakMap,Wf=new WeakMap,zf=new WeakMap,Yf=new WeakSet;class Gf extends te{static get PLUGIN_KEY(){return"manualRowResize"}static get PLUGIN_PRIORITY(){return 30}constructor(t){var e,n;super(t),_f(e=this,n=Yf),n.add(e),Tf(this,xf,null),Tf(this,If,null),Tf(this,kf,[]),Tf(this,Af,null),Tf(this,Nf,null),Tf(this,jf,null),Tf(this,Hf,null),Tf(this,Df,null),Tf(this,Pf,this.hot.rootDocument.createElement("DIV")),Tf(this,Lf,this.hot.rootDocument.createElement("DIV")),Tf(this,Ff,!1),Tf(this,Bf,!1),Tf(this,Vf,0),Tf(this,Uf,null),Tf(this,Wf,void 0),Tf(this,zf,void 0),Object(r.a)(Rf(Pf,this),"manualRowResizer"),Object(r.a)(Rf(Lf,this),"manualRowResizerGuide")}get inlineDir(){return this.hot.isRtl()?"right":"left"}isEnabled(){return this.hot.getSettings().manualRowResize}enablePlugin(){this.enabled||(Ef(Wf,this,new ce.a),Rf(Wf,this).addLocalHook("init",()=>Mf(Yf,this,Jf).call(this)),this.hot.rowIndexMapper.registerMap(this.pluginName,Rf(Wf,this)),this.addHook("modifyRowHeight",(t,e)=>Mf(Yf,this,Zf).call(this,t,e)),this.bindEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){Ef(zf,this,Rf(Wf,this).getValues()),this.hot.rowIndexMapper.unregisterMap(this.pluginName),super.disablePlugin()}saveManualRowHeights(){this.hot.runHooks("persistentStateSave","manualRowHeights",Rf(Wf,this).getValues())}loadManualRowHeights(){const t={};return this.hot.runHooks("persistentStateLoad","manualRowHeights",t),t.value}setManualSize(t,e){const n=this.hot.toPhysicalRow(t),i=Math.max(e,Of.a);return Rf(Wf,this).setValueAtIndex(n,i),i}getLastDesiredRowHeight(){return Rf(Af,this)}setupHandlePosition(t){Ef(xf,this,t);const{view:e}=this.hot,{_wt:n}=e,i=n.wtTable.getCoords(Rf(xf,this)),o=i.row;if(o<0)return;const s=Object(r.M)(Rf(xf,this)),a=Rf(xf,this).getBoundingClientRect(),l=o<n.getSetting("fixedRowsTop"),u=o>=e.countNotHiddenRowIndexes(0,1)-n.getSetting("fixedRowsBottom");let h;l?h=n.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(Rf(xf,this),i.row,i.col):u&&(h=n.wtOverlays.bottomInlineStartCornerOverlay.getRelativeCellPosition(Rf(xf,this),i.row,i.col)),h||(h=n.wtOverlays.inlineStartOverlay.getRelativeCellPosition(Rf(xf,this),i.row,i.col)),Ef(If,this,this.hot.rowIndexMapper.getVisualFromRenderableIndex(o)),Ef(kf,this,[]);const d=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByRowHeader();if(this.hot.selection.isSelected()&&d){const t=this.hot.getSelectedRange();Object(c.a)(t,t=>{const e=t.getTopStartCorner().row,n=t.getBottomStartCorner().row;Object(bt.d)(e,n,t=>{Rf(kf,this).includes(t)||Rf(kf,this).push(t)})})}Rf(kf,this).includes(Rf(If,this))||Ef(kf,this,[Rf(If,this)]),Ef(Df,this,h.top-6),Ef(Hf,this,parseInt(a.height,10)),Rf(Pf,this).style.top=Rf(Df,this)+Rf(Hf,this)+"px",Rf(Pf,this).style[this.inlineDir]=h.start+"px",Rf(Pf,this).style.width=s+"px",this.hot.rootElement.appendChild(Rf(Pf,this))}refreshHandlePosition(){Rf(Pf,this).style.top=Rf(Df,this)+Rf(Af,this)+"px"}setupGuidePosition(){const t=parseInt(Object(r.M)(Rf(Pf,this)),10),e=parseInt(Rf(Pf,this).style[this.inlineDir],10)+t,n=parseInt(this.hot.view.maximumVisibleElementWidth(0),10);Object(r.a)(Rf(Pf,this),"active"),Object(r.a)(Rf(Lf,this),"active"),Rf(Lf,this).style.top=Rf(Pf,this).style.top,Rf(Lf,this).style[this.inlineDir]=e+"px",Rf(Lf,this).style.width=n-t+"px",this.hot.rootElement.appendChild(Rf(Lf,this))}refreshGuidePosition(){Rf(Lf,this).style.top=Rf(Pf,this).style.top}hideHandleAndGuide(){Object(r.P)(Rf(Pf,this),"active"),Object(r.P)(Rf(Lf,this),"active")}checkIfRowHeader(t){const e=Object(r.c)(t,["TBODY"],this.hot.rootElement),{inlineStartOverlay:n,topInlineStartCornerOverlay:i,bottomInlineStartCornerOverlay:o}=this.hot.view._wt.wtOverlays;return[n.clone.wtTable.TBODY,i.clone.wtTable.TBODY,o.clone.wtTable.TBODY].includes(e)}getClosestTHParent(t){return"TABLE"!==t.tagName?"TH"===t.tagName?t:this.getClosestTHParent(t.parentNode):null}getActualRowHeight(t){const e=this.hot.view._wt.wtTable.getRowHeight(t);return void 0!==e&&Rf(Nf,this)<e?e:Rf(Nf,this)}afterMouseDownTimeout(){const t=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(e,n)=>{const i=this.hot.runHooks("beforeRowResize",this.getActualRowHeight(e),e,!0);void 0!==i&&Ef(Nf,this,i),this.setManualSize(e,Rf(Nf,this)),this.hot.runHooks("afterRowResize",this.getActualRowHeight(e),e,!0),n&&t()};if(Rf(Vf,this)>=2){Rf(kf,this).length>1?(Object(c.a)(Rf(kf,this),t=>{e(t)}),t()):Object(c.a)(Rf(kf,this),t=>{e(t,!0)})}Ef(Vf,this,0),Ef(Uf,this,null)}bindEvents(){const{rootElement:t,rootWindow:e}=this.hot;this.eventManager.addEventListener(t,"mouseover",t=>Mf(Yf,this,$f).call(this,t)),this.eventManager.addEventListener(t,"mousedown",t=>Mf(Yf,this,Kf).call(this,t)),this.eventManager.addEventListener(e,"mousemove",t=>Mf(Yf,this,Xf).call(this,t)),this.eventManager.addEventListener(e,"mouseup",()=>Mf(Yf,this,qf).call(this)),this.eventManager.addEventListener(Rf(Pf,this),"contextmenu",()=>Mf(Yf,this,Qf).call(this))}destroy(){super.destroy()}}function $f(t){if(!Object(r.D)(t.target)&&!0!==Rf(Bf,this)&&this.checkIfRowHeader(t.target)){const e=this.getClosestTHParent(t.target);e&&(Rf(Ff,this)||this.setupHandlePosition(e))}}function Kf(t){Object(r.w)(t.target,"manualRowResizer")&&(this.setupHandlePosition(Rf(xf,this)),this.setupGuidePosition(),Ef(Ff,this,!0),null===Rf(Uf,this)&&(Ef(Uf,this,setTimeout(()=>this.afterMouseDownTimeout(),500)),this.hot._registerTimeout(Rf(Uf,this))),Ef(Vf,this,Rf(Vf,this)+1),Ef(jf,this,t.pageY),Ef(Nf,this,Rf(Hf,this)))}function Xf(t){Rf(Ff,this)&&(Ef(Af,this,Rf(Hf,this)+(t.pageY-Rf(jf,this))),Object(c.a)(Rf(kf,this),t=>{Ef(Nf,this,this.setManualSize(t,Rf(Af,this)))}),this.refreshHandlePosition(),this.refreshGuidePosition())}function qf(){const t=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(e,n)=>{this.hot.runHooks("beforeRowResize",this.getActualRowHeight(e),e,!1),n&&t(),this.saveManualRowHeights(),this.hot.runHooks("afterRowResize",this.getActualRowHeight(e),e,!1)};if(Rf(Ff,this)){if(this.hideHandleAndGuide(),Ef(Ff,this,!1),Rf(Nf,this)!==Rf(Hf,this)){Rf(kf,this).length>1?(Object(c.a)(Rf(kf,this),t=>{e(t)}),t()):Object(c.a)(Rf(kf,this),t=>{e(t,!0)})}this.setupHandlePosition(Rf(xf,this))}}function Qf(){this.hideHandleAndGuide(),this.hot.rootElement.removeChild(Rf(Pf,this)),this.hot.rootElement.removeChild(Rf(Lf,this)),Ef(Ff,this,!1),Ef(Bf,this,!0),this.hot._registerImmediate(()=>{Ef(Bf,this,!1)})}function Zf(t,e){let n=t;if(this.enabled){const t=this.hot.toPhysicalRow(e),i=Rf(Wf,this).getValueAtIndex(t);this.hot.getSettings().manualRowResize&&i&&(n=i)}return n}function Jf(){const t=this.hot.getSettings().manualRowResize,e=this.loadManualRowHeights();this.hot.batchExecution(()=>{"undefined"!==typeof e?e.forEach((t,e)=>{Rf(Wf,this).setValueAtIndex(e,t)}):Array.isArray(t)?(t.forEach((t,e)=>{Rf(Wf,this).setValueAtIndex(e,t)}),Ef(zf,this,t)):!0===t&&Array.isArray(Rf(zf,this))&&Rf(zf,this).forEach((t,e)=>{Rf(Wf,this).setValueAtIndex(e,t)})},!0)}function tg(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function eg(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ng(t,e){return t.get(rg(t,e))}function ig(t,e,n){return t.set(rg(t,e),n),n}function rg(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var og=new WeakMap;var sg=class{constructor(t,e,n,i,r,o){eg(this,"row",void 0),eg(this,"col",void 0),eg(this,"rowspan",void 0),eg(this,"colspan",void 0),eg(this,"removed",!1),eg(this,"cellCoordsFactory",void 0),eg(this,"cellRangeFactory",void 0),tg(this,og,null),this.row=t,this.col=e,this.rowspan=n,this.colspan=i,this.cellCoordsFactory=r,this.cellRangeFactory=o}static NEGATIVE_VALUES_WARNING(t){let{row:e,col:n,rowspan:i,colspan:r}=t;return gi.a`The merged cell declared with {row: ${e}, col: ${n},\x20
      rowspan: ${i}, colspan: ${r}} contains negative values, which is\x20
      not supported. It will not be added to the collection.`}static IS_OUT_OF_BOUNDS_WARNING(t){let{row:e,col:n}=t;return gi.a`The merged cell declared at [${e}, ${n}] is positioned\x20
      (or positioned partially) outside of the table range. It was not added to the table, please fix your setup.`}static IS_SINGLE_CELL(t){let{row:e,col:n}=t;return gi.a`The merged cell declared at [${e}, ${n}] has both "rowspan"\x20
      and "colspan" declared as "1", which makes it a single cell. It cannot be added to the collection.`}static ZERO_SPAN_WARNING(t){let{row:e,col:n}=t;return gi.a`The merged cell declared at [${e}, ${n}] has "rowspan"\x20
      or "colspan" declared as "0", which is not supported. It cannot be added to the collection.`}static containsNegativeValues(t){let{row:e,col:n,rowspan:i,colspan:r}=t;return e<0||n<0||i<0||r<0}static isSingleCell(t){let{rowspan:e,colspan:n}=t;return 1===n&&1===e}static containsZeroSpan(t){let{rowspan:e,colspan:n}=t;return 0===n||0===e}static isOutOfBounds(t,e,n){return t.row<0||t.col<0||t.row>=e||t.row+t.rowspan-1>=e||t.col>=n||t.col+t.colspan-1>=n}normalize(t){const e=t.countRows(),n=t.countCols();this.row<0?this.row=0:this.row>e-1&&(this.row=e-1),this.col<0?this.col=0:this.col>n-1&&(this.col=n-1),this.row+this.rowspan>e-1&&(this.rowspan=e-this.row),this.col+this.colspan>n-1&&(this.colspan=n-this.col),ig(og,this,null)}includes(t,e){return this.row<=t&&this.col<=e&&this.row+this.rowspan-1>=t&&this.col+this.colspan-1>=e}includesHorizontally(t){return this.col<=t&&this.col+this.colspan-1>=t}includesVertically(t){return this.row<=t&&this.row+this.rowspan-1>=t}shift(t,e){const n=t[0]||t[1],i=e+Math.abs(t[0]||t[1])-1,r=t[0]?"colspan":"rowspan",o=t[0]?"col":"row",s=Math.min(e,i),a=Math.max(e,i),l=this[o],c=this[o]+this[r]-1;if(l>=e&&(this[o]+=n),n>0)e<=c&&e>l&&(this[r]+=n);else if(n<0){if(s<=l&&a>=c)return this.removed=!0,ig(og,this,null),!1;if(l>=s&&l<=a){const t=a-l+1,e=Math.abs(n)-t;this[o]-=e+n,this[r]-=t}else if(l<=s&&c>=a)this[r]+=n;else if(l<=s&&c>=s&&c<a){const t=c-s+1;this[r]-=t}}return ig(og,this,null),!0}isFarther(t,e){return!t||("down"===e?t.row+t.rowspan-1<this.row+this.rowspan-1:"up"===e?t.row>this.row:"right"===e?t.col+t.colspan-1<this.col+this.colspan-1:"left"===e?t.col>this.col:null)}getLastRow(){return this.row+this.rowspan-1}getLastColumn(){return this.col+this.colspan-1}getRange(){return ng(og,this)||ig(og,this,this.cellRangeFactory(this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.getLastRow(),this.getLastColumn()))),ng(og,this)}};function ag(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function lg(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cg(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var ug=new WeakSet;class hg{constructor(t){ag(this,ug),lg(this,"plugin",void 0),lg(this,"mergedCells",[]),lg(this,"mergedCellsMatrix",new Map),lg(this,"hot",void 0),this.plugin=t,this.hot=t.hot}static IS_OVERLAPPING_WARNING(t){let{row:e,col:n}=t;return gi.a`The merged cell declared at [${e}, ${n}], overlaps\x20
      with the other declared merged cell. The overlapping merged cell was not added to the table, please\x20
      fix your setup.`}get(t,e){var n;return!!this.mergedCellsMatrix.has(t)&&(null!==(n=this.mergedCellsMatrix.get(t).get(e))&&void 0!==n&&n)}getByRange(t){let e=!1;return Object(c.a)(this.mergedCells,n=>!(n.row<=t.from.row&&n.row+n.rowspan-1>=t.to.row&&n.col<=t.from.col&&n.col+n.colspan-1>=t.to.col)||(e=n,e)),e}filterOverlappingMergeCells(t){const e=new Set;this.mergedCells.forEach(t=>{const{row:n,col:i,colspan:r,rowspan:o}=t;for(let s=n;s<n+o;s++)for(let t=i;t<i+r;t++)e.add(`r${s},c${t}`)});return t.filter(t=>{const{row:n,col:i,colspan:r,rowspan:o}=t,s=new Set;let a=!1;for(let l=n;l<n+o;l++){for(let n=i;n<i+r;n++){const i=`r${l},c${n}`;if(e.has(i)){Object(mn.b)(hg.IS_OVERLAPPING_WARNING(t)),a=!0;break}s.add(i)}if(a)break}return a||e.add(...s),!a})}getWithinRange(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{row:n,col:i}=t.getTopStartCorner(),{row:r,col:o}=t.getBottomEndCorner(),s=[];for(let a=n;a<=r;a++)for(let t=i;t<=o;t++){const n=this.get(a,t);n&&(e||!e&&n.row===a&&n.col===t)&&s.push(n)}return s}add(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t.row,i=t.col,r=t.rowspan,o=t.colspan,s=new sg(n,i,r,o,this.hot._createCellCoords,this.hot._createCellRange),a=this.get(n,i),l=!e&&this.isOverlapping(s);return a||l?(Object(mn.b)(hg.IS_OVERLAPPING_WARNING(s)),!1):(this.hot&&s.normalize(this.hot),this.mergedCells.push(s),cg(ug,this,fg).call(this,s),s)}remove(t,e){const n=this.get(t,e),i=n?this.mergedCells.indexOf(n):-1;return!(!n||-1===i)&&(this.mergedCells.splice(i,1),cg(ug,this,gg).call(this,n),n)}clear(){Object(c.a)(this.mergedCells,t=>{let{row:e,col:n,rowspan:i,colspan:r}=t;Object(bt.d)(e,e+i,t=>{Object(bt.d)(n,n+r,e=>{const n=this.hot.getCell(t,e);n&&(n.removeAttribute("rowspan"),n.removeAttribute("colspan"),n.style.display="")})})}),this.mergedCells.length=0,this.mergedCellsMatrix=new Map}isOverlapping(t){const e=t.getRange();for(let n=0;n<this.mergedCells.length;n++){if(this.mergedCells[n].getRange().overlaps(e))return!0}return!1}isFirstRenderableMergedCell(t,e){const n=this.get(t,e);return n&&this.hot.rowIndexMapper.getNearestNotHiddenIndex(n.row,1)===t&&this.hot.columnIndexMapper.getNearestNotHiddenIndex(n.col,1)===e}getFirstRenderableCoords(t,e){const n=this.get(t,e);if(!n||this.isFirstRenderableMergedCell(t,e))return this.hot._createCellCoords(t,e);const i=this.hot.rowIndexMapper.getNearestNotHiddenIndex(n.row,1),r=this.hot.columnIndexMapper.getNearestNotHiddenIndex(n.col,1);return this.hot._createCellCoords(i,r)}getStartMostColumnIndex(t,e){const n=cg(ug,this,dg).call(this,t,"col",-1);let i=e;for(let r=0;r<n.length;r++)if(n[r]<=e){i=n[r];break}return i}getEndMostColumnIndex(t,e){const n=cg(ug,this,dg).call(this,t,"col",1);let i=e;for(let r=0;r<n.length;r++)if(n[r]>=e){i=n[r];break}return i}getTopMostRowIndex(t,e){const n=cg(ug,this,dg).call(this,t,"row",-1);let i=e;for(let r=0;r<n.length;r++)if(n[r]<=e){i=n[r];break}return i}getBottomMostRowIndex(t,e){const n=cg(ug,this,dg).call(this,t,"row",1);let i=e;for(let r=0;r<n.length;r++)if(n[r]>=e){i=n[r];break}return i}shiftCollections(t,e,n){const i=[0,0];switch(t){case"right":i[0]+=n;break;case"left":i[0]-=n;break;case"down":i[1]+=n;break;case"up":i[1]-=n}const r=[];this.mergedCells.forEach(t=>{t.shift(i,e),t.removed&&r.push(t)}),r.forEach(t=>{this.mergedCells.splice(this.mergedCells.indexOf(t),1)}),this.mergedCellsMatrix.clear(),this.mergedCells.forEach(t=>{cg(ug,this,fg).call(this,t)})}}function dg(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const i=new Map,r=1===n?t.getTopStartCorner():t.getBottomEndCorner(),o=1===n?t.getBottomEndCorner():t.getTopStartCorner();for(let s=r.row;1===n?s<=o.row:s>=o.row;s+=n)for(let t=r.col;1===n?t<=o.col:t>=o.col;t+=n){const r="row"===e?s:t,o=this.get(s,t);let a=r;o&&(a=1===n?o[e]+o[e+"span"]-1:o[e]),i.has(r)||i.set(r,new Set),i.get(r).add(a)}return Array.from(new Set(Array.from(i.entries()).filter(t=>{let[,e]=t;return 1===e.size}).flatMap(t=>{let[,e]=t;return Array.from(e)})))}function fg(t){for(let e=t.row;e<t.row+t.rowspan;e++)for(let n=t.col;n<t.col+t.colspan;n++)this.mergedCellsMatrix.has(e)||this.mergedCellsMatrix.set(e,new Map),this.mergedCellsMatrix.get(e).set(n,t)}function gg(t){for(let e=t.row;e<t.row+t.rowspan;e++)for(let n=t.col;n<t.col+t.colspan;n++)this.mergedCellsMatrix.get(e).delete(n)}var pg=hg;function mg(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bg=class{constructor(t){mg(this,"plugin",void 0),mg(this,"mergedCellsCollection",void 0),mg(this,"currentFillData",null),this.plugin=t,this.mergedCellsCollection=this.plugin.mergedCellsCollection}correctSelectionAreaSize(t){if(t[0]===t[2]&&t[1]===t[3]){const e=this.mergedCellsCollection.get(t[0],t[1]);e&&(t[2]=t[0]+e.rowspan-1,t[3]=t[1]+e.colspan-1)}}getDirection(t,e){let n=null;return n=e[0]===t[0]&&e[1]===t[1]&&e[3]===t[3]?"down":e[2]===t[2]&&e[1]===t[1]&&e[3]===t[3]?"up":e[1]===t[1]&&e[2]===t[2]?"right":"left",n}snapDragArea(t,e,n,i){const r=e.slice(0),o=this.getAutofillSize(t,e,n),[s,a,l,c]=t,u=["up","down"].indexOf(n)>-1?l-s+1:c-a+1,h=o-Math.floor(o/u)*u,d=this.getFarthestCollection(t,e,n,i);if(d)if("down"===n){const t=d.row+d.rowspan-s-h;r[2]+t>=this.plugin.hot.countRows()?r[2]-=h:r[2]+=h?t:0}else if("right"===n){const t=d.col+d.colspan-a-h;r[3]+t>=this.plugin.hot.countCols()?r[3]-=h:r[3]+=h?t:0}else if("up"===n){const t=l-h-d.row+1;r[0]+t<0?r[0]+=h:r[0]-=h?t:0}else if("left"===n){const t=c-h-d.col+1;r[1]+t<0?r[1]+=h:r[1]-=h?t:0}return this.updateCurrentFillCache({baseArea:t,dragDirection:n,foundMergedCells:i,fillSize:o,dragArea:r,cycleLength:u}),r}updateCurrentFillCache(t){this.currentFillData||(this.currentFillData={}),Object(s.h)(this.currentFillData,t)}getAutofillSize(t,e,n){const[i,r,o,s]=t,[a,l,c,u]=e;switch(n){case"up":return i-a;case"down":return c-o;case"left":return r-l;case"right":return u-s;default:return null}}getDragArea(t,e,n){const[i,r,o,s]=t,[a,l,c,u]=e;switch(n){case"up":return[a,l,i-1,s];case"down":return[o+1,r,c,s];case"left":return[a,l,o,r-1];case"right":return[i,s+1,c,u];default:return null}}getFarthestCollection(t,e,n,i){const[r,o,s,a]=t,l=["up","down"].indexOf(n)>-1,u=l?s:a,h=l?r:o,d=this.getAutofillSize(t,e,n),f=l?s-r+1:a-o+1,g=d-Math.floor(d/f)*f;let p=null,m=null,b=null;switch(n){case"up":p="includesVertically",b=u-g+1;break;case"left":p="includesHorizontally",b=u-g+1;break;case"down":p="includesVertically",b=h+g-1;break;case"right":p="includesHorizontally",b=h+g-1}return Object(c.a)(i,t=>{t[p](b)&&t.isFarther(m,n)&&(m=t)}),m}recreateAfterDataPopulation(t){if(!this.currentFillData)return;const e=this.getRangeFromChanges(t),n=this.currentFillData.foundMergedCells,i=this.currentFillData.dragDirection,r=(t,n)=>{switch(i){case"up":return t.row-n>=e.from.row;case"down":return t.row+t.rowspan-1+n<=e.to.row;case"left":return t.col-n>=e.from.column;case"right":return t.col+t.colspan-1+n<=e.to.column;default:return null}};let o=0,s=null,a=1;do{for(let t=0;t<n.length;t+=1){if(s=n[t],o=a*this.currentFillData.cycleLength,r(s,o))switch(i){case"up":this.plugin.mergedCellsCollection.add({row:s.row-o,rowspan:s.rowspan,col:s.col,colspan:s.colspan});break;case"down":this.plugin.mergedCellsCollection.add({row:s.row+o,rowspan:s.rowspan,col:s.col,colspan:s.colspan});break;case"left":this.plugin.mergedCellsCollection.add({row:s.row,rowspan:s.rowspan,col:s.col-o,colspan:s.colspan});break;case"right":this.plugin.mergedCellsCollection.add({row:s.row,rowspan:s.rowspan,col:s.col+o,colspan:s.colspan})}t===n.length-1&&(a+=1)}}while(r(s,o));this.currentFillData=null,this.plugin.hot.render(),n.length>0&&this.plugin.ifChromeForceRepaint()}getRangeFromChanges(t){const e={min:null,max:null},n={min:null,max:null};return Object(c.a)(t,t=>{const i=t[0],r=this.plugin.hot.propToCol(t[1]);(null===e.min||i<e.min)&&(e.min=i),(null===e.max||i>e.max)&&(e.max=i),(null===n.min||r<n.min)&&(n.min=r),(null===n.max||r>n.max)&&(n.max=r)}),{from:{row:e.min,column:n.min},to:{row:e.max,column:n.max}}}dragAreaOverlapsCollections(t,e,n){const i=this.getDragArea(t,e,n),[r,o,s,a]=i,l=this.plugin.hot._createCellCoords(r,o),c=this.plugin.hot._createCellCoords(s,a),u=this.plugin.hot._createCellRange(l,l,c);return this.mergedCellsCollection.getWithinRange(u,!0).length>0}};function yg(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wg=class{constructor(t){yg(this,"plugin",void 0),yg(this,"hot",void 0),yg(this,"fullySelectedMergedCellClassName","fullySelectedMergedCell"),this.plugin=t,this.hot=t.hot}getSelectedMergedCellClassName(t,e,n,i){const r=Math.min(n[0],n[2]),o=Math.min(n[1],n[3]),s=Math.max(n[0],n[2]),a=Math.max(n[1],n[3]);if(void 0===i)return;if(!this.plugin.mergedCellsCollection.isFirstRenderableMergedCell(t,e))return;const l=this.plugin.mergedCellsCollection.get(t,e);if(!l)return;const c=l.getLastRow(),u=l.getLastColumn();return r<=l.row&&o<=l.col&&s>=c&&a>=u?`${this.fullySelectedMergedCellClassName}-${i}`:this.isMergeCellFullySelected(l,this.plugin.hot.getSelectedRange())?this.fullySelectedMergedCellClassName+"-multiple":void 0}isMergeCellFullySelected(t,e){const n=[];if(!e||!t)return!1;for(let i=0;i<t.rowspan;i+=1)for(let e=0;e<t.colspan;e+=1)n.push(this.hot._createCellCoords(t.row+i,t.col+e));for(let i=0;i<n.length;i+=1){const t=[];for(let r=0;r<e.length;r+=1)t[r]=e[r].includes(n[i]);if(!t.includes(!0))return!1}return!0}getSelectedMergedCellClassNameToRemove(){const t=[];for(let e=0;e<=7;e+=1)t.push(`${this.fullySelectedMergedCellClassName}-${e}`);return t.push(this.fullySelectedMergedCellClassName+"-multiple"),t}};function vg(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Cg{constructor(t){vg(this,"data",void 0),vg(this,"next",null),vg(this,"prev",null),this.data=t}}var Sg=class{constructor(){vg(this,"first",null),vg(this,"last",null)}push(t){const e=new Cg(t);if(null===this.first)this.first=e,this.last=e;else{const t=this.last;this.last=e,e.prev=t,t.next=e}return e}unshift(t){const e=new Cg(t);if(null===this.first)this.first=e,this.last=e;else{const t=this.first;this.first=e,e.next=t,t.prev=e}}inorder(t){let e=this.first;for(;e;){const n=t(e);if(e===this.last||!0===n)break;e=e.next}}remove(t){if(null===this.first)return!1;let e,n,i=this.first;for(;i;){if(i.data===t)return e=i.next,n=i.prev,e&&(e.prev=n),n&&(n.next=e),i===this.first&&(this.first=e),i===this.last&&(this.last=n),!0;i=i.next}return!1}hasCycle(){let t=this.first,e=this.first;for(;;){if(null===t)return!1;if(t=t.next,null===t)return!1;if(t=t.next,e=e.next,t===e)return!0}}pop(){if(null===this.last)return null;const t=this.last;return this.last=this.last.prev,t}shift(){if(null===this.first)return null;const t=this.first;return this.first=this.first.next,t}recursiveReverse(){if(!this.first)return;!function t(e,n){n&&(t(n,n.next),n.next=e)}(this.first,this.first.next),this.first.next=null;const t=this.first;this.first=this.last,this.last=t}reverse(){if(!this.first||!this.first.next)return;let t,e=this.first.next,n=this.first;for(;e;)t=e.next,e.next=n,n.prev=e,n=e,e=t;this.first.next=null,this.last.prev=null,t=this.first,this.first=n,this.last=t}};function Og(t,e,n){Tg(t,e),e.set(t,n)}function Tg(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _g(t,e){return t.get(Rg(t,e))}function Eg(t,e,n){return t.set(Rg(t,e),n),n}function Rg(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Mg=new WeakMap,xg=new WeakMap,Ig=new WeakMap,kg=new WeakMap,Ag=new WeakMap,Ng=new WeakMap,jg=new WeakMap,Hg=new WeakSet;class Dg{constructor(t){let{mergedCellsGetter:e,rowIndexMapper:n,columnIndexMapper:i}=t;var r,o;Tg(r=this,o=Hg),o.add(r),Og(this,Mg,new Sg),Og(this,xg,new Sg),Og(this,Ig,null),Og(this,kg,null),Og(this,Ag,null),Og(this,Ng,null),Og(this,jg,null),Eg(Ag,this,e),Eg(Ng,this,n),Eg(jg,this,i)}getCurrentVerticalNode(){return _g(kg,this).data}getFirstVerticalNode(){return _g(xg,this).first.data}getNextVerticalNode(){return _g(kg,this).next.data}getPrevVerticalNode(){return _g(kg,this).prev.data}getCurrentHorizontalNode(){return _g(Ig,this).data}getFirstHorizontalNode(){return _g(Mg,this).first.data}getNextHorizontalNode(){return _g(Ig,this).next.data}getPrevHorizontalNode(){return _g(Ig,this).prev.data}setPrevNodeAsActive(){Eg(kg,this,_g(kg,this).prev),Eg(Ig,this,_g(Ig,this).prev)}setNextNodeAsActive(){Eg(kg,this,_g(kg,this).next),Eg(Ig,this,_g(Ig,this).next)}buildFocusOrder(t){const e=t.getTopStartCorner(),n=t.getBottomEndCorner(),i=new WeakSet;Eg(Mg,this,new Sg);for(let o=e.row;o<=n.row;o++)if(!_g(Ng,this).isHidden(o))for(let r=e.col;r<=n.col;r++){if(_g(jg,this).isHidden(r))continue;const e=Rg(Hg,this,Pg).call(this,t,_g(Mg,this),i,o,r);e&&Eg(Ig,this,e)}_g(Mg,this).first&&(_g(Mg,this).first.prev=_g(Mg,this).last,_g(Mg,this).last.next=_g(Mg,this).first);const r=new WeakSet;Eg(xg,this,new Sg);for(let o=e.col;o<=n.col;o++)if(!_g(jg,this).isHidden(o))for(let i=e.row;i<=n.row;i++){if(_g(Ng,this).isHidden(i))continue;const e=Rg(Hg,this,Pg).call(this,t,_g(xg,this),r,i,o);e&&Eg(kg,this,e)}_g(xg,this).first&&(_g(xg,this).first.prev=_g(xg,this).last,_g(xg,this).last.next=_g(xg,this).first)}setActiveNode(t,e){return _g(Mg,this).inorder(n=>{const{rowStart:i,rowEnd:r,colStart:o,colEnd:s}=n.data;if(t>=i&&t<=r&&e>=o&&e<=s)return Eg(Ig,this,n),!1}),_g(xg,this).inorder(n=>{const{rowStart:i,rowEnd:r,colStart:o,colEnd:s}=n.data;if(t>=i&&t<=r&&e>=o&&e<=s)return Eg(kg,this,n),!1}),this}}function Pg(t,e,n,i,r){const o=t.getTopStartCorner(),s=t.getBottomEndCorner(),a=t.highlight.clone().normalize(),l=_g(Ag,this).call(this,i,r);if(l&&n.has(l))return null;const c={colStart:r,colEnd:r,rowStart:i,rowEnd:i};if(l){if(n.add(l),l.row<o.row||l.row+l.rowspan-1>s.row||l.col<o.col||l.col+l.colspan-1>s.col)return null;c.colStart=l.col,c.colEnd=l.col+l.colspan-1,c.rowStart=l.row,c.rowEnd=l.row+l.rowspan-1}const u=e.push(c);return i===a.row&&r===a.col||l&&a.row>=l.row&&a.row<=l.row+l.rowspan-1&&a.col>=l.col&&a.col<=l.col+l.colspan-1?u:null}function Lg(t,e,n){Fg(t,e),e.set(t,n)}function Fg(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Bg(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vg(t,e,n){return t.set(Wg(t,e),n),n}function Ug(t,e){return t.get(Wg(t,e))}function Wg(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}Z.a.getSingleton().register("beforeMergeCells"),Z.a.getSingleton().register("afterMergeCells"),Z.a.getSingleton().register("beforeUnmergeCells"),Z.a.getSingleton().register("afterUnmergeCells");var zg=new WeakMap,Yg=new WeakMap,Gg=new WeakMap,$g=new WeakMap,Kg=new WeakSet;class Xg extends te{constructor(){var t,e;super(...arguments),Fg(t=this,e=Kg),e.add(t),Bg(this,"mergedCellsCollection",null),Bg(this,"autofillCalculations",null),Bg(this,"selectionCalculations",null),Lg(this,zg,null),Lg(this,Yg,{row:0,col:0}),Lg(this,Gg,new Dg({mergedCellsGetter:(t,e)=>this.mergedCellsCollection.get(t,e),rowIndexMapper:this.hot.rowIndexMapper,columnIndexMapper:this.hot.columnIndexMapper})),Lg(this,$g,function(t){const{hot:e}=t,{rowIndexMapper:n,columnIndexMapper:i}=e;return{before:function(){},after:function(e,r,o){const a=t.mergedCellsCollection.get(r,o);if(!Object(s.l)(a))return e.removeAttribute("rowspan"),e.removeAttribute("colspan"),void(e.style.display="");const{row:l,col:c,colspan:u,rowspan:h}=a,[d,f]=t.translateMergedCellToRenderable(l,h,c,u),g=d-n.getRenderableFromVisualIndex(r)+1,p=f-i.getRenderableFromVisualIndex(o)+1,m=n.getNearestNotHiddenIndex(l,1),b=i.getNearestNotHiddenIndex(c,1),y=Math.min(h,g),w=Math.min(u,p);m===r&&b===o?(e.setAttribute("rowspan",y),e.setAttribute("colspan",w)):(e.removeAttribute("rowspan"),e.removeAttribute("colspan"),e.style.display="none")}}}(this))}static get PLUGIN_KEY(){return"mergeCells"}static get PLUGIN_PRIORITY(){return 150}isEnabled(){return!!this.hot.getSettings().mergeCells}enablePlugin(){var t=this;this.enabled||(this.mergedCellsCollection=new pg(this),this.autofillCalculations=new bg(this),this.selectionCalculations=new wg(this),this.addHook("afterInit",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,qg).call(t,...n)})),this.addHook("modifyTransformFocus",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,Zg).call(t,...n)})),this.addHook("modifyTransformStart",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,Jg).call(t,...n)})),this.addHook("modifyTransformEnd",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,tp).call(t,...n)})),this.addHook("beforeSelectionHighlightSet",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,ep).call(t,...n)})),this.addHook("beforeSetRangeStart",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,rp).call(t,...n)})),this.addHook("beforeSetRangeStartOnly",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,rp).call(t,...n)})),this.addHook("beforeSelectionFocusSet",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,op).call(t,...n)})),this.addHook("afterSelectionFocusSet",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,sp).call(t,...n)})),this.addHook("afterSelectionEnd",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,ap).call(t,...n)})),this.addHook("modifyGetCellCoords",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,np).call(t,...n)})),this.addHook("afterIsMultipleSelection",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,Qg).call(t,...n)})),this.addHook("afterRenderer",(function(){return Ug($g,t).after(...arguments)})),this.addHook("afterContextMenuDefaultOptions",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,ip).call(t,...n)})),this.addHook("afterGetCellMeta",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,lp).call(t,...n)})),this.addHook("afterViewportRowCalculatorOverride",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,cp).call(t,...n)})),this.addHook("afterViewportColumnCalculatorOverride",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,up).call(t,...n)})),this.addHook("modifyAutofillRange",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,hp).call(t,...n)})),this.addHook("afterCreateCol",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,dp).call(t,...n)})),this.addHook("afterRemoveCol",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,fp).call(t,...n)})),this.addHook("afterCreateRow",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,gp).call(t,...n)})),this.addHook("afterRemoveRow",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,pp).call(t,...n)})),this.addHook("afterChange",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,mp).call(t,...n)})),this.addHook("beforeDrawBorders",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,bp).call(t,...n)})),this.addHook("afterDrawSelection",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,yp).call(t,...n)})),this.addHook("beforeRemoveCellClassNames",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,wp).call(t,...n)})),this.addHook("beforeBeginEditing",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,vp).call(t,...n)})),this.addHook("modifyRowHeightByOverlayName",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Wg(Kg,t,Cp).call(t,...n)})),this.addHook("beforeUndoStackChange",(t,e)=>{if("MergeCells"===e)return!1}),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){this.clearCollections(),this.unregisterShortcuts(),this.hot.render(),super.disablePlugin()}updatePlugin(){const t=this.hot.getSettings().mergeCells;this.disablePlugin(),this.enablePlugin(),this.generateFromSettings(t),super.updatePlugin()}ifChromeForceRepaint(){if(!Object(f.a)())return;const t=[];let e=[];this.mergedCellsCollection.mergedCells.forEach(t=>{const{row:n,rowspan:i}=t;for(let r=n+1;r<n+i;r++)e.push(r)}),e=[...new Set(e)],e.forEach(e=>{const n=this.hot.rowIndexMapper.getRenderableFromVisualIndex(e);this.hot.view._wt.wtOverlays.getOverlays(!0).map(t=>"master"===(null===t||void 0===t?void 0:t.name)?t:t.clone.wtTable).forEach(e=>{const i=e.getRow(n);i&&(i.style.background=Object(r.s)(i,"backgroundColor").replace(")",", 0.99)"),t.push(i))})}),this.hot._registerTimeout(()=>{t.forEach(t=>{t.style.background=Object(r.s)(t,"backgroundColor").replace(", 0.99)",")")})},1)}validateSetting(t){return!!t&&(sg.containsNegativeValues(t)?(Object(mn.b)(sg.NEGATIVE_VALUES_WARNING(t)),!1):sg.isOutOfBounds(t,this.hot.countRows(),this.hot.countCols())?(Object(mn.b)(sg.IS_OUT_OF_BOUNDS_WARNING(t)),!1):sg.isSingleCell(t)?(Object(mn.b)(sg.IS_SINGLE_CELL(t)),!1):!sg.containsZeroSpan(t)||(Object(mn.b)(sg.ZERO_SPAN_WARNING(t)),!1))}generateFromSettings(t){if(!Array.isArray(t))return;const e=t.filter(t=>this.validateSetting(t)),n=this.mergedCellsCollection.filterOverlappingMergeCells(e),i=[];n.forEach(t=>{const{row:e,col:n,rowspan:r,colspan:o}=t,s=this.hot._createCellCoords(e,n),a=this.hot._createCellCoords(e+r-1,n+o-1),l=this.hot._createCellRange(s,s,a);this.mergeRange(l,!0,!0);for(let c=e;c<e+r;c++)for(let t=n;t<n+o;t++)c===e&&t===n||i.push([c,t,null])}),0!==i.length&&this.hot.setDataAtCell(i,void 0,void 0,this.pluginName)}clearCollections(){this.mergedCellsCollection.clear()}canMergeRange(t){return!!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])||this.validateSetting(t)}mergeSelection(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hot.getSelectedRangeLast();if(!t)return;t.setDirection(this.hot.isRtl()?"NE-SW":"NW-SE");const{from:e,to:n}=t;this.unmergeRange(t,!0),this.mergeRange(t),this.hot.selectCell(e.row,e.col,n.row,n.col,!1)}unmergeSelection(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hot.getSelectedRangeLast();if(!t)return;const{from:e,to:n}=t;this.unmergeRange(t,!0),this.hot.selectCell(e.row,e.col,n.row,n.col,!1)}mergeRange(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=t.getTopStartCorner(),r=t.getBottomEndCorner(),o={row:i.row,col:i.col,rowspan:r.row-i.row+1,colspan:r.col-i.col+1},s=[];let a=null;if(!this.canMergeRange(o,e))return!1;this.hot.runHooks("beforeMergeCells",t,e),Object(bt.d)(0,o.rowspan-1,t=>{Object(bt.d)(0,o.colspan-1,e=>{let n=null;s[t]||(s[t]=[]),0===t&&0===e?n=this.hot.getSourceDataAtCell(this.hot.toPhysicalRow(o.row),this.hot.toPhysicalColumn(o.col)):this.hot.setCellMeta(o.row+t,o.col+e,"hidden",!0),s[t][e]=n})}),this.hot.setCellMeta(o.row,o.col,"spanned",!0);return!this.mergedCellsCollection.add(o,e)||(n?a=[o.row,o.col,s]:this.hot.populateFromArray(o.row,o.col,s,void 0,void 0,this.pluginName),e||this.ifChromeForceRepaint(),this.hot.runHooks("afterMergeCells",t,o,e),a)}unmergeRange(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.mergedCellsCollection.getWithinRange(t);0!==n.length&&(this.hot.runHooks("beforeUnmergeCells",t,e),Object(c.a)(n,t=>{this.mergedCellsCollection.remove(t.row,t.col),Object(bt.d)(0,t.rowspan-1,e=>{Object(bt.d)(0,t.colspan-1,n=>{this.hot.removeCellMeta(t.row+e,t.col+n,"hidden"),this.hot.removeCellMeta(t.row+e,t.col+n,"copyable")})}),this.hot.removeCellMeta(t.row,t.col,"spanned")}),this.hot.runHooks("afterUnmergeCells",t,e),this.hot.render())}toggleMerge(t){const e=this.mergedCellsCollection.get(t.from.row,t.from.col);e.row===t.from.row&&e.col===t.from.col&&e.row+e.rowspan-1===t.to.row&&e.col+e.colspan-1===t.to.col?this.unmergeRange(t):this.mergeSelection(t)}merge(t,e,n,i){const r=this.hot._createCellCoords(t,e),o=this.hot._createCellCoords(n,i);this.mergeRange(this.hot._createCellRange(r,r,o))}unmerge(t,e,n,i){const r=this.hot._createCellCoords(t,e),o=this.hot._createCellCoords(n,i);this.unmergeRange(this.hot._createCellRange(r,r,o))}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Control","m"]],callback:()=>{const t=this.hot.getSelectedRangeLast();t&&!t.isSingleHeader()&&(this.toggleMerge(t),this.hot.render())},runOnlyIf:t=>!t.altKey,group:"mergeCells"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup("mergeCells")}modifyViewportRowStart(t,e){const n=this.hot.rowIndexMapper,i=n.getVisualFromRenderableIndex(t.startRow);for(let r=0;r<e;r+=1){const o=this.mergedCellsCollection.get(i,r);if(Object(s.l)(o)){const i=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(o.row,1));if(i<t.startRow)return t.startRow=i,void this.modifyViewportRowStart(t,e)}}}modifyViewportRowEnd(t,e){const n=this.hot.rowIndexMapper,i=n.getVisualFromRenderableIndex(t.endRow);for(let r=0;r<e;r+=1){const o=this.mergedCellsCollection.get(i,r);if(Object(s.l)(o)){const i=o.row+o.rowspan-1,r=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(i,-1));if(r>t.endRow)return t.endRow=r,void this.modifyViewportRowEnd(t,e)}}}modifyViewportColumnStart(t,e){const n=this.hot.columnIndexMapper,i=n.getVisualFromRenderableIndex(t.startColumn);for(let r=0;r<e;r+=1){const o=this.mergedCellsCollection.get(r,i);if(Object(s.l)(o)){const i=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(o.col,1));if(i<t.startColumn)return t.startColumn=i,void this.modifyViewportColumnStart(t,e)}}}modifyViewportColumnEnd(t,e){const n=this.hot.columnIndexMapper,i=n.getVisualFromRenderableIndex(t.endColumn);for(let r=0;r<e;r+=1){const o=this.mergedCellsCollection.get(r,i);if(Object(s.l)(o)){const i=o.col+o.colspan-1,r=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(i,-1));if(r>t.endColumn)return t.endColumn=r,void this.modifyViewportColumnEnd(t,e)}}}translateMergedCellToRenderable(t,e,n,i){const{rowIndexMapper:r,columnIndexMapper:o}=this.hot;let s,a;s=0===e?r.getNearestNotHiddenIndex(t,1):r.getNearestNotHiddenIndex(t+e-1,-1),a=0===i?o.getNearestNotHiddenIndex(n,1):o.getNearestNotHiddenIndex(n+i-1,-1);return[t>=0?r.getRenderableFromVisualIndex(s):t,n>=0?o.getRenderableFromVisualIndex(a):n]}}function qg(){this.generateFromSettings(this.hot.getSettings().mergeCells),this.hot.render()}function Qg(t){if(t){const t=this.mergedCellsCollection.mergedCells,e=this.hot.getSelectedRangeLast(),n=e.getTopStartCorner(),i=e.getBottomEndCorner();for(let r=0;r<t.length;r+=1)if(n.row===t[r].row&&n.col===t[r].col&&i.row===t[r].row+t[r].rowspan-1&&i.col===t[r].col+t[r].colspan-1)return!1}return t}function Zg(t){Ug(Yg,this).row=t.row,Ug(Yg,this).col=t.col}function Jg(t){const e=this.hot.getSelectedRangeLast(),{highlight:n}=e,{columnIndexMapper:i,rowIndexMapper:r}=this.hot;Ug(zg,this)&&(null!==r.getRenderableFromVisualIndex(Ug(zg,this).row)&&(n.row=Ug(zg,this).row),null!==i.getRenderableFromVisualIndex(Ug(zg,this).col)&&(n.col=Ug(zg,this).col),Vg(zg,this,null));const o=this.mergedCellsCollection.get(n.row,n.col);if(!o)return;const s=o.col,a=o.col+o.colspan-1;if(t.col<0){const e=n.col>=s&&n.col<=a?s-1:a,r=i.getNearestNotHiddenIndex(e,-1);t.col=null===r?-this.hot.view.countRenderableColumnsInRange(0,n.col):-Math.max(this.hot.view.countRenderableColumnsInRange(r,n.col)-1,1)}else if(t.col>0){const e=n.col>=s&&n.col<=a?a+1:s,r=i.getNearestNotHiddenIndex(e,1);t.col=null===r?this.hot.view.countRenderableColumnsInRange(n.col,this.hot.countCols()):Math.max(this.hot.view.countRenderableColumnsInRange(n.col,r)-1,1)}const l=o.row,c=o.row+o.rowspan-1;if(t.row<0){const e=n.row>=l&&n.row<=c?l-1:c,i=r.getNearestNotHiddenIndex(e,-1);t.row=null===i?-this.hot.view.countRenderableRowsInRange(0,n.row):-Math.max(this.hot.view.countRenderableRowsInRange(i,n.row)-1,1)}else if(t.row>0){const e=n.row>=l&&n.row<=c?c+1:l,i=r.getNearestNotHiddenIndex(e,1);t.row=null===i?this.hot.view.countRenderableRowsInRange(n.row,this.hot.countRows()):Math.max(this.hot.view.countRenderableRowsInRange(n.row,i)-1,1)}}function tp(t){const e=this.hot.getSelectedRangeLast(),n=e.clone(),{to:i}=e,{columnIndexMapper:r,rowIndexMapper:o}=this.hot,s=(t,e)=>{n.expand(this.hot._createCellCoords(t,e));for(let i=0;i<this.mergedCellsCollection.mergedCells.length;i+=1)n.expandByRange(this.mergedCellsCollection.mergedCells[i].getRange())};if(t.col<0){let o=this.mergedCellsCollection.getStartMostColumnIndex(e,i.col)+t.col;s(i.row,o),"E-W"===e.getHorizontalDirection()&&"E-W"===n.getHorizontalDirection()&&(o=n.getTopStartCorner().col);const a=r.getNearestNotHiddenIndex(o,1);null!==a&&(t.col=-Math.max(this.hot.view.countRenderableColumnsInRange(a,i.col)-1,1))}else if(t.col>0){let o=this.mergedCellsCollection.getEndMostColumnIndex(e,i.col)+t.col;s(i.row,o),"W-E"===e.getHorizontalDirection()&&"W-E"===n.getHorizontalDirection()&&(o=n.getBottomEndCorner().col);const a=r.getNearestNotHiddenIndex(o,-1);null!==a&&(t.col=Math.max(this.hot.view.countRenderableColumnsInRange(i.col,a)-1,1))}if(t.row<0){let r=this.mergedCellsCollection.getTopMostRowIndex(e,i.row)+t.row;s(r,i.col),"S-N"===e.getVerticalDirection()&&"S-N"===n.getVerticalDirection()&&(r=n.getTopStartCorner().row);const a=o.getNearestNotHiddenIndex(r,1);null!==a&&(t.row=-Math.max(this.hot.view.countRenderableRowsInRange(a,i.row)-1,1))}else if(t.row>0){let r=this.mergedCellsCollection.getBottomMostRowIndex(e,i.row)+t.row;s(r,i.col),"N-S"===e.getVerticalDirection()&&"N-S"===n.getVerticalDirection()&&(r=n.getBottomStartCorner().row);const a=o.getNearestNotHiddenIndex(r,-1);null!==a&&(t.row=Math.max(this.hot.view.countRenderableRowsInRange(i.row,a)-1,1))}}function ep(){const t=this.hot.getSelectedRangeLast(),{highlight:e}=t;if(this.hot.selection.isSelectedByColumnHeader()||this.hot.selection.isSelectedByRowHeader())return void Vg(zg,this,e.clone());for(let i=0;i<this.mergedCellsCollection.mergedCells.length;i+=1)t.expandByRange(this.mergedCellsCollection.mergedCells[i].getRange(),!1);for(let i=0;i<this.mergedCellsCollection.mergedCells.length;i+=1)t.expandByRange(this.mergedCellsCollection.mergedCells[i].getRange(),!1);const n=this.mergedCellsCollection.get(e.row,e.col);Vg(zg,this,e.clone()),n&&e.assign(n)}function np(t,e){if(t<0||e<0)return;const n=this.mergedCellsCollection.get(t,e);if(!n)return;const{row:i,col:r,colspan:o,rowspan:s}=n;return[i,r,i+s-1,r+o-1]}function ip(t){var e;t.items.push({name:"---------"},(e=this,{key:"mergeCells",name(){const t=this.getSelectedLast();if(t){const n=e.mergedCellsCollection.get(t[0],t[1]);if(n.row===t[0]&&n.col===t[1]&&n.row+n.rowspan-1===t[2]&&n.col+n.colspan-1===t[3])return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_UNMERGE_CELLS)}return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_MERGE_CELLS)},callback(){const t=this.getSelectedRangeLast();if(!t)return;t.setDirection(this.isRtl()?"NE-SW":"NW-SE");const{from:n,to:i}=t;e.toggleMerge(t),this.selectCell(n.row,n.col,i.row,i.col,!1)},disabled(){const t=this.getSelectedLast();return!t||(sg.isSingleCell({row:t[0],col:t[1],rowspan:t[2]-t[0]+1,colspan:t[3]-t[1]+1})||this.selection.isSelectedByCorner())},hidden:!1}))}function rp(){Vg(zg,this,null)}function op(){if(Ug(zg,this).isCell())return;const t=this.hot.getSelectedRangeLast(),e=t.getVerticalDirection(),n=t.getHorizontalDirection(),i=Ug(zg,this).clone().normalize();Ug(Gg,this).setActiveNode(i.row,i.col),Ug(Yg,this).row>0||Ug(Yg,this).col>0?Ug(Gg,this).setPrevNodeAsActive():("E-W"===n&&Ug(Yg,this).col<0||"S-N"===e&&Ug(Yg,this).row<0)&&Ug(Gg,this).setNextNodeAsActive()}function sp(t,e){const n=this.hot.getSelectedRangeLast(),{columnIndexMapper:i,rowIndexMapper:r}=this.hot;let o=null,s=null;if(Ug(Yg,this).col<0){const{rowEnd:t,colEnd:e}=Ug(Gg,this).getPrevHorizontalNode();s=i.getNearestNotHiddenIndex(e,-1),o=r.getNearestNotHiddenIndex(t,-1)}else if(Ug(Yg,this).col>0){const{rowStart:t,colStart:e}=Ug(Gg,this).getNextHorizontalNode();s=i.getNearestNotHiddenIndex(e,1),o=r.getNearestNotHiddenIndex(t,1)}else if(Ug(Yg,this).row<0){const{rowEnd:t,colEnd:e}=Ug(Gg,this).getPrevVerticalNode();s=i.getNearestNotHiddenIndex(e,-1),o=r.getNearestNotHiddenIndex(t,-1)}else if(Ug(Yg,this).row>0){const{rowStart:t,colStart:e}=Ug(Gg,this).getNextVerticalNode();s=i.getNearestNotHiddenIndex(e,1),o=r.getNearestNotHiddenIndex(t,1)}if(null!==o||null!==s){const i=this.hot._createCellCoords(o,s),r=this.mergedCellsCollection.get(i.row,i.col),a=this.hot.selection.highlight.getFocus();t=i.row,e=i.col,r?n.highlight.assign({row:this.hot.rowIndexMapper.getNearestNotHiddenIndex(r.row,1),col:this.hot.columnIndexMapper.getNearestNotHiddenIndex(r.col,1)}):n.highlight.assign(i),a.clear(),a.add(i).commit()}Ug(Gg,this).setActiveNode(t,e),Vg(Yg,this,{row:0,col:0})}function ap(){this.hot.getSelectedRangeLast().isHeader()||Ug(Gg,this).buildFocusOrder(this.hot.getSelectedRangeLast())}function lp(t,e,n){const i=this.mergedCellsCollection.get(t,e);i&&(i.row!==t||i.col!==e?n.copyable=!1:(n.rowspan=i.rowspan,n.colspan=i.colspan))}function cp(t){const e=this.hot.countCols();this.modifyViewportRowStart(t,e),this.modifyViewportRowEnd(t,e)}function up(t){const e=this.hot.countRows();this.modifyViewportColumnStart(t,e),this.modifyViewportColumnEnd(t,e)}function hp(t,e){this.autofillCalculations.correctSelectionAreaSize(e);const n=this.autofillCalculations.getDirection(e,t);let i=t;if(this.autofillCalculations.dragAreaOverlapsCollections(e,i,n))return i=e,i;const r=this.hot._createCellCoords(e[0],e[1]),o=this.hot._createCellCoords(e[2],e[3]),s=this.hot._createCellRange(r,r,o),a=this.mergedCellsCollection.getWithinRange(s);return 0===a.length||(i=this.autofillCalculations.snapDragArea(e,i,n,a)),i}function dp(t,e){this.mergedCellsCollection.shiftCollections("right",t,e)}function fp(t,e){this.mergedCellsCollection.shiftCollections("left",t,e)}function gp(t,e,n){"auto"!==n&&this.mergedCellsCollection.shiftCollections("down",t,e)}function pp(t,e){this.mergedCellsCollection.shiftCollections("up",t,e)}function mp(t,e){"Autofill.fill"===e&&this.autofillCalculations.recreateAfterDataPopulation(t)}function bp(t,e){if(e&&"area"===e){const e=this.hot.getSelectedRangeLast(),n=this.mergedCellsCollection.getWithinRange(e);Object(c.a)(n,n=>{e.getBottomEndCorner().row===n.getLastRow()&&e.getBottomEndCorner().col===n.getLastColumn()&&(t[2]=n.row,t[3]=n.col)})}}function yp(t,e,n,i){if(n)return this.selectionCalculations.getSelectedMergedCellClassName(t,e,n,i)}function wp(){return this.selectionCalculations.getSelectedMergedCellClassNameToRemove()}function vp(t,e,n,i){if(!(i instanceof MouseEvent))return;const r=this.hot.getSelectedRangeLast(),o=this.mergedCellsCollection.getByRange(r);if(!o)return;const s=this.hot._createCellCoords(o.row,o.col),a=this.hot._createCellCoords(o.row+o.rowspan-1,o.col+o.colspan-1);return 0===this.hot.selection.getLayerLevel()&&r.isEqual(this.hot._createCellRange(s,s,a))}function Cp(t,e,n){if(this.hot.getSettings().rowHeaders||"bottom"===n||"bottom_inline_start_corner"===n)return t;let i,r;if("master"===n)i=this.hot.view.getFirstRenderedVisibleColumn(),r=this.hot.view.getLastRenderedVisibleColumn();else{const t=this.hot.view.getOverlayByName(n);i=this.hot.columnIndexMapper.getVisualFromRenderableIndex(t.clone.wtTable.getFirstRenderedColumn()),r=this.hot.columnIndexMapper.getVisualFromRenderableIndex(t.clone.wtTable.getLastRenderedColumn())}if(!this.mergedCellsCollection.get(e,i))return t;const o=this.hot._createCellCoords(e,i),s=this.hot._createCellCoords(e,r),a=this.hot._createCellRange(o,o,s),l=this.mergedCellsCollection.getWithinRange(a),c=l.reduce((t,e)=>{let{rowspan:n}=e;return Math.max(t,n)},1);let u=0;return l.length>1&&l[0].rowspan<c&&(u=c-l[0].rowspan),l.forEach(i=>{var r;let{rowspan:o}=i,s=0;s="top"===n||"top_inline_start_corner"===n?Math.min(c,this.hot.view.countNotHiddenFixedRowsTop()-e):o-u,t=Math.max(null!==(r=t)&&void 0!==r?r:0,Wg(Kg,this,Sp).call(this,e,s))}),t}function Sp(t,e){const n=this.hot.view._wt.wtSettings.getSettingPure("defaultRowHeight"),i=this.hot.getPlugin("autoRowSize");let r=0;for(let s=t;s<t+e;s++){var o;if(!this.hot.rowIndexMapper.isHidden(s))r+=null!==(o=null===i||void 0===i?void 0:i.getRowHeight(s))&&void 0!==o?o:n}return r}function Op(){Object(mn.b)(gi.a`Plugins \`columnSorting\` and \`multiColumnSorting\` should not be enabled simultaneously. 
    Only \`multiColumnSorting\` will work. The \`columnSorting\` plugin will be disabled.`)}function Tp(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Un("multiColumnSorting",(function(t,e){return function(n,i){const[,...r]=n,[,...o]=i;return function n(i){const s=t[i],a=e[i],l=r[i],c=o[i],u=a.multiColumnSorting,h=(u.compareFunctionFactory?u.compareFunctionFactory:zn(a.type))(s,a,u)(l,c);if(h===Yn){const t=i+1;if("undefined"!==typeof e[t])return n(t)}return h}(0)}}));class _p extends ai{constructor(){super(...arguments),Tp(this,"pluginKey","multiColumnSorting")}static get PLUGIN_KEY(){return"multiColumnSorting"}static get PLUGIN_PRIORITY(){return 170}isEnabled(){return super.isEnabled()}enablePlugin(){!this.enabled&&this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings().columnSorting&&(Op(),this.hot.getPlugin("columnSorting").disablePlugin()),super.enablePlugin()}disablePlugin(){super.disablePlugin()}registerShortcuts(){super.registerShortcuts(),this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Shift","Enter"]],callback:()=>{const{highlight:t}=this.hot.getSelectedRangeLast();return-1===t.row&&t.col>=0&&this.sort(this.getNextSortConfig(t.col,"append")),!1},runOnlyIf:()=>{var t,e;const n=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return n&&(null===(e=this.hot.getSelectedRangeLast())||void 0===e?void 0:e.isSingle())&&this.hot.selection.isCellVisible(n)&&n.isHeader()},relativeToGroup:a.a,position:"before",group:"multiColumnSorting"})}unregisterShortcuts(){super.unregisterShortcuts(),this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup("multiColumnSorting")}sort(t){super.sort(t)}clearSort(){super.clearSort()}isSorted(){return super.isSorted()}getSortConfig(t){return super.getSortConfig(t)}setSortConfig(t){super.setSortConfig(t)}getNormalizedSortConfigs(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)?t:[t]}updateHeaderClasses(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];super.updateHeaderClasses(t,...n),Object(r.P)(t,function(t){const e=t.className.split(" "),n=new RegExp("^sort-[0-9]{1,2}$");return e.filter(t=>n.test(t))}(t)),!1!==this.enabled&&Object(r.a)(t,function(t,e,n){const i=[];return!1===n||t.isColumnSorted(e)&&t.getNumberOfSortedColumns()>1&&i.push("sort-"+(t.getIndexOfColumnInSortQueue(e)+1)),i}(...n))}onUpdateSettings(t){this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings().columnSorting&&Op(),super.onUpdateSettings(t)}onAfterOnCellMouseDown(t,e){!1!==ti(e.row,e.col,t)&&this.wasClickableHeaderClicked(t,e.col)&&(this.hot.getShortcutManager().isCtrlPressed()?(this.hot.deselectCell(),this.hot.selectColumns(e.col),this.sort(this.getNextSortConfig(e.col,"append"))):this.sort(this.getColumnNextConfig(e.col)))}}function Ep(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Rp extends te{constructor(){super(...arguments),Ep(this,"dragged",[]),Ep(this,"lastSetCell",null)}static get PLUGIN_KEY(){return"multipleSelectionHandles"}static get PLUGIN_PRIORITY(){return 160}isEnabled(){return Object(f.i)()}enablePlugin(){this.enabled||(this.registerListeners(),super.enablePlugin())}registerListeners(){const t=this,{rootElement:e}=this.hot;function n(e){if(1===t.dragged.length)return t.dragged.splice(0,t.dragged.length),!0;const n=t.dragged.indexOf(e);if(-1===n)return!1;0===n?t.dragged=t.dragged.slice(0,1):1===n&&(t.dragged=t.dragged.slice(-1))}this.eventManager.addEventListener(e,"touchstart",e=>{let n;return Object(r.w)(e.target,"topSelectionHandle-HitArea")?(n=t.hot.getSelectedRangeLast(),t.dragged.push("top"),t.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},e.preventDefault(),!1):Object(r.w)(e.target,"bottomSelectionHandle-HitArea")?(n=t.hot.getSelectedRangeLast(),t.dragged.push("bottom"),t.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},e.preventDefault(),!1):void 0}),this.eventManager.addEventListener(e,"touchend",e=>Object(r.w)(e.target,"topSelectionHandle-HitArea")?(n.call(t,"top"),t.touchStartRange=void 0,e.preventDefault(),!1):Object(r.w)(e.target,"bottomSelectionHandle-HitArea")?(n.call(t,"bottom"),t.touchStartRange=void 0,e.preventDefault(),!1):void 0),this.eventManager.addEventListener(e,"touchmove",e=>{const{rootDocument:n}=this.hot;let i,r,o,s,a,l;if(0===t.dragged.length)return;const c=n.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY);c&&c!==t.lastSetCell&&("TD"!==c.nodeName&&"TH"!==c.nodeName||(i=t.hot.getCoords(c),-1===i.col&&(i.col=0),r=t.hot.getSelectedRangeLast(),o=r.getWidth(),s=r.getHeight(),a=r.getDirection(),1===o&&1===s&&t.hot.selection.setRangeEnd(i),l=t.getCurrentRangeCoords(r,i,t.touchStartRange.direction,a,t.dragged[0]),null!==l.start&&t.hot.selection.setRangeStart(l.start),t.hot.selection.setRangeEnd(l.end),t.lastSetCell=c),e.preventDefault())})}getCurrentRangeCoords(t,e,n,i,r){const o=t.getTopStartCorner(),s=t.getBottomEndCorner(),a=t.getBottomStartCorner(),l=t.getTopEndCorner();let c={start:null,end:null};switch(n){case"NE-SW":switch(i){case"NE-SW":case"NW-SE":c="top"===r?{start:this.hot._createCellCoords(e.row,t.highlight.col),end:this.hot._createCellCoords(a.row,e.col)}:{start:this.hot._createCellCoords(t.highlight.row,e.col),end:this.hot._createCellCoords(e.row,o.col)};break;case"SE-NW":"bottom"===r&&(c={start:this.hot._createCellCoords(s.row,e.col),end:this.hot._createCellCoords(e.row,o.col)})}break;case"NW-SE":switch(i){case"NE-SW":"top"===r?c={start:e,end:a}:c.end=e;break;case"NW-SE":"top"===r?c={start:e,end:s}:c.end=e;break;case"SE-NW":"top"===r?c={start:e,end:o}:c.end=e;break;case"SW-NE":"top"===r?c={start:e,end:l}:c.end=e}break;case"SW-NE":switch(i){case"NW-SE":c="bottom"===r?{start:this.hot._createCellCoords(e.row,o.col),end:this.hot._createCellCoords(a.row,e.col)}:{start:this.hot._createCellCoords(o.row,e.col),end:this.hot._createCellCoords(e.row,s.col)};break;case"SW-NE":c="top"===r?{start:this.hot._createCellCoords(t.highlight.row,e.col),end:this.hot._createCellCoords(e.row,s.col)}:{start:this.hot._createCellCoords(e.row,o.col),end:this.hot._createCellCoords(o.row,e.col)};break;case"SE-NW":"bottom"===r?c={start:this.hot._createCellCoords(e.row,l.col),end:this.hot._createCellCoords(o.row,e.col)}:"top"===r&&(c={start:a,end:e})}break;case"SE-NW":switch(i){case"NW-SE":case"NE-SW":case"SW-NE":"top"===r&&(c.end=e);break;case"SE-NW":"top"===r?c.end=e:c={start:e,end:o}}}return c}isDragged(){return this.dragged.length>0}}var Mp=n(236);function xp(){let{label:t="",colspan:e=1,origColspan:n=1,collapsible:i=!1,crossHiddenColumns:r=[],isCollapsed:o=!1,isHidden:s=!1,isRoot:a=!1,isPlaceholder:l=!1,headerClassNames:c=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{label:t,colspan:e,origColspan:n,collapsible:i,isCollapsed:o,crossHiddenColumns:r,isHidden:s,isRoot:a,isPlaceholder:l,headerClassNames:c}}function Ip(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function kp(t,e){return t.get(Np(t,e))}function Ap(t,e,n){return t.set(Np(t,e),n),n}function Np(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}const jp=["label","collapsible"];var Hp=new WeakMap,Dp=new WeakMap,Pp=new WeakMap;class Lp{constructor(){Ip(this,Hp,[]),Ip(this,Dp,0),Ip(this,Pp,1/0)}setColumnsLimit(t){Ap(Pp,this,t)}setData(){Ap(Hp,this,function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;const n=[];if(0===e)return n;Object(c.a)(t,t=>{const i=[];let r=0;n.push(i),Object(c.a)(t,t=>{const n=xp();if(Object(s.l)(t)){const{label:e,colspan:i,headerClassName:r}=t;n.label=Object(u.f)(e),"number"===typeof i&&i>1&&(n.colspan=i,n.origColspan=i),"string"===typeof r&&(n.headerClassNames=[...r.split(" ")])}else n.label=Object(u.f)(t);r+=n.origColspan;let o=!1;if(r>=e&&(n.colspan=n.origColspan-(r-e),n.origColspan=n.colspan,o=!0),i.push(n),n.colspan>1)for(let e=0;e<n.colspan-1;e++)i.push({label:"",isPlaceholder:!0});return!o})});const i=Math.max(...Object(c.c)(n,t=>t.length));return Object(c.a)(n,t=>{if(t.length<i){const e=Object(c.c)(new Array(i-t.length),()=>xp());t.splice(t.length,0,...e)}}),n}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],kp(Pp,this))),Ap(Dp,this,kp(Hp,this).length)}getData(){return kp(Hp,this)}mergeWith(t){Object(c.a)(t,t=>{let{row:e,col:n,...i}=t;const r=this.getHeaderSettings(e,n);null!==r&&Object(s.h)(r,i,jp)})}map(t){Object(c.a)(kp(Hp,this),e=>{Object(c.a)(e,e=>{const n=t({...e});Object(s.l)(n)&&Object(s.h)(e,n,jp)})})}getHeaderSettings(t,e){var n;if(t>=kp(Dp,this)||t<0)return null;const i=kp(Hp,this)[t];return!1===Array.isArray(i)||e>=i.length?null:null!==(n=i[e])&&void 0!==n?n:null}getHeadersSettings(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const i=[];if(t>=kp(Dp,this)||t<0)return i;const r=kp(Hp,this)[t];let o=0;for(let s=e;s<r.length;s++){const t=r[s];if(t.isPlaceholder)throw new Error("The first column settings cannot overlap the other header layers");if(o+=t.colspan,i.push(t),t.colspan>1&&(s+=t.colspan-1),o===n)break;if(o>n)throw new Error("The last column settings cannot overlap the other header layers")}return i}getLayersCount(){return kp(Dp,this)}getColumnsCount(){return kp(Dp,this)>0?kp(Hp,this)[0].length:0}clear(){Ap(Hp,this,[]),Ap(Dp,this,0)}}function Fp(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Bp=new Map([["DF-pre-order",function t(e,n){let i=e.call(n,this);for(let r=0;r<this.childs.length;r++){if(!1===i)return!1;i=t.call(this.childs[r],e,n)}return i}],["DF-post-order",function t(e,n){for(let i=0;i<this.childs.length;i++){if(!1===t.call(this.childs[i],e,n))return!1}return e.call(n,this)}],["BF",function(t,e){const n=[this];!function i(){if(0===n.length)return;const r=n.shift();n.push(...r.childs),!1!==t.call(e,r)&&i()}()}]]);class Vp{constructor(t){Fp(this,"data",{}),Fp(this,"parent",null),Fp(this,"childs",[]),this.data=t}addChild(t){t.parent=this,this.childs.push(t)}cloneTree(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;const e=new Vp({...t.data});for(let n=0;n<t.childs.length;n++)e.addChild(this.cloneTree(t.childs[n]));return e}replaceTreeWith(t){this.data={...t.data},this.childs=[];for(let e=0;e<t.childs.length;e++)this.addChild(t.childs[e])}walkDown(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BF";if(!Bp.has(e))throw new Error(`Traversal strategy "${e}" does not exist`);Bp.get(e).call(this,t,this)}walkUp(t){const e=this,n=i=>{!1!==t.call(e,i)&&null!==i.parent&&n(i.parent)};n(this)}}function Up(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function Wp(t,e){return t.get(zp(t,e))}function zp(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Yp=new WeakMap,Gp=new WeakMap,$p=new WeakMap;class Kp{constructor(t){var e,n,i;Up(this,Yp,new Map),Up(this,Gp,new Map),Up(this,$p,null),n=this,i=t,(e=$p).set(zp(e,n),i)}getRoots(){return Array.from(Wp(Yp,this).values())}getRootByColumn(t){let e;return Wp(Gp,this).has(t)&&(e=Wp(Yp,this).get(Wp(Gp,this).get(t))),e}getNode(t,e){const n=this.getRootByColumn(e);if(!n)return;const i=e-Wp(Gp,this).get(e);let r,o=0;return n.walkDown(n=>{const{data:{origColspan:s,headerLevel:a}}=n;if(t===a){if(i>=o&&i<=o+s-1)return r=n,r.data.isRoot=e===r.data.columnIndex,!1;o+=s}}),r}rebuildTreeIndex(){let t=0;Wp(Gp,this).clear(),Object(c.a)(Wp(Yp,this),e=>{let[,{data:{colspan:n}}]=e;for(let i=t;i<t+n;i++)Wp(Gp,this).set(i,t);t+=n})}buildTree(){this.clear();const t=Wp($p,this).getColumnsCount();let e=0;for(;e<t;){const t=Wp($p,this).getHeaderSettings(0,e),n=new Vp;Wp(Yp,this).set(e,n),this.buildLeaves(n,e,0,t.origColspan),e+=t.origColspan}this.rebuildTreeIndex()}buildLeaves(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const r=Wp($p,this).getHeadersSettings(n,e,i);n+=1,Object(c.a)(r,i=>{const r={...i,headerLevel:n-1,columnIndex:e};let o;1===n?(t.data=r,o=t):(o=new Vp(r),t.addChild(o)),n<Wp($p,this).getLayersCount()&&this.buildLeaves(o,e,n,i.origColspan),e+=i.origColspan})}clear(){Wp(Yp,this).clear(),Wp(Gp,this).clear()}}function Xp(t,e){t.walkDown(t=>{let{data:n,childs:i}=t;if(!n.isHidden&&(e(n.columnIndex),0===i.length))for(let r=1;r<n.colspan;r++)e(n.columnIndex+r)})}function qp(t,e){let{childs:n}=t;if(0!==n.length)return n[0].data[e]}function Qp(t){return qp(t,"origColspan")===t.data.origColspan}function Zp(t){const{data:e,childs:n}=t;if(!e.isCollapsed||e.isHidden||e.origColspan<=1)return{rollbackModification:()=>{},affectedColumns:[],colspanCompensation:0};if(Qp(t))return Zp(n[0]);e.isCollapsed=!1;const i=n.slice(1),r=new Set;let o=0;if(i.length>0)Object(c.a)(i,t=>{t.replaceTreeWith(t.data.clonedTree),t.data.clonedTree=null;const e=t.data;o+=e.colspan,Xp(t,t=>{r.add(t)})});else{const{colspan:t,origColspan:n,columnIndex:i}=e;o=n-t;for(let e=1;e<n;e++)r.add(i+e)}return t.walkUp(t=>{const{data:e}=t;e.colspan+=o,e.colspan>=e.origColspan?(e.colspan=e.origColspan,e.isCollapsed=!1):Qp(t)&&(e.isCollapsed=qp(t,"isCollapsed"))}),{rollbackModification:()=>Jp(t),affectedColumns:Array.from(r),colspanCompensation:o}}function Jp(t){var e;const{data:n,childs:i}=t;if(n.isCollapsed||n.isHidden||n.origColspan<=1)return{rollbackModification:()=>{},affectedColumns:[],colspanCompensation:0};if(Qp(t))return Jp(i[0]);n.isCollapsed=!0;const r=i.slice(1),o=new Set;if(r.length>0)Object(c.a)(r,t=>{Xp(t,t=>{o.add(t)}),t.data.clonedTree=t.cloneTree(),t.walkDown(t=>{let{data:e}=t;e.isHidden=!0})});else{const{origColspan:t,columnIndex:e}=n;for(let n=1;n<t;n++){const t=e+n;o.add(t)}}const s=n.colspan-(null!==(e=qp(t,"colspan"))&&void 0!==e?e:1);return t.walkUp(t=>{const{data:e}=t;e.colspan-=s,e.colspan<=1?(e.colspan=1,e.isCollapsed=!0):Qp(t)&&(e.isCollapsed=qp(t,"isCollapsed"))}),{rollbackModification:()=>Zp(t),affectedColumns:Array.from(o),colspanCompensation:s}}const tm=new Map([["collapse",Jp],["expand",Zp],["hide-column",function(t,e){if(!Number.isInteger(e))throw new Error("The passed gridColumnIndex argument has invalid type.");if(t.childs.length>0)throw new Error(gi.a`The passed node is not the last node on the tree. Only for\x20
the last node, the hide column modification can be applied.`);const{crossHiddenColumns:n}=t.data;if(n.includes(e))return;let i=!1;t.walkUp(t=>{const{data:{collapsible:e}}=t;if(e)return i=!0,!1}),i||t.walkUp(t=>{const{data:n}=t;n.crossHiddenColumns.push(e),n.colspan>1?n.colspan-=1:n.isHidden=!0})}],["show-column",function(t,e){if(!Number.isInteger(e))throw new Error("The passed gridColumnIndex argument has invalid type.");if(t.childs.length>0)throw new Error(gi.a`The passed node is not the last node on the tree. Only for\x20
the last node, the show column modification can be applied.`);const{crossHiddenColumns:n}=t.data;if(!n.includes(e))return;let i=!1;t.walkUp(t=>{const{data:{collapsible:e}}=t;if(e)return i=!0,!1}),i||t.walkUp(t=>{const{data:n}=t;n.crossHiddenColumns.splice(n.crossHiddenColumns.indexOf(e),1),!n.isHidden&&n.colspan<n.origColspan&&(n.colspan+=1),n.isHidden=!1})}]]);function em(t){const e=[];return Object(c.a)(t,t=>{t.walkDown(t=>{const n=t.data,{origColspan:i,columnIndex:r,headerLevel:o,crossHiddenColumns:s}=n,a=function(t,e){let n;Array.isArray(t[e])?n=t[e]:(n=[],t[e]=n);return n}(e,o);let l=!1;for(let e=r;e<r+i;e++){if(s.includes(e)||l)a.push({label:"",isPlaceholder:!0});else{const t=nm(n);t.isRoot=!0,a.push(t),l=!0}}})}),e}function nm(t){const{crossHiddenColumns:e,...n}=xp(t);return n}function im(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function rm(t,e,n){return t.set(sm(t,e),n),n}function om(t,e){return t.get(sm(t,e))}function sm(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var am=new WeakMap,lm=new WeakMap,cm=new WeakMap;class um{constructor(){im(this,am,new Lp),im(this,lm,new Kp(om(am,this))),im(this,cm,[[]])}setState(t){om(am,this).setData(t);let e=!1;try{om(lm,this).buildTree()}catch(n){om(lm,this).clear(),om(am,this).clear(),e=!0}return rm(cm,this,em(om(lm,this).getRoots())),e}setColumnsLimit(t){om(am,this).setColumnsLimit(t)}mergeStateWith(t){const e=Object(c.c)(t,t=>{let{row:e,...n}=t;return{row:e<0?this.rowCoordsToLevel(e):e,...n}});om(am,this).mergeWith(e),om(lm,this).buildTree(),rm(cm,this,em(om(lm,this).getRoots()))}mapState(t){om(am,this).map(t),om(lm,this).buildTree(),rm(cm,this,em(om(lm,this).getRoots()))}mapNodes(t){return Object(c.d)(om(lm,this).getRoots(),(e,n)=>(n.walkDown(n=>{const i=t(n.data);void 0!==i&&e.push(i)}),e),[])}triggerNodeModification(t,e,n){e<0&&(e=this.rowCoordsToLevel(e));const i=om(lm,this).getNode(e,n);let r;return i&&(r=function(t,e,n){if(!tm.has(t))throw new Error(`The node modifier action ("${t}") does not exist.`);return tm.get(t)(e,n)}(t,i,n),rm(cm,this,em(om(lm,this).getRoots()))),r}triggerColumnModification(t,e){return this.triggerNodeModification(t,-1,e)}rowCoordsToLevel(t){if(t>=0)return null;const e=t+Math.max(this.getLayersCount(),1);return e<0?null:e}levelToRowCoords(t){if(t<0)return null;const e=t-Math.max(this.getLayersCount(),1);return e>=0?null:e}getHeaderSettings(t,e){var n,i;return t<0&&(t=this.rowCoordsToLevel(t)),null===t||t>=this.getLayersCount()?null:null!==(n=null===(i=om(cm,this)[t])||void 0===i?void 0:i[e])&&void 0!==n?n:null}getHeaderTreeNodeData(t,e){const n=this.getHeaderTreeNode(t,e);return n?{...n.data}:null}getHeaderTreeNode(t,e){if(t<0&&(t=this.rowCoordsToLevel(t)),null===t||t>=this.getLayersCount())return null;const n=om(lm,this).getNode(t,e);return n||null}findTopMostEntireHeaderLevel(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;const i=n-t+1;let r=!1,o=null;for(let s=t;s<=n;s++){const e=om(lm,this).getRootByColumn(s);if(!e)break;r=!0,e.walkDown(e=>{const{columnIndex:r,headerLevel:s,origColspan:a,isHidden:l}=e.data;l||a<=i&&r>=t&&r+a-1<=n&&(null===o||s<o)&&(o=s)},"DF-pre-order")}return r&&null===o?-1:this.levelToRowCoords(null!==(e=o)&&void 0!==e?e:0)}findLeftMostColumnIndex(t,e){var n;const{isRoot:i}=null!==(n=this.getHeaderSettings(t,e))&&void 0!==n?n:{isRoot:!0};if(i)return e;let r=e-1;for(;r>=0;){var o;const{isRoot:e}=null!==(o=this.getHeaderSettings(t,r))&&void 0!==o?o:{isRoot:!0};if(e)break;r-=1}return r}findRightMostColumnIndex(t,e){var n;const{isRoot:i,origColspan:r}=null!==(n=this.getHeaderSettings(t,e))&&void 0!==n?n:{isRoot:!0,origColspan:1};if(i)return e+r-1;let o=e+1;for(;o<this.getColumnsCount();){var s;const{isRoot:e}=null!==(s=this.getHeaderSettings(t,o))&&void 0!==s?s:{isRoot:!0};if(e)break;o+=1}return o-1}getLayersCount(){return om(am,this).getLayersCount()}getColumnsCount(){return om(am,this).getColumnsCount()}clear(){rm(cm,this,[]),om(am,this).clear(),om(lm,this).clear()}}function hm(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var dm=class{constructor(t,e){hm(this,"hot",void 0),hm(this,"nestedHeaderSettingsGetter",void 0),hm(this,"layersCount",0),hm(this,"container",void 0),hm(this,"widthsMap",void 0),this.hot=t,this.nestedHeaderSettingsGetter=e,this.widthsMap=this.hot.columnIndexMapper.createAndRegisterIndexMap("nestedHeaders.widthsMap","physicalIndexToValue")}setLayersCount(t){return this.layersCount=t,this}getWidth(t){return this.widthsMap.getValueAtIndex(this.hot.toPhysicalColumn(t))}buildWidthsMap(){this.container=this.hot.rootDocument.createElement("div"),this.container.classList.add("handsontable","htGhostTable","htAutoSize"),this._buildGhostTable(this.container),this.hot.rootDocument.body.appendChild(this.container);const t=this.container.querySelectorAll("tr:last-of-type th"),e=t.length;this.widthsMap.clear();for(let n=0;n<e;n++){const e=this.hot.columnIndexMapper.getVisualFromRenderableIndex(n),i=this.hot.toPhysicalColumn(e);this.widthsMap.setValueAtIndex(i,t[n].offsetWidth)}this.container.parentNode.removeChild(this.container),this.container=null}_buildGhostTable(t){const{rootDocument:e,columnIndexMapper:n}=this.hot,i=e.createDocumentFragment(),o=e.createElement("table"),s=!!this.hot.getSettings().dropdownMenu,a=n.getRenderableIndexesLength();for(let l=0;l<this.layersCount;l++){const t=e.createElement("tr");for(let i=0;i<a;i++){let o=n.getVisualFromRenderableIndex(i);null===o&&(o=i);const a=e.createElement("th"),c=this.nestedHeaderSettingsGetter(l,o);if(c&&(!c.isPlaceholder||c.isHidden)){let e=c.label;s&&(e+='<button class="changeType"></button>'),Object(r.f)(a,e),a.colSpan=c.colspan,t.appendChild(a)}}o.appendChild(t)}i.appendChild(o),t.appendChild(i)}clear(){this.widthsMap.clear(),this.container=null}};function fm(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gm(t,e,n){pm(t,e),e.set(t,n)}function pm(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function mm(t,e,n){return t.set(ym(t,e),n),n}function bm(t,e){return t.get(ym(t,e))}function ym(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var wm=new WeakMap,vm=new WeakMap,Cm=new WeakMap,Sm=new WeakMap,Om=new WeakSet;class Tm extends te{constructor(){var t,e;super(...arguments),pm(t=this,e=Om),e.add(t),gm(this,wm,new um),gm(this,vm,null),gm(this,Cm,null),gm(this,Sm,!1),fm(this,"ghostTable",new dm(this.hot,(t,e)=>this.getHeaderSettings(t,e))),fm(this,"detectedOverlappedHeaders",!1)}static get PLUGIN_KEY(){return"nestedHeaders"}static get PLUGIN_PRIORITY(){return 280}isEnabled(){return!!this.hot.getSettings().nestedHeaders}enablePlugin(){var t=this;if(this.enabled)return;const{nestedHeaders:e}=this.hot.getSettings();Array.isArray(e)&&Array.isArray(e[0])||Object(mn.b)(gi.a`Your Nested Headers plugin configuration is invalid. The settings has to be\x20
                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]`),this.addHook("init",()=>ym(Om,this,Vm).call(this)),this.addHook("afterLoadData",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ym(Om,t,Um).call(t,...n)})),this.addHook("beforeOnCellMouseDown",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ym(Om,t,xm).call(t,...n)})),this.addHook("afterOnCellMouseDown",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ym(Om,t,Im).call(t,...n)})),this.addHook("beforeOnCellMouseOver",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ym(Om,t,km).call(t,...n)})),this.addHook("beforeOnCellMouseUp",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ym(Om,t,Am).call(t,...n)})),this.addHook("beforeSelectionHighlightSet",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ym(Om,t,Nm).call(t,...n)})),this.addHook("modifyTransformStart",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ym(Om,t,jm).call(t,...n)})),this.addHook("afterSelection",()=>ym(Om,this,_m).call(this)),this.addHook("afterSelectionFocusSet",()=>ym(Om,this,_m).call(this)),this.addHook("beforeViewportScrollHorizontally",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ym(Om,t,Em).call(t,...n)})),this.addHook("afterGetColumnHeaderRenderers",t=>ym(Om,this,Dm).call(this,t)),this.addHook("modifyColWidth",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ym(Om,t,Lm).call(t,...n)})),this.addHook("modifyColumnHeaderValue",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ym(Om,t,Fm).call(t,...n)})),this.addHook("beforeHighlightingColumnHeader",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ym(Om,t,Rm).call(t,...n)})),this.addHook("beforeCopy",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ym(Om,t,Mm).call(t,...n)})),this.addHook("beforeSelectColumns",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ym(Om,t,Hm).call(t,...n)})),this.addHook("afterViewportColumnCalculatorOverride",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ym(Om,t,Pm).call(t,...n)})),this.addHook("modifyFocusedElement",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ym(Om,t,Bm).call(t,...n)})),this.hot.columnIndexMapper.addLocalHook("cacheUpdated",()=>ym(Om,this,_m).call(this)),this.hot.rowIndexMapper.addLocalHook("cacheUpdated",()=>ym(Om,this,_m).call(this)),super.enablePlugin(),this.updatePlugin()}updatePlugin(){if(!this.hot.view)return;const{nestedHeaders:t}=this.hot.getSettings();bm(wm,this).setColumnsLimit(this.hot.countCols()),Array.isArray(t)&&(this.detectedOverlappedHeaders=bm(wm,this).setState(t)),this.detectedOverlappedHeaders&&Object(mn.b)(gi.a`Your Nested Headers plugin setup contains overlapping headers. This kind of configuration\x20
                        is currently not supported.`),this.enabled&&this.hot.columnIndexMapper.hidingMapsCollection.getMergedValues().forEach((t,e)=>{const n=!0===t?"hide-column":"show-column";bm(wm,this).triggerColumnModification(n,e)}),!bm(vm,this)&&this.enabled&&mm(vm,this,this.hot.columnIndexMapper.createChangesObserver("hiding").subscribe(t=>{t.forEach(t=>{let{op:e,index:n,newValue:i}=t;if("replace"===e){const t=!0===i?"hide-column":"show-column";bm(wm,this).triggerColumnModification(t,n)}}),this.ghostTable.buildWidthsMap()})),this.ghostTable.setLayersCount(this.getLayersCount()).buildWidthsMap(),super.updatePlugin()}disablePlugin(){this.clearColspans(),bm(wm,this).clear(),bm(vm,this).unsubscribe(),mm(vm,this,null),this.ghostTable.clear(),super.disablePlugin()}getStateManager(){return bm(wm,this)}getLayersCount(){return bm(wm,this).getLayersCount()}getHeaderSettings(t,e){return bm(wm,this).getHeaderSettings(t,e)}clearColspans(){if(!this.hot.view)return;const{_wt:t}=this.hot.view,e=t.getSetting("columnHeaders").length,n=t.wtTable.THEAD,i=t.wtOverlays.topOverlay.clone.wtTable.THEAD,o=t.wtOverlays.topInlineStartCornerOverlay?t.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null;for(let s=0;s<e;s++){const t=n.childNodes[s];if(!t)break;const e=i.childNodes[s],a=o?o.childNodes[s]:null;for(let n=0,i=t.childNodes.length;n<i;n++)t.childNodes[n].removeAttribute("colspan"),Object(r.P)(t.childNodes[n],"hiddenHeader"),e&&e.childNodes[n]&&(e.childNodes[n].removeAttribute("colspan"),Object(r.P)(e.childNodes[n],"hiddenHeader")),o&&a&&a.childNodes[n]&&(a.childNodes[n].removeAttribute("colspan"),Object(r.P)(a.childNodes[n],"hiddenHeader"))}}headerRendererFactory(t){var e=this;const n=this.hot.view._wt.getSetting("fixedColumnsStart");return(i,o)=>{var s;const{columnIndexMapper:a,view:l}=this.hot;let c=a.getVisualFromRenderableIndex(i);null===c&&(c=i),o.removeAttribute("colspan"),Object(r.P)(o,"hiddenHeader");const{colspan:u,isHidden:h,isPlaceholder:d,headerClassNames:f}=null!==(s=bm(wm,this).getHeaderSettings(t,c))&&void 0!==s?s:{label:""};if(d||h)Object(r.a)(o,"hiddenHeader");else if(u>1){var g,p;const{wtOverlays:t}=l._wt,e=null===(g=t.topInlineStartCornerOverlay)||void 0===g?void 0:g.clone.wtTable.THEAD.contains(o),r=null===(p=t.inlineStartOverlay)||void 0===p?void 0:p.clone.wtTable.THEAD.contains(o),s=e||r?Math.min(u,n-i):u;s>1&&o.setAttribute("colspan",s)}if(this.hot.view.appendColHeader(c,o,(function(){return e.getColumnHeaderValue(...arguments)}),t),!d&&!h){const t=o.querySelector("div.relative");t&&f&&f.length>0&&(Object(r.P)(t,this.hot.getColumnMeta(c).headerClassName),Object(r.a)(t,f))}}}getColumnHeaderValue(t,e){var n;const{isHidden:i,isPlaceholder:r}=null!==(n=bm(wm,this).getHeaderSettings(e,t))&&void 0!==n?n:{};return r||i?"":this.hot.getColHeader(t,e)}destroy(){mm(wm,this,null),null!==bm(vm,this)&&(bm(vm,this).unsubscribe(),mm(vm,this,null)),super.destroy()}_getHeaderTreeNodeDataByCoords(t){if(!(t.row>=0||t.col<0))return bm(wm,this).getHeaderTreeNodeData(t.row,t.col)}}function _m(){var t;const e=null===(t=this.hot)||void 0===t?void 0:t.getSelectedRangeLast();if(!e)return;const{highlight:n}=e;if(n.isHeader()&&n.col>=0){const t=bm(wm,this).findLeftMostColumnIndex(n.row,n.col),e=this.hot.selection.highlight.getFocus();e.visualCellRange.highlight.col=t,e.visualCellRange.from.col=t,e.visualCellRange.to.col=t,e.commit()}}function Em(t){const e=this.hot.getSelectedRangeLast();if(!e)return t;const{highlight:n}=e;if(!(n.isHeader()&&n.col>=0))return t;const i=this.hot.view.getFirstFullyVisibleColumn(),r=this.hot.view.getLastFullyVisibleColumn(),o=bm(wm,this).findLeftMostColumnIndex(n.row,n.col),s=bm(wm,this).findRightMostColumnIndex(n.row,n.col);return o<i&&s>r?t:o<i?o:s}function Rm(t,e,n){const i=bm(wm,this).getHeaderTreeNodeData(e,t);if(!i)return t;const{columnCursor:r,selectionType:o,selectionWidth:s}=n,{isRoot:a,colspan:l}=bm(wm,this).getHeaderSettings(e,t);if(o===Mp.g){if(!a)return i.columnIndex}else if(o===Mp.a&&(l>s-r||!a))return null;return t}function Mm(t,e,n){let{columnHeadersCount:i}=n;if(0!==i)for(let o=0;o<e.length;o++){const{startRow:n,startCol:i,endRow:s,endCol:a}=e[o],l=s-n+1,c=i-a+1;if(n>=0||1===c)break;for(let e=i;e<=a;e++)for(let o=n;o<=s;o++){var r;const n=l+o,s=e-i;if(0===s)continue;!1===(null===(r=bm(wm,this).getHeaderTreeNodeData(o,e))||void 0===r?void 0:r.isRoot)&&(t[n][s]="")}}}function xm(t,e,n,i){this._getHeaderTreeNodeDataByCoords(e)&&(i.column=!0)}function Im(t,e){const n=this._getHeaderTreeNodeDataByCoords(e);if(!n)return;mm(Cm,this,e.clone()),mm(Sm,this,!0);const{selection:i}=this.hot,r=i.isSelected()?i.getSelectedRange().current():null,s=[],{columnIndex:a,origColspan:l}=n,c=!i.inInSelection(e);t.shiftKey&&r?e.col<r.from.col?s.push(r.getTopEndCorner().col,a,e.row):e.col>r.from.col?s.push(r.getTopStartCorner().col,a+l-1,e.row):s.push(a,a+l-1,e.row):(Object(o.b)(t)||Object(o.c)(t)&&c||Object(o.d)(t))&&s.push(a,a+l-1,e.row),i.selectColumns(...s)}function km(t,e,n,i){if(!this.hot.view.isMouseDown())return;const r=this._getHeaderTreeNodeDataByCoords(e);if(!r)return;const{columnIndex:o,origColspan:s}=r,a=this.hot.getSelectedRangeLast(),l=a.getTopStartCorner(),c=a.getBottomEndCorner(),{from:u}=a;i.column=!0,i.cell=!0;const h=[],d=Object(bt.a)(e.row,-1/0,-1);e.col<u.col?h.push(c.col,o,d):e.col>u.col?h.push(l.col,o+s-1,d):h.push(o,o+s-1,d),this.hot.selection.selectColumns(...h)}function Am(){mm(Sm,this,!1)}function Nm(){const{navigableHeaders:t}=this.hot.getSettings();if(!this.hot.view.isMouseDown()||!bm(Sm,this)||!t)return;const e=this.hot.getSelectedRangeLast(),n=e.getTopStartCorner().col,i=e.getBottomEndCorner().col,{columnIndex:r,origColspan:o}=bm(wm,this).getHeaderTreeNodeData(bm(Cm,this).row,bm(Cm,this).col);if(e.setHighlight(bm(Cm,this)),o>e.getWidth()||r<n||r+o-1>i){const t=bm(wm,this).findTopMostEntireHeaderLevel(Object(bt.a)(n,r,r+o-1),Object(bt.a)(i,r,r+o-1));e.highlight.row=t,e.highlight.col=e.from.col}}function jm(t){const{highlight:e}=this.hot.getSelectedRangeLast(),n=this.hot._createCellCoords(e.row+t.row,e.col+t.col);if(!(n.isHeader()&&n.col>=0))return;const i=bm(wm,this).findLeftMostColumnIndex(n.row,n.col),r=bm(wm,this).findRightMostColumnIndex(n.row,n.col);if(t.col<0){const n=e.col>=i&&e.col<=r?i-1:r,o=this.hot.columnIndexMapper.getNearestNotHiddenIndex(n,-1);t.col=null===o?-this.hot.view.countRenderableColumnsInRange(0,e.col):-Math.max(this.hot.view.countRenderableColumnsInRange(o,e.col)-1,1)}else if(t.col>0){const n=e.col>=i&&e.col<=r?r+1:i,o=this.hot.columnIndexMapper.getNearestNotHiddenIndex(n,1);t.col=null===o?this.hot.view.countRenderableColumnsInRange(e.col,this.hot.countCols()):Math.max(this.hot.view.countRenderableColumnsInRange(e.col,o)-1,1)}}function Hm(t,e){const n=t.row,i=this._getHeaderTreeNodeDataByCoords({row:n,col:t.col}),r=this._getHeaderTreeNodeDataByCoords({row:n,col:e.col});e.col<t.col?(i&&(t.col=i.columnIndex+i.origColspan-1),r&&(e.col=r.columnIndex)):e.col>=t.col&&(i&&(t.col=i.columnIndex),r&&(e.col=r.columnIndex+r.origColspan-1))}function Dm(t){t.length=0;for(let e=0;e<bm(wm,this).getLayersCount();e++)t.push(this.headerRendererFactory(e))}function Pm(t){const e=bm(wm,this).getLayersCount();let n=t.startColumn,i=!!e;for(let r=0;r<e;r++){const e=bm(wm,this).findLeftMostColumnIndex(r,t.startColumn),o=this.hot.columnIndexMapper.getRenderableFromVisualIndex(e);if(e>=0&&(i=!1),Object(bt.b)(o)&&o<t.startColumn){n=o;break}}t.startColumn=i?bm(wm,this).getHeaderTreeNodeData(0,n).columnIndex:n}function Lm(t,e){const n=this.ghostTable.getWidth(e);return t>n?t:n}function Fm(t,e,n){var i;const{label:r}=null!==(i=bm(wm,this).getHeaderTreeNodeData(n,e))&&void 0!==i?i:{label:""};return r}function Bm(t,e){if(t<0)return this.hot.getCell(t,bm(wm,this).findLeftMostColumnIndex(t,e),!0)}function Vm(){this.updatePlugin()}function Um(t,e){e||this.updatePlugin()}function Wm(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var zm=class{constructor(t,e){Wm(this,"hot",void 0),Wm(this,"data",null),Wm(this,"plugin",void 0),Wm(this,"parentReference",new WeakMap),Wm(this,"cache",{levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap}),this.hot=e,this.plugin=t}setData(t){this.data=t}getData(){return this.data}getRawSourceData(){let t=null;return this.plugin.disableCoreAPIModifiers(),t=this.hot.getSourceData(),this.plugin.enableCoreAPIModifiers(),t}updateWithData(t){this.setData(t),this.rewriteCache()}rewriteCache(){this.cache={levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap},Object(bt.d)(0,this.data.length-1,t=>{this.cacheNode(this.data[t],0,null)})}cacheNode(t,e,n){this.cache.levels[e]||(this.cache.levels[e]=[],this.cache.levelCount+=1),this.cache.levels[e].push(t),this.cache.rows.push(t),this.cache.nodeInfo.set(t,{parent:n,row:this.cache.rows.length-1,level:e}),this.hasChildren(t)&&Object(c.a)(t.__children,n=>{this.cacheNode(n,e+1,t)})}getDataObject(t){return null===t||void 0===t?null:this.cache.rows[t]}readTreeNodes(t,e,n,i){let r=!1,o=e;if(isNaN(o)&&o.end)return o;let s=t;return s||(s={__children:this.data},r=!0,o-=1),null!==n&&void 0!==n&&o===n?{result:s,end:!0}:null!==i&&void 0!==i&&s===i?{result:o,end:!0}:(o+=1,s.__children&&Object(c.a)(s.__children,t=>{if(this.parentReference.set(t,r?null:s),o=this.readTreeNodes(t,o,n,i),isNaN(o)&&o.end)return!1}),o)}mockParent(){const t=this.mockNode();return t.__children=this.data,t}mockNode(){const t={};return Object(s.o)(this.data[0],(e,n)=>{t[n]=null}),t}getRowIndex(t){return null===t||void 0===t?null:this.cache.nodeInfo.get(t).row}getRowIndexWithinParent(t){let e=null;e=isNaN(t)?t:this.getDataObject(t);const n=this.getRowParent(t);return null===n||void 0===n?this.data.indexOf(e):n.__children.indexOf(e)}countAllRows(){const t={__children:this.data};return this.countChildren(t)}countChildren(t){let e=0,n=t;return isNaN(n)||(n=this.getDataObject(n)),n&&n.__children?(Object(c.a)(n.__children,t=>{e+=1,t.__children&&(e+=this.countChildren(t))}),e):0}getRowParent(t){let e;return e=isNaN(t)?t:this.getDataObject(t),this.getRowObjectParent(e)}getRowObjectParent(t){return t&&"object"===typeof t?this.cache.nodeInfo.get(t).parent:null}getRowLevel(t){let e=null;return e=isNaN(t)?t:this.getDataObject(t),e?this.getRowObjectLevel(e):null}getRowObjectLevel(t){return null===t||void 0===t?null:this.cache.nodeInfo.get(t).level}hasChildren(t){let e=t;return isNaN(e)||(e=this.getDataObject(e)),!(!e.__children||!e.__children.length)}isChild(t){return null!==this.getRowParent(t)}getChild(t,e){var n;return(null===(n=t.__children)||void 0===n?void 0:n[e])||null}isRowHighestLevel(t){return!this.isChild(t)}isParent(t){var e;let n=t;return isNaN(n)||(n=this.getDataObject(n)),n&&!!n.__children&&0!==(null===(e=n.__children)||void 0===e?void 0:e.length)}addChild(t,e){let n=e;this.hot.runHooks("beforeAddChild",t,n);let i=null;t&&(i=this.getRowIndex(t)),this.hot.runHooks("beforeCreateRow",i+this.countChildren(t)+1,1);let r=t;t||(r=this.mockParent()),r.__children||(r.__children=[]),n||(n=this.mockNode()),r.__children.push(n),this.rewriteCache();const o=this.getRowIndex(n);this.hot.rowIndexMapper.insertIndexes(o,1),this.hot.runHooks("afterCreateRow",o,1),this.hot.runHooks("afterAddChild",t,n)}addChildAtIndex(t,e,n){let i,r=n;if(r||(r=this.mockNode()),this.hot.runHooks("beforeAddChild",t,r,e),t){const n=this.getRowIndex(t)+e+1;this.hot.runHooks("beforeCreateRow",n,1),t.__children.splice(e,null,r),this.rewriteCache(),this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndexWithinParent(t),"__children",t.__children,"NestedRows.addChildAtIndex"),this.hot.rowIndexMapper.insertIndexes(n,1),this.plugin.enableCoreAPIModifiers(),this.hot.runHooks("afterCreateRow",n,1),i=n}else this.plugin.disableCoreAPIModifiers(),this.hot.alter("insert_row_above",e,1,"NestedRows.addChildAtIndex"),this.plugin.enableCoreAPIModifiers(),i=this.getRowIndex(this.data[e]);r=this.getDataObject(i),this.hot.runHooks("afterAddChild",t,r,e)}addSibling(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"below";const n=this.translateTrimmedRow(t),i=this.getRowParent(n),r=this.getRowIndexWithinParent(n);switch(e){case"below":this.addChildAtIndex(i,r+1,null);break;case"above":this.addChildAtIndex(i,r,null)}}detachFromParent(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null;const i=[];Array.isArray(t)?(Object(bt.d)(t[0],t[2],t=>{const e=this.translateTrimmedRow(t);i.push(this.getDataObject(e))}),Object(bt.d)(0,i.length-2,t=>{this.detachFromParent(i[t],!1)}),n=i[i.length-1]):n=t;const r=this.getRowIndex(n),o=this.countChildren(n),s=this.getRowIndexWithinParent(n),a=this.getRowParent(n),l=this.getRowParent(a),c=this.getRowIndex(l);let u=null;if(this.hot.runHooks("beforeDetachChild",a,n),null!==s&&void 0!==s){const t=Array.from(new Array(r+o+1).keys()).splice(-1*(o+1));if(this.hot.runHooks("beforeRemoveRow",r,o+1,t,this.plugin.pluginName),a.__children.splice(s,1),this.rewriteCache(),this.hot.runHooks("afterRemoveRow",r,o+1,t,this.plugin.pluginName),l){u=c+this.countChildren(l);const t=this.getChild(l,this.countChildren(l)-1),e=this.getRowIndex(t);this.hot.runHooks("beforeCreateRow",e+1,o+1,this.plugin.pluginName),l.__children.push(n)}else u=this.hot.countRows()+1,this.hot.runHooks("beforeCreateRow",u-2,o+1,this.plugin.pluginName),this.data.push(n)}this.rewriteCache(),this.hot.runHooks("afterCreateRow",u-2,o+1,this.plugin.pluginName),this.hot.runHooks("afterDetachChild",a,n,this.getRowIndex(n)),e&&this.hot.render()}filterData(t,e,n){const i=[];Object(c.a)(n,t=>{i.push(this.getDataObject(t))}),Object(c.a)(i,t=>{const e=this.getRowIndexWithinParent(t),n=this.getRowParent(t);null===n?this.data.splice(e,1):n.__children.splice(e,1)}),this.rewriteCache()}spliceData(t,e,n){const i=this.getDataObject(t-1);let r=null,o=t;i&&i.__children&&0===i.__children.length?(r=i,o=0):t<this.countAllRows()&&(r=this.getRowParent(t),o=this.getRowIndexWithinParent(t)),r?n?r.__children.splice(o,e,...n):r.__children.splice(o,e):n?this.data.splice(o,e,...n):this.data.splice(o,e),this.rewriteCache()}syncRowWithRawSource(t){let e=t,n=null;do{n=this.getRowParent(n),null!==n&&(e=n)}while(null!==n);this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndex(e),"__children",e.__children,"NestedRows.syncRowWithRawSource"),this.plugin.enableCoreAPIModifiers()}moveRow(t,e,n,i){const r=e===this.hot.countRows(),o=this.getRowParent(t),s=this.getRowIndexWithinParent(t),a=o.__children.slice(s,s+1),l=t>e;let c=r?this.getRowParent(e-1):this.getRowParent(e);null!==c&&void 0!==c||(c=this.getRowParent(e-1)),null!==c&&void 0!==c||(c=this.getDataObject(e-1)),c?c.__children||(c.__children=[]):(c=this.getDataObject(e),c.__children=[]);const u=r||n||i?c.__children.length:this.getRowIndexWithinParent(e),h=o===c;c.__children.splice(u,0,a[0]),o.__children.splice(s+(l&&h?1:0),1),this.syncRowWithRawSource(o),h||this.syncRowWithRawSource(c)}translateTrimmedRow(t){return this.plugin.collapsingUI?this.plugin.collapsingUI.translateTrimmedRow(t):t}untranslateTrimmedRow(t){return this.plugin.collapsingUI?this.plugin.collapsingUI.untranslateTrimmedRow(t):t}};function Ym(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Gm=class{constructor(t,e){Ym(this,"hot",void 0),Ym(this,"plugin",void 0),this.hot=e,this.plugin=t}};class $m extends Gm{static get CSS_CLASSES(){return{indicatorContainer:"ht_nestingLevels",parent:"ht_nestingParent",indicator:"ht_nestingLevel",emptyIndicator:"ht_nestingLevel_empty",button:"ht_nestingButton",expandButton:"ht_nestingExpand",collapseButton:"ht_nestingCollapse"}}constructor(t,e){super(t,e),this.dataManager=this.plugin.dataManager,this.collapsingUI=this.plugin.collapsingUI,this.rowHeaderWidthCache=null}appendLevelIndicators(t,e){const n=this.hot.toPhysicalRow(t),i=this.dataManager.getRowLevel(n),o=this.dataManager.getDataObject(n),s=e.getElementsByTagName("DIV")[0],a=s.querySelector("span.rowHeader"),l=s.querySelectorAll('[class^="ht_nesting"]'),u=this.hot.getSettings().ariaTags;if(Object(c.a)(l,t=>{t&&s.removeChild(t)}),Object(r.a)(e,$m.CSS_CLASSES.indicatorContainer),i){const{rootDocument:t}=this.hot,e=a.cloneNode(!0);s.innerHTML="",Object(bt.d)(0,i-1,()=>{const e=t.createElement("SPAN");Object(r.a)(e,$m.CSS_CLASSES.emptyIndicator),s.appendChild(e)}),s.appendChild(e)}if(this.dataManager.hasChildren(o)){const t=this.hot.rootDocument.createElement("DIV");u&&Object(r.U)(t,[Object(p.n)()]),Object(r.a)(e,$m.CSS_CLASSES.parent),this.collapsingUI.areChildrenCollapsed(n)?(Object(r.a)(t,`${$m.CSS_CLASSES.button} ${$m.CSS_CLASSES.expandButton}`),u&&Object(r.U)(e,[Object(p.k)(!1)])):(Object(r.a)(t,`${$m.CSS_CLASSES.button} ${$m.CSS_CLASSES.collapseButton}`),u&&Object(r.U)(e,[Object(p.k)(!0)])),s.appendChild(t)}}updateRowHeaderWidth(t){let e=t;e||(e=this.dataManager.cache.levelCount),this.rowHeaderWidthCache=Math.max(50,11+10*e+25),this.hot.render()}}var Km=$m;var Xm=class extends Gm{constructor(t,e){var n;super(t,e),n=this,this.dataManager=this.plugin.dataManager,this.collapsedRows=[],this.collapsedRowsStash={stash:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.lastCollapsedRows=n.collapsedRows.slice(0),n.expandMultipleChildren(n.lastCollapsedRows,t)},shiftStash:function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;null!==e&&void 0!==e||(e=1/0),Object(c.a)(n.lastCollapsedRows,(r,o)=>{r>=t&&r<e&&(n.lastCollapsedRows[o]=r+i)})},applyStash:function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.collapseMultipleChildren(n.lastCollapsedRows,t),n.lastCollapsedRows=void 0},trimStash:(t,e)=>{Object(bt.d)(t,t+e-1,t=>{const e=this.lastCollapsedRows.indexOf(t);e>-1&&this.lastCollapsedRows.splice(e,1)})}}}collapseChildren(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=[];let r=null,o=null,s=null;return isNaN(t)?(r=t,o=this.dataManager.getRowIndex(r)):(r=this.dataManager.getDataObject(t),o=t),this.dataManager.hasChildren(r)&&Object(c.a)(r.__children,t=>{i.push(this.dataManager.getRowIndex(t))}),s=this.collapseRows(i,!0,!1),n&&this.trimRows(s),e&&this.renderAndAdjust(),-1===this.collapsedRows.indexOf(o)&&this.collapsedRows.push(o),s}collapseMultipleChildren(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=[];Object(c.a)(t,t=>{i.push(...this.collapseChildren(t,!1,!1))}),n&&this.trimRows(i),e&&this.renderAndAdjust()}collapseRow(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.collapseRows([t],e)}collapseRows(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=[];return Object(c.a)(t,t=>{i.push(t),e&&this.collapseChildRows(t,i)}),n&&this.trimRows(i),i}collapseChildRows(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.dataManager.hasChildren(t)){const n=this.dataManager.getDataObject(t);Object(c.a)(n.__children,t=>{const n=this.dataManager.getRowIndex(t);e.push(n),this.collapseChildRows(n,e)})}n&&this.trimRows(e)}expandRow(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.expandRows([t],e)}expandRows(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=[];return Object(c.a)(t,t=>{i.push(t),e&&this.expandChildRows(t,i)}),n&&this.untrimRows(i),i}expandChildRows(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.dataManager.hasChildren(t)){const n=this.dataManager.getDataObject(t);Object(c.a)(n.__children,t=>{if(!this.isAnyParentCollapsed(t)){const n=this.dataManager.getRowIndex(t);e.push(n),this.expandChildRows(n,e)}})}n&&this.untrimRows(e)}expandChildren(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=[];let r=null,o=null,s=null;return isNaN(t)?(r=t,o=this.dataManager.getRowIndex(t)):(r=this.dataManager.getDataObject(t),o=t),this.collapsedRows.splice(this.collapsedRows.indexOf(o),1),this.dataManager.hasChildren(r)&&Object(c.a)(r.__children,t=>{const e=this.dataManager.getRowIndex(t);i.push(e)}),s=this.expandRows(i,!0,!1),n&&this.untrimRows(s),e&&this.renderAndAdjust(),s}expandMultipleChildren(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=[];Object(c.a)(t,t=>{i.push(...this.expandChildren(t,!1,!1))}),n&&this.untrimRows(i),e&&this.renderAndAdjust()}collapseAll(){const t=this.dataManager.getData(),e=[];Object(c.a)(t,t=>{this.dataManager.hasChildren(t)&&e.push(t)}),this.collapseMultipleChildren(e),this.renderAndAdjust()}expandAll(){const t=this.dataManager.getData(),e=[];Object(c.a)(t,t=>{this.dataManager.hasChildren(t)&&e.push(t)}),this.expandMultipleChildren(e),this.renderAndAdjust()}trimRows(t){this.hot.batchExecution(()=>{Object(c.a)(t,t=>{this.plugin.collapsedRowsMap.setValueAtIndex(t,!0)})},!0)}untrimRows(t){this.hot.batchExecution(()=>{Object(c.a)(t,t=>{this.plugin.collapsedRowsMap.setValueAtIndex(t,!1)})},!0)}areChildrenCollapsed(t){let e=isNaN(t)?t:this.dataManager.getDataObject(t),n=!0;return null===e&&(e={__children:this.dataManager.data}),this.dataManager.hasChildren(e)&&Object(c.a)(e.__children,t=>{const e=this.dataManager.getRowIndex(t);if(!this.plugin.collapsedRowsMap.getValueAtIndex(e))return n=!1,!1}),n}isAnyParentCollapsed(t){let e=t;for(;null!==e;){e=this.dataManager.getRowParent(e);const t=this.dataManager.getRowIndex(e);if(this.collapsedRows.indexOf(t)>-1)return!0}return!1}toggleState(t,e){if(e.col>=0)return;const n=this.translateTrimmedRow(e.row);Object(r.w)(t.target,Km.CSS_CLASSES.button)&&(this.areChildrenCollapsed(n)?this.expandChildren(n):this.collapseChildren(n),Object(o.f)(t))}translateTrimmedRow(t){return this.hot.toPhysicalRow(t)}untranslateTrimmedRow(t){return this.hot.toVisualRow(t)}renderAndAdjust(){this.hot.render(),this.hot.view.adjustElementsSize()}};function qm(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function Qm(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zm(t,e){return t.get(function(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}(t,e))}var Jm=new WeakMap;var tb=class extends Gm{constructor(){super(...arguments),Qm(this,"dataManager",this.plugin.dataManager),qm(this,Jm,{row_above:(t,e)=>{const n=e[e.length-1];this.dataManager.addSibling(n.start.row,"above")},row_below:(t,e)=>{const n=e[e.length-1];this.dataManager.addSibling(n.start.row,"below")}})}appendOptions(t){const e=[{key:"add_child",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_NESTED_ROWS_INSERT_CHILD)},callback:()=>{const t=this.dataManager.translateTrimmedRow(this.hot.getSelectedLast()[0]),e=this.dataManager.getDataObject(t);this.dataManager.addChild(e)},disabled:()=>{const t=this.hot.getSelectedLast();return!t||t[0]<0||this.hot.selection.isSelectedByColumnHeader()||this.hot.countRows()>=this.hot.getSettings().maxRows}},{key:"detach_from_parent",name(){return this.getTranslatedPhrase(ut.CONTEXTMENU_ITEMS_NESTED_ROWS_DETACH_CHILD)},callback:()=>{this.dataManager.detachFromParent(this.hot.getSelectedLast())},disabled:()=>{const t=this.hot.getSelectedLast(),e=this.dataManager.translateTrimmedRow(t[0]);return!this.dataManager.getRowParent(e)||!t||t[0]<0||this.hot.selection.isSelectedByColumnHeader()||this.hot.countRows()>=this.hot.getSettings().maxRows}},{name:"---------"}];return Object(bt.d)(0,t.items.length-1,n=>{if(0===n)return Object(c.a)(e,(e,i)=>{t.items.splice(n+i,0,e)}),!1}),this.modifyRowInsertingOptions(t)}modifyRowInsertingOptions(t){return Object(bt.d)(0,t.items.length-1,e=>{const n=Zm(Jm,this)[t.items[e].key];null!==n&&void 0!==n&&(t.items[e].callback=n)}),t}};function eb(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class nb{constructor(t){eb(this,"plugin",void 0),eb(this,"hot",void 0),eb(this,"dataManager",void 0),eb(this,"collapsingUI",void 0),this.plugin=t,this.hot=t.hot,this.dataManager=t.dataManager,this.collapsingUI=t.collapsingUI}onBeforeRowMove(t,e,n,i){if(this.displayAPICompatibilityWarning({rows:t,finalIndex:e,dropIndex:n,movePossible:i}))return!1;this.movedToCollapsed=!1;const r=n===this.hot.countRows(),o=r?this.hot.countSourceRows():this.dataManager.translateTrimmedRow(n);let s=!0;const a=t.map(t=>{if(!s)return!1;const e=this.dataManager.translateTrimmedRow(t);return s=this.shouldAllowMoving(e,o),e}),l=-1===a.indexOf(o);if(!s||!l)return!1;const c=this.getBaseParent(a),u=this.getTargetParent(r,o),h=c===u;return this.movedToCollapsed=this.collapsingUI.areChildrenCollapsed(u),this.collapsingUI.collapsedRowsStash.stash(),this.shiftCollapsibleParentsLocations(a,o,h),this.moveRows(a,o,u),this.dataManager.rewriteCache(),this.moveCellsMeta(a,o),this.collapsingUI.collapsedRowsStash.applyStash(!1),this.hot.runHooks("afterRowMove",t,e,n,i,i&&this.isRowOrderChanged(t,e)),this.hot.render(),this.selectCells(t,n),!1}displayAPICompatibilityWarning(t){const{rows:e,finalIndex:n,dropIndex:i,movePossible:r}=t;let o=!1;return Object(u.e)(i)&&(Object(mn.b)(gi.a`Since version 8.0.0 of the Handsontable the 'moveRows' method isn't used for moving rows\x20
      when the NestedRows plugin is enabled. Please use the 'dragRows' method instead.`),this.hot.runHooks("afterRowMove",e,n,i,r,!1),o=!0),o}shouldAllowMoving(t,e){return!(this.dataManager.isParent(t)||this.dataManager.isRowHighestLevel(t)||t===e||0===e)}getBaseParent(t){return this.dataManager.getRowParent(t[0])}getTargetParent(t,e){let n=this.dataManager.getRowParent(t?e-1:e);return null!==n&&void 0!==n||(n=this.dataManager.getRowParent(e-1)),n}shiftCollapsibleParentsLocations(t,e,n){n||(Math.max(...t)<=e?this.collapsingUI.collapsedRowsStash.shiftStash(t[0],e,-1*t.length):this.collapsingUI.collapsedRowsStash.shiftStash(e,t[0],t.length))}moveRows(t,e,n){const i=e===this.dataManager.getRowIndex(n)+this.dataManager.countChildren(n)+1;this.hot.batchRender(()=>{t.forEach(t=>{this.dataManager.moveRow(t,e,this.movedToCollapsed,i)})})}moveCellsMeta(t,e){const n=[],i=Math.max(...t)<e;t.forEach(t=>{n.push(this.hot.getCellMetaAtRow(t))}),this.hot.spliceCellsMeta(t[0],t.length),this.hot.spliceCellsMeta(e-(i?n.length:0),0,...n)}selectCells(t,e){const n=t.length;let i=0,r=0,o=null,s=null;if(this.movedToCollapsed){let o=null;o=t[n-1]<e?this.dataManager.translateTrimmedRow(e-n):this.dataManager.translateTrimmedRow(e);const s=this.dataManager.getRowParent(null===o?this.hot.countSourceRows()-1:o-1),a=this.dataManager.getRowIndex(s);i=this.dataManager.untranslateTrimmedRow(a),r=i}else t[n-1]<e?(r=e-1,i=r-n+1):(i=e,r=i+n-1);o=this.hot.selection,s=this.hot.countCols()-1,o.setRangeStart(this.hot._createCellCoords(i,0)),o.setRangeEnd(this.hot._createCellCoords(r,s),!0)}isRowOrderChanged(t,e){return t.some((t,n)=>t-n!==e)}}function ib(t,e,n){rb(t,e),e.set(t,n)}function rb(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ob(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sb(t,e){return t.get(lb(t,e))}function ab(t,e,n){return t.set(lb(t,e),n),n}function lb(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var cb=new WeakMap,ub=new WeakMap,hb=new WeakSet;class db extends te{constructor(){var t,e;super(...arguments),rb(t=this,e=hb),e.add(t),ob(this,"dataManager",null),ob(this,"headersUI",null),ob(this,"collapsedRowsMap",null),ib(this,cb,!1),ib(this,ub,!1)}static get PLUGIN_KEY(){return"nestedRows"}static get PLUGIN_PRIORITY(){return 300}isEnabled(){return!!this.hot.getSettings().nestedRows}enablePlugin(){var t=this;this.enabled||(this.collapsedRowsMap=this.hot.rowIndexMapper.registerMap("nestedRows",new Cc.a),this.dataManager=new zm(this,this.hot),this.collapsingUI=new Xm(this,this.hot),this.headersUI=new Km(this,this.hot),this.contextMenuUI=new tb(this,this.hot),this.rowMoveController=new nb(this),this.addHook("afterInit",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lb(hb,t,Eb).call(t,...n)})),this.addHook("beforeViewRender",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lb(hb,t,Rb).call(t,...n)})),this.addHook("modifyRowData",(function(){return t.onModifyRowData(...arguments)})),this.addHook("modifySourceLength",(function(){return t.onModifySourceLength(...arguments)})),this.addHook("beforeDataSplice",(function(){return t.onBeforeDataSplice(...arguments)})),this.addHook("filterData",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lb(hb,t,pb).call(t,...n)})),this.addHook("afterContextMenuDefaultOptions",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lb(hb,t,mb).call(t,...n)})),this.addHook("afterGetRowHeader",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lb(hb,t,bb).call(t,...n)})),this.addHook("beforeOnCellMouseDown",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lb(hb,t,gb).call(t,...n)})),this.addHook("beforeRemoveRow",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lb(hb,t,vb).call(t,...n)})),this.addHook("afterRemoveRow",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lb(hb,t,wb).call(t,...n)})),this.addHook("beforeAddChild",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lb(hb,t,Cb).call(t,...n)})),this.addHook("afterAddChild",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lb(hb,t,Sb).call(t,...n)})),this.addHook("beforeDetachChild",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lb(hb,t,Ob).call(t,...n)})),this.addHook("afterDetachChild",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lb(hb,t,Tb).call(t,...n)})),this.addHook("modifyRowHeaderWidth",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lb(hb,t,yb).call(t,...n)})),this.addHook("afterCreateRow",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lb(hb,t,_b).call(t,...n)})),this.addHook("beforeRowMove",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lb(hb,t,fb).call(t,...n)})),this.addHook("beforeLoadData",t=>lb(hb,this,Mb).call(this,t)),this.addHook("beforeUpdateData",t=>lb(hb,this,Mb).call(this,t)),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("nestedRows"),this.unregisterShortcuts(),super.disablePlugin()}updatePlugin(){this.disablePlugin();const t=this.dataManager.getData();this.enablePlugin(),this.dataManager.updateWithData(t),super.updatePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{const{highlight:t}=this.hot.getSelectedRangeLast(),e=this.collapsingUI.translateTrimmedRow(t.row);return this.collapsingUI.areChildrenCollapsed(e)?this.collapsingUI.expandChildren(e):this.collapsingUI.collapseChildren(e),!1},runOnlyIf:()=>{var t,e;const n=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return n&&(null===(e=this.hot.getSelectedRangeLast())||void 0===e?void 0:e.isSingle())&&this.hot.selection.isCellVisible(n)&&-1===n.col&&n.row>=0},group:"nestedRows",relativeToGroup:a.a,position:"before"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup("nestedRows")}disableCoreAPIModifiers(){ab(ub,this,!0)}enableCoreAPIModifiers(){ab(ub,this,!1)}onModifyRowData(t){if(!sb(ub,this))return this.dataManager.getDataObject(t)}onModifySourceLength(){if(!sb(ub,this))return this.dataManager.countAllRows()}onBeforeDataSplice(t,e,n){return!(!sb(ub,this)&&!this.dataManager.isRowHighestLevel(t))||(this.dataManager.spliceData(t,e,n),!1)}destroy(){super.destroy()}}function fb(t,e,n,i){return this.rowMoveController.onBeforeRowMove(t,e,n,i)}function gb(t,e,n){this.collapsingUI.toggleState(t,e,n)}function pb(t,e,n){return this.collapsingUI.collapsedRowsStash.stash(),this.collapsingUI.collapsedRowsStash.trimStash(n[0],e),this.collapsingUI.collapsedRowsStash.shiftStash(n[0],null,-1*e),this.dataManager.filterData(t,e,n),ab(cb,this,!0),this.dataManager.getData().slice()}function mb(t){return this.contextMenuUI.appendOptions(t)}function bb(t,e){this.headersUI.appendLevelIndicators(t,e)}function yb(t){return Math.max(this.headersUI.rowHeaderWidthCache,t)}function wb(t,e,n,i){i!==this.pluginName&&this.hot._registerTimeout(()=>{ab(cb,this,!1),this.headersUI.updateRowHeaderWidth(),this.collapsingUI.collapsedRowsStash.applyStash()})}function vb(t,e,n){const i=Array.from(n.reduce((t,e)=>{if(this.dataManager.isParent(e)){const n=this.dataManager.getDataObject(e).__children;return t.add(e),Array.isArray(n)&&n.forEach(e=>t.add(this.dataManager.getRowIndex(e))),t}return t.add(e)},new Set));n.length=0,n.push(...i)}function Cb(){this.collapsingUI.collapsedRowsStash.stash()}function Sb(t,e){this.collapsingUI.collapsedRowsStash.shiftStash(this.dataManager.getRowIndex(e)),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}function Ob(){this.collapsingUI.collapsedRowsStash.stash()}function Tb(t,e,n){this.collapsingUI.collapsedRowsStash.shiftStash(n,null,-1),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}function _b(){this.dataManager.rewriteCache()}function Eb(){this.headersUI.updateRowHeaderWidth()}function Rb(t,e){sb(cb,this)&&(e.skipRender=!0)}function Mb(t){if(!Object(Sl.d)(t))return Object(mn.a)("The Nested Rows plugin requires an Array of Objects as a dataset to be provided. The plugin has been disabled."),this.hot.getSettings().nestedRows=!1,void this.disablePlugin();this.dataManager.setData(t),this.dataManager.rewriteCache()}function xb(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ib=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;xb(this,"rootWindow",void 0),xb(this,"prefix",void 0),xb(this,"savedKeys",[]),this.rootWindow=e,this.prefix=t,this.loadSavedKeys()}saveValue(t,e){this.rootWindow.localStorage.setItem(`${this.prefix}_${t}`,JSON.stringify(e)),-1===this.savedKeys.indexOf(t)&&(this.savedKeys.push(t),this.saveSavedKeys())}loadValue(t,e){const n="undefined"===typeof t?e:t,i=this.rootWindow.localStorage.getItem(`${this.prefix}_${n}`);return null===i?void 0:JSON.parse(i)}reset(t){this.rootWindow.localStorage.removeItem(`${this.prefix}_${t}`)}resetAll(){Object(c.a)(this.savedKeys,(t,e)=>{this.rootWindow.localStorage.removeItem(`${this.prefix}_${this.savedKeys[e]}`)}),this.clearSavedKeys()}loadSavedKeys(){const t=this.rootWindow.localStorage.getItem(this.prefix+"__persistentStateKeys"),e="string"===typeof t?JSON.parse(t):void 0;this.savedKeys=e||[]}saveSavedKeys(){this.rootWindow.localStorage.setItem(this.prefix+"__persistentStateKeys",JSON.stringify(this.savedKeys))}clearSavedKeys(){this.savedKeys.length=0,this.saveSavedKeys()}};function kb(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Z.a.getSingleton().register("persistentStateSave"),Z.a.getSingleton().register("persistentStateLoad"),Z.a.getSingleton().register("persistentStateReset");class Ab extends te{constructor(){super(...arguments),kb(this,"storage",void 0)}static get PLUGIN_KEY(){return"persistentState"}static get PLUGIN_PRIORITY(){return 0}isEnabled(){return!!this.hot.getSettings().persistentState}enablePlugin(){this.enabled||(this.storage||(this.storage=new Ib(this.hot.rootElement.id,this.hot.rootWindow)),this.addHook("persistentStateSave",(t,e)=>this.saveValue(t,e)),this.addHook("persistentStateLoad",(t,e)=>this.loadValue(t,e)),this.addHook("persistentStateReset",()=>this.resetValue()),super.enablePlugin())}disablePlugin(){this.storage=void 0,super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}loadValue(t,e){e.value=this.storage.loadValue(t)}saveValue(t,e){this.storage.saveValue(t,e)}resetValue(t){"undefined"===typeof t?this.storage.resetAll():this.storage.reset(t)}destroy(){super.destroy()}}function Nb(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function jb(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hb(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}const Db=function(t,e,n,i,r){t.getCellMeta(e,n).isSearchResult=r},Pb=function(t,e,n){return!(Object(u.e)(t)||null===t||!t.toLocaleLowerCase||0===t.length)&&(!Object(u.e)(e)&&null!==e&&-1!==e.toString().toLocaleLowerCase(n.locale).indexOf(t.toLocaleLowerCase(n.locale)))};var Lb=new WeakSet;class Fb extends te{constructor(){super(...arguments),Nb(this,Lb),jb(this,"callback",Db),jb(this,"queryMethod",Pb),jb(this,"searchResultClass","htSearchResult")}static get PLUGIN_KEY(){return"search"}static get PLUGIN_PRIORITY(){return 190}isEnabled(){return this.hot.getSettings().search}enablePlugin(){var t=this;if(this.enabled)return;const e=this.hot.getSettings().search;this.updatePluginSettings(e),this.addHook("beforeRenderer",(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Hb(Lb,t,Bb).call(t,...n)})),super.enablePlugin()}disablePlugin(){var t=this;const e=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Hb(Lb,t,Bb).call(t,...n)};this.hot.addHook("beforeRenderer",e),this.hot.addHookOnce("afterViewRender",()=>{this.hot.removeHook("beforeRenderer",e)}),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}query(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCallback(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getQueryMethod();const i=this.hot.countRows(),r=this.hot.countCols(),o=[],s=this.hot;return Object(bt.d)(0,i-1,i=>{Object(bt.d)(0,r-1,r=>{const a=this.hot.getDataAtCell(i,r),l=this.hot.getCellMeta(i,r),c=l.search.callback||e,u=(l.search.queryMethod||n)(t,a,l);if(u){const t={row:i,col:r,data:a};o.push(t)}c&&c(s,i,r,a,u)})}),o}getCallback(){return this.callback}setCallback(t){this.callback=t}getQueryMethod(){return this.queryMethod}setQueryMethod(t){this.queryMethod=t}getSearchResultClass(){return this.searchResultClass}setSearchResultClass(t){this.searchResultClass=t}updatePluginSettings(t){Object(s.l)(t)&&(t.searchResultClass&&this.setSearchResultClass(t.searchResultClass),t.queryMethod&&this.setQueryMethod(t.queryMethod),t.callback&&this.setCallback(t.callback))}destroy(){super.destroy()}}function Bb(t,e,n,i,r,o){const s=o.className||[];let a=[];"string"===typeof s?a=s.split(" "):a.push(...s),this.isEnabled()&&o.isSearchResult?a.includes(this.searchResultClass)||a.push(""+this.searchResultClass):a.includes(this.searchResultClass)&&a.splice(a.indexOf(this.searchResultClass),1),o.className=a.join(" ")}function Vb(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function Ub(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wb(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var zb=new WeakSet;class Yb extends te{constructor(){super(...arguments),Vb(this,zb),Ub(this,"scrollbars",[]),Ub(this,"clones",[]),Ub(this,"lockedCollection",!1),Ub(this,"freezeOverlays",!1)}static get PLUGIN_KEY(){return"touchScroll"}static get PLUGIN_PRIORITY(){return 200}static get SETTING_KEYS(){return!0}isEnabled(){return Object(ne.d)()}enablePlugin(){this.enabled||(this.addHook("afterViewRender",()=>Wb(zb,this,Gb).call(this)),this.registerEvents(),super.enablePlugin())}updatePlugin(){this.lockedCollection=!1,super.updatePlugin()}disablePlugin(){super.disablePlugin()}registerEvents(){this.addHook("beforeTouchScroll",()=>Wb(zb,this,$b).call(this)),this.addHook("afterMomentumScroll",()=>Wb(zb,this,Kb).call(this))}}function Gb(){if(this.lockedCollection)return;const{topOverlay:t,bottomOverlay:e,inlineStartOverlay:n,topInlineStartCornerOverlay:i,bottomInlineStartCornerOverlay:r}=this.hot.view._wt.wtOverlays;this.lockedCollection=!0,this.scrollbars.length=0,this.scrollbars.push(t),e.clone&&this.scrollbars.push(e),this.scrollbars.push(n),i&&this.scrollbars.push(i),r&&r.clone&&this.scrollbars.push(r),this.clones=[],t.needFullRender&&this.clones.push(t.clone.wtTable.holder.parentNode),e.needFullRender&&this.clones.push(e.clone.wtTable.holder.parentNode),n.needFullRender&&this.clones.push(n.clone.wtTable.holder.parentNode),i&&this.clones.push(i.clone.wtTable.holder.parentNode),r&&r.clone&&this.clones.push(r.clone.wtTable.holder.parentNode)}function $b(){this.freezeOverlays=!0,Object(c.a)(this.clones,t=>{Object(r.a)(t,"hide-tween")})}function Kb(){this.freezeOverlays=!1,Object(c.a)(this.clones,t=>{Object(r.P)(t,"hide-tween"),Object(r.a)(t,"show-tween")}),this.hot._registerTimeout(()=>{Object(c.a)(this.clones,t=>{Object(r.P)(t,"show-tween")})},400),Object(c.a)(this.scrollbars,t=>{t.refresh(),t.resetFixedPosition()}),this.hot.view._wt.wtOverlays.syncScrollWithMaster()}function Xb(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function qb(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Qb=new WeakSet;class Zb extends te{constructor(){super(...arguments),Xb(this,Qb),qb(this,"trimmedRowsMap",null)}static get PLUGIN_KEY(){return"trimRows"}static get PLUGIN_PRIORITY(){return 330}isEnabled(){return!!this.hot.getSettings().trimRows}enablePlugin(){this.enabled||(this.trimmedRowsMap=this.hot.rowIndexMapper.registerMap("trimRows",new Cc.a),this.trimmedRowsMap.addLocalHook("init",()=>function(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}(Qb,this,Jb).call(this)),super.enablePlugin())}updatePlugin(){const t=this.hot.getSettings().trimRows;Array.isArray(t)&&this.hot.batchExecution(()=>{this.trimmedRowsMap.clear(),Object(c.a)(t,t=>{this.trimmedRowsMap.setValueAtIndex(t,!0)})},!0),super.updatePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("trimRows"),super.disablePlugin()}getTrimmedRows(){return this.trimmedRowsMap.getTrimmedIndexes()}trimRows(t){const e=this.getTrimmedRows(),n=this.isValidConfig(t);let i=e;n&&(i=Array.from(new Set(e.concat(t))));!1!==this.hot.runHooks("beforeTrimRow",e,i,n)&&(n&&this.hot.batchExecution(()=>{Object(c.a)(t,t=>{this.trimmedRowsMap.setValueAtIndex(t,!0)})},!0),this.hot.runHooks("afterTrimRow",e,i,n,n&&i.length>e.length))}trimRow(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.trimRows(e)}untrimRows(t){const e=this.getTrimmedRows(),n=this.isValidConfig(t);let i=e;const r=this.trimmedRowsMap.getValues().slice(),o=t.length>0;n&&o&&(Object(c.a)(t,t=>{r[t]=!1}),i=Object(c.d)(r,(t,e,n)=>(e&&t.push(n),t),[]));!1!==this.hot.runHooks("beforeUntrimRow",e,i,n&&o)&&(n&&o&&this.trimmedRowsMap.setValues(r),this.hot.runHooks("afterUntrimRow",e,i,n&&o,n&&i.length<e.length))}untrimRow(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.untrimRows(e)}isTrimmed(t){return this.trimmedRowsMap.getValueAtIndex(t)||!1}untrimAll(){this.untrimRows(this.getTrimmedRows())}isValidConfig(t){const e=this.hot.countSourceRows();return t.every(t=>Number.isInteger(t)&&t>=0&&t<e)}destroy(){super.destroy()}}function Jb(){const t=this.hot.getSettings().trimRows;Array.isArray(t)&&this.hot.batchExecution(()=>{Object(c.a)(t,t=>{this.trimmedRowsMap.setValueAtIndex(t,!0)})},!0)}function ty(t){const e=this;this.instance=t,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,this.enabled=!1,t.addHook("afterChange",(function(n,i){const r=n&&n.length;if(!r)return;if(!n.find(t=>{const[,,e,n]=t;return e!==n}))return;e.done(()=>{const e=n.reduce((t,e)=>(t.push([...e]),t),[]);Object(c.a)(e,e=>{e[1]=t.propToCol(e[1])});const i=r>1?this.getSelected():[[e[0][0],e[0][1]]];return new ty.ChangeAction(e,i)},i)})),t.addHook("afterCreateRow",(t,n,i)=>{e.done(()=>new ty.CreateRowAction(t,n),i)});const n=(e,n,i,r)=>{const o=["visualRow","visualCol","row","col","prop"],s=o.length,a=[];return Object(bt.d)(i,r,i=>{Object(bt.d)(e,n,e=>{const n=t.getCellMeta(e,i);if(Object.keys(n).length!==s){const t=Object.fromEntries(Object.entries(n).filter(t=>{let[e]=t;return!1===o.includes(e)}));a.push([n.visualRow,n.visualCol,t])}})}),a};t.addHook("beforeRemoveRow",(i,r,o,a)=>{e.done(()=>{const o=t.toPhysicalRow(i),a=o+r-1,l=Object(s.c)(e.instance.getSourceData(o,0,o+r-1,e.instance.countSourceCols()-1));return new ty.RemoveRowAction(o,l,t.getSettings().fixedRowsBottom,t.getSettings().fixedRowsTop,t.rowIndexMapper.getIndexesSequence(),n(o,a,0,t.countCols()-1))},a)}),t.addHook("afterCreateCol",(t,n,i)=>{e.done(()=>new ty.CreateColumnAction(t,n),i)}),t.addHook("beforeRemoveCol",(i,r,o,s)=>{e.done(()=>{const o=e.instance.getSourceDataArray(),s=(e.instance.countCols()+i)%e.instance.countCols(),a=s+r-1,l=[],c=[],u=[];Object(bt.d)(o.length-1,e=>{const n=[],i=o[e];Object(bt.d)(s,a,e=>{n.push(i[t.toPhysicalColumn(e)])}),l.push(n)}),Object(bt.d)(r-1,e=>{u.push(t.toPhysicalColumn(s+e))}),Array.isArray(t.getSettings().colHeaders)&&Object(bt.d)(r-1,e=>{c.push(t.getSettings().colHeaders[t.toPhysicalColumn(s+e)]||null)});const h=t.columnIndexMapper.getIndexesSequence(),d=t.rowIndexMapper.getIndexesSequence();return new ty.RemoveColumnAction(s,u,l,c,h,d,t.getSettings().fixedColumnsStart,n(0,t.countRows(),s,a))},s)}),t.addHook("beforeCellAlignment",(t,n,i,r)=>{e.done(()=>new ty.CellAlignmentAction(t,n,i,r))}),t.addHook("beforeFilter",(t,n)=>{e.done(()=>new ty.FiltersAction(t,n))}),t.addHook("beforeRowMove",(t,n)=>{!1!==t&&e.done(()=>new ty.RowMoveAction(t,n))}),t.addHook("beforeColumnMove",(t,n)=>{!1!==t&&e.done(()=>new ty.ColumnMoveAction(t,n))}),t.addHook("beforeMergeCells",(n,i)=>{i||e.done(()=>new ty.MergeCellsAction(t,n))}),t.addHook("afterUnmergeCells",(n,i)=>{i||e.done(()=>new ty.UnmergeCellsAction(t,n))}),t.addHook("beforeColumnSort",(t,n,i)=>{i&&e.done(()=>new ty.ColumnSortAction(t,n))}),t.addHook("afterInit",()=>{e.init()})}ty.prototype.done=function(t,e){if(this.ignoreNewActions)return;if("UndoRedo.undo"===e||"UndoRedo.redo"===e||"auto"===e)return;const n=this.doneActions.slice();if(!1===this.instance.runHooks("beforeUndoStackChange",n,e))return;const i=t(),r=this.undoneActions.slice();this.doneActions.push(i),this.instance.runHooks("afterUndoStackChange",n,this.doneActions.slice()),this.instance.runHooks("beforeRedoStackChange",r),this.undoneActions.length=0,this.instance.runHooks("afterRedoStackChange",r,this.undoneActions.slice())},ty.prototype.undo=function(){if(this.isUndoAvailable()){const t=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",t);const e=this.doneActions.pop();this.instance.runHooks("afterUndoStackChange",t,this.doneActions.slice());const n=Object(s.c)(e);if(!1===this.instance.runHooks("beforeUndo",n))return;this.ignoreNewActions=!0;const i=this,r=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",r),e.undo(this.instance,()=>{i.ignoreNewActions=!1,i.undoneActions.push(e)}),this.instance.runHooks("afterRedoStackChange",r,this.undoneActions.slice()),this.instance.runHooks("afterUndo",n)}},ty.prototype.redo=function(){if(this.isRedoAvailable()){const t=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",t);const e=this.undoneActions.pop();this.instance.runHooks("afterRedoStackChange",t,this.undoneActions.slice());const n=Object(s.c)(e);if(!1===this.instance.runHooks("beforeRedo",n))return;this.ignoreNewActions=!0;const i=this,r=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",r),e.redo(this.instance,()=>{i.ignoreNewActions=!1,i.doneActions.push(e)}),this.instance.runHooks("afterUndoStackChange",r,this.doneActions.slice()),this.instance.runHooks("afterRedo",n)}},ty.prototype.isUndoAvailable=function(){return this.doneActions.length>0},ty.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},ty.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},ty.prototype.isEnabled=function(){return this.enabled},ty.prototype.enable=function(){if(this.isEnabled())return;const t=this.instance;var e;this.enabled=!0,(e=t).undo=function(){return e.undoRedo.undo()},e.redo=function(){return e.undoRedo.redo()},e.isUndoAvailable=function(){return e.undoRedo.isUndoAvailable()},e.isRedoAvailable=function(){return e.undoRedo.isRedoAvailable()},e.clearUndo=function(){return e.undoRedo.clear()},this.registerShortcuts(),t.addHook("afterChange",iy)},ty.prototype.disable=function(){if(!this.isEnabled())return;const t=this.instance;var e;this.enabled=!1,delete(e=t).undo,delete e.redo,delete e.isUndoAvailable,delete e.isRedoAvailable,delete e.clearUndo,this.unregisterShortcuts(),t.removeHook("afterChange",iy)},ty.prototype.destroy=function(){this.clear(),this.instance=null,this.doneActions=null,this.undoneActions=null},ty.Action=function(){},ty.Action.prototype.undo=function(){},ty.Action.prototype.redo=function(){},ty.ChangeAction=function(t,e){this.changes=t,this.selected=e,this.actionType="change"},Object(s.k)(ty.ChangeAction,ty.Action),ty.ChangeAction.prototype.undo=function(t,e){const n=Object(s.c)(this.changes),i=t.countEmptyRows(!0),r=t.countEmptyCols(!0);for(let s=0,a=n.length;s<a;s++)n[s].splice(3,1);t.addHookOnce("afterChange",e),t.setDataAtCell(n,null,null,"UndoRedo.undo");for(let s=0,a=n.length;s<a;s++){const[e,o]=n[s];t.getSettings().minSpareRows&&e+1+t.getSettings().minSpareRows===t.countRows()&&i===t.getSettings().minSpareRows&&(t.alter("remove_row",parseInt(e+1,10),t.getSettings().minSpareRows),t.undoRedo.doneActions.pop()),t.getSettings().minSpareCols&&o+1+t.getSettings().minSpareCols===t.countCols()&&r===t.getSettings().minSpareCols&&(t.alter("remove_col",parseInt(o+1,10),t.getSettings().minSpareCols),t.undoRedo.doneActions.pop())}const o=t.getSelectedLast();if(void 0!==o){const[e,i]=n[0],[r,s]=o,a=e>=t.view.getFirstFullyVisibleRow(),l=i>=t.view.getFirstFullyVisibleColumn(),c=r!==e||s!==i;if(!1===(a&&l)&&!0===c){const n={row:e,col:i};!1===a&&(n.verticalSnap="top"),!1===l&&(n.horizontalSnap="start"),t.scrollViewportTo(n)}}t.selectCells(this.selected,!1,!1)},ty.ChangeAction.prototype.redo=function(t,e){const n=Object(s.c)(this.changes);for(let i=0,r=n.length;i<r;i++)n[i].splice(2,1);t.addHookOnce("afterChange",e),t.setDataAtCell(n,null,null,"UndoRedo.redo"),this.selected&&t.selectCells(this.selected,!1,!1)},ty.CreateRowAction=function(t,e){this.index=t,this.amount=e,this.actionType="insert_row"},Object(s.k)(ty.CreateRowAction,ty.Action),ty.CreateRowAction.prototype.undo=function(t,e){const n=t.countRows(),i=t.getSettings().minSpareRows;this.index>=n&&this.index-i<n&&(this.index-=i),t.addHookOnce("afterRemoveRow",e),t.alter("remove_row",this.index,this.amount,"UndoRedo.undo")},ty.CreateRowAction.prototype.redo=function(t,e){t.addHookOnce("afterCreateRow",e),t.alter("insert_row_above",this.index,this.amount,"UndoRedo.redo")},ty.RemoveRowAction=function(t,e,n,i,r,o){this.index=t,this.data=e,this.actionType="remove_row",this.fixedRowsBottom=n,this.fixedRowsTop=i,this.rowIndexesSequence=r,this.removedCellMetas=o},Object(s.k)(ty.RemoveRowAction,ty.Action),ty.RemoveRowAction.prototype.undo=function(t,e){const n=t.getSettings(),i=[];n.fixedRowsBottom=this.fixedRowsBottom,n.fixedRowsTop=this.fixedRowsTop,this.data.forEach((t,e)=>{Object.keys(t).forEach(n=>{const r=parseInt(n,10);i.push([this.index+e,isNaN(r)?n:r,t[n]])})}),t.alter("insert_row_above",this.index,this.data.length,"UndoRedo.undo"),this.removedCellMetas.forEach(e=>{let[n,i,r]=e;t.setCellMetaObject(n,i,r)}),t.addHookOnce("afterViewRender",e),t.setSourceDataAtCell(i,null,null,"UndoRedo.undo"),t.rowIndexMapper.setIndexesSequence(this.rowIndexesSequence)},ty.RemoveRowAction.prototype.redo=function(t,e){t.addHookOnce("afterRemoveRow",e),t.alter("remove_row",this.index,this.data.length,"UndoRedo.redo")},ty.CreateColumnAction=function(t,e){this.index=t,this.amount=e,this.actionType="insert_col"},Object(s.k)(ty.CreateColumnAction,ty.Action),ty.CreateColumnAction.prototype.undo=function(t,e){t.addHookOnce("afterRemoveCol",e),t.alter("remove_col",this.index,this.amount,"UndoRedo.undo")},ty.CreateColumnAction.prototype.redo=function(t,e){t.addHookOnce("afterCreateCol",e),t.alter("insert_col_start",this.index,this.amount,"UndoRedo.redo")},ty.RemoveColumnAction=function(t,e,n,i,r,o,s,a){this.index=t,this.indexes=e,this.data=n,this.amount=this.data[0].length,this.headers=i,this.columnPositions=r.slice(0),this.rowPositions=o.slice(0),this.actionType="remove_col",this.fixedColumnsStart=s,this.removedCellMetas=a},Object(s.k)(ty.RemoveColumnAction,ty.Action),ty.RemoveColumnAction.prototype.undo=function(t,e){t.getSettings().fixedColumnsStart=this.fixedColumnsStart;const n=this.indexes.slice(0).sort(),i=(t,e,i)=>i[this.indexes.indexOf(n[e])],r=this.data.length,o=[];for(let l=0;l<r;l++)o.push(Object(c.c)(this.data[l],i));const s=Object(c.c)(this.headers,i),a=[];t.alter("insert_col_start",this.indexes[0],this.indexes.length,"UndoRedo.undo"),Object(c.a)(t.getSourceDataArray(),(t,e)=>{Object(c.a)(n,(n,i)=>{t[n]=o[e][i],a.push([e,n,t[n]])})}),t.setSourceDataAtCell(a,void 0,void 0,"UndoRedo.undo"),"undefined"!==typeof this.headers&&Object(c.a)(s,(e,i)=>{t.getSettings().colHeaders[n[i]]=e}),this.removedCellMetas.forEach(e=>{let[n,i,r]=e;t.setCellMetaObject(n,i,r)}),t.batchExecution(()=>{t.rowIndexMapper.setIndexesSequence(this.rowPositions),t.columnIndexMapper.setIndexesSequence(this.columnPositions)},!0),t.addHookOnce("afterViewRender",e),t.render()},ty.RemoveColumnAction.prototype.redo=function(t,e){t.addHookOnce("afterRemoveCol",e),t.alter("remove_col",this.index,this.amount,"UndoRedo.redo")},ty.CellAlignmentAction=function(t,e,n,i){this.stateBefore=t,this.range=e,this.type=n,this.alignment=i},ty.CellAlignmentAction.prototype.undo=function(t,e){Object(c.a)(this.range,e=>{e.forAll((e,n)=>{e>=0&&n>=0&&t.setCellMeta(e,n,"className",this.stateBefore[e][n]||" htLeft")})}),t.addHookOnce("afterViewRender",e),t.render()},ty.CellAlignmentAction.prototype.redo=function(t,e){er(this.range,this.type,this.alignment,(e,n)=>t.getCellMeta(e,n),(e,n,i,r)=>t.setCellMeta(e,n,i,r)),t.addHookOnce("afterViewRender",e),t.render()},ty.FiltersAction=function(t,e){this.previousConditionsStack=e,this.conditionsStack=t,this.actionType="filter"},Object(s.k)(ty.FiltersAction,ty.Action),ty.FiltersAction.prototype.undo=function(t,e){const n=t.getPlugin("filters");t.addHookOnce("afterViewRender",e),this.previousConditionsStack&&n.conditionCollection.importAllConditions(this.previousConditionsStack),n.filter()},ty.FiltersAction.prototype.redo=function(t,e){const n=t.getPlugin("filters");t.addHookOnce("afterViewRender",e),n.conditionCollection.importAllConditions(this.conditionsStack),n.filter()};class ey extends ty.Action{constructor(t,e){super(),this.cellRange=e;const n=this.cellRange.getTopStartCorner(),i=this.cellRange.getBottomEndCorner();this.rangeData=t.getData(n.row,n.col,i.row,i.col)}undo(t,e){const n=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),n.unmergeRange(this.cellRange,!0);const i=this.cellRange.getTopStartCorner();t.populateFromArray(i.row,i.col,this.rangeData,void 0,void 0,"MergeCells")}redo(t,e){const n=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),n.mergeRange(this.cellRange)}}ty.MergeCellsAction=ey;class ny extends ty.Action{constructor(t,e){super(),this.cellRange=e}undo(t,e){const n=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),n.mergeRange(this.cellRange,!0)}redo(t,e){const n=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),n.unmergeRange(this.cellRange,!0),t.render()}}function iy(t,e){if("loadData"===e)return this.undoRedo.clear()}ty.UnmergeCellsAction=ny,ty.RowMoveAction=function(t,e){this.rows=t.slice(),this.finalRowIndex=e,this.actionType="row_move"},Object(s.k)(ty.RowMoveAction,ty.Action),ty.RowMoveAction.prototype.undo=function(t,e){const n=t.getPlugin("manualRowMove");t.addHookOnce("afterViewRender",e);Zc(this.rows,this.finalRowIndex,t.rowIndexMapper.getNumberOfIndexes()).reverse().forEach(t=>{let{from:e,to:i}=t;e<i&&(i-=1),n.moveRow(i,e)}),t.render(),t.deselectCell(),t.selectRows(this.rows[0],this.rows[0]+this.rows.length-1)},ty.RowMoveAction.prototype.redo=function(t,e){const n=t.getPlugin("manualRowMove");t.addHookOnce("afterViewRender",e),n.moveRows(this.rows.slice(),this.finalRowIndex),t.render(),t.deselectCell(),t.selectRows(this.finalRowIndex,this.finalRowIndex+this.rows.length-1)},ty.ColumnMoveAction=function(t,e){this.columns=t.slice(),this.finalColumnIndex=e,this.actionType="col_move"},Object(s.k)(ty.ColumnMoveAction,ty.Action),ty.ColumnMoveAction.prototype.undo=function(t,e){const n=t.getPlugin("manualColumnMove");t.addHookOnce("afterViewRender",e);Zc(this.columns,this.finalColumnIndex,t.columnIndexMapper.getNumberOfIndexes()).reverse().forEach(t=>{let{from:e,to:i}=t;e<i&&(i-=1),n.moveColumn(i,e)}),t.render(),t.deselectCell(),t.selectColumns(this.columns[0],this.columns[0]+this.columns.length-1)},ty.ColumnMoveAction.prototype.redo=function(t,e){const n=t.getPlugin("manualColumnMove");t.addHookOnce("afterViewRender",e),n.moveColumns(this.columns.slice(),this.finalColumnIndex),t.render(),t.deselectCell(),t.selectColumns(this.finalColumnIndex,this.finalColumnIndex+this.columns.length-1)},ty.ColumnSortAction=function(t,e){this.previousSortState=t,this.nextSortState=e},Object(s.k)(ty.ColumnSortAction,ty.Action),ty.ColumnSortAction.prototype.undo=function(t,e){const n=t.getPlugin("columnSorting"),i=t.getPlugin("multiColumnSorting"),r=i.isEnabled()?i:n;this.previousSortState.length?r.sort(this.previousSortState):r.clearSort(),e()},ty.ColumnSortAction.prototype.redo=function(t,e){const n=t.getPlugin("columnSorting"),i=t.getPlugin("multiColumnSorting");(i.isEnabled()?i:n).sort(this.nextSortState),e()},ty.prototype.init=function(){const t=this.instance.getSettings().undo,e="undefined"===typeof t||t;this.instance.undoRedo||(this.instance.undoRedo=this),e?this.instance.undoRedo.enable():this.instance.undoRedo.disable()},ty.prototype.registerShortcuts=function(){const t={runOnlyIf:t=>!t.altKey,group:"undoRedo"};this.instance.getShortcutManager().getContext("grid").addShortcuts([{keys:[["Control/Meta","z"]],callback:()=>{this.undo()}},{keys:[["Control/Meta","y"],["Control/Meta","Shift","z"]],callback:()=>{this.redo()}}],t)},ty.prototype.unregisterShortcuts=function(){this.instance.getShortcutManager().getContext("grid").removeShortcutsByGroup("undoRedo")};const ry=Z.a.getSingleton();ry.add("afterUpdateSettings",(function(){var t;null===(t=this.getPlugin("undoRedo"))||void 0===t||t.init()})),ry.register("beforeUndo"),ry.register("afterUndo"),ry.register("beforeRedo"),ry.register("afterRedo"),ty.PLUGIN_KEY="undoRedo",ty.SETTING_KEYS=!0;var oy=ty;function sy(){Object(rt.d)(C.a),Object(rt.d)(v),Object(rt.d)(S),Object(rt.d)(Q),Object(rt.d)(J),Object(rt.d)(l),Object(rt.d)(tt),Object(rt.d)(et),Object(rt.d)(nt),Object(rt.d)(i.a),Object(rt.d)(it),Object(Ot.c)(lt),Object(Ot.c)(ot.a),Object(Ot.c)(ft),Object(Ot.c)(ct),Object(Ot.c)(pt),Object(Ot.c)(st),Object(Ot.c)(wt),Object(Ot.c)(vt),Object(Ot.c)(Ct),Object(Ot.c)(g.a),Object(Ot.c)(St),Object(kt.c)(Tt),Object(kt.c)(Rt),Object(kt.c)(Et),Object(kt.c)(Mt),Object(kt.c)(It),Object(Wt.c)(At),Object(Wt.c)(Nt),Object(Wt.c)(Ht),Object(Wt.c)(Dt),Object(Wt.c)(Pt),Object(Wt.c)(Lt),Object(Wt.c)(Ft),Object(Wt.c)(Bt),Object(Wt.c)(Vt.a),Object(Wt.c)(Ut),Object(zt.d)(we),Object(zt.d)(Ne),Object(zt.d)(Ye),Object(zt.d)(gn),Object(zt.d)(En),Object(zt.d)(ai),Object(zt.d)(vi),Object(zt.d)(vr),Object(zt.d)(vo),Object(zt.d)(cs),Object(zt.d)(Hs),Object(zt.d)(Us),Object(zt.d)(qs),Object(zt.d)(pa),Object(zt.d)(Mc),Object(zt.d)(Du),Object(zt.d)(mh),Object(zt.d)(kh),Object(zt.d)(zh),Object(zt.d)(gd),Object(zt.d)(Wd),Object(zt.d)(mf),Object(zt.d)(Gf),Object(zt.d)(Xg),Object(zt.d)(_p),Object(zt.d)(Rp),Object(zt.d)(Tm),Object(zt.d)(db),Object(zt.d)(Ab),Object(zt.d)(Fb),Object(zt.d)(Yb),Object(zt.d)(Zb),Object(zt.d)(oy)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return sa}));var i=n(12),r=n(53),o=(n(142),n(0)),s=n(8),a=n(4),l=n(15),c=n(22),u=n(11),h=n(17),d=n(23);function f(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function g(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var m=new WeakSet;class b{constructor(t,e,n){f(this,m),g(this,"hot",void 0),g(this,"tableMeta",void 0),g(this,"selection",void 0),g(this,"eventManager",void 0),g(this,"destroyed",!1),g(this,"activeEditor",void 0),g(this,"cellProperties",void 0),this.hot=t,this.tableMeta=e,this.selection=n,this.eventManager=new d.a(t),this.hot.addHook("afterDocumentKeyDown",t=>p(m,this,y).call(this,t)),this.eventManager.addEventListener(this.hot.rootDocument.documentElement,"compositionstart",t=>{!this.destroyed&&this.hot.isListening()&&this.openEditor("",t)}),this.hot.view._wt.update("onCellDblClick",(t,e,n)=>p(m,this,w).call(this,t,e,n))}getActiveEditor(){return this.activeEditor}prepareEditor(){var t;if(this.activeEditor&&this.activeEditor.isWaiting())return void this.closeEditor(!1,!1,t=>{t&&this.prepareEditor()});const e=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;if(!e||e.isHeader())return;const{row:n,col:i}=e,r=this.hot.runHooks("modifyGetCellCoords",n,i);let o=n,s=i;if(Array.isArray(r)&&([o,s]=r),this.cellProperties=this.hot.getCellMeta(o,s),!this.isCellEditable())return void this.clearActiveEditor();const a=this.hot.getCell(n,i,!0);if(a){const t=this.hot.getCellEditor(this.cellProperties),e=this.hot.colToProp(s),r=this.hot.getSourceDataAtCell(this.hot.toPhysicalRow(o),s);this.activeEditor=Object(h.b)(t,this.hot),this.activeEditor.prepare(n,i,e,a,r,this.cellProperties)}}isEditorOpened(){return this.activeEditor&&this.activeEditor.isOpened()}openEditor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.isCellEditable())return void this.clearActiveEditor();const i=this.hot.getSelectedRangeLast();let r=this.hot.runHooks("beforeBeginEditing",i.highlight.row,i.highlight.col,t,e,n);e instanceof MouseEvent&&"boolean"!==typeof r&&(r=0===this.hot.selection.getLayerLevel()&&i.isSingle()),!1!==r?(this.activeEditor||(this.hot.scrollToFocusedCell(),this.prepareEditor()),this.activeEditor&&(n&&this.activeEditor.enableFullEditMode(),this.activeEditor.beginEditing(t,e))):this.clearActiveEditor()}closeEditor(t,e,n){this.activeEditor?this.activeEditor.finishEditing(t,e,n):n&&n(!1)}closeEditorAndSaveChanges(t){this.closeEditor(!1,t)}closeEditorAndRestoreOriginalValue(t){this.closeEditor(!0,t)}clearActiveEditor(){this.activeEditor=void 0}isCellEditable(){const t=this.hot.getSelectedRangeLast();if(!t)return!1;const e=this.hot.getCellEditor(this.cellProperties),{row:n,col:i}=t.highlight,{rowIndexMapper:r,columnIndexMapper:o}=this.hot,s=r.isHidden(this.hot.toPhysicalRow(n))||o.isHidden(this.hot.toPhysicalColumn(i));return!(this.cellProperties.readOnly||!e||s)}moveSelectionAfterEnter(t){const e={..."function"===typeof this.tableMeta.enterMoves?this.tableMeta.enterMoves(t):this.tableMeta.enterMoves};t.shiftKey&&(e.row=-e.row,e.col=-e.col),this.hot.selection.isMultiple()?this.selection.transformFocus(e.row,e.col):this.selection.transformStart(e.row,e.col,!0)}destroy(){this.destroyed=!0,this.eventManager.destroy()}}function y(t){const e=this.hot.getSelectedRangeLast();if(!this.hot.isListening()||!e||e.highlight.isHeader()||Object(u.a)(t))return;const{keyCode:n}=t,i=(t.ctrlKey||t.metaKey)&&!t.altKey;(!this.activeEditor||this.activeEditor&&!this.activeEditor.isWaiting())&&(Object(c.c)(n)||Object(c.b)(n)||i||this.isEditorOpened()||this.openEditor("",t))}function w(t,e){e.isCell()&&this.openEditor(null,t,!0)}const v=new WeakMap;b.getInstance=function(t,e,n){let i=v.get(t);return i||(i=new b(t,e,n),v.set(t,i)),i};var C=b,S=n(2),O=n(9);function T(t,e,n){_(t,e),e.set(t,n)}function _(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function E(t,e){return t.get(M(t,e))}function R(t,e,n){return t.set(M(t,e),n),n}function M(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}const x=Object.freeze({CELL:"cell",MIXED:"mixed"});var I=new WeakMap,k=new WeakMap,A=new WeakMap,N=new WeakMap,j=new WeakMap,H=new WeakSet;class D{constructor(t){var e,n,i=this;_(e=this,n=H),n.add(e),T(this,I,void 0),T(this,k,void 0),T(this,A,1),T(this,N,null),T(this,j,new Map);const r=t.getSettings();R(I,this,t),R(k,this,r.imeFastEdit?x.MIXED:x.CELL),E(I,this).addHook("afterUpdateSettings",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return M(H,i,B).call(i,...e)})),E(I,this).addHook("afterSelection",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return M(H,i,L).call(i,...e)})),E(I,this).addHook("afterSelectionFocusSet",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return M(H,i,L).call(i,...e)})),E(I,this).addHook("afterSelectionEnd",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return M(H,i,F).call(i,...e)}))}getFocusMode(){return E(k,this)}setFocusMode(t){Object.values(x).includes(t)?R(k,this,t):Object(O.b)(`"${t}" is not a valid focus mode.`)}getRefocusDelay(){return E(A,this)}setRefocusDelay(t){R(A,this,t)}setRefocusElementGetter(t){R(N,this,t)}getRefocusElement(){return"function"===typeof E(N,this)?E(N,this).call(this):null===(t=E(I,this).getActiveEditor())||void 0===t?void 0:t.TEXTAREA;var t}focusOnHighlightedCell(t){const e=t=>{var e,n;const i=null===(e=E(I,this).getSelectedRangeLast())||void 0===e?void 0:e.highlight;if(!i)return;let r=E(I,this).runHooks("modifyFocusedElement",i.row,i.col,t);r instanceof HTMLElement||(r=t),!r||null!==(n=E(I,this).getActiveEditor())&&void 0!==n&&n.isOpened()||r.focus({preventScroll:!0})};t?e(t):M(H,this,P).call(this,t=>e(t))}refocusToEditorTextarea(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E(A,this);const n=this.getRefocusElement();!E(I,this).getSettings().imeFastEdit||null!==(t=E(I,this).getActiveEditor())&&void 0!==t&&t.isOpened()||!n||(E(j,this).has(e)||E(j,this).set(e,Object(s.b)(()=>{n.select()},e)),E(j,this).get(e)())}}function P(t){var e;const n=null===(e=E(I,this).getSelectedRangeLast())||void 0===e?void 0:e.highlight;if(!n||!E(I,this).selection.isCellVisible(n))return void t(null);const i=E(I,this).getCell(n.row,n.col,!0);null===i?E(I,this).addHookOnce("afterScroll",()=>{t(E(I,this).getCell(n.row,n.col,!0))}):t(i)}function L(){M(H,this,P).call(this,t=>{const{activeElement:e}=E(I,this).rootDocument;e&&Object(o.F)(e)&&e.blur(),this.focusOnHighlightedCell(t)})}function F(){M(H,this,P).call(this,t=>{this.getFocusMode()===x.MIXED&&"TD"===t.nodeName&&this.refocusToEditorTextarea()})}function B(t){"boolean"===typeof t.imeFastEdit&&this.setFocusMode(t.imeFastEdit?x.MIXED:x.CELL)}var V=n(1),U=n(49),W=n(14),z=n(20),Y=n(25),G=n(16),$=n(5),K=n(26);function X(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function q(t,e){return t.get(Z(t,e))}function Q(t,e,n){return t.set(Z(t,e),n),n}function Z(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var J=new WeakMap,tt=new WeakMap,et=new WeakMap,nt=new WeakMap,it=new WeakMap,rt=new WeakMap,ot=new WeakMap,st=new WeakMap,at=new WeakMap,lt=new WeakMap;var ct=class{constructor(t,e,n,i,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;X(this,J,void 0),X(this,tt,void 0),X(this,et,void 0),X(this,nt,void 0),X(this,it,void 0),X(this,rt,void 0),X(this,ot,void 0),X(this,st,void 0),X(this,at,[null,null]),X(this,lt,[null,null]),Q(J,this,n),Q(tt,this,e),Q(et,this,r),Q(nt,this,o),Q(it,this,s),Q(rt,this,i),Q(ot,this,t),this.registerEvents()}registerEvents(){q(rt,this).addEventListener(q(et,this).holder,"contextmenu",t=>this.onContextMenu(t)),q(rt,this).addEventListener(q(et,this).TABLE,"mouseover",t=>this.onMouseOver(t)),q(rt,this).addEventListener(q(et,this).TABLE,"mouseout",t=>this.onMouseOut(t));const t=()=>{q(rt,this).addEventListener(q(et,this).holder,"touchstart",t=>this.onTouchStart(t)),q(rt,this).addEventListener(q(et,this).holder,"touchend",t=>this.onTouchEnd(t)),this.momentumScrolling||(this.momentumScrolling={}),q(rt,this).addEventListener(q(et,this).holder,"scroll",()=>{clearTimeout(this.momentumScrolling._timeout),this.momentumScrolling.ongoing||q(J,this).getSetting("onBeforeTouchScroll"),this.momentumScrolling.ongoing=!0,this.momentumScrolling._timeout=setTimeout(()=>{this.touchApplied||(this.momentumScrolling.ongoing=!1,q(J,this).getSetting("onAfterMomentumScroll"))},200)})},e=()=>{q(rt,this).addEventListener(q(et,this).holder,"mouseup",t=>this.onMouseUp(t)),q(rt,this).addEventListener(q(et,this).holder,"mousedown",t=>this.onMouseDown(t))};Object(l.i)()?t():(Object(K.d)()&&t(),e())}selectedCellWasTouched(t){const e=this.parentCell(t).coords;if(q(st,this)&&e){const[t,n]=[e.row,q(st,this).from.row],[i,r]=[e.col,q(st,this).from.col];return t===n&&i===r}return!1}parentCell(t){const e={},n=q(et,this).TABLE,i=Object(o.d)(t,["TD","TH"],n);return i?(e.coords=q(et,this).getCoords(i),e.TD=i):Object(o.w)(t,"wtBorder")&&Object(o.w)(t,"current")?(e.coords=q(nt,this).getFocusSelection().cellRange.highlight,e.TD=q(et,this).getCell(e.coords)):Object(o.w)(t,"wtBorder")&&Object(o.w)(t,"area")&&q(nt,this).getAreaSelection().cellRange&&(e.coords=q(nt,this).getAreaSelection().cellRange.to,e.TD=q(et,this).getCell(e.coords)),e}onMouseDown(t){const e=q(tt,this).rootDocument.activeElement,n=Object(s.e)(o.l,t.target),i=t.target;if(!["TD","TH"].includes(e.nodeName)&&(i===e||n(0)===e||n(1)===e))return;const r=this.parentCell(i);Object(o.w)(i,"corner")?q(J,this).getSetting("onCellCornerMouseDown",t,i):r.TD&&q(J,this).has("onCellMouseDown")&&this.callListener("onCellMouseDown",t,r.coords,r.TD),(0===t.button||this.touchApplied)&&r.TD&&(q(lt,this)[0]=r.TD,clearTimeout(q(at,this)[0]),q(at,this)[0]=setTimeout(()=>{q(lt,this)[0]=null},1e3))}onContextMenu(t){if(q(J,this).has("onCellContextMenu")){const e=this.parentCell(t.target);e.TD&&this.callListener("onCellContextMenu",t,e.coords,e.TD)}}onMouseOver(t){if(!q(J,this).has("onCellMouseOver"))return;const e=q(et,this).TABLE,n=Object(o.d)(t.target,["TD","TH"],e),i=q(it,this)||this;n&&n!==i.lastMouseOver&&Object(o.C)(n,e)&&(i.lastMouseOver=n,this.callListener("onCellMouseOver",t,q(et,this).getCoords(n),n))}onMouseOut(t){if(!q(J,this).has("onCellMouseOut"))return;const e=q(et,this).TABLE,n=Object(o.d)(t.target,["TD","TH"],e),i=Object(o.d)(t.relatedTarget,["TD","TH"],e),r=q(it,this)||this;n&&n!==i&&Object(o.C)(n,e)&&(this.callListener("onCellMouseOut",t,q(et,this).getCoords(n),n),null===i&&(r.lastMouseOver=null))}onMouseUp(t){const e=this.parentCell(t.target);e.TD&&q(J,this).has("onCellMouseUp")&&this.callListener("onCellMouseUp",t,e.coords,e.TD),(0===t.button||this.touchApplied)&&(e.TD===q(lt,this)[0]&&e.TD===q(lt,this)[1]?(Object(o.w)(t.target,"corner")?this.callListener("onCellCornerDblClick",t,e.coords,e.TD):this.callListener("onCellDblClick",t,e.coords,e.TD),q(lt,this)[0]=null,q(lt,this)[1]=null):e.TD===q(lt,this)[0]&&(q(lt,this)[1]=e.TD,clearTimeout(q(at,this)[1]),q(at,this)[1]=setTimeout(()=>{q(lt,this)[1]=null},500)))}onTouchStart(t){Q(st,this,q(nt,this).getFocusSelection().cellRange),this.touchApplied=!0,this.onMouseDown(t)}onTouchEnd(t){var e;const n=t.target,i=null===(e=this.parentCell(n))||void 0===e?void 0:e.coords,r=Object(a.b)(i)&&i.row>=0&&i.col>=0;if(t.cancelable&&r&&q(J,this).getSetting("isDataViewInstance")){const e=["A","BUTTON","INPUT"];Object(l.f)()&&(Object(l.b)()||Object(l.e)())&&this.selectedCellWasTouched(n)&&!e.includes(n.tagName)?t.preventDefault():this.selectedCellWasTouched(n)||t.preventDefault()}this.onMouseUp(t),this.touchApplied=!1}callListener(t,e,n,i){const r=q(J,this).getSettingPure(t);r&&r(e,n,i,q(ot,this).call(this))}destroy(){clearTimeout(q(at,this)[0]),clearTimeout(q(at,this)[1]),q(rt,this).destroy()}};function ut(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ht=class{constructor(t,e,n){ut(this,"offset",void 0),ut(this,"total",void 0),ut(this,"countTH",void 0),this.offset=t,this.total=e,this.countTH=n}offsetted(t){return t+this.offset}unOffsetted(t){return t-this.offset}renderedToSource(t){return this.offsetted(t)}sourceToRendered(t){return this.unOffsetted(t)}offsettedTH(t){return t-this.countTH}unOffsettedTH(t){return t+this.countTH}visibleRowHeadedColumnToSourceColumn(t){return this.renderedToSource(this.offsettedTH(t))}sourceColumnToVisibleRowHeadedColumn(t){return this.unOffsettedTH(this.sourceToRendered(t))}};function dt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ft=class{constructor(t,e,n){dt(this,"offset",void 0),dt(this,"total",void 0),dt(this,"countTH",void 0),this.offset=t,this.total=e,this.countTH=n}offsetted(t){return t+this.offset}unOffsetted(t){return t-this.offset}renderedToSource(t){return this.offsetted(t)}sourceToRendered(t){return this.unOffsetted(t)}offsettedTH(t){return t-this.countTH}unOffsettedTH(t){return t+this.countTH}visibleColHeadedRowToSourceRow(t){return this.renderedToSource(this.offsettedTH(t))}sourceRowToVisibleColHeadedRow(t){return this.unOffsettedTH(this.sourceToRendered(t))}};function gt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class pt{constructor(){gt(this,"currentSize",0),gt(this,"nextSize",0),gt(this,"currentOffset",0),gt(this,"nextOffset",0)}setSize(t){this.currentSize=this.nextSize,this.nextSize=t}setOffset(t){this.currentOffset=this.nextOffset,this.nextOffset=t}}function mt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class bt{constructor(){mt(this,"size",new pt),mt(this,"workingSpace",0),mt(this,"sharedSize",null)}setSize(t){this.size.setSize(t)}setOffset(t){this.size.setOffset(t)}getViewSize(){return this.size}isShared(){return this.sharedSize instanceof pt}isPlaceOn(t){return this.workingSpace===t}append(t){this.workingSpace=1,t.workingSpace=2,this.sharedSize=t.getViewSize()}prepend(t){this.workingSpace=2,t.workingSpace=1,this.sharedSize=t.getViewSize()}}function yt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class wt{constructor(t,e,n){yt(this,"rootNode",void 0),yt(this,"nodesPool",void 0),yt(this,"sizeSet",new bt),yt(this,"childNodeType",void 0),yt(this,"visualIndex",0),yt(this,"collectedNodes",[]),this.rootNode=t,this.nodesPool=e,this.childNodeType=n.toUpperCase()}setSize(t){return this.sizeSet.setSize(t),this}setOffset(t){return this.sizeSet.setOffset(t),this}isSharedViewSet(){return this.sizeSet.isShared()}getNode(t){return t<this.collectedNodes.length?this.collectedNodes[t]:null}getCurrentNode(){const t=this.collectedNodes.length;return t>0?this.collectedNodes[t-1]:null}getRenderedChildCount(){const{rootNode:t,sizeSet:e}=this;let n=0;if(this.isSharedViewSet()){let i=t.firstElementChild;for(;i;){if(i.tagName===this.childNodeType)n+=1;else if(e.isPlaceOn(1))break;i=i.nextElementSibling}}else n=t.childElementCount;return n}start(){this.collectedNodes.length=0,this.visualIndex=0;const{rootNode:t,sizeSet:e}=this,n=this.isSharedViewSet(),{nextSize:i}=e.getViewSize();let r=this.getRenderedChildCount();for(;r<i;){const i=this.nodesPool();!n||n&&e.isPlaceOn(2)?t.appendChild(i):t.insertBefore(i,t.firstChild),r+=1}const o=n&&e.isPlaceOn(1);for(;r>i;)t.removeChild(o?t.firstChild:t.lastChild),r-=1}render(){const{rootNode:t,sizeSet:e}=this;let n=this.visualIndex;this.isSharedViewSet()&&e.isPlaceOn(2)&&(n+=e.sharedSize.nextSize);let i=t.childNodes[n];if(i.tagName!==this.childNodeType){const e=this.nodesPool();t.replaceChild(e,i),i=e}this.collectedNodes.push(i),this.visualIndex+=1}end(){}}class vt extends wt{prependView(t){return this.sizeSet.prepend(t.sizeSet),t.sizeSet.append(this.sizeSet),this}appendView(t){return this.sizeSet.append(t.sizeSet),t.sizeSet.prepend(this.sizeSet),this}}function Ct(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class St{constructor(t){Ct(this,"nodeType",void 0),this.nodeType=t.toUpperCase()}setRootDocument(t){this.rootDocument=t}obtain(){return this.rootDocument.createElement(this.nodeType)}}function Ot(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Tt{constructor(t,e){Ot(this,"nodesPool",null),Ot(this,"nodeType",void 0),Ot(this,"rootNode",void 0),Ot(this,"table",null),Ot(this,"renderedNodes",0),this.nodesPool="string"===typeof t?new St(t):null,this.nodeType=t,this.rootNode=e}setTable(t){this.nodesPool&&this.nodesPool.setRootDocument(t.rootDocument),this.table=t}adjust(){}render(){}}var _t=n(6);function Et(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Rt extends Tt{constructor(){super("TH"),Et(this,"orderViews",new WeakMap),Et(this,"sourceRowIndex",0)}obtainOrderView(t){let e;return this.orderViews.has(t)?e=this.orderViews.get(t):(e=new vt(t,t=>this.nodesPool.obtain(this.sourceRowIndex,t),this.nodeType),this.orderViews.set(t,e)),e}render(){const{rowsToRender:t,rowHeaderFunctions:e,rowHeadersCount:n,rows:i,cells:r}=this.table;for(let s=0;s<t;s++){const t=this.table.renderedRowToSource(s),a=i.getRenderedNode(s);this.sourceRowIndex=t;const l=this.obtainOrderView(a),c=r.obtainOrderView(a);l.appendView(c).setSize(n).setOffset(this.table.renderedColumnToSource(0)).start();for(let i=0;i<n;i++){l.render();const n=l.getCurrentNode();n.className="",n.removeAttribute("style"),Object(o.O)(n,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.isAriaEnabled()&&Object(o.U)(n,[Object(_t.E)(),Object(_t.H)(),Object(_t.f)(i+1),Object(_t.L)(-1)]),e[i](t,n,i)}l.end()}}}class Mt extends Tt{constructor(t){super(null,t)}adjust(){const{columnHeadersCount:t,rowHeadersCount:e}=this.table;let n=this.rootNode.firstChild;if(t){const{columnsToRender:i}=this.table,r=i+e;for(let e=0,s=t;e<s;e++){for(n=this.rootNode.childNodes[e],n||(n=this.table.rootDocument.createElement("tr"),this.rootNode.appendChild(n)),this.renderedNodes=n.childNodes.length;this.renderedNodes<r;)n.appendChild(this.table.rootDocument.createElement("th")),this.renderedNodes+=1;for(;this.renderedNodes>r;)n.removeChild(n.lastChild),this.renderedNodes-=1}const o=this.rootNode.childNodes.length;if(o>t)for(let e=t;e<o;e++)this.rootNode.removeChild(this.rootNode.lastChild)}else n&&Object(o.e)(n)}render(){const{columnHeadersCount:t}=this.table;this.table.isAriaEnabled()&&Object(o.U)(this.rootNode,[Object(_t.D)()]);for(let e=0;e<t;e+=1){const{columnHeaderFunctions:t,columnsToRender:n,rowHeadersCount:i}=this.table,r=this.rootNode.childNodes[e];this.table.isAriaEnabled()&&Object(o.U)(r,[Object(_t.B)(),Object(_t.F)(e+1)]);for(let s=-1*i;s<n;s+=1){const n=this.table.renderedColumnToSource(s),a=r.childNodes[s+i];a.className="",a.removeAttribute("style"),Object(o.O)(a,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.isAriaEnabled()&&Object(o.U)(a,[Object(_t.f)(s+1+this.table.rowHeadersCount),Object(_t.L)(-1),Object(_t.g)(),...s>=0?[Object(_t.G)()]:[Object(_t.B)()]]),t[e](n,a,e)}}}}var xt=n(10);let It=!1;class kt extends Tt{constructor(t){super(null,t)}adjust(){const{columnsToRender:t,rowHeadersCount:e}=this.table,n=t+e;for(;this.renderedNodes<n;)this.rootNode.appendChild(this.table.rootDocument.createElement("col")),this.renderedNodes+=1;for(;this.renderedNodes>n;)this.rootNode.removeChild(this.rootNode.lastChild),this.renderedNodes-=1}render(){this.adjust();const{columnsToRender:t,rowHeadersCount:e}=this.table;!It&&t>1e3&&(It=!0,Object(O.b)(xt.a`Performance tip: Handsontable rendered more than 1000 visible columns.\x20
        Consider limiting the number of rendered columns by specifying the table width and/or\x20
        turning off the "renderAllColumns" option.`));for(let i=0;i<e;i++){const t=this.table.renderedColumnToSource(i),e=this.table.columnUtils.getHeaderWidth(t);this.rootNode.childNodes[i].style.width=e+"px"}for(let i=0;i<t;i++){const t=this.table.renderedColumnToSource(i),n=this.table.columnUtils.getStretchedColumnWidth(t);this.rootNode.childNodes[i+e].style.width=n+"px"}const n=this.rootNode.firstChild;n&&Object(o.a)(n,"rowHeader")}}function At(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Nt="ht__row_even",jt="ht__row_odd";let Ht=!1;class Dt extends Tt{constructor(t){super("TR",t),At(this,"orderView",void 0),this.orderView=new wt(t,t=>this.nodesPool.obtain(t),this.nodeType)}getRenderedNode(t){return this.orderView.getNode(t)}render(){const{rowsToRender:t}=this.table;!Ht&&t>1e3&&(Ht=!0,Object(O.b)(xt.a`Performance tip: Handsontable rendered more than 1000 visible rows.\x20
        Consider limiting the number of rendered rows by specifying the table height and/or\x20
        turning off the "renderAllRows" option.`)),this.table.isAriaEnabled()&&Object(o.U)(this.rootNode,[Object(_t.D)()]),this.orderView.setSize(t).setOffset(this.table.renderedRowToSource(0)).start();for(let i=0;i<t;i++){this.orderView.render();const t=this.orderView.getCurrentNode(),r=this.table.renderedRowToSource(i);var e,n;if(this.table.isAriaEnabled())Object(o.U)(t,[Object(_t.B)(),Object(_t.F)(r+(null!==(e=null===(n=this.table.rowUtils)||void 0===n||null===(n=n.dataAccessObject)||void 0===n?void 0:n.columnHeaders.length)&&void 0!==e?e:0)+1)]);Object(o.P)(t,[Nt,jt]),(r+1)%2===0?Object(o.a)(t,Nt):Object(o.a)(t,jt)}this.orderView.end()}}function Pt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Lt extends Tt{constructor(){super("TD"),Pt(this,"orderViews",new WeakMap),Pt(this,"sourceRowIndex",0)}obtainOrderView(t){let e;return this.orderViews.has(t)?e=this.orderViews.get(t):(e=new vt(t,t=>this.nodesPool.obtain(this.sourceRowIndex,t),this.nodeType),this.orderViews.set(t,e)),e}render(){const{rowsToRender:t,columnsToRender:e,rows:n,rowHeaders:i}=this.table;for(let a=0;a<t;a++){const t=this.table.renderedRowToSource(a),l=n.getRenderedNode(a);this.sourceRowIndex=t;const c=this.obtainOrderView(l),u=i.obtainOrderView(l);c.prependView(u).setSize(e).setOffset(this.table.renderedColumnToSource(0)).start();for(let n=0;n<e;n++){c.render();const e=c.getCurrentNode(),i=this.table.renderedColumnToSource(n);var r,s;if(Object(o.w)(e,"hide")||(e.className=""),e.removeAttribute("style"),e.removeAttribute("dir"),Object(o.O)(e,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.cellRenderer(t,i,e),this.table.isAriaEnabled())Object(o.U)(e,[...e.hasAttribute("role")?[]:[Object(_t.l)()],Object(_t.L)(-1),Object(_t.f)(i+(null!==(r=null===(s=this.table.rowUtils)||void 0===s||null===(s=s.dataAccessObject)||void 0===s?void 0:s.rowHeaders.length)&&void 0!==r?r:0)+1)])}c.end()}}}function Ft(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Bt{constructor(t){let{cellRenderer:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ft(this,"rootNode",void 0),Ft(this,"rootDocument",void 0),Ft(this,"rowHeaders",null),Ft(this,"columnHeaders",null),Ft(this,"colGroup",null),Ft(this,"rows",null),Ft(this,"cells",null),Ft(this,"rowFilter",null),Ft(this,"columnFilter",null),Ft(this,"rowUtils",null),Ft(this,"columnUtils",null),Ft(this,"rowsToRender",0),Ft(this,"columnsToRender",0),Ft(this,"rowHeaderFunctions",[]),Ft(this,"rowHeadersCount",0),Ft(this,"columnHeaderFunctions",[]),Ft(this,"columnHeadersCount",0),Ft(this,"cellRenderer",void 0),Ft(this,"activeOverlayName",void 0),this.rootNode=t,this.rootDocument=this.rootNode.ownerDocument,this.cellRenderer=e}setActiveOverlayName(t){this.activeOverlayName=t}setAxisUtils(t,e){this.rowUtils=t,this.columnUtils=e}setViewportSize(t,e){this.rowsToRender=t,this.columnsToRender=e}setFilters(t,e){this.rowFilter=t,this.columnFilter=e}setHeaderContentRenderers(t,e){this.rowHeaderFunctions=t,this.rowHeadersCount=t.length,this.columnHeaderFunctions=e,this.columnHeadersCount=e.length}setRenderers(){let{rowHeaders:t,columnHeaders:e,colGroup:n,rows:i,cells:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.setTable(this),e.setTable(this),n.setTable(this),i.setTable(this),r.setTable(this),this.rowHeaders=t,this.columnHeaders=e,this.colGroup=n,this.rows=i,this.cells=r}renderedRowToSource(t){return this.rowFilter.renderedToSource(t)}renderedColumnToSource(t){return this.columnFilter.renderedToSource(t)}isAriaEnabled(){return this.rowUtils.wtSettings.getSetting("ariaTags")}render(){this.colGroup.adjust(),this.columnHeaders.adjust(),this.rows.adjust(),this.rowHeaders.adjust(),this.columnHeaders.render(),this.rows.render(),this.rowHeaders.render(),this.cells.render(),this.columnUtils.calculateWidths(),this.colGroup.render();const{rowsToRender:t,rows:e}=this;for(let n=0;n<t;n++){const t=e.getRenderedNode(n);if(t.firstChild){const e=this.renderedRowToSource(n),i=this.rowUtils.getHeightByOverlayName(e,this.activeOverlayName);t.firstChild.style.height=i?i-1+"px":""}}}}class Vt{constructor(){let{TABLE:t,THEAD:e,COLGROUP:n,TBODY:i,rowUtils:r,columnUtils:o,cellRenderer:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.renderer=new Bt(t,{cellRenderer:s}),this.renderer.setRenderers({rowHeaders:new Rt,columnHeaders:new Mt(e),colGroup:new kt(n),rows:new Dt(i),cells:new Lt}),this.renderer.setAxisUtils(r,o)}setActiveOverlayName(t){return this.renderer.setActiveOverlayName(t),this}setFilters(t,e){return this.renderer.setFilters(t,e),this}setViewportSize(t,e){return this.renderer.setViewportSize(t,e),this}setHeaderContentRenderers(t,e){return this.renderer.setHeaderContentRenderers(t,e),this}adjust(){this.renderer.adjust()}render(){this.renderer.render()}}var Ut=n(237);function Wt(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function zt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yt(t,e){return t.get($t(t,e))}function Gt(t,e,n){return t.set($t(t,e),n),n}function $t(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Kt=new WeakMap,Xt=new WeakMap,qt=new WeakMap,Qt=new WeakMap,Zt=new WeakMap;class Jt{constructor(t){let{totalColumns:e,stretchMode:n,stretchingColumnWidthFn:i,columnWidthFn:r}=t;zt(this,"stretchAllRatio",0),zt(this,"stretchLastWidth",0),zt(this,"stretchAllColumnsWidth",[]),Wt(this,Kt,0),zt(this,"needVerifyLastColumnWidth",!0),Wt(this,Xt,()=>0),Wt(this,qt,t=>t),Wt(this,Qt,t=>t),Wt(this,Zt,()=>"none"),Gt(Xt,this,e),Gt(Zt,this,n),Gt(qt,this,null!==i&&void 0!==i?i:Yt(qt,this)),Gt(Qt,this,null!==r&&void 0!==r?r:Yt(Qt,this))}refreshStretching(t){if("none"===Yt(Zt,this).call(this))return;this.stretchAllRatio=0,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0,this.stretchLastWidth=0,Gt(Kt,this,t);let e=0;for(let i=0;i<Yt(Xt,this).call(this);i++){const n=this._getColumnWidth(i),r=Yt(qt,this).call(this,void 0,i);"number"===typeof r?t-=r:e+=n}const n=t-e;if("all"===Yt(Zt,this).call(this)&&n>0)this.stretchAllRatio=t/e,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0;else if("last"===Yt(Zt,this).call(this)&&t!==1/0){const t=this._getColumnWidth(Yt(Xt,this).call(this)-1),e=n+t;this.stretchLastWidth=e>=0?e:t}}getStretchedColumnWidth(t,e){let n=null;return"all"===Yt(Zt,this).call(this)&&0!==this.stretchAllRatio?n=this._getStretchedAllColumnWidth(t,e):"last"===Yt(Zt,this).call(this)&&0!==this.stretchLastWidth&&(n=this._getStretchedLastColumnWidth(t)),n}_getStretchedAllColumnWidth(t,e){let n=0;if(!this.stretchAllColumnsWidth[t]){const n=Math.round(e*this.stretchAllRatio),i=Yt(qt,this).call(this,n,t);this.stretchAllColumnsWidth[t]=void 0===i?n:isNaN(i)?this._getColumnWidth(t):i}if(this.stretchAllColumnsWidth.length===Yt(Xt,this).call(this)&&this.needVerifyLastColumnWidth){this.needVerifyLastColumnWidth=!1;for(let t=0;t<this.stretchAllColumnsWidth.length;t++)n+=this.stretchAllColumnsWidth[t];n!==Yt(Kt,this)&&(this.stretchAllColumnsWidth[this.stretchAllColumnsWidth.length-1]+=Yt(Kt,this)-n)}return this.stretchAllColumnsWidth[t]}_getStretchedLastColumnWidth(t){return t===Yt(Xt,this).call(this)-1?this.stretchLastWidth:null}_getColumnWidth(t){let e=Yt(Qt,this).call(this,t);return isNaN(e)&&(e=Ut.a),e}}function te(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class ee{constructor(t,e){te(this,"dataAccessObject",void 0),te(this,"wtSettings",void 0),te(this,"headerWidths",new Map),te(this,"stretching",void 0),this.dataAccessObject=t,this.wtSettings=e,this.stretching=new Jt({totalColumns:()=>this.wtSettings.getSetting("totalColumns"),stretchMode:()=>this.wtSettings.getSetting("stretchH"),stretchingColumnWidthFn:(t,e)=>this.wtSettings.getSetting("onBeforeStretchingColumnWidth",t,e),columnWidthFn:t=>this.dataAccessObject.wtTable.getColumnWidth(t)})}getWidth(t){return this.wtSettings.getSetting("columnWidth",t)||this.wtSettings.getSetting("defaultColumnWidth")}getStretchedColumnWidth(t){let e=this.getWidth(t);const n=this.stretching.getStretchedColumnWidth(t,e);return n&&(e=n),e}getHeaderHeight(t){let e=this.wtSettings.getSetting("defaultRowHeight");const n=this.dataAccessObject.wtViewport.oversizedColumnHeaders[t];return void 0!==n&&(e=e?Math.max(e,n):n),e}getHeaderWidth(t){return this.headerWidths.get(this.dataAccessObject.wtTable.columnFilter.sourceToRendered(t))}refreshStretching(){const{wtTable:t,wtViewport:e,cloneSource:n}=this.dataAccessObject,i=n?n.wtTable.holder:t.holder,r=i.offsetHeight<i.scrollHeight?Object(o.q)():0;this.stretching.refreshStretching(e.getViewportWidth()-r)}calculateWidths(){const{wtSettings:t}=this;let e=t.getSetting("rowHeaderWidth");if(this.refreshStretching(),e=t.getSetting("onModifyRowHeaderWidth",e),null!==e&&void 0!==e){const n=t.getSetting("rowHeaders").length,i=t.getSetting("defaultColumnWidth");for(let t=0;t<n;t++){let n=Array.isArray(e)?e[t]:e;n=null===n||void 0===n?i:n,this.headerWidths.set(t,n)}}}}function ne(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class ie{constructor(t,e){ne(this,"dataAccessObject",void 0),ne(this,"wtSettings",void 0),this.dataAccessObject=t,this.wtSettings=e}getHeight(t){let e=this.wtSettings.getSetting("rowHeight",t);const n=this.dataAccessObject.wtViewport.oversizedRows[t];return void 0!==n&&(e=void 0===e?n:Math.max(e,n)),e}getHeightByOverlayName(t,e){let n=this.wtSettings.getSetting("rowHeightByOverlayName",t,e);const i=this.dataAccessObject.wtViewport.oversizedRows[t];return void 0!==i&&(n=void 0===n?i:Math.max(n,i)),n}}const re=["top","bottom","inline_start","top_inline_start_corner","bottom_inline_start_corner"],oe=new Map([["top","ht_clone_top"],["bottom","ht_clone_bottom"],["inline_start","ht_clone_inline_start ht_clone_left"],["top_inline_start_corner","ht_clone_top_inline_start_corner ht_clone_top_left_corner"],["bottom_inline_start_corner","ht_clone_bottom_inline_start_corner ht_clone_bottom_left_corner"]]);function se(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ae=class{constructor(t,e,n,i,r){se(this,"wtSettings",null),se(this,"domBindings",void 0),se(this,"TBODY",null),se(this,"THEAD",null),se(this,"COLGROUP",null),se(this,"hasTableHeight",!0),se(this,"hasTableWidth",!0),se(this,"isTableVisible",!1),se(this,"tableOffset",0),se(this,"holderOffset",0),this.domBindings=n,this.isMaster="master"===r,this.name=r,this.dataAccessObject=t,this.facadeGetter=e,this.wtSettings=i,this.instance=this.dataAccessObject.wot,this.wot=this.dataAccessObject.wot,this.TABLE=n.rootTable,Object(o.R)(this.TABLE),this.spreader=this.createSpreader(this.TABLE),this.hider=this.createHider(this.spreader),this.holder=this.createHolder(this.hider),this.wtRootElement=this.holder.parentNode,this.isMaster&&this.alignOverlaysWithTrimmingContainer(),this.fixTableDomTree(),this.rowFilter=null,this.columnFilter=null,this.correctHeaderWidth=!1;const s=this.wtSettings.getSettingPure("rowHeaderWidth");this.wtSettings.update("rowHeaderWidth",()=>this._modifyRowHeaderWidth(s)),this.rowUtils=new ie(this.dataAccessObject,this.wtSettings),this.columnUtils=new ee(this.dataAccessObject,this.wtSettings),this.tableRenderer=new Vt({TABLE:this.TABLE,THEAD:this.THEAD,COLGROUP:this.COLGROUP,TBODY:this.TBODY,rowUtils:this.rowUtils,columnUtils:this.columnUtils,cellRenderer:this.wtSettings.getSettingPure("cellRenderer")})}is(t){return this.name===t}fixTableDomTree(){const t=this.domBindings.rootDocument;this.TBODY=this.TABLE.querySelector("tbody"),this.TBODY||(this.TBODY=t.createElement("tbody"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.querySelector("thead"),this.THEAD||(this.THEAD=t.createElement("thead"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.querySelector("colgroup"),this.COLGROUP||(this.COLGROUP=t.createElement("colgroup"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD))}createSpreader(t){const e=t.parentNode;let n;return e&&e.nodeType===Node.ELEMENT_NODE&&Object(o.w)(e,"wtHolder")||(n=this.domBindings.rootDocument.createElement("div"),n.className="wtSpreader",e&&e.insertBefore(n,t),n.appendChild(t)),n.style.position="relative",this.wtSettings.getSetting("ariaTags")&&Object(o.U)(n,[Object(_t.y)()]),n}createHider(t){const e=t.parentNode;let n;return e&&e.nodeType===Node.ELEMENT_NODE&&Object(o.w)(e,"wtHolder")||(n=this.domBindings.rootDocument.createElement("div"),n.className="wtHider",e&&e.insertBefore(n,t),n.appendChild(t)),this.wtSettings.getSetting("ariaTags")&&Object(o.U)(n,[Object(_t.y)()]),n}createHolder(t){const e=t.parentNode;let n;return e&&e.nodeType===Node.ELEMENT_NODE&&Object(o.w)(e,"wtHolder")||(n=this.domBindings.rootDocument.createElement("div"),n.style.position="relative",n.className="wtHolder",e&&e.insertBefore(n,t),this.isMaster&&(n.parentNode.className+="ht_master handsontable",n.parentNode.setAttribute("dir",this.wtSettings.getSettingPure("rtlMode")?"rtl":"ltr"),this.wtSettings.getSetting("ariaTags")&&Object(o.U)(n.parentNode,[Object(_t.y)()])),n.appendChild(t)),this.wtSettings.getSetting("ariaTags")&&Object(o.U)(n,[Object(_t.y)()]),n}draw(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{wtSettings:e}=this,{wtOverlays:n,wtViewport:i}=this.dataAccessObject,r=e.getSetting("totalRows"),s=e.getSetting("totalColumns"),a=e.getSetting("rowHeaders"),l=a.length,c=e.getSetting("columnHeaders"),u=c.length;let h=t;if(this.isMaster&&(n.beforeDraw(),this.holderOffset=Object(o.K)(this.holder),h=i.createCalculators(h),l&&!e.getSetting("fixedColumnsStart"))){const t=n.inlineStartOverlay.getScrollPosition(),e=this.correctHeaderWidth;this.correctHeaderWidth=0!==t,e!==this.correctHeaderWidth&&(h=!1)}if(h)this.isMaster&&n.refresh(!0);else{this.isMaster?this.tableOffset=Object(o.K)(this.TABLE):this.tableOffset=this.dataAccessObject.parentTableOffset;const t=r>0?this.getFirstRenderedRow():0,e=s>0?this.getFirstRenderedColumn():0;this.rowFilter=new ft(t,r,u),this.columnFilter=new ht(e,s,l);let h=!0;if(this.isMaster){this.alignOverlaysWithTrimmingContainer();const t={};this.wtSettings.getSetting("beforeDraw",!0,t),h=!0!==t.skipRender}if(h){let t;if(this.tableRenderer.setHeaderContentRenderers(a,c),(this.is("bottom")||this.is("bottom_inline_start_corner"))&&this.tableRenderer.setHeaderContentRenderers(a,[]),this.resetOversizedRows(),this.tableRenderer.setActiveOverlayName(this.name).setViewportSize(this.getRenderedRowsCount(),this.getRenderedColumnsCount()).setFilters(this.rowFilter,this.columnFilter).render(),this.isMaster&&(t=this.dataAccessObject.workspaceWidth,i.containerWidth=null,this.markOversizedColumnHeaders()),this.adjustColumnHeaderHeights(),(this.isMaster||this.is("bottom"))&&this.markOversizedRows(),this.isMaster){this.wtSettings.getSetting("externalRowCalculator")||i.createVisibleCalculators(),n.refresh(!1),n.applyToDOM();const e=Object(o.M)(this.hider),r=Object(o.M)(this.TABLE);0!==e&&r!==e&&(this.columnUtils.calculateWidths(),this.tableRenderer.renderer.colGroup.render()),t!==i.getWorkspaceWidth()&&(i.containerWidth=null,this.columnUtils.calculateWidths(),this.tableRenderer.renderer.colGroup.render()),this.wtSettings.getSetting("onDraw",!0)}else this.is("bottom")&&this.dataAccessObject.cloneSource.wtOverlays.adjustElementsSize()}}let d=!1;return this.isMaster&&(d=n.topOverlay.resetFixedPosition(),n.bottomOverlay.clone&&(d=n.bottomOverlay.resetFixedPosition()||d),d=n.inlineStartOverlay.resetFixedPosition()||d,n.topInlineStartCornerOverlay&&n.topInlineStartCornerOverlay.resetFixedPosition(),n.bottomInlineStartCornerOverlay&&n.bottomInlineStartCornerOverlay.clone&&n.bottomInlineStartCornerOverlay.resetFixedPosition()),d?(n.refreshAll(),n.adjustElementsSize()):this.dataAccessObject.selectionManager.setActiveOverlay(this.facadeGetter()).render(h),this.isMaster&&n.afterDraw(),this.dataAccessObject.drawn=!0,this}markIfOversizedColumnHeader(t){const e=this.columnFilter.renderedToSource(t);let n=this.wtSettings.getSetting("columnHeaders").length;const i=this.wtSettings.getSetting("defaultRowHeight");let r,s,a;const l=this.wtSettings.getSetting("columnHeaderHeight")||[];for(;n;)n-=1,r=this.getColumnHeaderHeight(n),s=this.getColumnHeader(e,n),s&&(a=Object(o.A)(s),(!r&&i<a||r<a)&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[n]=a),Array.isArray(l)?null!==l[n]&&void 0!==l[n]&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[n]=l[n]):isNaN(l)||(this.dataAccessObject.wtViewport.oversizedColumnHeaders[n]=l),this.dataAccessObject.wtViewport.oversizedColumnHeaders[n]<(l[n]||l)&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[n]=l[n]||l))}adjustColumnHeaderHeights(){const{wtSettings:t}=this,e=this.THEAD.childNodes,n=this.dataAccessObject.wtViewport.oversizedColumnHeaders;for(let i=0,r=t.getSetting("columnHeaders").length;i<r;i++)if(n[i]){if(!e[i]||0===e[i].childNodes.length)return;e[i].childNodes[0].style.height=n[i]+"px"}}resetOversizedRows(){const{wtSettings:t}=this,{wtViewport:e}=this.dataAccessObject;if((this.isMaster||this.is("bottom"))&&!t.getSetting("externalRowCalculator")){const t=this.getRenderedRowsCount();for(let n=0;n<t;n++){const t=this.rowFilter.renderedToSource(n);e.oversizedRows&&e.oversizedRows[t]&&(e.oversizedRows[t]=void 0)}}}getCell(t){let e=t.row,n=t.col;const i=this.wtSettings.getSetting("onModifyGetCellCoords",e,n);if(i&&Array.isArray(i)&&([e,n]=i),this.isRowBeforeRenderedRows(e))return-1;if(this.isRowAfterRenderedRows(e))return-2;if(this.isColumnBeforeRenderedColumns(n))return-3;if(this.isColumnAfterRenderedColumns(n))return-4;const r=this.getRow(e);if(!r&&e>=0)throw new Error("TR was expected to be rendered but is not");const o=r.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(n)];if(!o&&n>=0)throw new Error("TD or TH was expected to be rendered but is not");return o}getRow(t){let e=null,n=null;var i,r;t<0?(e=null===(i=this.rowFilter)||void 0===i?void 0:i.sourceRowToVisibleColHeadedRow(t),n=this.THEAD):(e=null===(r=this.rowFilter)||void 0===r?void 0:r.sourceToRendered(t),n=this.TBODY);return void 0!==e&&void 0!==n&&(!(n.childNodes.length<e+1)&&n.childNodes[e])}getColumnHeader(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.THEAD.childNodes[e];return null===n||void 0===n?void 0:n.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(t)]}getColumnHeaders(t){const e=[],n=this.columnFilter.sourceColumnToVisibleRowHeadedColumn(t);return this.THEAD.childNodes.forEach(t=>{const i=t.childNodes[n];i&&e.push(i)}),e}getRowHeader(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e>=this.wtSettings.getSetting("rowHeaders").length)return;const n=this.rowFilter.sourceToRendered(t),i=n<0?this.rowFilter.sourceRowToVisibleColHeadedRow(t):n,r=(n<0?this.THEAD:this.TBODY).childNodes[i];return null===r||void 0===r?void 0:r.childNodes[e]}getRowHeaders(t){const e=[],n=this.wtSettings.getSetting("rowHeaders").length;for(let i=0;i<n;i++){const n=this.TBODY.childNodes[this.rowFilter.sourceToRendered(t)],r=null===n||void 0===n?void 0:n.childNodes[i];r&&e.push(r)}return e}getCoords(t){let e=t;if("TD"!==e.nodeName&&"TH"!==e.nodeName&&(e=Object(o.c)(e,["TD","TH"])),null===e)return null;const n=e.parentNode,i=n.parentNode;let r=Object(o.z)(n),s=e.cellIndex;if(Object(o.N)("top_inline_start_corner",e,this.wtRootElement)||Object(o.N)("top",e,this.wtRootElement))"THEAD"===i.nodeName&&(r-=i.childNodes.length);else if(Object(o.N)("bottom_inline_start_corner",e,this.wtRootElement)||Object(o.N)("bottom",e,this.wtRootElement)){r=this.wtSettings.getSetting("totalRows")-i.childNodes.length+r}else r=i===this.THEAD?this.rowFilter.visibleColHeadedRowToSourceRow(r):this.rowFilter.renderedToSource(r);return s=Object(o.N)("top_inline_start_corner",e,this.wtRootElement)||Object(o.N)("inline_start",e,this.wtRootElement)||Object(o.N)("bottom_inline_start_corner",e,this.wtRootElement)?this.columnFilter.offsettedTH(s):this.columnFilter.visibleRowHeadedColumnToSourceColumn(s),this.wot.createCellCoords(r,s)}markOversizedRows(){if(this.wtSettings.getSetting("externalRowCalculator"))return;let t=this.TBODY.childNodes.length;let e,n,i,r,s;if(t*this.wtSettings.getSetting("defaultRowHeight")!==Object(o.A)(this.TBODY)-1||this.wtSettings.getSetting("fixedRowsBottom"))for(;t;)t-=1,i=this.rowFilter.renderedToSource(t),e=this.getRowHeight(i),r=this.getTrForRow(i),s=r.querySelector("th"),n=s?Object(o.A)(s):Object(o.A)(r)-1,(!e&&this.wtSettings.getSetting("defaultRowHeight")<n||e<n)&&(n+=1,this.dataAccessObject.wtViewport.oversizedRows[i]=n)}getTrForRow(t){return this.TBODY.childNodes[this.rowFilter.sourceToRendered(t)]}isColumnHeaderRendered(t){if(t>=0)return!1;const e=this.wtSettings.getSetting("rowHeaders").length;return Math.abs(t)<=e}isRowHeaderRendered(t){if(t>=0)return!1;const e=this.wtSettings.getSetting("columnHeaders").length;return Math.abs(t)<=e}isRowBeforeRenderedRows(t){const e=this.getFirstRenderedRow();return t<0&&e<=0?!this.isRowHeaderRendered(t):t<e}isRowAfterRenderedRows(t){return t>this.getLastRenderedRow()}isColumnBeforeRenderedColumns(t){const e=this.getFirstRenderedColumn();return t<0&&e<=0?!this.isColumnHeaderRendered(t):t<e}isColumnAfterRenderedColumns(t){return this.columnFilter&&t>this.getLastRenderedColumn()}isColumnAfterViewport(t){return this.columnFilter&&t>this.getLastVisibleColumn()}isRowAfterViewport(t){return this.rowFilter&&t>this.getLastVisibleRow()}isColumnBeforeViewport(t){return this.columnFilter&&this.columnFilter.sourceToRendered(t)<0&&t>=0}isLastRowFullyVisible(){return this.getLastVisibleRow()===this.getLastRenderedRow()}isLastColumnFullyVisible(){return this.getLastVisibleColumn()===this.getLastRenderedColumn()}allRowsInViewport(){return this.wtSettings.getSetting("totalRows")===this.getVisibleRowsCount()}allColumnsInViewport(){return this.wtSettings.getSetting("totalColumns")===this.getVisibleColumnsCount()}getRowHeight(t){return this.rowUtils.getHeight(t)}getColumnHeaderHeight(t){return this.columnUtils.getHeaderHeight(t)}getColumnWidth(t){return this.columnUtils.getWidth(t)}getStretchedColumnWidth(t){return this.columnUtils.getStretchedColumnWidth(t)}hasDefinedSize(){return this.hasTableHeight&&this.hasTableWidth}getWidth(){return Object(o.M)(this.TABLE)}getHeight(){return Object(o.L)(this.TABLE)}getTotalWidth(){const t=Object(o.M)(this.hider);return 0!==t?t:this.getWidth()}getTotalHeight(){const t=Object(o.L)(this.hider);return 0!==t?t:this.getHeight()}isVisible(){return Object(o.H)(this.TABLE)}_modifyRowHeaderWidth(t){let e=Object(s.d)(t)?t():null;return Array.isArray(e)?(e=[...e],e[e.length-1]=this._correctRowHeaderWidth(e[e.length-1])):e=this._correctRowHeaderWidth(e),e}_correctRowHeaderWidth(t){let e=t;return"number"!==typeof t&&(e=this.wtSettings.getSetting("defaultColumnWidth")),this.correctHeaderWidth&&(e+=1),e}};const le={getFirstRenderedRow(){return 0===this.wtSettings.getSetting("totalRows")?-1:0},getFirstVisibleRow(){return this.getFirstRenderedRow()},getFirstPartiallyVisibleRow(){return this.getFirstRenderedRow()},getLastRenderedRow(){return this.getRenderedRowsCount()-1},getLastVisibleRow(){return this.getLastRenderedRow()},getLastPartiallyVisibleRow(){return this.getLastRenderedRow()},getRenderedRowsCount(){const t=this.wtSettings.getSetting("totalRows");return Math.min(this.wtSettings.getSetting("fixedRowsTop"),t)},getVisibleRowsCount(){return this.getRenderedRowsCount()},getColumnHeadersCount(){return this.dataAccessObject.columnHeaders.length}};Object(S.f)(le,"MIXIN_NAME","stickyRowsTop",{writable:!1,enumerable:!1});var ce=le;const ue={getFirstRenderedColumn(){const t=this.dataAccessObject.startColumnRendered;return null===t?-1:t},getFirstVisibleColumn(){const t=this.dataAccessObject.startColumnVisible;return null===t?-1:t},getFirstPartiallyVisibleColumn(){const t=this.dataAccessObject.startColumnPartiallyVisible;return null===t?-1:t},getLastRenderedColumn(){const t=this.dataAccessObject.endColumnRendered;return null===t?-1:t},getLastVisibleColumn(){const t=this.dataAccessObject.endColumnVisible;return null===t?-1:t},getLastPartiallyVisibleColumn(){const t=this.dataAccessObject.endColumnPartiallyVisible;return null===t?-1:t},getRenderedColumnsCount(){return this.dataAccessObject.countColumnsRendered},getVisibleColumnsCount(){return this.dataAccessObject.countColumnsVisible},getRowHeadersCount(){return this.dataAccessObject.rowHeaders.length}};Object(S.f)(ue,"MIXIN_NAME","calculatedColumns",{writable:!1,enumerable:!1});var he=ue;class de extends ae{constructor(t,e,n,i){super(t,e,n,i,"top")}}Object(S.n)(de,ce),Object(S.n)(de,he);var fe=de;function ge(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function pe(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function me(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var be=new WeakSet;function ye(t){const{wtSettings:e,inlineStartOverlay:n,wtTable:i,wtViewport:r,totalColumns:s,rootWindow:a}=this.dataAccessObject;if(n.mainTableScrollableElement===a){let l=null;if(e.getSetting("rtlMode")){const t=i.TABLE.getBoundingClientRect(),e=this.dataAccessObject.rootWindow.document.documentElement.offsetWidth;l=Math.abs(t.right-e)}else{l=Object(o.K)(i.wtRootElement).left}const c=Math.abs(Object(o.n)(a,a));if(l>c){const e=Object(o.B)(a);let i=r.getRowHeaderWidth();for(let r=1;r<=s;r++)if(i+=n.sumCellSizes(r-1,r),l+i-c>=e){t=r-2;break}}}return t}function we(t){const{topOverlay:e,wtTable:n,wtViewport:i,totalRows:r,rootWindow:s}=this.dataAccessObject;if(e.mainTableScrollableElement===s){const a=Object(o.K)(n.wtRootElement),l=Object(o.o)(s,s);if(a.top>l){const n=Object(o.A)(s);let c=i.getColumnHeaderHeight();for(let i=1;i<=r;i++)if(c+=e.sumCellSizes(i-1,i),a.top+c-l>=n){t=i-2;break}}}return t}var ve=class{constructor(t){ge(this,be),pe(this,"dataAccessObject",void 0),this.dataAccessObject=t}scrollViewport(t,e,n,i,r){const o=this.scrollViewportHorizontally(t.col,n,r),s=this.scrollViewportVertically(t.row,e,i);return o||s}scrollViewportHorizontally(t,e,n){const{drawn:i,totalColumns:r}=this.dataAccessObject;if(!i||!Number.isInteger(t)||t<0||t>r)return!1;const o=void 0===e&&void 0===n,{fixedColumnsStart:s,inlineStartOverlay:a}=this.dataAccessObject;if(o&&t<s)return!1;if(t=this.dataAccessObject.wtSettings.getSetting("onBeforeViewportScrollHorizontally",t),!Number.isInteger(t)||t<0||t>r)return!1;const l=this.getFirstVisibleColumn(),c=this.getLastVisibleColumn();let u=!1;return(o&&(t<l||t>c)||!o)&&(u=a.scrollTo(t,o?t>=this.getLastPartiallyVisibleColumn():e)),u}scrollViewportVertically(t,e,n){const{drawn:i,totalRows:r}=this.dataAccessObject;if(!i||!Number.isInteger(t)||t<0||t>r)return!1;const o=void 0===e&&void 0===n,{fixedRowsBottom:s,fixedRowsTop:a,topOverlay:l}=this.dataAccessObject;if(o&&(t<a||t>r-s-1))return!1;if(t=this.dataAccessObject.wtSettings.getSetting("onBeforeViewportScrollVertically",t),!Number.isInteger(t)||t<0||t>r)return!1;const c=this.getFirstVisibleRow(),u=this.getLastVisibleRow();let h=!1;return(o&&(t<c||t>u)||!o)&&(h=l.scrollTo(t,o?t>=this.getLastPartiallyVisibleRow():n)),h}getFirstVisibleRow(){return this.dataAccessObject.wtTable.getFirstVisibleRow()}getLastVisibleRow(){return me(be,this,we).call(this,this.dataAccessObject.wtTable.getLastVisibleRow())}getFirstPartiallyVisibleRow(){return this.dataAccessObject.wtTable.getFirstPartiallyVisibleRow()}getLastPartiallyVisibleRow(){return me(be,this,we).call(this,this.dataAccessObject.wtTable.getLastPartiallyVisibleRow())}getFirstVisibleColumn(){return this.dataAccessObject.wtTable.getFirstVisibleColumn()}getLastVisibleColumn(){return me(be,this,ye).call(this,this.dataAccessObject.wtTable.getLastVisibleColumn())}getFirstPartiallyVisibleColumn(){return this.dataAccessObject.wtTable.getFirstPartiallyVisibleColumn()}getLastPartiallyVisibleColumn(){return me(be,this,ye).call(this,this.dataAccessObject.wtTable.getLastPartiallyVisibleColumn())}},Ce=n(54),Se=n(71);function Oe(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Te{get eventManager(){return new d.a(this)}constructor(t,e){Oe(this,"wtTable",void 0),Oe(this,"wtScroll",void 0),Oe(this,"wtViewport",void 0),Oe(this,"wtOverlays",void 0),Oe(this,"selectionManager",void 0),Oe(this,"wtEvent",void 0),Oe(this,"guid","wt_"+Object(G.b)()),Oe(this,"drawInterrupted",!1),Oe(this,"drawn",!1),Oe(this,"domBindings",void 0),Oe(this,"wtSettings",void 0),this.domBindings={rootTable:t,rootDocument:t.ownerDocument,rootWindow:t.ownerDocument.defaultView},this.wtSettings=e,this.wtScroll=new ve(this.createScrollDao())}findOriginalHeaders(){const t=[];if(this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(let e=0,n=this.wtTable.THEAD.childNodes[0].childNodes.length;e<n;e++)t.push(this.wtTable.THEAD.childNodes[0].childNodes[e].innerHTML);this.wtSettings.getSetting("columnHeaders").length||this.wtSettings.update("columnHeaders",[function(e,n){Object(o.g)(n,t[e])}])}}createCellCoords(t,e){return new Ce.a(t,e,this.wtSettings.getSetting("rtlMode"))}createCellRange(t,e,n){return new Se.a(t,e,n,this.wtSettings.getSetting("rtlMode"))}draw(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.drawInterrupted=!1,this.wtTable.isVisible()?this.wtTable.draw(t):this.drawInterrupted=!0,this}getCell(t){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1]))return this.wtTable.getCell(t);const e=this.wtSettings.getSetting("totalRows"),n=this.wtSettings.getSetting("fixedRowsTop"),i=this.wtSettings.getSetting("fixedRowsBottom"),r=this.wtSettings.getSetting("fixedColumnsStart");if(t.row<n&&t.col<r)return this.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.getCell(t);if(t.row<n)return this.wtOverlays.topOverlay.clone.wtTable.getCell(t);if(t.col<r&&t.row>=e-i){if(this.wtOverlays.bottomInlineStartCornerOverlay&&this.wtOverlays.bottomInlineStartCornerOverlay.clone)return this.wtOverlays.bottomInlineStartCornerOverlay.clone.wtTable.getCell(t)}else{if(t.col<r)return this.wtOverlays.inlineStartOverlay.clone.wtTable.getCell(t);if(t.row<e&&t.row>=e-i&&this.wtOverlays.bottomOverlay&&this.wtOverlays.bottomOverlay.clone)return this.wtOverlays.bottomOverlay.clone.wtTable.getCell(t)}return this.wtTable.getCell(t)}scrollViewport(t,e,n,i,r){return!(t.col<0||t.row<0)&&this.wtScroll.scrollViewport(t,e,n,i,r)}scrollViewportHorizontally(t,e,n){return!(t<0)&&this.wtScroll.scrollViewportHorizontally(t,e,n)}scrollViewportVertically(t,e,n){return!(t<0)&&this.wtScroll.scrollViewportVertically(t,e,n)}getViewport(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]}destroy(){this.wtOverlays.destroy(),this.wtEvent.destroy()}createScrollDao(){const t=this;return{get drawn(){return t.drawn},get topOverlay(){return t.wtOverlays.topOverlay},get inlineStartOverlay(){return t.wtOverlays.inlineStartOverlay},get wtTable(){return t.wtTable},get wtViewport(){return t.wtViewport},get wtSettings(){return t.wtSettings},get rootWindow(){return t.domBindings.rootWindow},get totalRows(){return t.wtSettings.getSetting("totalRows")},get totalColumns(){return t.wtSettings.getSetting("totalColumns")},get fixedRowsTop(){return t.wtSettings.getSetting("fixedRowsTop")},get fixedRowsBottom(){return t.wtSettings.getSetting("fixedRowsBottom")},get fixedColumnsStart(){return t.wtSettings.getSetting("fixedColumnsStart")}}}getTableDao(){const t=this;return{get wot(){return t},get parentTableOffset(){return t.cloneSource.wtTable.tableOffset},get cloneSource(){return t.cloneSource},get workspaceWidth(){return t.wtViewport.getWorkspaceWidth()},get wtViewport(){return t.wtViewport},get wtOverlays(){return t.wtOverlays},get selectionManager(){return t.selectionManager},get drawn(){return t.drawn},set drawn(e){t.drawn=e},get wtTable(){return t.wtTable},get startColumnRendered(){return t.wtViewport.columnsRenderCalculator.startColumn},get startColumnVisible(){return t.wtViewport.columnsVisibleCalculator.startColumn},get startColumnPartiallyVisible(){return t.wtViewport.columnsPartiallyVisibleCalculator.startColumn},get endColumnRendered(){return t.wtViewport.columnsRenderCalculator.endColumn},get endColumnVisible(){return t.wtViewport.columnsVisibleCalculator.endColumn},get endColumnPartiallyVisible(){return t.wtViewport.columnsPartiallyVisibleCalculator.endColumn},get countColumnsRendered(){return t.wtViewport.columnsRenderCalculator.count},get countColumnsVisible(){return t.wtViewport.columnsVisibleCalculator.count},get startRowRendered(){return t.wtViewport.rowsRenderCalculator.startRow},get startRowVisible(){return t.wtViewport.rowsVisibleCalculator.startRow},get startRowPartiallyVisible(){return t.wtViewport.rowsPartiallyVisibleCalculator.startRow},get endRowRendered(){return t.wtViewport.rowsRenderCalculator.endRow},get endRowVisible(){return t.wtViewport.rowsVisibleCalculator.endRow},get endRowPartiallyVisible(){return t.wtViewport.rowsPartiallyVisibleCalculator.endRow},get countRowsRendered(){return t.wtViewport.rowsRenderCalculator.count},get countRowsVisible(){return t.wtViewport.rowsVisibleCalculator.count},get columnHeaders(){return t.wtSettings.getSetting("columnHeaders")},get rowHeaders(){return t.wtSettings.getSetting("rowHeaders")}}}}function _e(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Ee extends Te{constructor(t,e,n){super(t,e),_e(this,"cloneSource",void 0),_e(this,"cloneOverlay",void 0);const i=this.wtSettings.getSetting("facade",this);this.cloneSource=n.source,this.cloneOverlay=n.overlay,this.wtTable=this.cloneOverlay.createTable(this.getTableDao(),i,this.domBindings,this.wtSettings),this.wtViewport=n.viewport,this.selectionManager=n.selectionManager,this.wtEvent=new ct(i,this.domBindings,this.wtSettings,this.eventManager,this.wtTable,this.selectionManager,n.event),this.findOriginalHeaders()}}function Re(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Me{constructor(t,e,n,i,r){Re(this,"wtSettings",null),Object(S.f)(this,"wot",t,{writable:!1}),this.domBindings=r,this.facadeGetter=e,this.wtSettings=i;const{TABLE:s,hider:a,spreader:l,holder:c,wtRootElement:u}=this.wot.wtTable;this.instance=this.wot,this.type=n,this.mainTableScrollableElement=null,this.TABLE=s,this.hider=a,this.spreader=l,this.holder=c,this.wtRootElement=u,this.trimmingContainer=Object(o.t)(this.hider.parentNode.parentNode),this.needFullRender=this.shouldBeRendered(),this.clone=this.makeClone()}hasRenderingStateChanged(){return this.needFullRender!==this.shouldBeRendered()}updateStateOfRendering(t){"before"===t&&this.shouldBeRendered()?this.needFullRender=!0:"after"!==t||this.shouldBeRendered()||(this.needFullRender=!1)}shouldBeRendered(){return!0}updateTrimmingContainer(){this.trimmingContainer=Object(o.t)(this.hider.parentNode.parentNode)}updateMainScrollableElement(){const{wtTable:t}=this.wot,{rootWindow:e}=this.domBindings;"hidden"===e.getComputedStyle(t.wtRootElement.parentNode).getPropertyValue("overflow")?this.mainTableScrollableElement=this.wot.wtTable.holder:this.mainTableScrollableElement=Object(o.p)(t.TABLE)}getRelativeCellPosition(t,e,n){if(!1===this.clone.wtTable.holder.contains(t))return void Object(O.b)(`The provided element is not a child of the ${this.type} overlay`);const i=this.mainTableScrollableElement===this.domBindings.rootWindow,r=n<this.wtSettings.getSetting("fixedColumnsStart"),o=e<this.wtSettings.getSetting("fixedRowsTop"),s=e>=this.wtSettings.getSetting("totalRows")-this.wtSettings.getSetting("fixedRowsBottom"),a=this.clone.wtTable.spreader,l={start:this.getRelativeStartPosition(a),top:a.offsetTop},c={start:this.getRelativeStartPosition(t),top:t.offsetTop};let u=null;return u=i?this.getRelativeCellPositionWithinWindow(o,r,c,l):this.getRelativeCellPositionWithinHolder(o,s,r,c,l),u}getRelativeStartPosition(t){return this.isRtl()?t.offsetParent.offsetWidth-t.offsetLeft-t.offsetWidth:t.offsetLeft}getRelativeCellPositionWithinWindow(t,e,n,i){const r=this.wot.wtTable.wtRootElement.getBoundingClientRect();let s=0,a=0;if(e){let t=r.left;this.isRtl()&&(t=this.domBindings.rootWindow.innerWidth-(r.left+r.width+Object(o.q)())),s=t<=0?-1*t:0}else s=i.start;if(t){a=this.clone.wtTable.TABLE.getBoundingClientRect().top-r.top}else a=i.top;return{start:n.start+s,top:n.top+a}}getRelativeCellPositionWithinHolder(t,e,n,i,r){const o=this.wot.wtOverlays.inlineStartOverlay.getScrollPosition(),s=this.wot.wtOverlays.topOverlay.getScrollPosition();let a=0,l=0;if(n||(a=o-r.start),e){const t=this.wot.wtTable.wtRootElement.getBoundingClientRect();l=-1*this.clone.wtTable.TABLE.getBoundingClientRect().top+t.top}else t||(l=s-r.top);return{start:i.start-a,top:i.top-l}}makeClone(){if(-1===re.indexOf(this.type))throw new Error(`Clone type "${this.type}" is not supported.`);const{wtTable:t,wtSettings:e}=this.wot,{rootDocument:n,rootWindow:i}=this.domBindings,r=n.createElement("div"),s=n.createElement("table"),a=t.wtRootElement.parentNode;r.className=oe.get(this.type)+" handsontable",r.setAttribute("dir",this.isRtl()?"rtl":"ltr"),r.style.position="absolute",r.style.top=0,r.style.overflow="visible",this.isRtl()?r.style.right=0:r.style.left=0,e.getSetting("ariaTags")&&Object(o.U)(r,[Object(_t.y)()]),s.className=t.TABLE.className;t.TABLE.getAttribute("role")&&s.setAttribute("role",t.TABLE.getAttribute("role")),r.appendChild(s),a.appendChild(r);const l=this.wtSettings.getSetting("preventOverflow");return!0===l||"horizontal"===l&&"top"===this.type||"vertical"===l&&"inline_start"===this.type?this.mainTableScrollableElement=i:"hidden"===i.getComputedStyle(a).getPropertyValue("overflow")?this.mainTableScrollableElement=t.holder:this.mainTableScrollableElement=Object(o.p)(t.TABLE),new Ee(s,this.wtSettings,{source:this.wot,overlay:this,viewport:this.wot.wtViewport,event:this.wot.wtEvent,selectionManager:this.wot.selectionManager})}refresh(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.needFullRender&&this.clone.draw(t)}reset(){const t=this.clone.wtTable.holder,e=this.clone.wtTable.hider;[t.style,e.style,t.parentNode.style].forEach(t=>{t.width="",t.height=""})}isRtl(){return this.wtSettings.getSetting("rtlMode")}destroy(){this.clone.eventManager.destroy()}}const xe=Object.freeze({width:"6px",height:"6px",borderWidth:"1px",borderStyle:"solid",borderColor:"#FFF"});function Ie(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class ke extends Me{constructor(t,e,n,i){super(t,e,"top",n,i),Ie(this,"cachedFixedRowsTop",-1),this.cachedFixedRowsTop=this.wtSettings.getSetting("fixedRowsTop")}createTable(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new fe(...e)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderTopOverlay")}resetFixedPosition(){if(!this.needFullRender||!this.shouldBeRendered()||!this.wot.wtTable.holder.parentNode)return!1;const t=this.clone.wtTable.holder.parentNode,{rootWindow:e}=this.domBindings,n=this.wtSettings.getSetting("preventOverflow");let i=0,r=!1;if(this.trimmingContainer!==e||n&&"vertical"===n)i=this.getScrollPosition(),Object(o.S)(t);else{const{wtTable:e}=this.wot,n=e.hider.getBoundingClientRect();r=Math.ceil(n.bottom)===t.offsetHeight,i=this.getOverlayOffset(),Object(o.W)(t,"0px",i+"px")}const s=this.adjustHeaderBordersPosition(i,r);return this.adjustElementsSize(),s}setScrollPosition(t){const e=this.domBindings.rootWindow;let n=!1;return this.mainTableScrollableElement===e&&e.scrollY!==t?(e.scrollTo(Object(o.u)(e),t),n=!0):this.mainTableScrollableElement.scrollTop!==t&&(this.mainTableScrollableElement.scrollTop=t,n=!0),n}onScroll(){this.wtSettings.getSetting("onScrollHorizontally")}sumCellSizes(t,e){const n=this.wtSettings.getSetting("defaultRowHeight");let i=t,r=0;for(;i<e;){const t=this.wot.wtTable.getRowHeight(i);r+=void 0===t?n:t,i+=1}return r}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:t}=this.wot,{rootDocument:e,rootWindow:n}=this.domBindings,i=Object(o.q)(e),r=this.clone.wtTable.holder.parentNode.style,s=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==n||"horizontal"===s){let e=this.wot.wtViewport.getWorkspaceWidth();this.wot.wtOverlays.hasScrollbarRight&&(e-=i),e=Math.min(e,t.wtRootElement.scrollWidth),r.width=e+"px"}else r.width="";this.clone.wtTable.holder.style.width=r.width;let a=Object(o.L)(this.clone.wtTable.TABLE);this.wot.wtTable.hasDefinedSize()||(a=0),r.height=a+"px"}adjustRootChildrenSize(){const{holder:t}=this.clone.wtTable,e=this.wot.selectionManager.getFocusSelection()?parseInt(xe.height,10)/2:0;this.clone.wtTable.hider.style.width=this.hider.style.width,t.style.width=t.parentNode.style.width,t.style.height=parseInt(t.parentNode.style.height,10)+e+"px"}applyToDOM(){const t=this.wtSettings.getSetting("totalRows");if("number"===typeof this.wot.wtViewport.rowsRenderCalculator.startPosition)this.spreader.style.top=this.wot.wtViewport.rowsRenderCalculator.startPosition+"px";else{if(0!==t)throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.top="0"}this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){const t=this.isRtl()?"right":"left",{spreader:e}=this.clone.wtTable;"number"===typeof this.wot.wtViewport.columnsRenderCalculator.startPosition?e.style[t]=this.wot.wtViewport.columnsRenderCalculator.startPosition+"px":e.style[t]=""}scrollTo(t,e){const{wot:n,wtSettings:i}=this,r=(n.cloneSource?n.cloneSource:n).wtTable.holder,s=i.getSetting("columnHeaders"),a=0===i.getSetting("fixedRowsTop")&&s.length>0&&!Object(o.w)(r.parentNode,"innerBorderTop")?1:0;let l=this.getTableParentOffset(),c=0;if(e){this.wot.wtTable.getRowHeight(t)>this.wot.wtViewport.getViewportHeight()&&(e=!1)}if(e&&r.offsetHeight!==r.clientHeight&&(c=Object(o.q)(this.domBindings.rootDocument)),e){const e=i.getSetting("fixedRowsBottom"),r=i.getSetting("totalRows");l+=this.sumCellSizes(0,t+1),l-=n.wtViewport.getViewportHeight()-this.sumCellSizes(r-e,r),l+=1,l+=a}else l+=this.sumCellSizes(i.getSetting("fixedRowsTop"),t);return l+=c,Object(o.k)(this.mainTableScrollableElement)===l-a&&a>0&&this.wot.wtOverlays.expandHiderVerticallyBy(a),this.setScrollPosition(l)}getTableParentOffset(){return this.mainTableScrollableElement===this.domBindings.rootWindow?this.wot.wtTable.holderOffset.top:0}getScrollPosition(){return Object(o.o)(this.mainTableScrollableElement,this.domBindings.rootWindow)}getOverlayOffset(){const{rootWindow:t}=this.domBindings,e=this.wtSettings.getSetting("preventOverflow");let n=0;if(this.trimmingContainer===t&&(!e||"vertical"!==e)){const t=this.wot.wtTable.getTotalHeight()-this.clone.wtTable.getTotalHeight();n=Math.max(this.getScrollPosition()-this.getTableParentOffset(),0),n>t&&(n=0)}return n}adjustHeaderBordersPosition(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{wtSettings:n}=this,i=this.wot.wtTable.holder.parentNode,r=n.getSetting("totalColumns"),s="horizontal"===n.getSetting("preventOverflow");r?Object(o.P)(i,"emptyColumns"):Object(o.a)(i,"emptyColumns");let a=!1;if(!e&&!s){const e=n.getSetting("fixedRowsTop"),r=this.cachedFixedRowsTop!==e,s=n.getSetting("columnHeaders");if((r||0===e)&&s.length>0){const e=Object(o.w)(i,"innerBorderTop");this.cachedFixedRowsTop=n.getSetting("fixedRowsTop"),t||0===n.getSetting("totalRows")?(Object(o.a)(i,"innerBorderTop"),a=!e):(Object(o.P)(i,"innerBorderTop"),a=e)}}return a}}const Ae={getFirstRenderedRow(){const t=this.wtSettings.getSetting("totalRows"),e=this.wtSettings.getSetting("fixedRowsBottom"),n=t-e;return 0===t||0===e?-1:n<0?0:n},getFirstVisibleRow(){return this.getFirstRenderedRow()},getFirstPartiallyVisibleRow(){return this.getFirstRenderedRow()},getLastRenderedRow(){return this.wtSettings.getSetting("totalRows")-1},getLastVisibleRow(){return this.getLastRenderedRow()},getLastPartiallyVisibleRow(){return this.getLastRenderedRow()},getRenderedRowsCount(){const t=this.wtSettings.getSetting("totalRows");return Math.min(this.wtSettings.getSetting("fixedRowsBottom"),t)},getVisibleRowsCount(){return this.getRenderedRowsCount()},getColumnHeadersCount:()=>0};Object(S.f)(Ae,"MIXIN_NAME","stickyRowsBottom",{writable:!1,enumerable:!1});var Ne=Ae;class je extends ae{constructor(t,e,n,i){super(t,e,n,i,"bottom")}}Object(S.n)(je,Ne),Object(S.n)(je,he);var He=je;function De(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Pe extends Me{constructor(t,e,n,i){super(t,e,"bottom",n,i),De(this,"cachedFixedRowsBottom",-1),this.cachedFixedRowsBottom=this.wtSettings.getSetting("fixedRowsBottom")}createTable(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new He(...e)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderBottomOverlay")}resetFixedPosition(){if(!this.needFullRender||!this.shouldBeRendered()||!this.wot.wtTable.holder.parentNode)return!1;const{rootWindow:t}=this.domBindings,e=this.clone.wtTable.holder.parentNode;e.style.top="";let n=0;const i=this.wtSettings.getSetting("preventOverflow");this.trimmingContainer!==t||i&&"vertical"===i?(n=this.getScrollPosition(),this.repositionOverlay()):(n=this.getOverlayOffset(),e.style.bottom=n+"px");const r=this.adjustHeaderBordersPosition(n);return this.adjustElementsSize(),r}repositionOverlay(){const{wtTable:t,wtViewport:e}=this.wot,{rootDocument:n}=this.domBindings,i=this.clone.wtTable.holder.parentNode;let r=0;e.hasVerticalScroll()||(r+=e.getWorkspaceHeight()-t.getTotalHeight()),e.hasVerticalScroll()&&e.hasHorizontalScroll()&&(r+=Object(o.q)(n)),i.style.bottom=r+"px"}setScrollPosition(t){const{rootWindow:e}=this.domBindings;let n=!1;return this.mainTableScrollableElement===e?(e.scrollTo(Object(o.u)(e),t),n=!0):this.mainTableScrollableElement.scrollTop!==t&&(this.mainTableScrollableElement.scrollTop=t,n=!0),n}onScroll(){this.wtSettings.getSetting("onScrollHorizontally")}sumCellSizes(t,e){const{wtTable:n,wtSettings:i}=this.wot,r=i.getSetting("defaultRowHeight");let o=t,s=0;for(;o<e;){const t=n.getRowHeight(o);s+=void 0===t?r:t,o+=1}return s}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:t,wtViewport:e}=this.wot,{rootDocument:n,rootWindow:i}=this.domBindings,r=Object(o.q)(n),s=this.clone.wtTable.holder.parentNode.style,a=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==i||"horizontal"===a){let n=e.getWorkspaceWidth();this.wot.wtOverlays.hasScrollbarRight&&(n-=r),n=Math.min(n,t.wtRootElement.scrollWidth),s.width=n+"px"}else s.width="";this.clone.wtTable.holder.style.width=s.width;let l=Object(o.L)(this.clone.wtTable.TABLE);this.wot.wtTable.hasDefinedSize()||(l=0),s.height=l+"px"}adjustRootChildrenSize(){const{holder:t}=this.clone.wtTable;this.clone.wtTable.hider.style.width=this.hider.style.width,t.style.width=t.parentNode.style.width,t.style.height=t.parentNode.style.height}applyToDOM(){const t=this.wtSettings.getSetting("totalRows");if("number"===typeof this.wot.wtViewport.rowsRenderCalculator.startPosition)this.spreader.style.top=this.wot.wtViewport.rowsRenderCalculator.startPosition+"px";else{if(0!==t)throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.top="0"}this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){const t=this.isRtl()?"right":"left",{spreader:e}=this.clone.wtTable;"number"===typeof this.wot.wtViewport.columnsRenderCalculator.startPosition?e.style[t]=this.wot.wtViewport.columnsRenderCalculator.startPosition+"px":e.style[t]=""}scrollTo(t,e){let n=this.getTableParentOffset();const i=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder;let r=0;e&&i.offsetHeight!==i.clientHeight&&(r=Object(o.q)(this.domBindings.rootDocument)),e?(n+=this.sumCellSizes(0,t+1),n-=this.wot.wtViewport.getViewportHeight(),n+=1):n+=this.sumCellSizes(this.wtSettings.getSetting("fixedRowsBottom"),t),n+=r,this.setScrollPosition(n)}getTableParentOffset(){return this.mainTableScrollableElement===this.domBindings.rootWindow?this.wot.wtTable.holderOffset.top:0}getScrollPosition(){return Object(o.o)(this.mainTableScrollableElement,this.domBindings.rootWindow)}getOverlayOffset(){const{rootWindow:t}=this.domBindings,e=this.wtSettings.getSetting("preventOverflow");let n=0;if(this.trimmingContainer===t&&(!e||"vertical"!==e)){const t=this.wot.wtTable.getTotalHeight(),e=t-this.clone.wtTable.getTotalHeight(),i=this.domBindings.rootDocument.documentElement.clientHeight;n=Math.max(this.getTableParentOffset()-this.getScrollPosition()-i+t,0),n>e&&(n=0)}return n}adjustHeaderBordersPosition(t){const e=this.wtSettings.getSetting("fixedRowsBottom"),n=this.cachedFixedRowsBottom!==e,i=this.wtSettings.getSetting("columnHeaders");let r=!1;if((n||0===e)&&i.length>0){const e=this.wot.wtTable.holder.parentNode,n=Object(o.w)(e,"innerBorderBottom");this.cachedFixedRowsBottom=this.wtSettings.getSetting("fixedRowsBottom"),t||0===this.wtSettings.getSetting("totalRows")?(Object(o.a)(e,"innerBorderBottom"),r=!n):(Object(o.P)(e,"innerBorderBottom"),r=n)}return r}}const Le={getFirstRenderedRow(){const t=this.dataAccessObject.startRowRendered;return null===t?-1:t},getFirstVisibleRow(){const t=this.dataAccessObject.startRowVisible;return null===t?-1:t},getFirstPartiallyVisibleRow(){const t=this.dataAccessObject.startRowPartiallyVisible;return null===t?-1:t},getLastRenderedRow(){const t=this.dataAccessObject.endRowRendered;return null===t?-1:t},getLastVisibleRow(){const t=this.dataAccessObject.endRowVisible;return null===t?-1:t},getLastPartiallyVisibleRow(){const t=this.dataAccessObject.endRowPartiallyVisible;return null===t?-1:t},getRenderedRowsCount(){return this.dataAccessObject.countRowsRendered},getVisibleRowsCount(){return this.dataAccessObject.countRowsVisible},getColumnHeadersCount(){return this.dataAccessObject.columnHeaders.length}};Object(S.f)(Le,"MIXIN_NAME","calculatedRows",{writable:!1,enumerable:!1});var Fe=Le;const Be={getFirstRenderedColumn(){return 0===this.wtSettings.getSetting("totalColumns")?-1:0},getFirstVisibleColumn(){return this.getFirstRenderedColumn()},getFirstPartiallyVisibleColumn(){return this.getFirstRenderedColumn()},getLastRenderedColumn(){return this.getRenderedColumnsCount()-1},getLastVisibleColumn(){return this.getLastRenderedColumn()},getLastPartiallyVisibleColumn(){return this.getLastRenderedColumn()},getRenderedColumnsCount(){const t=this.wtSettings.getSetting("totalColumns");return Math.min(this.wtSettings.getSetting("fixedColumnsStart"),t)},getVisibleColumnsCount(){return this.getRenderedColumnsCount()},getRowHeadersCount(){return this.dataAccessObject.rowHeaders.length}};Object(S.f)(Be,"MIXIN_NAME","stickyColumnsStart",{writable:!1,enumerable:!1});var Ve=Be;class Ue extends ae{constructor(t,e,n,i){super(t,e,n,i,"inline_start")}}Object(S.n)(Ue,Fe),Object(S.n)(Ue,Ve);var We=Ue;class ze extends Me{constructor(t,e,n,i){super(t,e,"inline_start",n,i)}createTable(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new We(...e)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){const{wtTable:t}=this.wot;if(!this.needFullRender||!this.shouldBeRendered()||!t.holder.parentNode)return!1;const{rootWindow:e}=this.domBindings,n=this.clone.wtTable.holder.parentNode,i=this.wtSettings.getSetting("preventOverflow");let r=0;this.trimmingContainer!==e||i&&"horizontal"===i?(r=this.getScrollPosition(),Object(o.S)(n)):(r=this.getOverlayOffset()*(this.isRtl()?-1:1),Object(o.W)(n,r+"px","0px"));const s=this.adjustHeaderBordersPosition(r);return this.adjustElementsSize(),s}setScrollPosition(t){const{rootWindow:e}=this.domBindings;let n=!1;return this.isRtl()&&(t=-t),this.mainTableScrollableElement===e&&e.scrollX!==t?(e.scrollTo(t,Object(o.v)(e)),n=!0):this.mainTableScrollableElement.scrollLeft!==t&&(this.mainTableScrollableElement.scrollLeft=t,n=!0),n}onScroll(){this.wtSettings.getSetting("onScrollVertically")}sumCellSizes(t,e){const n=this.wtSettings.getSetting("defaultColumnWidth");let i=t,r=0;for(;i<e;)r+=this.wot.wtTable.getStretchedColumnWidth(i)||n,i+=1;return r}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:t}=this.wot,{rootDocument:e,rootWindow:n}=this.domBindings,i=Object(o.q)(e),r=this.clone.wtTable.holder.parentNode.style,s=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==n||"vertical"===s){let e=this.wot.wtViewport.getWorkspaceHeight();this.wot.wtOverlays.hasScrollbarBottom&&(e-=i),e=Math.min(e,t.wtRootElement.scrollHeight),r.height=e+"px"}else r.height="";this.clone.wtTable.holder.style.height=r.height;const a=Object(o.M)(this.clone.wtTable.TABLE);r.width=a+"px"}adjustRootChildrenSize(){const{holder:t}=this.clone.wtTable,e=this.wot.selectionManager.getFocusSelection()?parseInt(xe.width,10)/2:0;this.clone.wtTable.hider.style.height=this.hider.style.height,t.style.height=t.parentNode.style.height,t.style.width=parseInt(t.parentNode.style.width,10)+e+"px"}applyToDOM(){const t=this.wtSettings.getSetting("totalColumns"),e=this.isRtl()?"right":"left";if("number"===typeof this.wot.wtViewport.columnsRenderCalculator.startPosition)this.spreader.style[e]=this.wot.wtViewport.columnsRenderCalculator.startPosition+"px";else{if(0!==t)throw new Error("Incorrect value of the columnsRenderCalculator");this.spreader.style[e]="0"}this.isRtl()?this.spreader.style.left="":this.spreader.style.right="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){"number"===typeof this.wot.wtViewport.rowsRenderCalculator.startPosition?this.clone.wtTable.spreader.style.top=this.wot.wtViewport.rowsRenderCalculator.startPosition+"px":this.clone.wtTable.spreader.style.top=""}scrollTo(t,e){const{wtSettings:n}=this,i=n.getSetting("rowHeaders"),r=n.getSetting("fixedColumnsStart"),s=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder,a=0===r&&i.length>0&&!Object(o.w)(s.parentNode,"innerBorderInlineStart")?1:0;let l=this.getTableParentOffset(),c=0;if(e){this.wot.wtTable.getColumnWidth(t)>this.wot.wtViewport.getViewportWidth()&&(e=!1)}return e&&s.offsetWidth!==s.clientWidth&&(c=Object(o.q)(this.domBindings.rootDocument)),e?(l+=this.sumCellSizes(0,t+1),l-=this.wot.wtViewport.getViewportWidth(),l+=a):l+=this.sumCellSizes(this.wtSettings.getSetting("fixedColumnsStart"),t),l+=c,Object(o.j)(this.mainTableScrollableElement)===l-a&&a>0&&this.wot.wtOverlays.expandHiderHorizontallyBy(a),this.setScrollPosition(l)}getTableParentOffset(){let t=0;return this.wtSettings.getSetting("preventOverflow")||this.trimmingContainer!==this.domBindings.rootWindow||(t=this.wot.wtTable.holderOffset.left),t}getScrollPosition(){return Math.abs(Object(o.n)(this.mainTableScrollableElement,this.domBindings.rootWindow))}getOverlayOffset(){const{rootWindow:t}=this.domBindings,e=this.wtSettings.getSetting("preventOverflow");let n=0;if(this.trimmingContainer===t&&(!e||"horizontal"!==e)){n=this.isRtl()?Math.abs(Math.min(this.getTableParentOffset()-this.getScrollPosition(),0)):Math.max(this.getScrollPosition()-this.getTableParentOffset(),0);n>this.wot.wtTable.getTotalWidth()-this.clone.wtTable.getTotalWidth()&&(n=0)}return n}adjustHeaderBordersPosition(t){const{wtSettings:e}=this,n=this.wot.wtTable.holder.parentNode,i=e.getSetting("rowHeaders"),r=e.getSetting("fixedColumnsStart"),s=e.getSetting("totalRows"),a="vertical"===e.getSetting("preventOverflow");s?Object(o.P)(n,"emptyRows"):Object(o.a)(n,"emptyRows");let l=!1;if(!a)if(r&&!i.length)Object(o.a)(n,"innerBorderLeft innerBorderInlineStart");else if(!r&&i.length){const e=Object(o.w)(n,"innerBorderInlineStart");t?(Object(o.a)(n,"innerBorderLeft innerBorderInlineStart"),l=!e):(Object(o.P)(n,"innerBorderLeft innerBorderInlineStart"),l=e)}return l}}class Ye extends ae{constructor(t,e,n,i){super(t,e,n,i,"top_inline_start_corner")}}Object(S.n)(Ye,ce),Object(S.n)(Ye,Ve);var Ge=Ye;function $e(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Ke extends Me{constructor(t,e,n,i,r,o){super(t,e,"top_inline_start_corner",n,i),$e(this,"topOverlay",void 0),$e(this,"inlineStartOverlay",void 0),this.topOverlay=r,this.inlineStartOverlay=o}createTable(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Ge(...e)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderTopOverlay")&&this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){if(this.updateTrimmingContainer(),!this.wot.wtTable.holder.parentNode)return!1;const t=this.clone.wtTable.holder.parentNode;if(this.trimmingContainer===this.domBindings.rootWindow){const e=this.inlineStartOverlay.getOverlayOffset()*(this.isRtl()?-1:1),n=this.topOverlay.getOverlayOffset();Object(o.W)(t,e+"px",n+"px")}else Object(o.S)(t);let e=Object(o.L)(this.clone.wtTable.TABLE);const n=Object(o.M)(this.clone.wtTable.TABLE);return this.wot.wtTable.hasDefinedSize()||(e=0),t.style.height=e+"px",t.style.width=n+"px",!1}}class Xe extends ae{constructor(t,e,n,i){super(t,e,n,i,"bottom_inline_start_corner")}}Object(S.n)(Xe,Ne),Object(S.n)(Xe,Ve);var qe=Xe;class Qe extends Me{constructor(t,e,n,i,r,o){super(t,e,"bottom_inline_start_corner",n,i),this.bottomOverlay=r,this.inlineStartOverlay=o}createTable(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new qe(...e)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderBottomOverlay")&&this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){const{wot:t}=this;if(this.updateTrimmingContainer(),!t.wtTable.holder.parentNode)return!1;const e=this.clone.wtTable.holder.parentNode;if(e.style.top="",this.trimmingContainer===this.domBindings.rootWindow){const t=this.inlineStartOverlay.getOverlayOffset(),n=this.bottomOverlay.getOverlayOffset();e.style[this.isRtl()?"right":"left"]=t+"px",e.style.bottom=n+"px"}else Object(o.S)(e),this.repositionOverlay();let n=Object(o.L)(this.clone.wtTable.TABLE);const i=Object(o.M)(this.clone.wtTable.TABLE);return this.wot.wtTable.hasDefinedSize()||(n=0),e.style.height=n+"px",e.style.width=i+"px",!1}repositionOverlay(){const{wtTable:t,wtViewport:e}=this.wot,{rootDocument:n}=this.domBindings,i=this.clone.wtTable.holder.parentNode;let r=0;e.hasVerticalScroll()||(r+=e.getWorkspaceHeight()-t.getTotalHeight()),e.hasVerticalScroll()&&e.hasHorizontalScroll()&&(r+=Object(o.q)(n)),i.style.bottom=r+"px"}}function Ze(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function Je(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tn(t,e,n){return t.set(nn(t,e),n),n}function en(t,e){return t.get(nn(t,e))}function nn(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var rn=new WeakMap,on=new WeakMap,sn=new WeakMap,an=new WeakMap;var ln=class{constructor(t,e,n,i,r,s){Je(this,"wot",null),Ze(this,rn,[]),Je(this,"topOverlay",null),Je(this,"bottomOverlay",null),Je(this,"inlineStartOverlay",null),Je(this,"topInlineStartCornerOverlay",null),Je(this,"bottomInlineStartCornerOverlay",null),Je(this,"browserLineHeight",void 0),Je(this,"wtSettings",null),Ze(this,on,!1),Ze(this,sn,0),Ze(this,an,null),Je(this,"resizeObserver",new ResizeObserver(t=>{Object(K.e)(()=>{Array.isArray(t)&&t.length&&(tn(sn,this,en(sn,this)+1),100===en(sn,this)&&(Object(O.b)("The ResizeObserver callback was fired too many times in direct succession.\nThis may be due to an infinite loop caused by setting a dynamic height/width (for example, with the `dvh` units) to a Handsontable container's parent. \nThe observer will be disconnected."),this.resizeObserver.disconnect()),null!==en(an,this)&&clearTimeout(en(an,this)),tn(an,this,setTimeout(()=>{tn(sn,this,0)},100)),this.wtSettings.getSetting("onContainerElementResize"))})})),this.wot=t,this.wtSettings=i,this.domBindings=n,this.facadeGetter=e,this.wtTable=s;const{rootDocument:a,rootWindow:l}=this.domBindings;this.instance=this.wot,this.eventManager=r,this.scrollbarSize=Object(o.q)(a);const c="hidden"===l.getComputedStyle(s.wtRootElement.parentNode).getPropertyValue("overflow");this.scrollableElement=c?s.holder:Object(o.p)(s.TABLE),this.initOverlays(),this.hasScrollbarBottom=!1,this.hasScrollbarRight=!1,this.destroyed=!1,this.keyPressed=!1,this.spreaderLastSize={width:null,height:null},this.verticalScrolling=!1,this.horizontalScrolling=!1,this.initBrowserLineHeight(),this.registerListeners(),this.lastScrollX=l.scrollX,this.lastScrollY=l.scrollY}getOverlays(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=[...en(rn,this)];return t&&e.push(this.wtTable),e}initBrowserLineHeight(){const{rootWindow:t,rootDocument:e}=this.domBindings,n=t.getComputedStyle(e.body),i=parseInt(n.lineHeight,10),r=1.2*parseInt(n.fontSize,10);this.browserLineHeight=i||r}initOverlays(){const t=[this.wot,this.facadeGetter,this.wtSettings,this.domBindings];this.topOverlay=new ke(...t),this.bottomOverlay=new Pe(...t),this.inlineStartOverlay=new ze(...t),this.topInlineStartCornerOverlay=new Ke(...t,this.topOverlay,this.inlineStartOverlay),this.bottomInlineStartCornerOverlay=new Qe(...t,this.bottomOverlay,this.inlineStartOverlay),tn(rn,this,[this.topOverlay,this.bottomOverlay,this.inlineStartOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay])}beforeDraw(){tn(on,this,en(rn,this).reduce((t,e)=>e.hasRenderingStateChanged()||t,!1)),en(rn,this).forEach(t=>t.updateStateOfRendering("before"))}afterDraw(){this.syncScrollWithMaster(),en(rn,this).forEach(t=>{const e=t.hasRenderingStateChanged();t.updateStateOfRendering("after"),e&&!t.needFullRender&&t.reset()})}refreshAll(){this.wot.drawn&&(this.wtTable.holder.parentNode?(this.wot.draw(!0),this.verticalScrolling&&this.inlineStartOverlay.onScroll(),this.horizontalScrolling&&this.topOverlay.onScroll(),this.verticalScrolling=!1,this.horizontalScrolling=!1):this.destroy())}registerListeners(){const{rootDocument:t,rootWindow:e}=this.domBindings,{mainTableScrollableElement:n}=this.topOverlay,{mainTableScrollableElement:i}=this.inlineStartOverlay;this.eventManager.addEventListener(t.documentElement,"keydown",t=>this.onKeyDown(t)),this.eventManager.addEventListener(t.documentElement,"keyup",()=>this.onKeyUp()),this.eventManager.addEventListener(t,"visibilitychange",()=>this.onKeyUp()),this.eventManager.addEventListener(n,"scroll",t=>this.onTableScroll(t),{passive:!0}),n!==i&&this.eventManager.addEventListener(i,"scroll",t=>this.onTableScroll(t),{passive:!0});const r=e.devicePixelRatio&&e.devicePixelRatio>1,o=this.scrollableElement===e,s=this.wtSettings.getSetting("preventWheel"),a={passive:o};(s||r||!Object(l.a)())&&this.eventManager.addEventListener(this.wtTable.wtRootElement,"wheel",t=>this.onCloneWheel(t,s),a);let c;[this.topOverlay,this.bottomOverlay,this.inlineStartOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay].forEach(t=>{if(t&&t.needFullRender){const{holder:e}=t.clone.wtTable;this.eventManager.addEventListener(e,"wheel",t=>this.onCloneWheel(t,s),a)}}),this.eventManager.addEventListener(e,"resize",()=>{clearTimeout(c),c=setTimeout(()=>{this.wtSettings.getSetting("onWindowResize"),tn(sn,this,0)},200)}),o||this.resizeObserver.observe(this.wtTable.wtRootElement.parentElement)}deregisterListeners(){this.eventManager.clearEvents(!0)}onTableScroll(t){const e=this.domBindings.rootWindow,n=this.inlineStartOverlay.mainTableScrollableElement,i=this.topOverlay.mainTableScrollableElement,r=t.target;this.keyPressed&&(i!==e&&r!==e&&!t.target.contains(i)||n!==e&&r!==e&&!t.target.contains(n))||this.syncScrollPositions(t)}onCloneWheel(t,e){const{rootWindow:n}=this.domBindings,i=this.inlineStartOverlay.mainTableScrollableElement,r=this.topOverlay.mainTableScrollableElement,o=t.target,s=r!==n&&o!==n&&!o.contains(r),a=i!==n&&o!==n&&!o.contains(i);if(this.keyPressed&&(s||a)||this.scrollableElement===n)return;const l=this.translateMouseWheelToScroll(t);(e||this.scrollableElement!==n&&l)&&t.preventDefault()}onKeyDown(t){this.keyPressed=Object(c.d)(t.keyCode,"ARROW_UP|ARROW_RIGHT|ARROW_DOWN|ARROW_LEFT")}onKeyUp(){this.keyPressed=!1}translateMouseWheelToScroll(t){let e=isNaN(t.deltaY)?-1*t.wheelDeltaY:t.deltaY,n=isNaN(t.deltaX)?-1*t.wheelDeltaX:t.deltaX;1===t.deltaMode&&(n+=n*this.browserLineHeight,e+=e*this.browserLineHeight);const i=this.scrollVertically(e),r=this.scrollHorizontally(n);return i||r}scrollVertically(t){const e=this.scrollableElement.scrollTop;return this.scrollableElement.scrollTop+=t,e!==this.scrollableElement.scrollTop}scrollHorizontally(t){const e=this.scrollableElement.scrollLeft;return this.scrollableElement.scrollLeft+=t,e!==this.scrollableElement.scrollLeft}syncScrollPositions(){if(this.destroyed)return;const{rootWindow:t}=this.domBindings,e=this.topOverlay.clone.wtTable.holder,n=this.inlineStartOverlay.clone.wtTable.holder,[i,r]=[this.scrollableElement.scrollLeft,this.scrollableElement.scrollTop];if(this.horizontalScrolling=e.scrollLeft!==i||this.lastScrollX!==t.scrollX,this.verticalScrolling=n.scrollTop!==r||this.lastScrollY!==t.scrollY,this.lastScrollX=t.scrollX,this.lastScrollY=t.scrollY,this.horizontalScrolling){e.scrollLeft=i;const t=this.bottomOverlay.needFullRender?this.bottomOverlay.clone.wtTable.holder:null;t&&(t.scrollLeft=i)}this.verticalScrolling&&(n.scrollTop=r),this.refreshAll()}syncScrollWithMaster(){if(!en(on,this))return;const t=this.topOverlay.mainTableScrollableElement,{scrollLeft:e,scrollTop:n}=t;this.topOverlay.needFullRender&&(this.topOverlay.clone.wtTable.holder.scrollLeft=e),this.bottomOverlay.needFullRender&&(this.bottomOverlay.clone.wtTable.holder.scrollLeft=e),this.inlineStartOverlay.needFullRender&&(this.inlineStartOverlay.clone.wtTable.holder.scrollTop=n),tn(on,this,!1)}updateMainScrollableElements(){this.deregisterListeners(),this.inlineStartOverlay.updateMainScrollableElement(),this.topOverlay.updateMainScrollableElement(),this.bottomOverlay.needFullRender&&this.bottomOverlay.updateMainScrollableElement();const{wtTable:t}=this,{rootWindow:e}=this.domBindings;"hidden"===e.getComputedStyle(t.wtRootElement.parentNode).getPropertyValue("overflow")?this.scrollableElement=t.holder:this.scrollableElement=Object(o.p)(t.TABLE),this.registerListeners()}destroy(){this.resizeObserver.disconnect(),this.eventManager.destroy(),this.topOverlay.destroy(),this.bottomOverlay.clone&&this.bottomOverlay.destroy(),this.inlineStartOverlay.destroy(),this.topInlineStartCornerOverlay&&this.topInlineStartCornerOverlay.destroy(),this.bottomInlineStartCornerOverlay&&this.bottomInlineStartCornerOverlay.clone&&this.bottomInlineStartCornerOverlay.destroy(),this.destroyed=!0}refresh(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.updateLastSpreaderSize()&&this.adjustElementsSize(),this.bottomOverlay.clone&&this.bottomOverlay.refresh(t),this.inlineStartOverlay.refresh(t),this.topOverlay.refresh(t),this.topInlineStartCornerOverlay&&this.topInlineStartCornerOverlay.refresh(t),this.bottomInlineStartCornerOverlay&&this.bottomInlineStartCornerOverlay.clone&&this.bottomInlineStartCornerOverlay.refresh(t)}updateLastSpreaderSize(){const t=this.wtTable.spreader,e=t.clientWidth,n=t.clientHeight,i=e!==this.spreaderLastSize.width||n!==this.spreaderLastSize.height;return i&&(this.spreaderLastSize.width=e,this.spreaderLastSize.height=n),i}adjustElementsSize(){const{wtViewport:t}=this.wot,{wtTable:e}=this,{rootWindow:n}=this.domBindings,i=this.scrollableElement===n,r=this.wtSettings.getSetting("totalColumns"),o=this.wtSettings.getSetting("totalRows"),s=t.getRowHeaderWidth(),a=t.getColumnHeaderHeight()+this.topOverlay.sumCellSizes(0,o)+1,l=s+this.inlineStartOverlay.sumCellSizes(0,r),c=e.hider.style,u=(()=>!i&&this.scrollableElement.scrollTop>Math.max(0,a-e.holder.clientHeight))()?1:0,h=(()=>!i&&this.scrollableElement.scrollLeft>Math.max(0,l-e.holder.clientWidth))()?1:0;if(c.width=l+h+"px",c.height=a+u+"px",this.scrollbarSize>0){const{scrollHeight:t,scrollWidth:n}=e.wtRootElement,{scrollHeight:i,scrollWidth:r}=e.holder;this.hasScrollbarRight=t<i,this.hasScrollbarBottom=n<r,this.hasScrollbarRight&&e.hider.scrollWidth+this.scrollbarSize>n?this.hasScrollbarBottom=!0:this.hasScrollbarBottom&&e.hider.scrollHeight+this.scrollbarSize>t&&(this.hasScrollbarRight=!0)}this.topOverlay.adjustElementsSize(),this.inlineStartOverlay.adjustElementsSize(),this.bottomOverlay.adjustElementsSize()}expandHiderVerticallyBy(t){const{wtTable:e}=this;e.hider.style.height=parseInt(e.hider.style.height,10)+t+"px"}expandHiderHorizontallyBy(t){const{wtTable:e}=this;e.hider.style.width=parseInt(e.hider.style.width,10)+t+"px"}applyToDOM(){this.wtTable.isVisible()&&(this.topOverlay.applyToDOM(),this.bottomOverlay.clone&&this.bottomOverlay.applyToDOM(),this.inlineStartOverlay.applyToDOM())}getParentOverlay(t){if(!t)return null;const e=[this.topOverlay,this.inlineStartOverlay,this.bottomOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay];let n=null;return Object(V.a)(e,e=>{e&&e.clone&&e.clone.wtTable.TABLE.contains(t)&&(n=e.clone)}),n}syncOverlayTableClassNames(){const t=this.wtTable.TABLE,e=[this.topOverlay,this.inlineStartOverlay,this.bottomOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay];Object(V.a)(e,e=>{e&&(e.clone.wtTable.TABLE.className=t.className)})}};function cn(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class un{constructor(t){cn(this,"settings",{}),cn(this,"defaults",Object.freeze(this.getDefaults())),Object(S.o)(this.defaults,(e,n)=>{if(void 0!==t[n])this.settings[n]=t[n];else{if(void 0===e)throw new Error(`A required setting "${n}" was not provided`);this.settings[n]=e}})}getDefaults(){return{facade:void 0,table:void 0,isDataViewInstance:!0,externalRowCalculator:!1,stretchH:"none",currentRowClassName:null,currentColumnClassName:null,preventOverflow:()=>!1,preventWheel:!1,data:void 0,freezeOverlays:!1,fixedColumnsStart:0,fixedRowsTop:0,fixedRowsBottom:0,shouldRenderInlineStartOverlay:()=>this.getSetting("fixedColumnsStart")>0||this.getSetting("rowHeaders").length>0,shouldRenderTopOverlay:()=>this.getSetting("fixedRowsTop")>0||this.getSetting("columnHeaders").length>0,shouldRenderBottomOverlay:()=>this.getSetting("fixedRowsBottom")>0,minSpareRows:0,rowHeaders:()=>[],columnHeaders:()=>[],totalRows:void 0,totalColumns:void 0,cellRenderer:(t,e,n)=>{const i=this.getSetting("data",t,e);Object(o.g)(n,void 0===i||null===i?"":i)},columnWidth(){},rowHeight(){},rowHeightByOverlayName(){},defaultRowHeight:23,defaultColumnWidth:50,selections:null,hideBorderOnMouseDownOver:!1,viewportRowCalculatorOverride:null,viewportColumnCalculatorOverride:null,onCellMouseDown:null,onCellContextMenu:null,onCellMouseOver:null,onCellMouseOut:null,onCellMouseUp:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeRemoveCellClassNames:null,onAfterDrawSelection:null,onBeforeDrawBorders:null,onBeforeViewportScrollHorizontally:t=>t,onBeforeViewportScrollVertically:t=>t,onScrollHorizontally:null,onScrollVertically:null,onBeforeTouchScroll:null,onAfterMomentumScroll:null,onBeforeStretchingColumnWidth:t=>t,onModifyRowHeaderWidth:null,onModifyGetCellCoords:null,onBeforeHighlightingRowHeader:t=>t,onBeforeHighlightingColumnHeader:t=>t,onWindowResize:null,onContainerElementResize:null,renderAllColumns:!1,renderAllRows:!1,groups:!1,rowHeaderWidth:null,columnHeaderHeight:null,headerClassName:null,rtlMode:!1,ariaTags:!0}}update(t,e){return void 0===e?Object(S.o)(t,(t,e)=>{this.settings[e]=t}):this.settings[t]=e,this}getSetting(t,e,n,i,r){return"function"===typeof this.settings[t]?this.settings[t](e,n,i,r):void 0!==e&&Array.isArray(this.settings[t])?this.settings[t][e]:this.settings[t]}getSettingPure(t){return this.settings[t]}has(t){return!!this.settings[t]}}class hn extends ae{constructor(t,e,n,i){super(t,e,n,i,"master")}alignOverlaysWithTrimmingContainer(){const t=Object(o.t)(this.wtRootElement),{rootWindow:e}=this.domBindings;if(t===e){this.wtSettings.getSetting("preventOverflow")||(this.holder.style.overflow="visible",this.wtRootElement.style.overflow="visible")}else{const n=t.parentElement,i=Object(o.s)(t,"height",e),r=Object(o.s)(t,"overflow",e),s=this.holder.style,{scrollWidth:a,scrollHeight:l}=t;let c=t.offsetWidth,u=t.offsetHeight;const h=["auto","hidden","scroll"];if(n&&h.includes(r)){const i=t.cloneNode(!1);i.style.overflow="auto",i.style.position="absolute",t.nextElementSibling?n.insertBefore(i,t.nextElementSibling):n.appendChild(i);const r=parseInt(Object(o.i)(i,e).height,10);n.removeChild(i),0===r&&(u=0)}u=Math.min(u,l),s.height="auto"===i?"auto":u+"px",c=Math.min(c,a),s.width=c+"px",s.overflow="",this.hasTableHeight="auto"===s.height||u>0,this.hasTableWidth=c>0}this.isTableVisible=Object(o.H)(this.TABLE)}markOversizedColumnHeaders(){const{wtSettings:t}=this,{wtViewport:e}=this.dataAccessObject,n=t.getSetting("columnHeaders").length;if(n&&!e.hasOversizedColumnHeadersMarked.master){const i=t.getSetting("rowHeaders").length,r=this.getRenderedColumnsCount();for(let t=0;t<n;t++)for(let e=-1*i;e<r;e++)this.markIfOversizedColumnHeader(e);e.hasOversizedColumnHeadersMarked.master=!0}}}Object(S.n)(hn,Fe),Object(S.n)(hn,he);var dn=hn;function fn(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class gn{constructor(){fn(this,"count",0),fn(this,"startRow",0),fn(this,"endRow",0),fn(this,"startPosition",0),fn(this,"isVisibleInTrimmingContainer",!0)}initialize(t){let{totalRows:e}=t;this.count=e,this.endRow=this.count-1}process(){}finalize(){}}function pn(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class mn{constructor(){pn(this,"count",0),pn(this,"startRow",null),pn(this,"endRow",null),pn(this,"startPosition",null),pn(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(t,e){const{totalCalculatedHeight:n,zeroBasedScrollOffset:i,innerViewportHeight:r}=e;n<=i&&(this.startRow=t),n>=i&&n<=r&&null===this.startRow&&(this.startRow=t),this.endRow=t}finalize(t){var e;const{scrollOffset:n,viewportHeight:i,horizontalScrollbarHeight:r,totalRows:o,needReverse:s,startPositions:a,rowHeight:l}=t;if(this.endRow===o-1&&s)for(this.startRow=this.endRow;this.startRow>0;){const t=a[this.endRow]+l-a[this.startRow-1];if(this.startRow-=1,t>=i-r)break}this.startPosition=null!==(e=a[this.startRow])&&void 0!==e?e:null;n+i-r<0||n>a.at(-1)+l?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,o<this.endRow&&(this.endRow=o-1),null!==this.startRow&&(this.count=this.endRow-this.startRow+1)}}class bn extends mn{finalize(t){var e;super.finalize(t);const{overrideFn:n,totalRows:i,startPositions:r}=t;null!==this.startRow&&"function"===typeof n&&n(this),this.startRow<0&&(this.startRow=0),this.startPosition=null!==(e=r[this.startRow])&&void 0!==e?e:null,i<this.endRow&&(this.endRow=i-1),null!==this.startRow&&(this.count=this.endRow-this.startRow+1)}}function yn(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class wn{constructor(){yn(this,"count",0),yn(this,"startRow",null),yn(this,"endRow",null),yn(this,"startPosition",null),yn(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(t,e){const{totalCalculatedHeight:n,zeroBasedScrollOffset:i,innerViewportHeight:r,rowHeight:o}=e;n>=i&&n+o<=r&&(null===this.startRow&&(this.startRow=t),this.endRow=t)}finalize(t){var e;const{scrollOffset:n,viewportHeight:i,horizontalScrollbarHeight:r,totalRows:o,needReverse:s,startPositions:a,rowHeight:l}=t;if(this.endRow===o-1&&s)for(this.startRow=this.endRow;this.startRow>0;){const t=a[this.endRow]+l-a[this.startRow-1];if(t<=i-r&&(this.startRow-=1),t>=i-r)break}this.startPosition=null!==(e=a[this.startRow])&&void 0!==e?e:null;n+i-r<(null===this.startRow?0:t.getRowHeight(this.startRow))||n>a.at(-1)?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,o<this.endRow&&(this.endRow=o-1),null!==this.startRow&&(this.count=this.endRow-this.startRow+1)}}function vn(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Cn{constructor(){vn(this,"count",0),vn(this,"startColumn",0),vn(this,"endColumn",0),vn(this,"startPosition",0),vn(this,"isVisibleInTrimmingContainer",!0)}initialize(t){let{totalColumns:e}=t;this.count=e,this.endColumn=this.count-1}process(){}finalize(){}}function Sn(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class On{constructor(){Sn(this,"count",0),Sn(this,"startColumn",null),Sn(this,"endColumn",null),Sn(this,"startPosition",null),Sn(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(t,e){const{totalCalculatedWidth:n,zeroBasedScrollOffset:i,viewportWidth:r}=e;n<=i&&(this.startColumn=t);n>=i&&n<=i+(i>0?r+1:r)&&(null!==this.startColumn&&void 0!==this.startColumn||(this.startColumn=t)),this.endColumn=t}finalize(t){var e;const{scrollOffset:n,viewportWidth:i,inlineStartOffset:r,zeroBasedScrollOffset:o,totalColumns:s,needReverse:a,startPositions:l,columnWidth:c}=t;if(this.endColumn===s-1&&a)for(this.startColumn=this.endColumn;this.startColumn>0;){const t=l[this.endColumn]+c-l[this.startColumn-1];if(this.startColumn-=1,t>i)break}this.startPosition=null!==(e=l[this.startColumn])&&void 0!==e?e:null;n+i-(o>0?i+1:i)<-1*r||n>l.at(-1)+c||-1*n-i>0?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,s<this.endColumn&&(this.endColumn=s-1),null!==this.startColumn&&(this.count=this.endColumn-this.startColumn+1)}}class Tn extends On{finalize(t){var e;super.finalize(t);const{overrideFn:n,totalColumns:i,startPositions:r}=t;null!==this.startColumn&&"function"===typeof n&&n(this),this.startColumn<0&&(this.startColumn=0),this.startPosition=null!==(e=r[this.startColumn])&&void 0!==e?e:null,i<this.endColumn&&(this.endColumn=i-1),null!==this.startColumn&&(this.count=this.endColumn-this.startColumn+1)}}function _n(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class En{constructor(){_n(this,"count",0),_n(this,"startColumn",null),_n(this,"endColumn",null),_n(this,"startPosition",null),_n(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(t,e){const{totalCalculatedWidth:n,zeroBasedScrollOffset:i,viewportWidth:r,columnWidth:o}=e;n>=i&&n+o<=i+(i>0?r+1:r)&&(null!==this.startColumn&&void 0!==this.startColumn||(this.startColumn=t),this.endColumn=t)}finalize(t){var e;const{scrollOffset:n,viewportWidth:i,inlineStartOffset:r,zeroBasedScrollOffset:o,totalColumns:s,needReverse:a,startPositions:l,columnWidth:c}=t;if(this.endColumn===s-1&&a)for(this.startColumn=this.endColumn;this.startColumn>0;){const t=l[this.endColumn]+c-l[this.startColumn-1];if(t<=i&&(this.startColumn-=1),t>=i)break}this.startPosition=null!==(e=l[this.startColumn])&&void 0!==e?e:null;const u=n+i-(o>0?i+1:i),h=null===this.startColumn?0:t.getColumnWidth(this.startColumn);u<-1*r||n>l.at(-1)||-1*n-i>-1*h?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,s<this.endColumn&&(this.endColumn=s-1),null!==this.startColumn&&(this.count=this.endColumn-this.startColumn+1)}}var Rn=n(238);var Mn=class{constructor(t,e,n,i,r){this.dataAccessObject=t,this.wot=t.wot,this.instance=this.wot,this.domBindings=e,this.wtSettings=n,this.wtTable=r,this.oversizedRows=[],this.oversizedColumnHeaders=[],this.hasOversizedColumnHeadersMarked={},this.clientHeight=0,this.containerWidth=NaN,this.rowHeaderWidth=NaN,this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,this.rowsCalculatorTypes=new Map([["rendered",()=>this.wtSettings.getSetting("renderAllRows")?new gn:new bn],["fullyVisible",()=>new wn],["partiallyVisible",()=>new mn]]),this.columnsCalculatorTypes=new Map([["rendered",()=>this.wtSettings.getSetting("renderAllColumns")?new Cn:new Tn],["fullyVisible",()=>new En],["partiallyVisible",()=>new On]]),this.eventManager=i,this.eventManager.addEventListener(this.domBindings.rootWindow,"resize",()=>{this.clientHeight=this.getWorkspaceHeight()})}getWorkspaceHeight(){const t=this.domBindings.rootDocument,e=this.dataAccessObject.topOverlayTrimmingContainer;let n=0;if(e===this.domBindings.rootWindow)n=t.documentElement.clientHeight;else{n=Object(o.L)(e)>0&&e.clientHeight>0?e.clientHeight:1/0}return n}getWorkspaceWidth(){const{wtSettings:t}=this,{rootDocument:e,rootWindow:n}=this.domBindings,i=this.dataAccessObject.inlineStartOverlayTrimmingContainer,r=e.documentElement.offsetWidth,s=t.getSetting("totalColumns"),a=t.getSetting("preventOverflow"),l=t.getSetting("rtlMode"),c=this.wtTable.TABLE.getBoundingClientRect(),u=r-(l?c.right-r:c.left);let h,d;if(a)return Object(o.M)(this.wtTable.wtRootElement);if(h=t.getSetting("freezeOverlays")?Math.min(u,r):Math.min(this.getContainerFillWidth(),u,r),i===n&&s>0&&this.sumColumnWidths(0,s-1)>h)return e.documentElement.clientWidth;if(i!==n&&(d=Object(o.s)(this.dataAccessObject.inlineStartOverlayTrimmingContainer,"overflow",n),"scroll"===d||"hidden"===d||"auto"===d))return Math.max(h,i.clientWidth);const f=t.getSetting("stretchH");return"none"!==f&&f?h:Math.max(h,Object(o.M)(this.wtTable.TABLE))}hasVerticalScroll(){return this.wtTable.hider.offsetHeight>this.getWorkspaceHeight()}hasHorizontalScroll(){return this.wtTable.hider.offsetWidth>this.getWorkspaceWidth()}sumColumnWidths(t,e){let n=0,i=t;for(;i<e;)n+=this.wtTable.getColumnWidth(i),i+=1;return n}getContainerFillWidth(){if(this.containerWidth)return this.containerWidth;const t=this.wtTable.holder,e=this.domBindings.rootDocument.createElement("div");e.style.width="100%",e.style.height="1px",t.appendChild(e);const n=e.offsetWidth;return this.containerWidth=n,t.removeChild(e),n}getWorkspaceOffset(){return Object(o.K)(this.wtTable.TABLE)}getColumnHeaderHeight(){return this.wtSettings.getSetting("columnHeaders").length?isNaN(this.columnHeaderHeight)&&(this.columnHeaderHeight=Object(o.L)(this.wtTable.THEAD)):this.columnHeaderHeight=0,this.columnHeaderHeight}getViewportHeight(){let t=this.getWorkspaceHeight();if(t===1/0)return t;const e=this.getColumnHeaderHeight();return e>0&&(t-=e),t}getRowHeaderWidth(){const t=this.wtSettings.getSetting("rowHeaderWidth"),e=this.wtSettings.getSetting("rowHeaders");if(t){this.rowHeaderWidth=0;for(let n=0,i=e.length;n<i;n++)this.rowHeaderWidth+=t[n]||t}if(isNaN(this.rowHeaderWidth))if(e.length){let t=this.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(let n=0,i=e.length;n<i;n++)t?(this.rowHeaderWidth+=Object(o.M)(t),t=t.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0;return this.rowHeaderWidth=this.wtSettings.getSetting("onModifyRowHeaderWidth",this.rowHeaderWidth)||this.rowHeaderWidth,this.rowHeaderWidth}getViewportWidth(){const t=this.getWorkspaceWidth();if(t===1/0)return t;const e=this.getRowHeaderWidth();return e>0?t-e:t}createRowsCalculator(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["rendered","fullyVisible","partiallyVisible"];const{wtSettings:e,wtTable:n}=this;let i,r,s=this.getViewportHeight();this.rowHeaderWidth=NaN;let a=this.dataAccessObject.topScrollPosition-this.dataAccessObject.topParentOffset;const l=e.getSetting("fixedRowsTop"),c=e.getSetting("fixedRowsBottom"),u=e.getSetting("totalRows");return l&&a>=0&&(r=this.dataAccessObject.topOverlay.sumCellSizes(0,l),a+=r,s-=r),c&&this.dataAccessObject.bottomOverlay.clone&&(r=this.dataAccessObject.bottomOverlay.sumCellSizes(u-c,u),s-=r),i=n.holder.clientHeight===n.holder.offsetHeight?0:Object(o.q)(this.domBindings.rootDocument),new Rn.b({calculationTypes:t.map(t=>[t,this.rowsCalculatorTypes.get(t)()]),viewportHeight:s,scrollOffset:a,totalRows:e.getSetting("totalRows"),rowHeightFn:t=>n.getRowHeight(t),overrideFn:e.getSettingPure("viewportRowCalculatorOverride"),horizontalScrollbarHeight:i})}createColumnsCalculator(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["rendered","fullyVisible","partiallyVisible"];const{wtSettings:e,wtTable:n}=this;let i=this.getViewportWidth(),r=Math.abs(this.dataAccessObject.inlineStartScrollPosition)-this.dataAccessObject.inlineStartParentOffset;this.columnHeaderHeight=NaN;const s=e.getSetting("fixedColumnsStart");if(s&&r>=0){const t=this.dataAccessObject.inlineStartOverlay.sumCellSizes(0,s);r+=t,i-=t}return n.holder.clientWidth!==n.holder.offsetWidth&&(i-=Object(o.q)(this.domBindings.rootDocument)),new Ut.b({calculationTypes:t.map(t=>[t,this.columnsCalculatorTypes.get(t)()]),viewportWidth:i,scrollOffset:r,totalColumns:e.getSetting("totalColumns"),columnWidthFn:t=>n.getColumnWidth(t),overrideFn:e.getSettingPure("viewportColumnCalculatorOverride"),inlineStartOffset:this.dataAccessObject.inlineStartParentOffset})}createCalculators(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{wtSettings:e}=this,n=this.createRowsCalculator(),i=this.createColumnsCalculator();if(t&&!e.getSetting("renderAllRows")){const e=n.getResultsFor("fullyVisible");t=this.areAllProposedVisibleRowsAlreadyRendered(e)}if(t&&!e.getSetting("renderAllColumns")){const e=i.getResultsFor("fullyVisible");t=this.areAllProposedVisibleColumnsAlreadyRendered(e)}return t||(this.rowsRenderCalculator=n.getResultsFor("rendered"),this.columnsRenderCalculator=i.getResultsFor("rendered")),this.rowsVisibleCalculator=n.getResultsFor("fullyVisible"),this.columnsVisibleCalculator=i.getResultsFor("fullyVisible"),this.rowsPartiallyVisibleCalculator=n.getResultsFor("partiallyVisible"),this.columnsPartiallyVisibleCalculator=i.getResultsFor("partiallyVisible"),t}createVisibleCalculators(){const t=this.createRowsCalculator(["fullyVisible","partiallyVisible"]),e=this.createColumnsCalculator(["fullyVisible","partiallyVisible"]);this.rowsVisibleCalculator=t.getResultsFor("fullyVisible"),this.columnsVisibleCalculator=e.getResultsFor("fullyVisible"),this.rowsPartiallyVisibleCalculator=t.getResultsFor("partiallyVisible"),this.columnsPartiallyVisibleCalculator=e.getResultsFor("partiallyVisible")}areAllProposedVisibleRowsAlreadyRendered(t){if(!this.rowsVisibleCalculator)return!1;let{startRow:e,endRow:n}=t;if(null===e&&null===n){if(!t.isVisibleInTrimmingContainer)return!0;e=this.rowsPartiallyVisibleCalculator.startRow,n=this.rowsPartiallyVisibleCalculator.endRow}const{startRow:i,endRow:r}=this.rowsRenderCalculator;return!(e<i||e===i&&e>0)&&!(n>r||n===r&&n<this.wtSettings.getSetting("totalRows")-1)}areAllProposedVisibleColumnsAlreadyRendered(t){if(!this.columnsVisibleCalculator)return!1;let{startColumn:e,endColumn:n}=t;if(null===e&&null===n){if(!t.isVisibleInTrimmingContainer)return!0;e=this.columnsPartiallyVisibleCalculator.startColumn,n=this.columnsPartiallyVisibleCalculator.endColumn}const{startColumn:i,endColumn:r}=this.columnsRenderCalculator;return!(e<i||e===i&&e>0)&&!(n>r||n===r&&n<this.wtSettings.getSetting("totalColumns")-1)}resetHasOversizedColumnHeadersMarked(){Object(S.o)(this.hasOversizedColumnHeadersMarked,(t,e,n)=>{n[e]=void 0})}};function xn(t,e,n){In(t,e),e.set(t,n)}function In(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function kn(t,e){return t.get(Nn(t,e))}function An(t,e,n){return t.set(Nn(t,e),n),n}function Nn(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var jn=new WeakMap,Hn=new WeakMap,Dn=new WeakSet;class Pn{constructor(){var t,e;In(t=this,e=Dn),e.add(t),xn(this,jn,void 0),xn(this,Hn,void 0)}setActiveOverlay(t){return An(Hn,this,t),this}setActiveSelection(t){return An(jn,this,t),this}scan(){const t=kn(jn,this).settings.selectionType,e=new Set;return"active-header"===t?(this.scanColumnsInHeadersRange(t=>e.add(t)),this.scanRowsInHeadersRange(t=>e.add(t))):"area"===t?this.scanCellsRange(t=>e.add(t)):"focus"===t?(this.scanColumnsInHeadersRange(t=>e.add(t)),this.scanRowsInHeadersRange(t=>e.add(t)),this.scanCellsRange(t=>e.add(t))):"fill"===t?this.scanCellsRange(t=>e.add(t)):"header"===t?(this.scanColumnsInHeadersRange(t=>e.add(t)),this.scanRowsInHeadersRange(t=>e.add(t))):"row"===t?(this.scanRowsInHeadersRange(t=>e.add(t)),this.scanRowsInCellsRange(t=>e.add(t))):"column"===t&&(this.scanColumnsInHeadersRange(t=>e.add(t)),this.scanColumnsInCellsRange(t=>e.add(t))),e}scanColumnsInHeadersRange(t){const[e,n,i,r]=kn(jn,this).getCorners(),{wtTable:o}=kn(Hn,this),s=o.getRenderedColumnsCount(),a=o.getColumnHeadersCount();let l=0;for(let c=-o.getRowHeadersCount();c<s;c++){const s=o.columnFilter.renderedToSource(c);if(!(s<n||s>r)){for(let c=-a;c<0;c++){if(c<e||c>i)continue;const u=c+a;let h=o.getColumnHeader(s,u);const d=kn(Hn,this).getSetting("onBeforeHighlightingColumnHeader",s,u,{selectionType:kn(jn,this).settings.selectionType,columnCursor:l,selectionWidth:r-n+1});null!==d&&(d!==s&&(h=o.getColumnHeader(d,u)),t(h))}l+=1}}}scanRowsInHeadersRange(t){const[e,n,i,r]=kn(jn,this).getCorners(),{wtTable:o}=kn(Hn,this),s=o.getRenderedRowsCount(),a=o.getRowHeadersCount();let l=0;for(let c=-o.getColumnHeadersCount();c<s;c++){const s=o.rowFilter.renderedToSource(c);if(!(s<e||s>i)){for(let c=-a;c<0;c++){if(c<n||c>r)continue;const u=c+a;let h=o.getRowHeader(s,u);const d=kn(Hn,this).getSetting("onBeforeHighlightingRowHeader",s,u,{selectionType:kn(jn,this).settings.selectionType,rowCursor:l,selectionHeight:i-e+1});null!==d&&(d!==s&&(h=o.getRowHeader(d,u)),t(h))}l+=1}}}scanCellsRange(t){const[e,n,i,r]=kn(jn,this).getCorners(),{wtTable:s}=kn(Hn,this);Nn(Dn,this,Ln).call(this,(a,l)=>{if(a>=e&&a<=i&&l>=n&&l<=r){const e=s.getCell(kn(Hn,this).createCellCoords(a,l)),n=kn(Hn,this).getSetting("onAfterDrawSelection",a,l,kn(jn,this).settings.layerLevel);"string"===typeof n&&Object(o.a)(e,n),t(e)}})}scanRowsInCellsRange(t){const[e,,n]=kn(jn,this).getCorners(),{wtTable:i}=kn(Hn,this);Nn(Dn,this,Ln).call(this,(r,o)=>{if(r>=e&&r<=n){const e=i.getCell(kn(Hn,this).createCellCoords(r,o));t(e)}})}scanColumnsInCellsRange(t){const[,e,,n]=kn(jn,this).getCorners(),{wtTable:i}=kn(Hn,this);Nn(Dn,this,Ln).call(this,(r,o)=>{if(o>=e&&o<=n){const e=i.getCell(kn(Hn,this).createCellCoords(r,o));t(e)}})}}function Ln(t){const{wtTable:e}=kn(Hn,this),n=e.getRenderedRowsCount(),i=e.getRenderedColumnsCount();for(let r=0;r<n;r+=1){const n=e.rowFilter.renderedToSource(r);for(let r=0;r<i;r+=1)t(n,e.columnFilter.renderedToSource(r))}}var Fn=class{constructor(t,e){e&&(this.eventManager=t.eventManager,this.instance=t,this.wot=t,this.settings=e,this.mouseDown=!1,this.main=null,this.top=null,this.bottom=null,this.start=null,this.end=null,this.topStyle=null,this.bottomStyle=null,this.startStyle=null,this.endStyle=null,this.cornerDefaultStyle=xe,this.cornerCenterPointOffset=-parseInt(this.cornerDefaultStyle.width,10)/2,this.corner=null,this.cornerStyle=null,this.createBorders(e),this.registerListeners())}registerListeners(){const t=this.wot.rootDocument.body;this.eventManager.addEventListener(t,"mousedown",()=>this.onMouseDown()),this.eventManager.addEventListener(t,"mouseup",()=>this.onMouseUp());for(let e=0,n=this.main.childNodes.length;e<n;e++){const t=this.main.childNodes[e];this.eventManager.addEventListener(t,"mouseenter",t=>this.onMouseEnter(t,this.main.childNodes[e]))}}onMouseDown(){this.mouseDown=!0}onMouseUp(){this.mouseDown=!1}onMouseEnter(t,e){if(!this.mouseDown||!this.wot.getSetting("hideBorderOnMouseDownOver"))return;t.preventDefault(),Object(u.f)(t);const n=this,i=this.wot.rootDocument.body,r=e.getBoundingClientRect();e.style.display="none",this.eventManager.addEventListener(i,"mousemove",(function t(o){var s;((s=o).clientY<Math.floor(r.top)||s.clientY>Math.ceil(r.top+r.height)||s.clientX<Math.floor(r.left)||s.clientX>Math.ceil(r.left+r.width))&&(n.eventManager.removeEventListener(i,"mousemove",t),e.style.display="block")}))}createBorders(t){const{rootDocument:e}=this.wot;this.main=e.createElement("div");const n=["top","start","bottom","end","corner"];let i=this.main.style;i.position="absolute",i.top=0,i.left=0;for(let s=0;s<5;s++){const r=n[s],o=e.createElement("div");o.className="wtBorder "+(this.settings.className||""),this.settings[r]&&this.settings[r].hide&&(o.className+=" hidden"),i=o.style,i.backgroundColor=this.settings[r]&&this.settings[r].color?this.settings[r].color:t.border.color,i.height=this.settings[r]&&this.settings[r].width?this.settings[r].width+"px":t.border.width+"px",i.width=this.settings[r]&&this.settings[r].width?this.settings[r].width+"px":t.border.width+"px",this.main.appendChild(o)}this.top=this.main.childNodes[0],this.start=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.end=this.main.childNodes[3],this.topStyle=this.top.style,this.startStyle=this.start.style,this.bottomStyle=this.bottom.style,this.endStyle=this.end.style,this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.height=this.cornerDefaultStyle.height,this.cornerStyle.border=[this.cornerDefaultStyle.borderWidth,this.cornerDefaultStyle.borderStyle,this.cornerDefaultStyle.borderColor].join(" "),Object(l.i)()&&this.instance.getSetting("isDataViewInstance")&&this.createMultipleSelectorHandles(),this.disappear();const{wtTable:r}=this.wot;let o=r.bordersHolder;o||(o=e.createElement("div"),o.className="htBorders",r.bordersHolder=o,r.spreader.appendChild(o)),o.appendChild(this.main)}createMultipleSelectorHandles(){const{rootDocument:t}=this.wot;this.selectionHandles={top:t.createElement("DIV"),topHitArea:t.createElement("DIV"),bottom:t.createElement("DIV"),bottomHitArea:t.createElement("DIV")};this.selectionHandles.top.className="topSelectionHandle topLeftSelectionHandle",this.selectionHandles.topHitArea.className="topSelectionHandle-HitArea topLeftSelectionHandle-HitArea",this.selectionHandles.bottom.className="bottomSelectionHandle bottomRightSelectionHandle",this.selectionHandles.bottomHitArea.className="bottomSelectionHandle-HitArea bottomRightSelectionHandle-HitArea",this.selectionHandles.styles={top:this.selectionHandles.top.style,topHitArea:this.selectionHandles.topHitArea.style,bottom:this.selectionHandles.bottom.style,bottomHitArea:this.selectionHandles.bottomHitArea.style};const e={position:"absolute",height:"40px",width:"40px","border-radius":parseInt(40/1.5,10)+"px"};Object(S.o)(e,(t,e)=>{this.selectionHandles.styles.bottomHitArea[e]=t,this.selectionHandles.styles.topHitArea[e]=t});const n={position:"absolute",height:"10px",width:"10px","border-radius":parseInt(10/1.5,10)+"px",background:"#F5F5FF",border:"1px solid #4285c8"};Object(S.o)(n,(t,e)=>{this.selectionHandles.styles.bottom[e]=t,this.selectionHandles.styles.top[e]=t}),this.main.appendChild(this.selectionHandles.top),this.main.appendChild(this.selectionHandles.bottom),this.main.appendChild(this.selectionHandles.topHitArea),this.main.appendChild(this.selectionHandles.bottomHitArea)}isPartRange(t,e){const n=this.wot.selectionManager.getAreaSelection();return!(!n.cellRange||t===n.cellRange.to.row&&e===n.cellRange.to.col)}updateMultipleSelectionHandlesPosition(t,e,n,i,r,o){const s=this.wot.wtSettings.getSetting("rtlMode")?"right":"left",{top:a,topHitArea:l,bottom:c,bottomHitArea:u}=this.selectionHandles.styles,h=parseInt(a.borderWidth,10),d=parseInt(a.width,10),f=parseInt(l.width,10),g=this.wot.wtTable.getWidth(),p=this.wot.wtTable.getHeight();a.top=parseInt(n-d-1,10)+"px",a[s]=parseInt(i-d-1,10)+"px",l.top=parseInt(n-f/4*3,10)+"px",l[s]=parseInt(i-f/4*3,10)+"px";const m=Math.min(parseInt(i+r,10),g-d-2*h),b=Math.min(parseInt(i+r-f/4,10),g-f-2*h);c[s]=m+"px",u[s]=b+"px";const y=Math.min(parseInt(n+o,10),p-d-2*h),w=Math.min(parseInt(n+o-f/4,10),p-f-2*h);c.top=y+"px",u.top=w+"px",this.settings.border.cornerVisible&&this.settings.border.cornerVisible()?(a.display="block",l.display="block",this.isPartRange(t,e)?(c.display="none",u.display="none"):(c.display="block",u.display="block")):(a.display="none",c.display="none",l.display="none",u.display="none"),t===this.wot.wtSettings.getSetting("fixedRowsTop")||e===this.wot.wtSettings.getSetting("fixedColumnsStart")?(a.zIndex="9999",l.zIndex="9999"):(a.zIndex="",l.zIndex="")}appear(t){if(this.disabled)return;const{wtTable:e,rootDocument:n,rootWindow:i}=this.wot;let r,s,a,c,u,h;const d=e.getRenderedRowsCount();for(let o=0;o<d;o+=1){const n=e.rowFilter.renderedToSource(o);if(n>=t[0]&&n<=t[2]){r=n,u=t[0];break}}for(let o=d-1;o>=0;o-=1){const n=e.rowFilter.renderedToSource(o);if(n>=t[0]&&n<=t[2]){s=n;break}}const f=e.getRenderedColumnsCount();for(let o=0;o<f;o+=1){const n=e.columnFilter.renderedToSource(o);if(n>=t[1]&&n<=t[3]){a=n,h=t[1];break}}for(let o=f-1;o>=0;o-=1){const n=e.columnFilter.renderedToSource(o);if(n>=t[1]&&n<=t[3]){c=n;break}}if(void 0===r||void 0===a)return void this.disappear();let g=e.getCell(this.wot.createCellCoords(r,a));const p=r!==s||a!==c,m=p?e.getCell(this.wot.createCellCoords(s,c)):g,b=Object(o.K)(g),y=p?Object(o.K)(m):b,w=Object(o.K)(e.TABLE),v=Object(o.M)(e.TABLE),C=b.top,S=b.left,O=this.wot.wtSettings.getSetting("rtlMode");let T=0,_=0;if(O){const t=Object(o.M)(g),e=i.innerWidth-w.left-v;_=S+t-y.left,T=i.innerWidth-S-t-e-1}else _=y.left+Object(o.M)(m)-S,T=S-w.left-1;if(this.isEntireColumnSelected(r,s)){const t=this.getDimensionsFromHeader("columns",a,c,u,w);let e=null;t&&([e,T,_]=t),e&&(g=e)}let E=C-w.top-1,R=y.top+Object(o.L)(m)-C;if(this.isEntireRowSelected(a,c)){const t=this.getDimensionsFromHeader("rows",r,s,h,w);let e=null;t&&([e,E,R]=t),e&&(g=e)}const M=Object(o.i)(g,i);parseInt(M.borderTopWidth,10)>0&&(E+=1,R=R>0?R-1:0),parseInt(M[O?"borderRightWidth":"borderLeftWidth"],10)>0&&(T+=1,_=_>0?_-1:0);const x=O?"right":"left";this.topStyle.top=E+"px",this.topStyle[x]=T+"px",this.topStyle.width=_+"px",this.topStyle.display="block",this.startStyle.top=E+"px",this.startStyle[x]=T+"px",this.startStyle.height=R+"px",this.startStyle.display="block";const I=Math.floor(this.settings.border.width/2);this.bottomStyle.top=E+R-I+"px",this.bottomStyle[x]=T+"px",this.bottomStyle.width=_+"px",this.bottomStyle.display="block",this.endStyle.top=E+"px",this.endStyle[x]=T+_-I+"px",this.endStyle.height=R+1+"px",this.endStyle.display="block";let k=this.settings.border.cornerVisible;k="function"===typeof k?k(this.settings.layerLevel):k;const A=this.wot.getSetting("onModifyGetCellCoords",s,c);let[N,j]=[s,c];if(A&&Array.isArray(A)&&([,,N,j]=A),Object(l.i)()||!k||this.isPartRange(N,j))this.cornerStyle.display="none";else{this.cornerStyle.top=E+R+this.cornerCenterPointOffset-1+"px",this.cornerStyle[x]=T+_+this.cornerCenterPointOffset-1+"px",this.cornerStyle.borderRightWidth=this.cornerDefaultStyle.borderWidth,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.display="none";let t=Object(o.t)(e.TABLE);const r=t===i;r&&(t=n.documentElement);const a=parseInt(this.cornerDefaultStyle.width,10)/2,l=parseInt(this.cornerDefaultStyle.height,10)/2;if(c===this.wot.getSetting("totalColumns")-1){const e=r?m.getBoundingClientRect().left:m.offsetLeft;let n=!1,i=0;O?(i=e-parseInt(this.cornerDefaultStyle.width,10)/2,n=i<0):(i=e+Object(o.M)(m)+parseInt(this.cornerDefaultStyle.width,10)/2,n=i>=Object(o.B)(t)),n&&(this.cornerStyle[x]=Math.floor(T+_+this.cornerCenterPointOffset-a)+"px",this.cornerStyle[O?"borderLeftWidth":"borderRightWidth"]=0)}if(s===this.wot.getSetting("totalRows")-1){(r?m.getBoundingClientRect().top:m.offsetTop)+Object(o.L)(m)+parseInt(this.cornerDefaultStyle.height,10)/2>=Object(o.A)(t)&&(this.cornerStyle.top=Math.floor(E+R+this.cornerCenterPointOffset-l)+"px",this.cornerStyle.borderBottomWidth=0)}this.cornerStyle.display="block"}Object(l.i)()&&this.instance.getSetting("isDataViewInstance")&&this.updateMultipleSelectionHandlesPosition(s,c,E,T,_,R)}isEntireColumnSelected(t,e){return t===this.wot.wtTable.getFirstRenderedRow()&&e===this.wot.wtTable.getLastRenderedRow()}isEntireRowSelected(t,e){return t===this.wot.wtTable.getFirstRenderedColumn()&&e===this.wot.wtTable.getLastRenderedColumn()}getDimensionsFromHeader(t,e,n,i,r){const{wtTable:s}=this.wot,a=s.wtRootElement.parentNode;let l=null,c=null,u=null,h=null,d=null,f=null,g=null,p=null;switch(t){case"rows":l=function(){return s.getRowHeader(...arguments)},c=function(){return Object(o.L)(...arguments)},u="ht__selection--rows",f="top";break;case"columns":l=function(){return s.getColumnHeader(...arguments)},c=function(){return Object(o.M)(...arguments)},u="ht__selection--columns",f="left"}if(a.classList.contains(u)){const t=this.wot.getSetting("columnHeaders").length;if(g=l(e,t-i),p=l(n,t-i),!g||!p)return!1;const s=Object(o.K)(g),a=Object(o.K)(p);return g&&p&&(h=s[f]-r[f]-1,d=a[f]+c(p)-s[f]),[g,h,d]}return!1}changeBorderStyle(t,e){const n=this[t].style,i=e[t];!i||i.hide?Object(o.a)(this[t],"hidden"):(Object(o.w)(this[t],"hidden")&&Object(o.P)(this[t],"hidden"),n.backgroundColor=i.color,"top"!==t&&"bottom"!==t||(n.height=i.width+"px"),"start"!==t&&"end"!==t||(n.width=i.width+"px"))}changeBorderToDefaultStyle(t){const e=1,n="#000",i=this[t].style;i.backgroundColor=n,i.width=e+"px",i.height=e+"px"}toggleHiddenClass(t,e){this.changeBorderToDefaultStyle(t),e?Object(o.a)(this[t],"hidden"):Object(o.P)(this[t],"hidden")}disappear(){this.topStyle.display="none",this.bottomStyle.display="none",this.startStyle.display="none",this.endStyle.display="none",this.cornerStyle.display="none",Object(l.i)()&&this.instance.getSetting("isDataViewInstance")&&(this.selectionHandles.styles.top.display="none",this.selectionHandles.styles.topHitArea.display="none",this.selectionHandles.styles.bottom.display="none",this.selectionHandles.styles.bottomHitArea.display="none")}destroy(){this.eventManager.destroyWithOwnEventsOnly(),this.main.parentNode.removeChild(this.main)}};function Bn(t,e,n){Vn(t,e),e.set(t,n)}function Vn(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Un(t,e){return t.get(zn(t,e))}function Wn(t,e,n){return t.set(zn(t,e),n),n}function zn(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Yn=new WeakMap,Gn=new WeakMap,$n=new WeakMap,Kn=new WeakMap,Xn=new WeakMap,qn=new WeakMap,Qn=new WeakSet;class Zn{constructor(t){var e,n;Vn(e=this,n=Qn),n.add(e),Bn(this,Yn,void 0),Bn(this,Gn,void 0),Bn(this,$n,new Pn),Bn(this,Kn,new WeakMap),Bn(this,Xn,new WeakSet),Bn(this,qn,new Map),Wn(Gn,this,t)}setActiveOverlay(t){return Wn(Yn,this,t),Un($n,this).setActiveOverlay(Un(Yn,this)),Un(Kn,this).has(Un(Yn,this))||Un(Kn,this).set(Un(Yn,this),new Set),this}getFocusSelection(){return null!==Un(Gn,this)?Un(Gn,this).getFocus():null}getAreaSelection(){return null!==Un(Gn,this)?Un(Gn,this).createLayeredArea():null}getBorderInstance(t){if(!t.settings.border)return null;if(Un(qn,this).has(t)){const e=Un(qn,this).get(t);if(e.has(Un(Yn,this)))return e.get(Un(Yn,this));const n=new Fn(Un(Yn,this),t.settings);return e.set(Un(Yn,this),n),n}const e=new Fn(Un(Yn,this),t.settings);return Un(qn,this).set(t,new Map([[Un(Yn,this),e]])),e}getBorderInstances(t){var e,n;return Array.from(null!==(e=null===(n=Un(qn,this).get(t))||void 0===n?void 0:n.values())&&void 0!==e?e:[])}destroyBorders(t){Un(qn,this).get(t).forEach(t=>t.destroy()),Un(qn,this).delete(t)}render(t){if(null===Un(Gn,this))return;t&&zn(Qn,this,Jn).call(this);const e=Array.from(Un(Gn,this)),n=new Map,i=new Map;for(let r=0;r<e.length;r++){const t=e[r],{className:o,headerAttributes:s,createLayers:a,selectionType:l}=t.settings;Un(Xn,this).has(t)||(Un(Xn,this).add(t),t.addLocalHook("destroy",()=>this.destroyBorders(t)));const c=this.getBorderInstance(t);if(t.isEmpty()){null===c||void 0===c||c.disappear();continue}if(o){Un($n,this).setActiveSelection(t).scan().forEach(t=>{if(n.has(t)){const e=n.get(t);e.has(o)&&!0===a?e.set(o,e.get(o)+1):e.set(o,1)}else n.set(t,new Map([[o,1]]));s&&(i.has(t)||i.set(t,[]),"TH"===t.nodeName&&i.get(t).push(...s))})}const u=t.getCorners();Un(Yn,this).getSetting("onBeforeDrawBorders",u,l),null===c||void 0===c||c.appear(u)}n.forEach((t,e)=>{var n;const i=Array.from(t).map(t=>{let[e,n]=t;return 1===n?e:[e,...Array.from({length:n-1},(t,n)=>`${e}-${n+1}`)]}).flat();i.forEach(t=>Un(Kn,this).get(Un(Yn,this)).add(t)),Object(o.a)(e,i),"TD"===e.nodeName&&Array.isArray(null===(n=Un(Gn,this).options)||void 0===n?void 0:n.cellAttributes)&&Object(o.U)(e,Un(Gn,this).options.cellAttributes)}),Array.from(i.keys()).forEach(t=>{Object(o.U)(t,[...i.get(t)])})}}function Jn(){const t=Un(Kn,this).get(Un(Yn,this)),e=Un(Yn,this).wtSettings.getSetting("onBeforeRemoveCellClassNames");if(Array.isArray(e))for(let n=0;n<e.length;n++)t.add(e[n]);t.forEach(t=>{var e,n;const i=Un(Yn,this).wtTable.TABLE.querySelectorAll("."+t);let r=[];Array.isArray(null===(e=Un(Gn,this).options)||void 0===e?void 0:e.cellAttributes)&&(r=Un(Gn,this).options.cellAttributes.map(t=>t[0])),Array.isArray(null===(n=Un(Gn,this).options)||void 0===n?void 0:n.headerAttributes)&&(r=[...r,...Un(Gn,this).options.headerAttributes.map(t=>t[0])]);for(let s=0,a=i.length;s<a;s++)Object(o.P)(i[s],t),Object(o.O)(i[s],r)}),t.clear()}class ti extends Te{constructor(t,e){super(t,new un(e));const n=this.wtSettings.getSetting("facade",this);this.wtTable=new dn(this.getTableDao(),n,this.domBindings,this.wtSettings),this.wtViewport=new Mn(this.getViewportDao(),this.domBindings,this.wtSettings,this.eventManager,this.wtTable),this.selectionManager=new Zn(this.wtSettings.getSetting("selections")),this.wtEvent=new ct(n,this.domBindings,this.wtSettings,this.eventManager,this.wtTable,this.selectionManager),this.wtOverlays=new ln(this,n,this.domBindings,this.wtSettings,this.eventManager,this.wtTable),this.exportSettingsAsClassNames(),this.findOriginalHeaders()}exportSettingsAsClassNames(){const t=[],e=[];Object(S.o)({rowHeaders:"htRowHeaders",columnHeaders:"htColumnHeaders"},(n,i)=>{this.wtSettings.getSetting(i).length&&e.push(n),t.push(n)}),Object(o.P)(this.wtTable.wtRootElement.parentNode,t),Object(o.a)(this.wtTable.wtRootElement.parentNode,e)}getOverlayByName(t){var e;if(!re.includes(t))return null;const n=t.replace(/_([a-z])/g,t=>t[1].toUpperCase());return null!==(e=this.wtOverlays[n+"Overlay"])&&void 0!==e?e:null}getViewportDao(){const t=this;return{get wot(){return t},get topOverlayTrimmingContainer(){return t.wtOverlays.topOverlay.trimmingContainer},get inlineStartOverlayTrimmingContainer(){return t.wtOverlays.inlineStartOverlay.trimmingContainer},get topScrollPosition(){return t.wtOverlays.topOverlay.getScrollPosition()},get topParentOffset(){return t.wtOverlays.topOverlay.getTableParentOffset()},get inlineStartScrollPosition(){return t.wtOverlays.inlineStartOverlay.getScrollPosition()},get inlineStartParentOffset(){return t.wtOverlays.inlineStartOverlay.getTableParentOffset()},get topOverlay(){return t.wtOverlays.topOverlay},get inlineStartOverlay(){return t.wtOverlays.inlineStartOverlay},get bottomOverlay(){return t.wtOverlays.bottomOverlay}}}}class ei{constructor(t){t instanceof Te?this._wot=t:this._initFromSettings(t)}_initFromSettings(t){t.facade=t=>{const e=new ei(t);return()=>e},this._wot=new ti(t.table,t)}get guid(){return this._wot.guid}get rootDocument(){return this._wot.domBindings.rootDocument}get rootWindow(){return this._wot.domBindings.rootWindow}get wtSettings(){return this._wot.wtSettings}get cloneSource(){return this._wot.cloneSource}get cloneOverlay(){return this._wot.cloneOverlay}get selectionManager(){return this._wot.selectionManager}get wtViewport(){return this._wot.wtViewport}get wtOverlays(){return this._wot.wtOverlays}get wtTable(){return this._wot.wtTable}get wtEvent(){return this._wot.wtEvent}get wtScroll(){return this._wot.wtScroll}get drawn(){return this._wot.drawn}set drawn(t){this._wot.drawn=t}get drawInterrupted(){return this._wot.drawInterrupted}set drawInterrupted(t){this._wot.drawInterrupted=t}get lastMouseOver(){return this._wot.lastMouseOver}set lastMouseOver(t){this._wot.lastMouseOver=t}get momentumScrolling(){return this._wot.momentumScrolling}set momentumScrolling(t){this._wot.momentumScrolling=t}get touchApplied(){return this._wot.touchApplied}set touchApplied(t){this._wot.touchApplied=t}get domBindings(){return this._wot.domBindings}get eventListeners(){return this._wot.eventListeners}set eventListeners(t){this._wot.eventListeners=t}get eventManager(){return this._wot.eventManager}createCellCoords(t,e){return this._wot.createCellCoords(t,e)}createCellRange(t,e,n){return this._wot.createCellRange(t,e,n)}draw(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._wot.draw(t),this}getCell(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._wot.getCell(t,e)}scrollViewport(t,e,n,i,r){return this._wot.scrollViewport(t,e,n,i,r)}scrollViewportHorizontally(t,e,n){return this._wot.scrollViewportHorizontally(t,e,n)}scrollViewportVertically(t,e,n){return this._wot.scrollViewportVertically(t,e,n)}getViewport(){return this._wot.getViewport()}getOverlayName(){return this._wot.cloneOverlay?this._wot.cloneOverlay.type:"master"}getOverlayByName(t){return this._wot.getOverlayByName(t)}exportSettingsAsClassNames(){return this._wot.exportSettingsAsClassNames()}update(t,e){return this._wot.wtSettings.update(t,e),this}getSetting(t,e,n,i,r){return this._wot.wtSettings.getSetting(t,e,n,i,r)}hasSetting(t){return this._wot.wtSettings.hasSetting(t)}destroy(){this._wot.destroy()}}function ni(t){let{isShiftKey:e,isLeftClick:n,isRightClick:i,coords:r,selection:o,controller:s,cellCoordsFactory:a}=t;const l=o.isSelected()?o.getSelectedRange().current():null,c=o.isSelectedByCorner(),u=o.isSelectedByRowHeader();if(o.markSource("mouse"),e&&l)r.row>=0&&r.col>=0&&!s.cell?o.setRangeEnd(r):(c||u)&&r.row>=0&&r.col>=0&&!s.cell?o.setRangeEnd(a(r.row,r.col)):c&&r.row<0&&!s.column?o.setRangeEnd(a(l.to.row,r.col)):u&&r.col<0&&!s.row?o.setRangeEnd(a(r.row,l.to.col)):(!c&&!u&&r.col<0||c&&r.col<0)&&!s.row?o.selectRows(Math.max(l.from.row,0),r.row,r.col):(!c&&!u&&r.row<0||u&&r.row<0)&&!s.column&&o.selectColumns(Math.max(l.from.col,0),r.col,r.row);else{const t=!o.inInSelection(r),e=n||i&&t;r.row<0&&r.col>=0&&!s.column?e&&o.selectColumns(r.col,r.col,r.row):r.col<0&&r.row>=0&&!s.row?e&&o.selectRows(r.row,r.row,r.col):r.col>=0&&r.row>=0&&!s.cell?e&&o.setRangeStart(r):r.col<0&&r.row<0&&o.selectAll(!0,!0,{disableHeadersHighlight:!0,focusPosition:{row:0,col:0}})}o.markEndSource()}const ii=new Map([["mousedown",ni],["mouseover",function(t){let{isLeftClick:e,coords:n,selection:i,controller:r,cellCoordsFactory:o}=t;if(!e)return;const s=i.isSelectedByRowHeader(),a=i.isSelectedByColumnHeader(),l=i.tableProps.countCols(),c=i.tableProps.countRows();i.markSource("mouse"),a&&!r.column?i.setRangeEnd(o(c-1,n.col)):s&&!r.row?i.setRangeEnd(o(n.row,l-1)):r.cell||i.setRangeEnd(n),i.markEndSource()}],["touchstart",ni]]);function ri(t,e){let{coords:n,selection:i,controller:r,cellCoordsFactory:o}=e;ii.get(t.type)({coords:n,selection:i,controller:r,cellCoordsFactory:o,isShiftKey:t.shiftKey,isLeftClick:Object(u.b)(t)||"touchstart"===t.type,isRightClick:Object(u.c)(t)})}const oi=new WeakMap,si=Symbol("rootInstance");function ai(t){oi.set(t,!0)}function li(t){return t===si}function ci(t){return oi.has(t)}function ui(t,e,n){hi(t,e),e.set(t,n)}function hi(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function di(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fi(t,e){return t.get(pi(t,e))}function gi(t,e,n){return t.set(pi(t,e),n),n}function pi(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var mi=new WeakMap,bi=new WeakMap,yi=new WeakMap,wi=new WeakMap,vi=new WeakMap,Ci=new WeakMap,Si=new WeakMap,Oi=new WeakSet;function Ti(){return parseInt(this.hot.rootElement.getAttribute(Object(_t.e)()[0]),10)}function _i(t){const e=pi(Oi,this,Ti).call(this)+t;Object(o.U)(this.hot.rootElement,...Object(_t.e)(e))}var Ei=class{constructor(t){var e,n;hi(e=this,n=Oi),n.add(e),di(this,"hot",void 0),di(this,"eventManager",void 0),di(this,"settings",void 0),di(this,"THEAD",void 0),di(this,"TBODY",void 0),di(this,"_wt",void 0),di(this,"activeWt",void 0),ui(this,mi,0),ui(this,bi,0),di(this,"postponedAdjustElementsSize",!1),ui(this,yi,!1),ui(this,wi,void 0),ui(this,vi,void 0),ui(this,Ci,0),ui(this,Si,0),this.hot=t,this.eventManager=new d.a(this.hot),this.settings=this.hot.getSettings(),this.createElements(),this.registerEvents(),this.initializeWalkontable()}render(){this.hot.isRenderSuspended()||(this.hot.runHooks("beforeRender",this.hot.forceFullRender),this.postponedAdjustElementsSize&&(this.postponedAdjustElementsSize=!1,this.adjustElementsSize(!0)),this._wt.draw(!this.hot.forceFullRender),this.hot.runHooks("afterRender",this.hot.forceFullRender),this.hot.forceFullRender=!1,this.hot.renderCall=!1)}adjustElementsSize(){this.hot.isRenderSuspended()?this.postponedAdjustElementsSize=!0:this._wt.wtOverlays.adjustElementsSize()}getCellAtCoords(t,e){const n=this._wt.getCell(t,e);return n<0?null:n}scrollViewport(t,e,n,i,r){return this._wt.scrollViewport(t,e,n,i,r)}scrollViewportHorizontally(t,e,n){return this._wt.scrollViewportHorizontally(t,e,n)}scrollViewportVertically(t,e,n){return this._wt.scrollViewportVertically(t,e,n)}createElements(){const{rootElement:t,rootDocument:e}=this.hot,n=t.getAttribute("style");n&&t.setAttribute("data-originalstyle",n),Object(o.a)(t,"handsontable"),gi(vi,this,e.createElement("TABLE")),Object(o.a)(fi(vi,this),"htCore"),this.hot.getSettings().tableClassName&&Object(o.a)(fi(vi,this),this.hot.getSettings().tableClassName),this.settings.ariaTags&&(Object(o.U)(fi(vi,this),[Object(_t.y)()]),Object(o.U)(t,[Object(_t.N)(),Object(_t.C)(-1),Object(_t.e)(this.hot.countCols()),Object(_t.v)()])),this.THEAD=e.createElement("THEAD"),fi(vi,this).appendChild(this.THEAD),this.TBODY=e.createElement("TBODY"),fi(vi,this).appendChild(this.TBODY),this.hot.table=fi(vi,this),this.hot.container.insertBefore(fi(vi,this),this.hot.container.firstChild)}registerEvents(){const{rootElement:t,rootDocument:e,selection:n,rootWindow:i}=this.hot,r=e.documentElement;this.eventManager.addEventListener(t,"mousedown",t=>{gi(yi,this,!0),this.isTextSelectionAllowed(t.target)||(Object(o.b)(i),t.preventDefault(),i.focus())}),this.eventManager.addEventListener(t,"mouseup",()=>{gi(yi,this,!1)}),this.eventManager.addEventListener(t,"mousemove",t=>{fi(yi,this)&&!this.isTextSelectionAllowed(t.target)&&(this.settings.fragmentSelection&&Object(o.b)(i),t.preventDefault())}),this.eventManager.addEventListener(r,"keyup",t=>{n.isInProgress()&&!t.shiftKey&&n.finish()}),this.eventManager.addEventListener(r,"mouseup",i=>{n.isInProgress()&&Object(u.b)(i)&&n.finish(),gi(wi,this,!1);const r=Object(o.F)(e.activeElement);Object(o.E)(e.activeElement)&&!r||!r&&(n.isSelected()||n.isSelectedByAnyHeader()||t.contains(i.target)||Object(u.c)(i))||this.hot.unlisten()}),this.eventManager.addEventListener(r,"contextmenu",t=>{n.isInProgress()&&Object(u.c)(t)&&(n.finish(),gi(wi,this,!1))}),this.eventManager.addEventListener(r,"touchend",()=>{n.isInProgress()&&n.finish(),gi(wi,this,!1)}),this.eventManager.addEventListener(r,"mousedown",n=>{const i=n.target,s=n.x||n.clientX,a=n.y||n.clientY;let l=n.target;if(fi(wi,this)||!t||!this.hot.view)return;const{holder:c}=this._wt.wtTable;if(l===c){const t=Object(o.q)(e);if(e.elementFromPoint(s+t,a)!==c||e.elementFromPoint(s,a+t)!==c)return}else for(;l!==r;){if(null===l){if(n.isTargetWebComponent)break;return}if(l===t)return;l=l.parentNode}("function"===typeof this.settings.outsideClickDeselects?this.settings.outsideClickDeselects(i):this.settings.outsideClickDeselects)?this.hot.deselectCell():this.hot.destroyEditor(!1,!1)});let s=Object(o.m)(i);for(;null!==s;)this.eventManager.addEventListener(s.document.documentElement,"click",()=>{this.hot.unlisten()}),s=Object(o.m)(s);this.eventManager.addEventListener(fi(vi,this),"selectstart",t=>{this.settings.fragmentSelection||Object(o.E)(t.target)||t.preventDefault()})}translateFromRenderableToVisualCoords(t){let{row:e,col:n}=t;return this.hot._createCellCoords(...this.translateFromRenderableToVisualIndex(e,n))}translateFromRenderableToVisualIndex(t,e){let n=t>=0?this.hot.rowIndexMapper.getVisualFromRenderableIndex(t):t,i=e>=0?this.hot.columnIndexMapper.getVisualFromRenderableIndex(e):e;return null===n&&(n=t),null===i&&(i=e),[n,i]}countRenderableIndexes(t,e){const n=Math.min(t.getNotTrimmedIndexesLength(),e),i=t.getNearestNotHiddenIndex(n-1,-1);return null===i?0:t.getRenderableFromVisualIndex(i)+1}countRenderableColumns(){return this.countRenderableIndexes(this.hot.columnIndexMapper,this.settings.maxCols)}countRenderableRows(){return this.countRenderableIndexes(this.hot.rowIndexMapper,this.settings.maxRows)}countNotHiddenRowIndexes(t,e){return this.countNotHiddenIndexes(t,e,this.hot.rowIndexMapper,this.countRenderableRows())}countNotHiddenColumnIndexes(t,e){return this.countNotHiddenIndexes(t,e,this.hot.columnIndexMapper,this.countRenderableColumns())}countNotHiddenIndexes(t,e,n,i){if(isNaN(t)||t<0)return 0;const r=n.getNearestNotHiddenIndex(t,e),o=n.getRenderableFromVisualIndex(r);if(!Number.isInteger(o))return 0;let s=0;return e<0?s=o+1:e>0&&(s=i-o),s}countNotHiddenFixedColumnsStart(){const t=this.hot.countCols(),e=Math.min(parseInt(this.settings.fixedColumnsStart,10),t)-1;return this.countNotHiddenColumnIndexes(e,-1)}countNotHiddenFixedRowsTop(){const t=this.hot.countRows(),e=Math.min(parseInt(this.settings.fixedRowsTop,10),t)-1;return this.countNotHiddenRowIndexes(e,-1)}countNotHiddenFixedRowsBottom(){const t=this.hot.countRows(),e=Math.max(t-parseInt(this.settings.fixedRowsBottom,10),0);return this.countNotHiddenRowIndexes(e,1)}countRenderableColumnsInRange(t,e){let n=0;for(let i=t;i<=e;i++)null!==this.hot.columnIndexMapper.getRenderableFromVisualIndex(i)&&(n+=1);return n}countRenderableRowsInRange(t,e){let n=0;for(let i=t;i<=e;i++)null!==this.hot.rowIndexMapper.getRenderableFromVisualIndex(i)&&(n+=1);return n}isMainTableNotFullyCoveredByOverlays(){const t=this.countNotHiddenFixedRowsTop()+this.countNotHiddenFixedRowsBottom(),e=this.countNotHiddenFixedColumnsStart();return this.hot.countRenderedRows()>t&&this.hot.countRenderedCols()>e}initializeWalkontable(){const t={ariaTags:this.settings.ariaTags,rtlMode:this.hot.isRtl(),externalRowCalculator:this.hot.getPlugin("autoRowSize")&&this.hot.getPlugin("autoRowSize").isEnabled(),table:fi(vi,this),isDataViewInstance:()=>ci(this.hot),preventOverflow:()=>this.settings.preventOverflow,preventWheel:()=>this.settings.preventWheel,stretchH:()=>this.settings.stretchH,data:(t,e)=>this.hot.getDataAtCell(...this.translateFromRenderableToVisualIndex(t,e)),totalRows:()=>this.countRenderableRows(),totalColumns:()=>this.countRenderableColumns(),fixedColumnsStart:()=>this.countNotHiddenFixedColumnsStart(),fixedRowsTop:()=>this.countNotHiddenFixedRowsTop(),fixedRowsBottom:()=>this.countNotHiddenFixedRowsBottom(),shouldRenderInlineStartOverlay:()=>this.settings.fixedColumnsStart>0||t.rowHeaders().length>0,shouldRenderTopOverlay:()=>this.settings.fixedRowsTop>0||t.columnHeaders().length>0,shouldRenderBottomOverlay:()=>this.settings.fixedRowsBottom>0,minSpareRows:()=>this.settings.minSpareRows,renderAllRows:this.settings.renderAllRows,renderAllColumns:this.settings.renderAllColumns,rowHeaders:()=>{const t=[];return this.hot.hasRowHeaders()&&t.push((t,e)=>{const n=t>=0?this.hot.rowIndexMapper.getVisualFromRenderableIndex(t):t;this.appendRowHeader(n,e)}),this.hot.runHooks("afterGetRowHeaderRenderers",t),gi(bi,this,t.length),this.hot.getSettings().ariaTags&&pi(Oi,this,Ti).call(this)===this.hot.countCols()&&pi(Oi,this,_i).call(this,fi(bi,this)),t},columnHeaders:()=>{const t=[];return this.hot.hasColHeaders()&&t.push((t,e)=>{const n=t>=0?this.hot.columnIndexMapper.getVisualFromRenderableIndex(t):t;this.appendColHeader(n,e)}),this.hot.runHooks("afterGetColumnHeaderRenderers",t),gi(mi,this,t.length),t},columnWidth:t=>{const e=this.hot.columnIndexMapper.getVisualFromRenderableIndex(t);return this.hot.getColWidth(null===e?t:e)},rowHeight:t=>{const e=this.hot.rowIndexMapper.getVisualFromRenderableIndex(t);return this.hot.getRowHeight(null===e?t:e)},rowHeightByOverlayName:(t,e)=>{const n=this.hot.rowIndexMapper.getVisualFromRenderableIndex(t),i=null===n?t:n;return this.hot.runHooks("modifyRowHeightByOverlayName",this.hot.getRowHeight(i),i,e)},cellRenderer:(t,e,n)=>{const[i,r]=this.translateFromRenderableToVisualIndex(t,e),o=this.hot.runHooks("modifyGetCellCoords",i,r);let s=i,a=r;Array.isArray(o)&&([s,a]=o);const l=this.hot.getCellMeta(s,a),c=this.hot.colToProp(a);let u=this.hot.getDataAtRowProp(s,c);this.hot.hasHook("beforeValueRender")&&(u=this.hot.runHooks("beforeValueRender",u,l)),this.hot.runHooks("beforeRenderer",n,i,r,c,u,l),this.hot.getCellRenderer(l)(this.hot,n,i,r,c,u,l),this.hot.runHooks("afterRenderer",n,i,r,c,u,l)},selections:this.hot.selection.highlight,hideBorderOnMouseDownOver:()=>this.settings.fragmentSelection,onWindowResize:()=>{this.hot&&!this.hot.isDestroyed&&this.hot.refreshDimensions()},onContainerElementResize:()=>{this.hot&&!this.hot.isDestroyed&&Object(o.H)(this.hot.rootElement)&&this.hot.refreshDimensions()},onCellMouseDown:(t,e,n,i)=>{const r=this.translateFromRenderableToVisualCoords(e),o={row:!1,column:!1,cell:!1};this.hot.listen(),this.activeWt=i,gi(wi,this,!0),this.hot.runHooks("beforeOnCellMouseDown",t,r,n,o),Object(u.a)(t)||(ri(t,{coords:r,selection:this.hot.selection,controller:o,cellCoordsFactory:(t,e)=>this.hot._createCellCoords(t,e)}),this.hot.runHooks("afterOnCellMouseDown",t,r,n),this.activeWt=this._wt)},onCellContextMenu:(t,e,n,i)=>{const r=this.translateFromRenderableToVisualCoords(e);this.activeWt=i,gi(wi,this,!1),this.hot.selection.isInProgress()&&this.hot.selection.finish(),this.hot.runHooks("beforeOnCellContextMenu",t,r,n),Object(u.a)(t)||(this.hot.runHooks("afterOnCellContextMenu",t,r,n),this.activeWt=this._wt)},onCellMouseOut:(t,e,n,i)=>{const r=this.translateFromRenderableToVisualCoords(e);this.activeWt=i,this.hot.runHooks("beforeOnCellMouseOut",t,r,n),Object(u.a)(t)||(this.hot.runHooks("afterOnCellMouseOut",t,r,n),this.activeWt=this._wt)},onCellMouseOver:(t,e,n,i)=>{const r=this.translateFromRenderableToVisualCoords(e),o={row:!1,column:!1,cell:!1};this.activeWt=i,this.hot.runHooks("beforeOnCellMouseOver",t,r,n,o),Object(u.a)(t)||(fi(wi,this)&&ri(t,{coords:r,selection:this.hot.selection,controller:o,cellCoordsFactory:(t,e)=>this.hot._createCellCoords(t,e)}),this.hot.runHooks("afterOnCellMouseOver",t,r,n),this.activeWt=this._wt)},onCellMouseUp:(t,e,n,i)=>{const r=this.translateFromRenderableToVisualCoords(e);this.activeWt=i,this.hot.runHooks("beforeOnCellMouseUp",t,r,n),Object(u.a)(t)||this.hot.isDestroyed||(this.hot.runHooks("afterOnCellMouseUp",t,r,n),this.activeWt=this._wt)},onCellCornerMouseDown:t=>{t.preventDefault(),this.hot.runHooks("afterOnCellCornerMouseDown",t)},onCellCornerDblClick:t=>{t.preventDefault(),this.hot.runHooks("afterOnCellCornerDblClick",t)},beforeDraw:(t,e)=>this.beforeRender(t,e),onDraw:t=>this.afterRender(t),onBeforeViewportScrollVertically:t=>{const e=this.hot.rowIndexMapper,n=t<0;let i=t;return n||(i=e.getVisualFromRenderableIndex(t),null!==i)?(i=this.hot.runHooks("beforeViewportScrollVertically",i),this.hot.runHooks("beforeViewportScroll"),n?i:e.getRenderableFromVisualIndex(i)):t},onBeforeViewportScrollHorizontally:t=>{const e=this.hot.columnIndexMapper,n=t<0;let i=t;return n||(i=e.getVisualFromRenderableIndex(t),null!==i)?(i=this.hot.runHooks("beforeViewportScrollHorizontally",i),this.hot.runHooks("beforeViewportScroll"),n?i:e.getRenderableFromVisualIndex(i)):t},onScrollVertically:()=>{this.hot.runHooks("afterScrollVertically"),this.hot.runHooks("afterScroll")},onScrollHorizontally:()=>{this.hot.runHooks("afterScrollHorizontally"),this.hot.runHooks("afterScroll")},onBeforeRemoveCellClassNames:()=>this.hot.runHooks("beforeRemoveCellClassNames"),onBeforeHighlightingRowHeader:(t,e,n)=>{const i=this.hot.rowIndexMapper,r=t<0;let o=t;r||(o=i.getVisualFromRenderableIndex(t));const s=this.hot.runHooks("beforeHighlightingRowHeader",o,e,n);return r?s:i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(s,1))},onBeforeHighlightingColumnHeader:(t,e,n)=>{const i=this.hot.columnIndexMapper,r=t<0;let o=t;r||(o=i.getVisualFromRenderableIndex(t));const s=this.hot.runHooks("beforeHighlightingColumnHeader",o,e,n);return r?s:i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(s,1))},onAfterDrawSelection:(t,e,n)=>{let i;const[r,o]=this.translateFromRenderableToVisualIndex(t,e),s=this.hot.selection.getSelectedRange();if(s.size()>0){const t=s.peekByIndex(null!==n&&void 0!==n?n:0);i=[t.from.row,t.from.col,t.to.row,t.to.col]}return this.hot.runHooks("afterDrawSelection",r,o,i,n)},onBeforeDrawBorders:(t,e)=>{const[n,i,r,o]=t,s=[this.hot.rowIndexMapper.getVisualFromRenderableIndex(n),this.hot.columnIndexMapper.getVisualFromRenderableIndex(i),this.hot.rowIndexMapper.getVisualFromRenderableIndex(r),this.hot.columnIndexMapper.getVisualFromRenderableIndex(o)];return this.hot.runHooks("beforeDrawBorders",s,e)},onBeforeTouchScroll:()=>this.hot.runHooks("beforeTouchScroll"),onAfterMomentumScroll:()=>this.hot.runHooks("afterMomentumScroll"),onBeforeStretchingColumnWidth:(t,e)=>{const n=this.hot.columnIndexMapper.getVisualFromRenderableIndex(e);return this.hot.runHooks("beforeStretchingColumnWidth",t,n)},onModifyRowHeaderWidth:t=>this.hot.runHooks("modifyRowHeaderWidth",t),onModifyGetCellCoords:(t,e,n)=>{const i=this.hot.rowIndexMapper,r=this.hot.columnIndexMapper,o=e>=0?r.getVisualFromRenderableIndex(e):e,s=t>=0?i.getVisualFromRenderableIndex(t):t,a=this.hot.runHooks("modifyGetCellCoords",s,o,n);if(Array.isArray(a)){const[t,e,n,o]=a;return[t>=0?i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(t,1)):t,e>=0?r.getRenderableFromVisualIndex(r.getNearestNotHiddenIndex(e,1)):e,n>=0?i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(n,-1)):n,o>=0?r.getRenderableFromVisualIndex(r.getNearestNotHiddenIndex(o,-1)):o]}},viewportRowCalculatorOverride:t=>{let e=this.settings.viewportRowRenderingOffset;if("auto"===e&&this.settings.fixedRowsTop&&(e=10),e>0||"auto"===e){const n=this.countRenderableRows(),i=t.startRow,r=t.endRow;if("number"===typeof e)t.startRow=Math.max(i-e,0),t.endRow=Math.min(r+e,n-1);else if("auto"===e){const e=Math.ceil(r/n*12);t.startRow=Math.max(i-e,0),t.endRow=Math.min(r+e,n-1)}}this.hot.runHooks("afterViewportRowCalculatorOverride",t)},viewportColumnCalculatorOverride:t=>{let e=this.settings.viewportColumnRenderingOffset;if("auto"===e&&this.settings.fixedColumnsStart&&(e=10),e>0||"auto"===e){const n=this.countRenderableColumns(),i=t.startColumn,r=t.endColumn;if("number"===typeof e&&(t.startColumn=Math.max(i-e,0),t.endColumn=Math.min(r+e,n-1)),"auto"===e){const e=Math.ceil(r/n*6);t.startColumn=Math.max(i-e,0),t.endColumn=Math.min(r+e,n-1)}}this.hot.runHooks("afterViewportColumnCalculatorOverride",t)},rowHeaderWidth:()=>this.settings.rowHeaderWidth,columnHeaderHeight:()=>{const t=this.hot.runHooks("modifyColumnHeaderHeight");return this.settings.columnHeaderHeight||t}};this.hot.runHooks("beforeInitWalkontable",t),this._wt=new ei(t),this.activeWt=this._wt;const e=this._wt.wtTable.spreader,{width:n,height:i}=this.hot.rootElement.getBoundingClientRect();this.setLastSize(n,i),this.eventManager.addEventListener(e,"mousedown",t=>{t.target===e&&3===t.which&&t.stopPropagation()}),this.eventManager.addEventListener(e,"contextmenu",t=>{t.target===e&&3===t.which&&t.stopPropagation()}),this.eventManager.addEventListener(this.hot.rootDocument.documentElement,"click",()=>{this.settings.observeDOMVisibility&&this._wt.drawInterrupted&&(this.hot.forceFullRender=!0,this.render())})}isTextSelectionAllowed(t){if(Object(o.E)(t))return!0;const e=Object(o.C)(t,this._wt.wtTable.spreader);return!(!0!==this.settings.fragmentSelection||!e)||(!("cell"!==this.settings.fragmentSelection||!this.isSelectedOnlyCell()||!e)||!(this.settings.fragmentSelection||!this.isCellEdited()||!this.isSelectedOnlyCell()))}isMouseDown(){return fi(wi,this)}isSelectedOnlyCell(){var t,e;return null!==(t=null===(e=this.hot.getSelectedRangeLast())||void 0===e?void 0:e.isSingleCell())&&void 0!==t&&t}isCellEdited(){const t=this.hot.getActiveEditor();return t&&t.isOpened()}beforeRender(t,e){t&&this.hot.runHooks("beforeViewRender",this.hot.forceFullRender,e)}afterRender(t){t&&this.hot.runHooks("afterViewRender",this.hot.forceFullRender)}appendRowHeader(t,e){if(e.firstChild){const n=e.firstChild;if(!Object(o.w)(n,"relative"))return Object(o.e)(e),void this.appendRowHeader(t,e);this.updateCellHeader(n.querySelector(".rowHeader"),t,this.hot.getRowHeader)}else{const{rootDocument:n,getRowHeader:i}=this.hot,r=n.createElement("div"),o=n.createElement("span");r.className="relative",o.className="rowHeader",this.updateCellHeader(o,t,i),r.appendChild(o),e.appendChild(r)}this.hot.runHooks("afterGetRowHeader",t,e)}appendColHeader(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hot.getColHeader,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=()=>{const e=t>=0?this.hot.getColumnMeta(t).headerClassName:null;return e?e.split(" "):[]};if(e.firstChild){const s=e.firstChild;Object(o.w)(s,"relative")?(this.updateCellHeader(s.querySelector(".colHeader"),t,n,i),s.className="",Object(o.a)(s,["relative",...r()])):(Object(o.e)(e),this.appendColHeader(t,e,n,i))}else{const{rootDocument:s}=this.hot,a=s.createElement("div"),l=s.createElement("span"),c=r();a.classList.add("relative",...c),l.className="colHeader",this.settings.ariaTags&&(Object(o.U)(a,...Object(_t.y)()),Object(o.U)(l,...Object(_t.y)())),this.updateCellHeader(l,t,n,i),a.appendChild(l),e.appendChild(a)}this.hot.runHooks("afterGetColHeader",t,e,i)}updateCellHeader(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=e;const s=this._wt.wtOverlays.getParentOverlay(t)||this._wt;t.parentNode&&(Object(o.w)(t,"colHeader")?r=s.wtTable.columnFilter.sourceToRendered(e):Object(o.w)(t,"rowHeader")&&(r=s.wtTable.rowFilter.sourceToRendered(e))),r>-1?Object(o.f)(t,n(e,i)):(Object(o.g)(t,String.fromCharCode(160)),Object(o.a)(t,"cornerHeader"))}maximumVisibleElementWidth(t){const e=this._wt.wtViewport.getWorkspaceWidth()-t;return e>0?e:0}maximumVisibleElementHeight(t){const e=this._wt.wtViewport.getWorkspaceHeight()-t;return e>0?e:0}setLastSize(t,e){gi(Ci,this,t),gi(Si,this,e)}getLastSize(){return{width:fi(Ci,this),height:fi(Si,this)}}getFirstRenderedVisibleRow(){return this._wt.wtViewport.rowsRenderCalculator?this.hot.rowIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getFirstRenderedRow(),1):null}getLastRenderedVisibleRow(){return this._wt.wtViewport.rowsRenderCalculator?this.hot.rowIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getLastRenderedRow(),-1):null}getFirstRenderedVisibleColumn(){return this._wt.wtViewport.columnsRenderCalculator?this.hot.columnIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getFirstRenderedColumn(),1):null}getLastRenderedVisibleColumn(){return this._wt.wtViewport.columnsRenderCalculator?this.hot.columnIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getLastRenderedColumn(),-1):null}getFirstFullyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstVisibleRow())}getLastFullyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastVisibleRow())}getFirstFullyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstVisibleColumn())}getLastFullyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastVisibleColumn())}getFirstPartiallyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstPartiallyVisibleRow())}getLastPartiallyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastPartiallyVisibleRow())}getFirstPartiallyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstPartiallyVisibleColumn())}getLastPartiallyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastPartiallyVisibleColumn())}getColumnHeadersCount(){return fi(mi,this)}getRowHeadersCount(){return fi(bi,this)}getViewportWidth(){return this._wt.wtViewport.getViewportWidth()}getWorkspaceWidth(){return this._wt.wtViewport.getWorkspaceWidth()}getViewportHeight(){return this._wt.wtViewport.getViewportHeight()}getWorkspaceHeight(){return this._wt.wtViewport.getWorkspaceHeight()}getElementOverlayName(t){var e;return(null!==(e=this._wt.wtOverlays.getParentOverlay(t))&&void 0!==e?e:this._wt).wtTable.name}getOverlayByName(t){return this._wt.getOverlayByName(t)}isVisible(){return this._wt.wtTable.isVisible()}destroy(){this._wt.destroy(),this.eventManager.destroy()}},Ri=n(30);function Mi(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xi=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Mi(this,"hot",void 0),Mi(this,"data",void 0),Mi(this,"dataType","array"),Mi(this,"colToProp",()=>{}),Mi(this,"propToCol",()=>{}),this.hot=t,this.data=e}modifyRowData(t){let e;return this.hot.hasHook("modifyRowData")&&(e=this.hot.runHooks("modifyRowData",t)),void 0===e||Number.isInteger(e)?this.data[t]:e}getData(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.data&&0!==this.data.length?this.getByRange(null,null,t):this.data}setData(t){this.data=t}getAtColumn(t){const e=[];return Object(V.a)(this.data,(n,i)=>{const r=this.getAtCell(i,t);e.push(r)}),e}getAtRow(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=void 0===e&&void 0===n,{dataDotNotation:o}=this.hot.getSettings();let a=null,l=null;if(a=this.modifyRowData(t),Array.isArray(a))l=[],r?a.forEach((e,n)=>{l[n]=this.getAtPhysicalCell(t,n,a)}):Object($.d)(e,n,n=>{l[n-e]=this.getAtPhysicalCell(t,n,a)});else if(Object(S.l)(a)||Object(s.d)(a))if(l=i?[]:{},!r||i){const r=0,s=this.countFirstRowKeys()-1;Object($.d)(r,s,c=>{const u=this.colToProp(c);if(c>=(e||r)&&c<=(n||s)&&!Number.isInteger(u)){const e=this.getAtPhysicalCell(t,u,a);i?l.push(e):o?Object(S.p)(l,u,e):l[u]=e}})}else Object(S.o)(a,(e,n)=>{const i=this.getAtPhysicalCell(t,n,a);o?Object(S.p)(l,n,i):l[n]=i});return l}setAtCell(t,e,n){if(!(t>=this.countRows()||e>=this.countFirstRowKeys())){if(this.hot.hasHook("modifySourceData")){const i=Object(S.b)(n);this.hot.runHooks("modifySourceData",t,e,i,"set"),i.isTouched()&&(n=i.value)}Number.isInteger(e)?this.data[t][e]=n:Object(S.p)(this.data[t],e,n)}}getAtPhysicalCell(t,e,n){let i=null;if(n)if("string"===typeof e){const{dataDotNotation:t}=this.hot.getSettings();i=t?Object(S.i)(n,e):n[e]}else i="function"===typeof e?e(n):n[e];if(this.hot.hasHook("modifySourceData")){const n=Object(S.b)(i);this.hot.runHooks("modifySourceData",t,e,n,"get"),n.isTouched()&&(i=n.value)}return i}getAtCell(t,e){const n=this.modifyRowData(t);return this.getAtPhysicalCell(t,this.colToProp(e),n)}getByRange(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!1,r=null,o=null,s=null,a=null;null===t||null===e?(i=!0,r=0,s=this.countRows()-1):(r=Math.min(t.row,e.row),o=Math.min(t.col,e.col),s=Math.max(t.row,e.row),a=Math.max(t.col,e.col));const l=[];return Object($.d)(r,s,t=>{l.push(i?this.getAtRow(t,void 0,void 0,n):this.getAtRow(t,o,a,n))}),l}countRows(){if(this.hot.hasHook("modifySourceLength")){const t=this.hot.runHooks("modifySourceLength");if(Number.isInteger(t))return t}return this.data.length}countFirstRowKeys(){return Object(Ri.a)(this.data)}destroy(){this.data=null,this.hot=null}},Ii=n(103),ki=n(68),Ai=n(36),Ni=n(69),ji=n(47),Hi=n(70);const Di=new Map([["hiding",ki.a],["index",Ai.a],["linkedPhysicalIndexToValue",Ni.a],["physicalIndexToValue",ji.a],["trimming",Hi.a]]);var Pi=n(33),Li=n(18);function Fi(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let Bi=0;class Vi{constructor(){Fi(this,"collection",new Map)}register(t,e){!1===this.collection.has(t)&&(this.collection.set(t,e),e.addLocalHook("change",()=>this.runLocalHooks("change",e)),Bi+=1)}unregister(t){const e=this.collection.get(t);Object(a.b)(e)&&(e.destroy(),this.collection.delete(t),this.runLocalHooks("change",e),Bi-=1)}unregisterAll(){this.collection.forEach((t,e)=>this.unregister(e)),this.collection.clear()}get(t){return Object(a.e)(t)?Array.from(this.collection.values()):this.collection.get(t)}getLength(){return this.collection.size}removeFromEvery(t){this.collection.forEach(e=>{e.remove(t)})}insertToEvery(t,e){this.collection.forEach(n=>{n.insert(t,e)})}initEvery(t){this.collection.forEach(e=>{e.init(t)})}}function Ui(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object(S.n)(Vi,Li.a);class Wi extends Vi{constructor(t,e){super(),Ui(this,"mergedValuesCache",[]),Ui(this,"aggregationFunction",void 0),Ui(this,"fallbackValue",void 0),this.aggregationFunction=t,this.fallbackValue=e}getMergedValues(){if(!0===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]))return this.mergedValuesCache;if(0===this.getLength())return[];const t=Object(V.c)(this.get(),t=>t.getValues()),e=[],n=Object(a.b)(t[0])&&t[0].length||0;for(let i=0;i<n;i+=1){const n=[];for(let e=0;e<this.getLength();e+=1)n.push(t[e][i]);e.push(n)}return Object(V.c)(e,this.aggregationFunction)}getMergedValueAtIndex(t,e){const n=this.getMergedValues(e)[t];return Object(a.b)(n)?n:this.fallbackValue}updateCache(){this.mergedValuesCache=this.getMergedValues(!1)}}function zi(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function Yi(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Gi=new WeakMap;class $i{constructor(){zi(this,Gi,[])}subscribe(t){var e,n;return this.addLocalHook("change",t),this._write((n=this,(e=Gi).get(Yi(e,n)))),this}unsubscribe(){return this.runLocalHooks("unsubscribe"),this.clearLocalHooks(),this}_write(t){return t.length>0&&this.runLocalHooks("change",t),this}_writeInitialChanges(t){var e,n,i;n=this,i=t,(e=Gi).set(Yi(e,n),i)}}function Ki(t,e){const n=[];let i=0,r=0;for(;i<t.length&&r<e.length;i++,r++)t[i]!==e[r]&&n.push({op:"replace",index:r,oldValue:t[i],newValue:e[r]});for(;i<e.length;i++)n.push({op:"insert",index:i,oldValue:void 0,newValue:e[i]});for(;r<t.length;r++)n.push({op:"remove",index:r,oldValue:t[r],newValue:void 0});return n}function Xi(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function qi(t,e){return t.get(Zi(t,e))}function Qi(t,e,n){return t.set(Zi(t,e),n),n}function Zi(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}Object(S.n)($i,Li.a);var Ji=new WeakMap,tr=new WeakMap,er=new WeakMap,nr=new WeakMap,ir=new WeakMap;class rr{constructor(){let{initialIndexValue:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Xi(this,Ji,new Set),Xi(this,tr,[]),Xi(this,er,[]),Xi(this,nr,!1),Xi(this,ir,!1),Qi(ir,this,null!==t&&void 0!==t&&t)}createObserver(){const t=new $i;return qi(Ji,this).add(t),t.addLocalHook("unsubscribe",()=>{qi(Ji,this).delete(t)}),t._writeInitialChanges(Ki(qi(tr,this),qi(er,this))),t}emit(t){let e=qi(er,this);qi(nr,this)&&qi(tr,this).length===t.length||(0===t.length?t=new Array(e.length).fill(qi(ir,this)):Qi(tr,this,new Array(t.length).fill(qi(ir,this))),qi(nr,this)||(Qi(nr,this,!0),e=qi(tr,this)));const n=Ki(e,t);qi(Ji,this).forEach(t=>t._write(n)),Qi(er,this,t)}}function or(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}new Set;class sr{constructor(){or(this,"indexesSequence",new Ii.a),or(this,"trimmingMapsCollection",new Wi(t=>t.some(t=>!0===t),!1)),or(this,"hidingMapsCollection",new Wi(t=>t.some(t=>!0===t),!1)),or(this,"variousMapsCollection",new Vi),or(this,"hidingChangesObservable",new rr({initialIndexValue:!1})),or(this,"notTrimmedIndexesCache",[]),or(this,"notHiddenIndexesCache",[]),or(this,"isBatched",!1),or(this,"indexesSequenceChanged",!1),or(this,"indexesChangeSource",void 0),or(this,"trimmedIndexesChanged",!1),or(this,"hiddenIndexesChanged",!1),or(this,"renderablePhysicalIndexesCache",[]),or(this,"fromPhysicalToVisualIndexesCache",new Map),or(this,"fromVisualToRenderableIndexesCache",new Map),this.indexesSequence.addLocalHook("change",()=>{this.indexesSequenceChanged=!0,this.updateCache(),this.runLocalHooks("indexesSequenceChange",this.indexesChangeSource),this.runLocalHooks("change",this.indexesSequence,null)}),this.trimmingMapsCollection.addLocalHook("change",t=>{this.trimmedIndexesChanged=!0,this.updateCache(),this.runLocalHooks("change",t,this.trimmingMapsCollection)}),this.hidingMapsCollection.addLocalHook("change",t=>{this.hiddenIndexesChanged=!0,this.updateCache(),this.runLocalHooks("change",t,this.hidingMapsCollection)}),this.variousMapsCollection.addLocalHook("change",t=>{this.runLocalHooks("change",t,this.variousMapsCollection)})}suspendOperations(){this.isBatched=!0}resumeOperations(){this.isBatched=!1,this.updateCache()}createChangesObserver(t){if("hiding"!==t)throw new Error(`Unsupported index map type "${t}".`);return this.hidingChangesObservable.createObserver()}createAndRegisterIndexMap(t,e,n){return this.registerMap(t,function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Di.has(t))throw new Error(`The provided map type ("${t}") does not exist.`);return new(Di.get(t))(e)}(e,n))}registerMap(t,e){if(this.trimmingMapsCollection.get(t)||this.hidingMapsCollection.get(t)||this.variousMapsCollection.get(t))throw Error(`Map with name "${t}" has been already registered.`);e instanceof Hi.a?this.trimmingMapsCollection.register(t,e):e instanceof ki.a?this.hidingMapsCollection.register(t,e):this.variousMapsCollection.register(t,e);const n=this.getNumberOfIndexes();return n>0&&e.init(n),e}unregisterMap(t){this.trimmingMapsCollection.unregister(t),this.hidingMapsCollection.unregister(t),this.variousMapsCollection.unregister(t)}unregisterAll(){this.trimmingMapsCollection.unregisterAll(),this.hidingMapsCollection.unregisterAll(),this.variousMapsCollection.unregisterAll()}getPhysicalFromVisualIndex(t){const e=this.notTrimmedIndexesCache[t];return Object(a.b)(e)?e:null}getPhysicalFromRenderableIndex(t){const e=this.renderablePhysicalIndexesCache[t];return Object(a.b)(e)?e:null}getVisualFromPhysicalIndex(t){const e=this.fromPhysicalToVisualIndexesCache.get(t);return Object(a.b)(e)?e:null}getVisualFromRenderableIndex(t){return this.getVisualFromPhysicalIndex(this.getPhysicalFromRenderableIndex(t))}getRenderableFromVisualIndex(t){const e=this.fromVisualToRenderableIndexesCache.get(t);return Object(a.b)(e)?e:null}getNearestNotHiddenIndex(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===this.getPhysicalFromVisualIndex(t))return null;if(this.fromVisualToRenderableIndexesCache.has(t))return t;const i=Array.from(this.fromVisualToRenderableIndexesCache.keys());let r=-1;return r=e>0?i.findIndex(e=>e>t):i.reverse().findIndex(e=>e<t),-1===r?n?this.getNearestNotHiddenIndex(t,-e,!1):null:i[r]}initToLength(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNumberOfIndexes();this.notTrimmedIndexesCache=[...new Array(t).keys()],this.notHiddenIndexesCache=[...new Array(t).keys()],this.suspendOperations(),this.indexesChangeSource="init",this.indexesSequence.init(t),this.indexesChangeSource=void 0,this.trimmingMapsCollection.initEvery(t),this.resumeOperations(),this.suspendOperations(),this.hidingMapsCollection.initEvery(t),this.variousMapsCollection.initEvery(t),this.resumeOperations(),this.runLocalHooks("init")}fitToLength(t){const e=this.getNumberOfIndexes();if(t<e){const e=[...Array(this.getNumberOfIndexes()-t).keys()].map(e=>e+t);this.removeIndexes(e)}else this.insertIndexes(e,t-e)}getIndexesSequence(){return this.indexesSequence.getValues()}setIndexesSequence(t){void 0===this.indexesChangeSource&&(this.indexesChangeSource="update"),this.indexesSequence.setValues(t),"update"===this.indexesChangeSource&&(this.indexesChangeSource=void 0)}getNotTrimmedIndexes(){if(!0===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]))return this.notTrimmedIndexesCache;return this.getIndexesSequence().filter(t=>!1===this.isTrimmed(t))}getNotTrimmedIndexesLength(){return this.getNotTrimmedIndexes().length}getNotHiddenIndexes(){if(!0===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]))return this.notHiddenIndexesCache;return this.getIndexesSequence().filter(t=>!1===this.isHidden(t))}getNotHiddenIndexesLength(){return this.getNotHiddenIndexes().length}getRenderableIndexes(){if(!0===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]))return this.renderablePhysicalIndexesCache;return this.getNotTrimmedIndexes().filter(t=>!1===this.isHidden(t))}getRenderableIndexesLength(){return this.getRenderableIndexes().length}getNumberOfIndexes(){return this.getIndexesSequence().length}moveIndexes(t,e){"number"===typeof t&&(t=[t]);const n=Object(V.c)(t,t=>this.getPhysicalFromVisualIndex(t)),i=this.getNotTrimmedIndexesLength(),r=t.length,o=Object(Pi.b)(this.getIndexesSequence(),n),s=o.filter(t=>!1===this.isTrimmed(t));let a=o.indexOf(s[s.length-1])+1;if(e+r<i){const t=s[e];a=o.indexOf(t)}this.indexesChangeSource="move",this.setIndexesSequence(Object(Pi.a)(o,a,n)),this.indexesChangeSource=void 0}isTrimmed(t){return this.trimmingMapsCollection.getMergedValueAtIndex(t)}isHidden(t){return this.hidingMapsCollection.getMergedValueAtIndex(t)}insertIndexes(t,e){const n=this.getNotTrimmedIndexes()[t],i=Object(a.b)(n)?n:this.getNumberOfIndexes(),r=this.getIndexesSequence().includes(n)?this.getIndexesSequence().indexOf(n):this.getNumberOfIndexes(),o=Object(V.c)(new Array(e).fill(i),(t,e)=>t+e);this.suspendOperations(),this.indexesChangeSource="insert",this.indexesSequence.insert(r,o),this.indexesChangeSource=void 0,this.trimmingMapsCollection.insertToEvery(r,o),this.hidingMapsCollection.insertToEvery(r,o),this.variousMapsCollection.insertToEvery(r,o),this.resumeOperations()}removeIndexes(t){this.suspendOperations(),this.indexesChangeSource="remove",this.indexesSequence.remove(t),this.indexesChangeSource=void 0,this.trimmingMapsCollection.removeFromEvery(t),this.hidingMapsCollection.removeFromEvery(t),this.variousMapsCollection.removeFromEvery(t),this.resumeOperations()}updateCache(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=this.indexesSequenceChanged||this.trimmedIndexesChanged||this.hiddenIndexesChanged;(!0===t||!1===this.isBatched&&!0===e)&&(this.trimmingMapsCollection.updateCache(),this.hidingMapsCollection.updateCache(),this.notTrimmedIndexesCache=this.getNotTrimmedIndexes(!1),this.notHiddenIndexesCache=this.getNotHiddenIndexes(!1),this.renderablePhysicalIndexesCache=this.getRenderableIndexes(!1),this.cacheFromPhysicalToVisualIndexes(),this.cacheFromVisualToRenderableIndexes(),this.hiddenIndexesChanged&&this.hidingChangesObservable.emit(this.hidingMapsCollection.getMergedValues()),this.runLocalHooks("cacheUpdated",{indexesSequenceChanged:this.indexesSequenceChanged,trimmedIndexesChanged:this.trimmedIndexesChanged,hiddenIndexesChanged:this.hiddenIndexesChanged}),this.indexesSequenceChanged=!1,this.trimmedIndexesChanged=!1,this.hiddenIndexesChanged=!1)}cacheFromPhysicalToVisualIndexes(){const t=this.getNotTrimmedIndexesLength();this.fromPhysicalToVisualIndexesCache.clear();for(let e=0;e<t;e+=1){const t=this.getPhysicalFromVisualIndex(e);this.fromPhysicalToVisualIndexesCache.set(t,e)}}cacheFromVisualToRenderableIndexes(){const t=this.getRenderableIndexesLength();this.fromVisualToRenderableIndexesCache.clear();for(let e=0;e<t;e+=1){const t=this.getPhysicalFromRenderableIndex(e),n=this.getVisualFromPhysicalIndex(t);this.fromVisualToRenderableIndexesCache.set(n,e)}}}Object(S.n)(sr,Li.a);var ar=n(7);function lr(t){const e=/^([a-zA-Z]{2})-([a-zA-Z]{2})$/.exec(t);return e?`${e[1].toLowerCase()}-${e[2].toUpperCase()}`:t}function cr(t){Object(a.b)(t)&&Object(O.a)(xt.a`Language with code "${t}" was not found. You should register particular language\x20
    before using it. Read more about this issue at: https://docs.handsontable.com/i18n/missing-language-code.`)}var ur=n(24);const{register:hr,getValues:dr}=Object(ur.a)("phraseFormatters");hr("pluralize",(function(t,e){return Array.isArray(t)&&Number.isInteger(e)?t[e]:t}));var fr=n(3);var gr={languageCode:"en-US",[fr.CONTEXTMENU_ITEMS_NO_ITEMS]:"No available options",[fr.CONTEXTMENU_ITEMS_ROW_ABOVE]:"Insert row above",[fr.CONTEXTMENU_ITEMS_ROW_BELOW]:"Insert row below",[fr.CONTEXTMENU_ITEMS_INSERT_LEFT]:"Insert column left",[fr.CONTEXTMENU_ITEMS_INSERT_RIGHT]:"Insert column right",[fr.CONTEXTMENU_ITEMS_REMOVE_ROW]:["Remove row","Remove rows"],[fr.CONTEXTMENU_ITEMS_REMOVE_COLUMN]:["Remove column","Remove columns"],[fr.CONTEXTMENU_ITEMS_UNDO]:"Undo",[fr.CONTEXTMENU_ITEMS_REDO]:"Redo",[fr.CONTEXTMENU_ITEMS_READ_ONLY]:"Read only",[fr.CONTEXTMENU_ITEMS_CLEAR_COLUMN]:"Clear column",[fr.CONTEXTMENU_ITEMS_ALIGNMENT]:"Alignment",[fr.CONTEXTMENU_ITEMS_ALIGNMENT_LEFT]:"Left",[fr.CONTEXTMENU_ITEMS_ALIGNMENT_CENTER]:"Center",[fr.CONTEXTMENU_ITEMS_ALIGNMENT_RIGHT]:"Right",[fr.CONTEXTMENU_ITEMS_ALIGNMENT_JUSTIFY]:"Justify",[fr.CONTEXTMENU_ITEMS_ALIGNMENT_TOP]:"Top",[fr.CONTEXTMENU_ITEMS_ALIGNMENT_MIDDLE]:"Middle",[fr.CONTEXTMENU_ITEMS_ALIGNMENT_BOTTOM]:"Bottom",[fr.CONTEXTMENU_ITEMS_FREEZE_COLUMN]:"Freeze column",[fr.CONTEXTMENU_ITEMS_UNFREEZE_COLUMN]:"Unfreeze column",[fr.CONTEXTMENU_ITEMS_BORDERS]:"Borders",[fr.CONTEXTMENU_ITEMS_BORDERS_TOP]:"Top",[fr.CONTEXTMENU_ITEMS_BORDERS_RIGHT]:"Right",[fr.CONTEXTMENU_ITEMS_BORDERS_BOTTOM]:"Bottom",[fr.CONTEXTMENU_ITEMS_BORDERS_LEFT]:"Left",[fr.CONTEXTMENU_ITEMS_REMOVE_BORDERS]:"Remove border(s)",[fr.CONTEXTMENU_ITEMS_ADD_COMMENT]:"Add comment",[fr.CONTEXTMENU_ITEMS_EDIT_COMMENT]:"Edit comment",[fr.CONTEXTMENU_ITEMS_REMOVE_COMMENT]:"Delete comment",[fr.CONTEXTMENU_ITEMS_READ_ONLY_COMMENT]:"Read-only comment",[fr.CONTEXTMENU_ITEMS_MERGE_CELLS]:"Merge cells",[fr.CONTEXTMENU_ITEMS_UNMERGE_CELLS]:"Unmerge cells",[fr.CONTEXTMENU_ITEMS_COPY]:"Copy",[fr.CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_HEADERS]:["Copy with header","Copy with headers"],[fr.CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_GROUP_HEADERS]:["Copy with group header","Copy with group headers"],[fr.CONTEXTMENU_ITEMS_COPY_COLUMN_HEADERS_ONLY]:["Copy header only","Copy headers only"],[fr.CONTEXTMENU_ITEMS_CUT]:"Cut",[fr.CONTEXTMENU_ITEMS_NESTED_ROWS_INSERT_CHILD]:"Insert child row",[fr.CONTEXTMENU_ITEMS_NESTED_ROWS_DETACH_CHILD]:"Detach from parent",[fr.CONTEXTMENU_ITEMS_HIDE_COLUMN]:["Hide column","Hide columns"],[fr.CONTEXTMENU_ITEMS_SHOW_COLUMN]:["Show column","Show columns"],[fr.CONTEXTMENU_ITEMS_HIDE_ROW]:["Hide row","Hide rows"],[fr.CONTEXTMENU_ITEMS_SHOW_ROW]:["Show row","Show rows"],[fr.FILTERS_CONDITIONS_NONE]:"None",[fr.FILTERS_CONDITIONS_EMPTY]:"Is empty",[fr.FILTERS_CONDITIONS_NOT_EMPTY]:"Is not empty",[fr.FILTERS_CONDITIONS_EQUAL]:"Is equal to",[fr.FILTERS_CONDITIONS_NOT_EQUAL]:"Is not equal to",[fr.FILTERS_CONDITIONS_BEGINS_WITH]:"Begins with",[fr.FILTERS_CONDITIONS_ENDS_WITH]:"Ends with",[fr.FILTERS_CONDITIONS_CONTAINS]:"Contains",[fr.FILTERS_CONDITIONS_NOT_CONTAIN]:"Does not contain",[fr.FILTERS_CONDITIONS_GREATER_THAN]:"Greater than",[fr.FILTERS_CONDITIONS_GREATER_THAN_OR_EQUAL]:"Greater than or equal to",[fr.FILTERS_CONDITIONS_LESS_THAN]:"Less than",[fr.FILTERS_CONDITIONS_LESS_THAN_OR_EQUAL]:"Less than or equal to",[fr.FILTERS_CONDITIONS_BETWEEN]:"Is between",[fr.FILTERS_CONDITIONS_NOT_BETWEEN]:"Is not between",[fr.FILTERS_CONDITIONS_AFTER]:"After",[fr.FILTERS_CONDITIONS_BEFORE]:"Before",[fr.FILTERS_CONDITIONS_TODAY]:"Today",[fr.FILTERS_CONDITIONS_TOMORROW]:"Tomorrow",[fr.FILTERS_CONDITIONS_YESTERDAY]:"Yesterday",[fr.FILTERS_VALUES_BLANK_CELLS]:"Blank cells",[fr.FILTERS_DIVS_FILTER_BY_CONDITION]:"Filter by condition",[fr.FILTERS_DIVS_FILTER_BY_VALUE]:"Filter by value",[fr.FILTERS_LABELS_CONJUNCTION]:"And",[fr.FILTERS_LABELS_DISJUNCTION]:"Or",[fr.FILTERS_BUTTONS_SELECT_ALL]:"Select all",[fr.FILTERS_BUTTONS_CLEAR]:"Clear",[fr.FILTERS_BUTTONS_OK]:"OK",[fr.FILTERS_BUTTONS_CANCEL]:"Cancel",[fr.FILTERS_BUTTONS_PLACEHOLDER_SEARCH]:"Search",[fr.FILTERS_BUTTONS_PLACEHOLDER_VALUE]:"Value",[fr.FILTERS_BUTTONS_PLACEHOLDER_SECOND_VALUE]:"Second value",[fr.CHECKBOX_CHECKED]:"Checked",[fr.CHECKBOX_UNCHECKED]:"Unchecked"};const pr=fr,mr=gr.languageCode,{register:br,getItem:yr,hasItem:wr,getValues:vr}=Object(ur.a)("languagesDictionaries");function Cr(t,e){let n=t,i=e;return Object(S.l)(t)&&(i=t,n=i.languageCode),function(t,e){t!==mr&&(n=e,i=yr(mr),Object(S.o)(i,(t,e)=>{Object(a.e)(n[e])&&(n[e]=t)}));var n,i}(n,i),br(n,Object(S.c)(i)),Object(S.c)(i)}function Sr(t){return Or(t)?Object(S.c)(yr(t)):null}function Or(t){return wr(t)}function Tr(t,e,n){const i=Sr(t);if(null===i)return null;const r=i[e];if(Object(a.e)(r))return null;const o=function(t,e){let n=t;return Object(V.a)(function(){return dr()}(),i=>{n=i(t,e)}),n}(r,n);return Array.isArray(o)?o[0]:o}function _r(t){let e=lr(t);return Or(e)||(e=mr,cr(t)),e}Cr(gr);var Er=n(236);class Rr{constructor(t,e){this.settings=t,this.cellRange=e||null}isEmpty(){return null===this.cellRange}add(t){return this.isEmpty()?this.cellRange=this.settings.createCellRange(t):this.cellRange.expand(t),this}replace(t,e){if(!this.isEmpty()){if(this.cellRange.from.isEqual(t))return this.cellRange.from=e,!0;if(this.cellRange.to.isEqual(t))return this.cellRange.to=e,!0}return!1}clear(){return this.cellRange=null,this}getCorners(){const t=this.cellRange.getOuterTopStartCorner(),e=this.cellRange.getOuterBottomEndCorner();return[t.row,t.col,e.row,e.col]}destroy(){this.runLocalHooks("destroy")}}Object(S.n)(Rr,Li.a);var Mr=Rr;function xr(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ir=class extends Mr{constructor(t,e){super(t,null),xr(this,"visualCellRange",null),this.visualCellRange=e||null,this.commit()}add(t){return null===this.visualCellRange?this.visualCellRange=this.settings.createCellRange(t):this.visualCellRange.expand(t),this}clear(){return this.visualCellRange=null,super.clear()}trimToVisibleCellsRangeOnly(t){let{from:e,to:n}=t,i=this.getNearestNotHiddenCoords(e,1),r=this.getNearestNotHiddenCoords(n,-1);return null===i||null===r?null:((i.row>r.row||i.col>r.col)&&(i=e,r=n),this.settings.createCellRange(i,i,r))}getNearestNotHiddenCoords(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;const i=this.getNearestNotHiddenIndex(this.settings.rowIndexMapper,t.row,e);if(null===i)return null;const r=this.getNearestNotHiddenIndex(this.settings.columnIndexMapper,t.col,n);return null===r?null:this.settings.createCellCoords(i,r)}getNearestNotHiddenIndex(t,e,n){return e<0?e:t.getNearestNotHiddenIndex(e,n)}commit(){if(null===this.visualCellRange)return this;const t=this.trimToVisibleCellsRangeOnly(this.visualCellRange);return this.cellRange=null===t?null:this.createRenderableCellRange(t.from,t.to),this}syncWith(t){const e=t.from.clone().normalize(),n="N-S"===t.getVerticalDirection()?1:-1,i="W-E"===t.getHorizontalDirection()?1:-1,r=this.settings.visualToRenderableCoords(this.visualCellRange.highlight);let o=null;if(null!==r&&null!==r.col&&null!==r.row||(o=this.getNearestNotHiddenCoords(e,n,i)),null!==o&&t.overlaps(o)){const e=t.highlight.clone();if(e.row>=0&&(e.row=o.row),e.col>=0&&(e.col=o.col),null===this.cellRange){const t=this.settings.visualToRenderableCoords(e);this.cellRange=this.settings.createCellRange(t)}t.setHighlight(e)}return"focus"===this.settings.selectionType&&null!==r&&null===o&&t.setHighlight(this.visualCellRange.highlight),this}getCorners(){const{from:t,to:e}=this.cellRange;return[Math.min(t.row,e.row),Math.min(t.col,e.col),Math.max(t.row,e.row),Math.max(t.col,e.col)]}getVisualCorners(){const t=this.settings.renderableToVisualCoords(this.cellRange.getTopStartCorner()),e=this.settings.renderableToVisualCoords(this.cellRange.getBottomEndCorner());return[t.row,t.col,e.row,e.col]}createRenderableCellRange(t,e){const n=this.settings.visualToRenderableCoords(t),i=this.settings.visualToRenderableCoords(e);return null===n.row||null===n.col||null===i.row||null===i.col?null:this.settings.createCellRange(n,n,i)}};function kr(t){let{activeHeaderClassName:e,...n}=t;return new Ir({className:e,...n,selectionType:Er.a})}function Ar(t){let{areaCornerVisible:e,...n}=t;return new Ir({className:"area",createLayers:!0,border:{width:1,color:"#4b89ff",cornerVisible:e},...n,selectionType:Er.b})}function Nr(t){let{...e}=t;return new Ir({className:"highlight",...e,selectionType:Er.b})}function jr(t){let{columnClassName:e,...n}=t;return new Ir({className:e,...n,selectionType:Er.c})}function Hr(t){let{headerClassName:e,...n}=t;return new Ir({className:e,...n,selectionType:Er.g})}function Dr(t){let{rowClassName:e,...n}=t;return new Ir({className:e,...n,selectionType:Er.h})}function Pr(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function Lr(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fr(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Br=new WeakSet;class Vr{constructor(t){Pr(this,Br),Lr(this,"options",void 0),Lr(this,"layerLevel",0),Lr(this,"focus",void 0),Lr(this,"fill",void 0),Lr(this,"layeredAreas",new Map),Lr(this,"areas",new Map),Lr(this,"rowHeaders",new Map),Lr(this,"columnHeaders",new Map),Lr(this,"activeRowHeaders",new Map),Lr(this,"activeColumnHeaders",new Map),Lr(this,"activeCornerHeaders",new Map),Lr(this,"rowHighlights",new Map),Lr(this,"columnHighlights",new Map),Lr(this,"customSelections",[]),this.options=t,this.focus=function(t){let{cellCornerVisible:e,...n}=t;return new Ir({className:"current",headerAttributes:[Object(_t.I)()],border:{width:2,color:"#4b89ff",cornerVisible:e},...n,selectionType:Er.f})}(t),this.fill=function(t){let{...e}=t;return new Ir({className:"fill",border:{width:1,color:"#ff0000"},...e,selectionType:Er.e})}(t)}isEnabledFor(t,e){let n=t;t===Er.f&&(n="current");let i=this.options.disabledCellSelection(e.row,e.col);return"string"===typeof i&&(i=[i]),!1===i||Array.isArray(i)&&!i.includes(n)}useLayerLevel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.layerLevel=t,this}getFocus(){return this.focus}getFill(){return this.fill}createLayeredArea(){return Fr(Br,this,Ur).call(this,this.layeredAreas,Ar)}getLayeredAreas(){return[...this.layeredAreas.values()]}createArea(){return Fr(Br,this,Ur).call(this,this.areas,Nr)}getAreas(){return[...this.areas.values()]}createRowHeader(){return Fr(Br,this,Ur).call(this,this.rowHeaders,Hr)}getRowHeaders(){return[...this.rowHeaders.values()]}createColumnHeader(){return Fr(Br,this,Ur).call(this,this.columnHeaders,Hr)}getColumnHeaders(){return[...this.columnHeaders.values()]}createActiveRowHeader(){return Fr(Br,this,Ur).call(this,this.activeRowHeaders,kr)}getActiveRowHeaders(){return[...this.activeRowHeaders.values()]}createActiveColumnHeader(){return Fr(Br,this,Ur).call(this,this.activeColumnHeaders,kr)}getActiveColumnHeaders(){return[...this.activeColumnHeaders.values()]}createActiveCornerHeader(){return Fr(Br,this,Ur).call(this,this.activeCornerHeaders,kr)}getActiveCornerHeaders(){return[...this.activeCornerHeaders.values()]}createRowHighlight(){return Fr(Br,this,Ur).call(this,this.rowHighlights,Dr)}getRowHighlights(){return[...this.rowHighlights.values()]}createColumnHighlight(){return Fr(Br,this,Ur).call(this,this.columnHighlights,jr)}getColumnHighlights(){return[...this.columnHighlights.values()]}getCustomSelections(){return[...this.customSelections.values()]}addCustomSelection(t){this.customSelections.push(function(t){let{border:e,visualCellRange:n,...i}=t;return new Ir({...e,...i,selectionType:Er.d},n)}({...this.options,...t}))}clear(){this.focus.clear(),this.fill.clear(),Object(V.a)(this.areas.values(),t=>{t.clear()}),Object(V.a)(this.layeredAreas.values(),t=>{t.clear()}),Object(V.a)(this.rowHeaders.values(),t=>{t.clear()}),Object(V.a)(this.columnHeaders.values(),t=>{t.clear()}),Object(V.a)(this.activeRowHeaders.values(),t=>{t.clear()}),Object(V.a)(this.activeColumnHeaders.values(),t=>{t.clear()}),Object(V.a)(this.activeCornerHeaders.values(),t=>{t.clear()}),Object(V.a)(this.rowHighlights.values(),t=>{t.clear()}),Object(V.a)(this.columnHighlights.values(),t=>{t.clear()})}[Symbol.iterator](){return[this.focus,this.fill,...this.areas.values(),...this.layeredAreas.values(),...this.rowHeaders.values(),...this.columnHeaders.values(),...this.activeRowHeaders.values(),...this.activeColumnHeaders.values(),...this.activeCornerHeaders.values(),...this.rowHighlights.values(),...this.columnHighlights.values(),...this.customSelections][Symbol.iterator]()}}function Ur(t,e){const n=this.layerLevel;if(t.has(n))return t.get(n);const i=e({layerLevel:n,...this.options});return t.set(n,i),i}var Wr=Vr;function zr(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Yr{constructor(t){zr(this,"ranges",[]),zr(this,"createCellRange",void 0),this.createCellRange=t}isEmpty(){return 0===this.size()}set(t){return this.clear(),this.ranges.push(this.createCellRange(t)),this}add(t){return this.ranges.push(this.createCellRange(t)),this}pop(){return this.ranges.pop(),this}current(){return this.peekByIndex(this.size()-1)}previous(){return this.peekByIndex(this.size()-2)}includes(t){return this.ranges.some(e=>e.includes(t))}clear(){return this.ranges.length=0,this}size(){return this.ranges.length}peekByIndex(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e>=0&&e<this.size()&&(t=this.ranges[e]),t}[Symbol.iterator](){return this.ranges[Symbol.iterator]()}}var Gr=Yr;function $r(t,e,n){Kr(t,e),e.set(t,n)}function Kr(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Xr(t,e){return t.get(Qr(t,e))}function qr(t,e,n){return t.set(Qr(t,e),n),n}function Qr(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Zr=new WeakMap,Jr=new WeakMap,to=new WeakMap,eo=new WeakSet;class no{constructor(t,e){var n,i;Kr(n=this,i=eo),i.add(n),$r(this,Zr,void 0),$r(this,Jr,void 0),$r(this,to,{x:0,y:0}),qr(Zr,this,t),qr(Jr,this,e)}transformStart(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=Xr(Jr,this).createCellCoords(t,e);let r=Xr(Zr,this).current().highlight;const o=Xr(Jr,this).visualToRenderableCoords(r);let s=0,a=0;if(this.runLocalHooks("beforeTransformStart",i),null!==o.row&&null!==o.col){const{width:t,height:e}=Qr(eo,this,ro).call(this),{row:o,col:l}=Qr(eo,this,ao).call(this,r),c=Xr(Jr,this).fixedRowsBottom(),u=Xr(Jr,this).minSpareRows(),h=Xr(Jr,this).minSpareCols(),d=Xr(Jr,this).autoWrapRow(),f=Xr(Jr,this).autoWrapCol(),g=Xr(Jr,this).createCellCoords(o+i.row,l+i.col);if(g.row>=e){const i=Object(S.b)(n&&u>0&&0===c),r=g.col+1,o=Xr(Jr,this).createCellCoords(g.row-e,r>=t?r-t:r);this.runLocalHooks("beforeColumnWrap",i,Qr(eo,this,lo).call(this,o),r>=t),i.value?this.runLocalHooks("insertRowRequire",Xr(Jr,this).countRenderableRows()):f&&g.assign(o)}else if(g.row<0){const n=Object(S.b)(f),i=g.col-1,r=Xr(Jr,this).createCellCoords(e+g.row,i<0?t+i:i);this.runLocalHooks("beforeColumnWrap",n,Qr(eo,this,lo).call(this,r),i<0),f&&g.assign(r)}if(g.col>=t){const i=Object(S.b)(n&&h>0),r=g.row+1,o=Xr(Jr,this).createCellCoords(r>=e?r-e:r,g.col-t);this.runLocalHooks("beforeRowWrap",i,Qr(eo,this,lo).call(this,o),r>=e),i.value?this.runLocalHooks("insertColRequire",Xr(Jr,this).countRenderableColumns()):d&&g.assign(o)}else if(g.col<0){const n=Object(S.b)(d),i=g.row-1,r=Xr(Jr,this).createCellCoords(i<0?e+i:i,t+g.col);this.runLocalHooks("beforeRowWrap",n,Qr(eo,this,lo).call(this,r),i<0),d&&g.assign(r)}const{rowDir:p,colDir:m}=Qr(eo,this,io).call(this,g);s=p,a=m,r=Qr(eo,this,lo).call(this,g)}return this.runLocalHooks("afterTransformStart",r,s,a),r}transformEnd(t,e){const n=Xr(Jr,this).createCellCoords(t,e),i=Xr(Zr,this).current(),r=Xr(Jr,this).visualToRenderableCoords(i.highlight),o=Qr(eo,this,oo).call(this,i.to.row,i.from.row),s=Qr(eo,this,so).call(this,i.to.col,i.from.col),a=i.to.clone();let l=0,c=0;if(this.runLocalHooks("beforeTransformEnd",n),null!==r.row&&null!==r.col&&null!==o&&null!==s){const{row:t,col:e}=Qr(eo,this,ao).call(this,i.highlight),r=Xr(Jr,this).createCellCoords(o+n.row,s+n.col),u=i.getTopStartCorner(),h=i.getTopEndCorner(),d=i.getBottomEndCorner();if(n.col<0&&s>=e&&r.col<e){const t=r.col-e;r.col=Qr(eo,this,so).call(this,u.col,h.col)+t}else if(n.col>0&&s<=e&&r.col>e){const t=Qr(eo,this,so).call(this,h.col,u.col),e=Math.max(r.col-t,1);r.col=t+e}if(n.row<0&&o>=t&&r.row<t){const e=r.row-t;r.row=Qr(eo,this,oo).call(this,u.row,d.row)+e}else if(n.row>0&&o<=t&&r.row>t){const t=Qr(eo,this,oo).call(this,d.row,u.row),e=Math.max(r.row-t,1);r.row=t+e}const{rowDir:f,colDir:g}=Qr(eo,this,io).call(this,r);l=f,c=g;const p=Qr(eo,this,lo).call(this,r);0===n.row&&0!==n.col?a.col=p.col:0!==n.row&&0===n.col?a.row=p.row:(a.row=p.row,a.col=p.col)}return this.runLocalHooks("afterTransformEnd",a,l,c),a}setOffsetSize(t){let{x:e,y:n}=t;qr(to,this,{x:e,y:n})}resetOffsetSize(){qr(to,this,{x:0,y:0})}}function io(t){const{width:e,height:n}=Qr(eo,this,ro).call(this);let i=0,r=0;return t.row<0?(i=-1,t.row=0):t.row>0&&t.row>=n&&(i=1,t.row=n-1),t.col<0?(r=-1,t.col=0):t.col>0&&t.col>=e&&(r=1,t.col=e-1),{rowDir:i,colDir:r}}function ro(){return{width:Xr(to,this).x+Xr(Jr,this).countRenderableColumns(),height:Xr(to,this).y+Xr(Jr,this).countRenderableRows()}}function oo(t,e){const n=Xr(Jr,this).findFirstNonHiddenRenderableRow(t,e);return null===n?null:Xr(to,this).y+n}function so(t,e){const n=Xr(Jr,this).findFirstNonHiddenRenderableColumn(t,e);return null===n?null:Xr(to,this).x+n}function ao(t){const{row:e,col:n}=Xr(Jr,this).visualToRenderableCoords(t);if(null===e||null===n)throw new Error("Renderable coords are not visible.");return Xr(Jr,this).createCellCoords(Xr(to,this).y+e,Xr(to,this).x+n)}function lo(t){const e=t.clone();return e.col=t.col-Xr(to,this).x,e.row=t.row-Xr(to,this).y,Xr(Jr,this).renderableToVisualCoords(e)}Object(S.n)(no,Li.a);var co=no,uo=n(38);function ho(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function fo(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function go(t,e){return t.get(mo(t,e))}function po(t,e,n){return t.set(mo(t,e),n),n}function mo(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var bo=new WeakMap,yo=new WeakMap,wo=new WeakMap,vo=new WeakMap,Co=new WeakMap,So=new WeakMap;class Oo{constructor(t,e){var n=this;fo(this,"settings",void 0),fo(this,"tableProps",void 0),fo(this,"inProgress",!1),fo(this,"selectedRange",new Gr((t,e,n)=>this.tableProps.createCellRange(t,e,n))),fo(this,"highlight",void 0),ho(this,bo,void 0),ho(this,yo,void 0),fo(this,"selectedByRowHeader",new Set),fo(this,"selectedByColumnHeader",new Set),ho(this,wo,!1),ho(this,vo,!1),ho(this,Co,"unknown"),ho(this,So,-1),this.settings=t,this.tableProps=e,this.highlight=new Wr({headerClassName:t.currentHeaderClassName,activeHeaderClassName:t.activeHeaderClassName,rowClassName:t.currentRowClassName,columnClassName:t.currentColClassName,cellAttributes:[Object(_t.I)()],rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,disabledCellSelection:(t,e)=>this.tableProps.isDisabledCellSelection(t,e),cellCornerVisible:function(){return n.isCellCornerVisible(...arguments)},areaCornerVisible:function(){return n.isAreaCornerVisible(...arguments)},visualToRenderableCoords:t=>this.tableProps.visualToRenderableCoords(t),renderableToVisualCoords:t=>this.tableProps.renderableToVisualCoords(t),createCellCoords:(t,e)=>this.tableProps.createCellCoords(t,e),createCellRange:(t,e,n)=>this.tableProps.createCellRange(t,e,n)}),po(bo,this,new co(this.selectedRange,{rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,countRenderableRows:()=>this.tableProps.countRenderableRows(),countRenderableColumns:()=>this.tableProps.countRenderableColumns(),visualToRenderableCoords:t=>this.tableProps.visualToRenderableCoords(t),renderableToVisualCoords:t=>this.tableProps.renderableToVisualCoords(t),findFirstNonHiddenRenderableRow:function(){return n.tableProps.findFirstNonHiddenRenderableRow(...arguments)},findFirstNonHiddenRenderableColumn:function(){return n.tableProps.findFirstNonHiddenRenderableColumn(...arguments)},createCellCoords:(t,e)=>this.tableProps.createCellCoords(t,e),fixedRowsBottom:()=>t.fixedRowsBottom,minSpareRows:()=>t.minSpareRows,minSpareCols:()=>t.minSpareCols,autoWrapRow:()=>t.autoWrapRow,autoWrapCol:()=>t.autoWrapCol})),po(yo,this,new co(this.selectedRange,{rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,countRenderableRows:()=>{const t=this.selectedRange.current();return this.tableProps.countRenderableRowsInRange(0,t.getOuterBottomEndCorner().row)},countRenderableColumns:()=>{const t=this.selectedRange.current();return this.tableProps.countRenderableColumnsInRange(0,t.getOuterBottomEndCorner().col)},visualToRenderableCoords:t=>this.tableProps.visualToRenderableCoords(t),renderableToVisualCoords:t=>this.tableProps.renderableToVisualCoords(t),findFirstNonHiddenRenderableRow:function(){return n.tableProps.findFirstNonHiddenRenderableRow(...arguments)},findFirstNonHiddenRenderableColumn:function(){return n.tableProps.findFirstNonHiddenRenderableColumn(...arguments)},createCellCoords:(t,e)=>this.tableProps.createCellCoords(t,e),fixedRowsBottom:()=>0,minSpareRows:()=>0,minSpareCols:()=>0,autoWrapRow:()=>!0,autoWrapCol:()=>!0})),go(bo,this).addLocalHook("beforeTransformStart",(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.runLocalHooks("beforeModifyTransformStart",...e)})),go(bo,this).addLocalHook("afterTransformStart",(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.runLocalHooks("afterModifyTransformStart",...e)})),go(bo,this).addLocalHook("beforeTransformEnd",(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.runLocalHooks("beforeModifyTransformEnd",...e)})),go(bo,this).addLocalHook("afterTransformEnd",(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.runLocalHooks("afterModifyTransformEnd",...e)})),go(bo,this).addLocalHook("insertRowRequire",(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.runLocalHooks("insertRowRequire",...e)})),go(bo,this).addLocalHook("insertColRequire",(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.runLocalHooks("insertColRequire",...e)})),go(bo,this).addLocalHook("beforeRowWrap",(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.runLocalHooks("beforeRowWrap",...e)})),go(bo,this).addLocalHook("beforeColumnWrap",(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.runLocalHooks("beforeColumnWrap",...e)})),go(yo,this).addLocalHook("beforeTransformStart",(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.runLocalHooks("beforeModifyTransformFocus",...e)})),go(yo,this).addLocalHook("afterTransformStart",(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.runLocalHooks("afterModifyTransformFocus",...e)}))}getSelectedRange(){return this.selectedRange}markSource(t){po(Co,this,t)}markEndSource(){po(Co,this,"unknown")}getSelectionSource(){return go(Co,this)}setExpectedLayers(t){po(So,this,t)}begin(){this.inProgress=!0}finish(){this.runLocalHooks("afterSelectionFinished",Array.from(this.selectedRange)),this.inProgress=!1,po(So,this,-1)}isInProgress(){return this.inProgress}setRangeStart(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t;const r="multiple"===this.settings.selectionMode,o=Object(a.e)(e)?this.tableProps.getShortcutManager().isCtrlPressed():e,s=t.clone();po(wo,this,!1),this.runLocalHooks("beforeSetRangeStart"+(n?"Only":""),s),(!r||r&&!o&&Object(a.e)(e))&&this.selectedRange.clear(),this.selectedRange.add(s).current().setHighlight(i.clone()),0===this.getLayerLevel()&&(this.selectedByRowHeader.clear(),this.selectedByColumnHeader.clear()),n||this.setRangeEnd(t)}setRangeStartOnly(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;this.setRangeStart(t,e,!0,n)}setRangeEnd(t){if(this.selectedRange.isEmpty())return;const e=t.clone(),n=this.tableProps.countRows(),i=this.tableProps.countCols(),r=this.selectedRange.current().clone().setTo(t).isSingleHeader();if((n>0||i>0)&&(0===n&&e.col<0&&!r||0===i&&e.row<0&&!r))return;this.runLocalHooks("beforeSetRangeEnd",e),this.begin();const o=this.selectedRange.current();if(this.settings.navigableHeaders||o.highlight.normalize(),"single"===this.settings.selectionMode)o.setFrom(o.highlight),o.setTo(o.highlight);else{const t=o.getHorizontalDirection(),n=o.getVerticalDirection(),i=this.isMultiple();o.setTo(e),i&&(t!==o.getHorizontalDirection()||1===o.getWidth()&&!o.includes(o.highlight))&&o.from.assign({col:o.highlight.col}),i&&(n!==o.getVerticalDirection()||1===o.getHeight()&&!o.includes(o.highlight))&&o.from.assign({row:o.highlight.row})}n>0&&i>0&&(!this.settings.navigableHeaders||this.settings.navigableHeaders&&!o.isSingleHeader())&&o.to.normalize(),this.runLocalHooks("beforeHighlightSet"),this.setRangeFocus(this.selectedRange.current().highlight),this.applyAndCommit();const s=-1===go(So,this)||this.selectedRange.size()===go(So,this);this.runLocalHooks("afterSetRangeEnd",t,s)}applyAndCommit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedRange.current(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLayerLevel();const n=this.tableProps.countRows(),i=this.tableProps.countCols();e<this.highlight.layerLevel&&(Object(V.a)(this.highlight.getAreas(),t=>{t.clear()}),Object(V.a)(this.highlight.getLayeredAreas(),t=>{t.clear()}),Object(V.a)(this.highlight.getRowHeaders(),t=>{t.clear()}),Object(V.a)(this.highlight.getColumnHeaders(),t=>{t.clear()}),Object(V.a)(this.highlight.getActiveRowHeaders(),t=>{t.clear()}),Object(V.a)(this.highlight.getActiveColumnHeaders(),t=>{t.clear()}),Object(V.a)(this.highlight.getActiveCornerHeaders(),t=>{t.clear()}),Object(V.a)(this.highlight.getRowHighlights(),t=>{t.clear()}),Object(V.a)(this.highlight.getColumnHighlights(),t=>{t.clear()})),this.highlight.useLayerLevel(e);const r=this.highlight.createArea(),o=this.highlight.createLayeredArea(),s=this.highlight.createRowHeader(),a=this.highlight.createColumnHeader(),l=this.highlight.createActiveRowHeader(),c=this.highlight.createActiveColumnHeader(),u=this.highlight.createActiveCornerHeader(),h=this.highlight.createRowHighlight(),d=this.highlight.createColumnHighlight();if(r.clear(),o.clear(),s.clear(),a.clear(),l.clear(),c.clear(),u.clear(),h.clear(),d.clear(),this.highlight.isEnabledFor(Er.b,t.highlight)&&(this.isMultiple()||e>=1)&&(r.add(t.from).add(t.to).commit(),o.add(t.from).add(t.to).commit(),1===e)){const t=this.selectedRange.previous();this.highlight.useLayerLevel(e-1),this.highlight.createArea().add(t.from).commit().syncWith(t),this.highlight.createLayeredArea().add(t.from).commit().syncWith(t),this.highlight.useLayerLevel(e)}if(this.highlight.isEnabledFor(Er.g,t.highlight)){if(!t.isSingleHeader()){const e=this.tableProps.createCellCoords(Math.max(t.from.row,0),-1),n=this.tableProps.createCellCoords(t.to.row,-1),i=this.tableProps.createCellCoords(-1,Math.max(t.from.col,0)),r=this.tableProps.createCellCoords(-1,t.to.col);"single"===this.settings.selectionMode?(s.add(e).commit(),a.add(i).commit(),h.add(e).commit(),d.add(i).commit()):(s.add(e).add(n).commit(),a.add(i).add(r).commit(),h.add(e).add(n).commit(),d.add(i).add(r).commit())}const e=!go(vo,this)&&this.isEntireRowSelected()&&(i>0&&i===t.getWidth()||0===i&&this.isSelectedByRowHeader()),r=!go(vo,this)&&this.isEntireColumnSelected()&&(n>0&&n===t.getHeight()||0===n&&this.isSelectedByColumnHeader());e&&l.add(this.tableProps.createCellCoords(Math.max(t.from.row,0),Math.min(-this.tableProps.countRowHeaders(),-1))).add(this.tableProps.createCellCoords(Math.max(t.to.row,0),-1)).commit(),r&&c.add(this.tableProps.createCellCoords(Math.min(-this.tableProps.countColHeaders(),-1),Math.max(t.from.col,0))).add(this.tableProps.createCellCoords(-1,Math.max(t.to.col,0))).commit(),e&&r&&u.add(this.tableProps.createCellCoords(-this.tableProps.countColHeaders(),-this.tableProps.countRowHeaders())).add(this.tableProps.createCellCoords(-1,-1)).commit()}}setRangeFocus(t){if(this.selectedRange.isEmpty())return;const e=this.selectedRange.current();this.inProgress||this.runLocalHooks("beforeSetFocus",t);const n=this.highlight.getFocus();n.clear(),e.setHighlight(t),this.inProgress||this.runLocalHooks("beforeHighlightSet"),this.highlight.isEnabledFor(Er.f,e.highlight)&&n.add(e.highlight).commit().syncWith(e),this.inProgress||(po(wo,this,!0),this.runLocalHooks("afterSetFocus",e.highlight))}transformStart(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.settings.navigableHeaders?go(bo,this).setOffsetSize({x:this.tableProps.countRowHeaders(),y:this.tableProps.countColHeaders()}):go(bo,this).resetOffsetSize(),this.setRangeStart(go(bo,this).transformStart(t,e,n))}transformEnd(t,e){this.settings.navigableHeaders?go(bo,this).setOffsetSize({x:this.tableProps.countRowHeaders(),y:this.tableProps.countColHeaders()}):go(bo,this).resetOffsetSize(),this.setRangeEnd(go(bo,this).transformEnd(t,e))}transformFocus(t,e){const n=this.selectedRange.current(),{row:i,col:r}=n.getOuterTopStartCorner(),o=this.tableProps.countRenderableColumnsInRange(0,r-1),s=this.tableProps.countRenderableRowsInRange(0,i-1);n.highlight.isHeader()?go(yo,this).setOffsetSize({x:r<0?Math.abs(r):-o,y:i<0?Math.abs(i):-s}):go(yo,this).setOffsetSize({x:r<0?0:-o,y:i<0?0:-s});const a=go(yo,this).transformStart(t,e);this.setRangeFocus(a.normalize())}shiftRows(t,e){if(!this.isSelected())return;const n=this.selectedRange.current();if(this.isSelectedByCorner())this.selectAll(!0,!0,{disableHeadersHighlight:!0});else if(this.isSelectedByColumnHeader()||n.getOuterTopStartCorner().row>=t){const{from:i,to:r,highlight:o}=n,s=this.tableProps.countRows(),a=this.isSelectedByRowHeader(),l=this.isSelectedByColumnHeader(),c=l?-1:0,u=l?0:e;this.getSelectedRange().pop();const h=this.tableProps.createCellCoords(Object($.a)(i.row+u,c,s-1),i.col),d=this.tableProps.createCellCoords(Object($.a)(r.row+e,c,s-1),r.col);this.markSource("shift"),o.row>=t?this.setRangeStartOnly(h,!0,this.tableProps.createCellCoords(Object($.a)(o.row+e,0,s-1),o.col)):this.setRangeStartOnly(h,!0),a&&this.selectedByRowHeader.add(this.getLayerLevel()),l&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(d),this.markEndSource()}}shiftColumns(t,e){if(!this.isSelected())return;const n=this.selectedRange.current();if(this.isSelectedByCorner())this.selectAll(!0,!0,{disableHeadersHighlight:!0});else if(this.isSelectedByRowHeader()||n.getOuterTopStartCorner().col>=t){const{from:i,to:r,highlight:o}=n,s=this.tableProps.countCols(),a=this.isSelectedByRowHeader(),l=this.isSelectedByColumnHeader(),c=a?-1:0,u=a?0:e;this.getSelectedRange().pop();const h=this.tableProps.createCellCoords(i.row,Object($.a)(i.col+u,c,s-1)),d=this.tableProps.createCellCoords(r.row,Object($.a)(r.col+e,c,s-1));this.markSource("shift"),o.col>=t?this.setRangeStartOnly(h,!0,this.tableProps.createCellCoords(o.row,Object($.a)(o.col+e,0,s-1))):this.setRangeStartOnly(h,!0),a&&this.selectedByRowHeader.add(this.getLayerLevel()),l&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(d),this.markEndSource()}}getLayerLevel(){return this.selectedRange.size()-1}isSelected(){return!this.selectedRange.isEmpty()}isMultiple(){if(!this.isSelected())return!1;const t=Object(S.b)(!this.selectedRange.current().isSingle());return this.runLocalHooks("afterIsMultipleSelection",t),t.value}isFocusSelectionChanged(){return this.isSelected()&&go(wo,this)}isSelectedByRowHeader(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getLayerLevel();return!this.isSelectedByCorner(t)&&(-1===t?this.selectedByRowHeader.size>0:this.selectedByRowHeader.has(t))}isEntireRowSelected(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getLayerLevel();const e=t=>{const{col:e}=t.getOuterTopStartCorner(),n=this.tableProps.countRowHeaders(),i=this.tableProps.countCols();return(n>0&&e<0||0===n)&&t.getWidth()===i};if(-1===t)return Array.from(this.selectedRange).some(t=>e(t));const n=this.selectedRange.peekByIndex(t);return!!n&&e(n)}isSelectedByColumnHeader(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getLayerLevel();return!this.isSelectedByCorner()&&(-1===t?this.selectedByColumnHeader.size>0:this.selectedByColumnHeader.has(t))}isEntireColumnSelected(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getLayerLevel();const e=t=>{const{row:e}=t.getOuterTopStartCorner(),n=this.tableProps.countColHeaders(),i=this.tableProps.countRows();return(n>0&&e<0||0===n)&&t.getHeight()===i};if(-1===t)return Array.from(this.selectedRange).some(t=>e(t));const n=this.selectedRange.peekByIndex(t);return!!n&&e(n)}isSelectedByAnyHeader(){return this.isSelectedByRowHeader(-1)||this.isSelectedByColumnHeader(-1)||this.isSelectedByCorner()}isSelectedByCorner(){return this.selectedByColumnHeader.has(this.getLayerLevel())&&this.selectedByRowHeader.has(this.getLayerLevel())}inInSelection(t){return this.selectedRange.includes(t)}isCellCornerVisible(){return this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&!this.isMultiple()}isCellVisible(t){const e=this.tableProps.visualToRenderableCoords(t);return null!==e.row&&null!==e.col}isAreaCornerVisible(t){return(!Number.isInteger(t)||t===this.getLayerLevel())&&(this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&this.isMultiple())}clear(){this.selectedRange.clear(),this.highlight.clear()}deselect(){this.isSelected()&&(this.inProgress=!1,this.clear(),this.runLocalHooks("afterDeselect"))}selectAll(){var t;let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{focusPosition:!1,disableHeadersHighlight:!1};const r=this.tableProps.countRows(),o=this.tableProps.countCols(),s=this.tableProps.countRowHeaders(),a=this.tableProps.countColHeaders(),l=n?-a:0,c=e?-s:0;if(0===l&&0===c&&(0===r||0===o))return;let u=null===(t=this.getSelectedRange().current())||void 0===t?void 0:t.highlight;const{focusPosition:h,disableHeadersHighlight:d}=i;po(vo,this,d),h&&Number.isInteger(null===h||void 0===h?void 0:h.row)&&Number.isInteger(null===h||void 0===h?void 0:h.col)&&(u=this.tableProps.createCellCoords(Object($.a)(h.row,l,r-1),Object($.a)(h.col,c,o-1)));const f=this.tableProps.createCellCoords(l,c),g=this.tableProps.createCellCoords(r-1,o-1);this.clear(),this.setRangeStartOnly(f,void 0,u),c<0&&this.selectedByRowHeader.add(this.getLayerLevel()),l<0&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(g),this.finish(),po(vo,this,!1)}selectCells(t){var e=this;const n=Object(uo.c)(t);if(n===uo.a)return!1;if(n===uo.b)throw new Error(xt.a`Unsupported format of the selection ranges was passed. To select cells pass\x20
        the coordinates as an array of arrays ([[rowStart, columnStart/columnPropStart, rowEnd,\x20
        columnEnd/columnPropEnd]]) or as an array of CellRange objects.`);const i=Object(uo.d)(n,{createCellCoords:function(){return e.tableProps.createCellCoords(...arguments)},createCellRange:function(){return e.tableProps.createCellRange(...arguments)},propToCol:t=>this.tableProps.propToCol(t),keepDirection:!0}),r=this.settings.navigableHeaders,o={countRows:this.tableProps.countRows(),countCols:this.tableProps.countCols(),countRowHeaders:r?this.tableProps.countRowHeaders():0,countColHeaders:r?this.tableProps.countColHeaders():0},s=!t.some(t=>{const e=i(t),n=e.isValid(o);return!(n&&!e.containsHeaders()||n&&e.containsHeaders()&&e.isSingleHeader())});return s&&(this.clear(),this.setExpectedLayers(t.length),Object(V.a)(t,t=>{const{from:e,to:n}=i(t);this.setRangeStartOnly(e.clone(),!1),this.setRangeEnd(n.clone())}),this.finish()),s}selectColumns(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i="string"===typeof t?this.tableProps.propToCol(t):t,r="string"===typeof e?this.tableProps.propToCol(e):e,o=this.tableProps.countRows(),s=this.tableProps.countCols(),a=this.tableProps.countColHeaders(),l=0===a?0:-a,c=this.tableProps.createCellCoords(l,i),u=this.tableProps.createCellCoords(o-1,r),h=this.tableProps.createCellRange(c,c,u).isValid({countRows:o,countCols:s,countRowHeaders:0,countColHeaders:a});if(h){let t=0,e=0;Number.isInteger(null===n||void 0===n?void 0:n.row)&&Number.isInteger(null===n||void 0===n?void 0:n.col)?(t=Object($.a)(n.row,l,o-1),e=Object($.a)(n.col,Math.min(i,r),Math.max(i,r))):(t=Object($.a)(n,l,o-1),e=i);const s=this.tableProps.createCellCoords(t,e),c=0===a?0:Object($.a)(s.row,l,-1),u=o-1,h=this.tableProps.createCellCoords(c,i),d=this.tableProps.createCellCoords(u,r);this.runLocalHooks("beforeSelectColumns",h,d,s),h.row=c,d.row=u,this.setRangeStartOnly(h,void 0,s),this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(d),this.runLocalHooks("afterSelectColumns",h,d,s),this.finish()}return h}selectRows(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.tableProps.countRows(),r=this.tableProps.countCols(),o=this.tableProps.countRowHeaders(),s=0===o?0:-o,a=this.tableProps.createCellCoords(t,s),l=this.tableProps.createCellCoords(e,r-1),c=this.tableProps.createCellRange(a,a,l).isValid({countRows:i,countCols:r,countRowHeaders:o,countColHeaders:0});if(c){let i=0,a=0;Number.isInteger(null===n||void 0===n?void 0:n.row)&&Number.isInteger(null===n||void 0===n?void 0:n.col)?(i=Object($.a)(n.row,Math.min(t,e),Math.max(t,e)),a=Object($.a)(n.col,s,r-1)):(i=t,a=Object($.a)(n,s,r-1));const l=this.tableProps.createCellCoords(i,a),c=0===o?0:Object($.a)(l.col,s,-1),u=r-1,h=this.tableProps.createCellCoords(t,c),d=this.tableProps.createCellCoords(e,u);this.runLocalHooks("beforeSelectRows",h,d,l),h.col=c,d.col=u,this.setRangeStartOnly(h,void 0,l),this.selectedByRowHeader.add(this.getLayerLevel()),this.setRangeEnd(d),this.runLocalHooks("afterSelectRows",h,d,l),this.finish()}return c}refresh(){if(!this.isSelected())return;const t=this.tableProps.countRows(),e=this.tableProps.countCols();if(0===t||0===e)return void this.deselect();const n=this.selectedRange.peekByIndex(this.selectedRange.size()-1),{from:i,to:r,highlight:o}=n;this.clear(),o.assign({row:Object($.a)(o.row,-1/0,t-1),col:Object($.a)(o.col,-1/0,e-1)}),i.assign({row:Object($.a)(i.row,-1/0,t-1),col:Object($.a)(i.col,-1/0,e-1)}),r.assign({row:Object($.a)(r.row,0,t-1),col:Object($.a)(r.col,0,e-1)}),this.selectedRange.ranges.push(n),this.highlight.getFocus().add(o).commit().syncWith(n),this.applyAndCommit(n)}commit(){if(this.highlight.getCustomSelections().forEach(t=>{t.commit()}),!this.isSelected())return;const t=this.highlight.getFocus(),e=this.getLayerLevel();t.commit().syncWith(this.selectedRange.current());for(let n=0;n<this.selectedRange.size();n+=1){this.highlight.useLayerLevel(n);const t=this.highlight.createArea(),e=this.highlight.createLayeredArea(),i=this.highlight.createRowHeader(),r=this.highlight.createColumnHeader(),o=this.highlight.createActiveRowHeader(),s=this.highlight.createActiveColumnHeader(),a=this.highlight.createActiveCornerHeader(),l=this.highlight.createRowHighlight(),c=this.highlight.createColumnHighlight();t.commit(),e.commit(),i.commit(),r.commit(),o.commit(),s.commit(),a.commit(),l.commit(),c.commit()}this.highlight.useLayerLevel(e)}}Object(S.n)(Oo,Li.a);var To=Oo,_o=n(21);function Eo(t,e){var n;return"CELL_TYPE"!==t&&((null===(n=e._automaticallyAssignedMetaProps)||void 0===n?void 0:n.has(t))||!Object(S.j)(e,t))}function Ro(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;const i="string"===typeof e.type?Object(_o.a)(e.type):e.type;if(t._automaticallyAssignedMetaProps&&Object(S.o)(e,(e,n)=>{t._automaticallyAssignedMetaProps.delete(n)}),!Object(S.l)(i))return;n!==t||t._automaticallyAssignedMetaProps||(t._automaticallyAssignedMetaProps=new Set);const r={};Object(S.o)(i,(e,i)=>{var o;Eo(i,n)&&(r[i]=e,null===(o=t._automaticallyAssignedMetaProps)||void 0===o||o.add(i))}),Object(S.h)(t,r)}function Mo(t){return Number.isInteger(t)&&t>=0}function xo(t,e){if(!t())throw new Error("Assertion failed: "+e)}function Io(t){return null===t||void 0===t}var ko=()=>({_automaticallyAssignedMetaProps:void 0,activeHeaderClassName:"ht__active_highlight",allowEmpty:!0,allowHtml:!1,allowInsertColumn:!0,allowInsertRow:!0,allowInvalid:!0,allowRemoveColumn:!0,allowRemoveRow:!0,ariaTags:!0,autoColumnSize:void 0,autoRowSize:void 0,autoWrapCol:!1,autoWrapRow:!1,bindRowsWithHeaders:void 0,cell:[],cells:void 0,checkedTemplate:void 0,className:void 0,colHeaders:null,collapsibleColumns:void 0,columnHeaderHeight:void 0,columns:void 0,columnSorting:void 0,columnSummary:void 0,colWidths:void 0,commentedCellClassName:"htCommentCell",comments:!1,contextMenu:void 0,copyable:!0,copyPaste:!0,correctFormat:!1,currentColClassName:void 0,currentHeaderClassName:"ht__highlight",currentRowClassName:void 0,customBorders:!1,data:void 0,dataDotNotation:!0,dataSchema:void 0,dateFormat:"DD/MM/YYYY",timeFormat:"h:mm:ss a",datePickerConfig:void 0,defaultDate:void 0,disableVisualSelection:!1,dragToScroll:!0,dropdownMenu:void 0,editor:void 0,enterBeginsEditing:!0,enterMoves:{col:0,row:1},fillHandle:{autoInsertRow:!1},filter:!0,filteringCaseSensitive:!1,filters:void 0,fixedColumnsLeft:0,fixedColumnsStart:0,fixedRowsBottom:0,fixedRowsTop:0,formulas:void 0,fragmentSelection:!1,headerClassName:void 0,height:void 0,hiddenColumns:void 0,hiddenRows:void 0,invalidCellClassName:"htInvalid",imeFastEdit:!1,isEmptyCol(t){let e,n,i;for(e=0,n=this.countRows();e<n;e++)if(i=this.getDataAtCell(e,t),!1===Object(a.c)(i))return!1;return!0},isEmptyRow(t){let e,n,i,r;for(e=0,n=this.countCols();e<n;e++)if(i=this.getDataAtCell(t,e),!1===Object(a.c)(i))return"object"===typeof i&&(r=this.getCellMeta(t,e),Object(S.m)(this.getSchema()[r.prop],i));return!0},label:void 0,language:"en-US",layoutDirection:"inherit",licenseKey:void 0,locale:"en-US",manualColumnFreeze:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0,maxCols:1/0,maxRows:1/0,mergeCells:!1,minCols:0,minRows:0,minSpareCols:0,minSpareRows:0,multiColumnSorting:void 0,navigableHeaders:!1,tabNavigation:!0,nestedHeaders:void 0,nestedRows:void 0,noWordWrapClassName:"htNoWrap",numericFormat:void 0,observeDOMVisibility:!0,outsideClickDeselects:!0,persistentState:void 0,placeholder:void 0,placeholderCellClassName:"htPlaceholder",preventOverflow:!1,preventWheel:!1,readOnly:!1,readOnlyCellClassName:"htDimmed",renderAllRows:!1,renderAllColumns:!1,renderer:void 0,rowHeaders:void 0,rowHeaderWidth:void 0,rowHeights:void 0,search:!1,selectionMode:"multiple",selectOptions:void 0,skipColumnOnPaste:!1,skipRowOnPaste:!1,sortByRelevance:!0,source:void 0,startCols:5,startRows:5,stretchH:"none",strict:void 0,tableClassName:void 0,tabMoves:{row:0,col:1},title:void 0,trimDropdown:!0,trimRows:void 0,trimWhitespace:!0,type:"text",uncheckedTemplate:void 0,undo:void 0,validator:void 0,viewportColumnRenderingOffset:"auto",viewportRowRenderingOffset:"auto",visibleRows:10,width:void 0,wordWrap:!0});function Ao(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class No{constructor(t){Ao(this,"metaCtor",class{}),Ao(this,"meta",void 0),this.meta=this.metaCtor.prototype,Object(S.h)(this.meta,ko()),this.meta.instance=t}getMetaConstructor(){return this.metaCtor}getMeta(){return this.meta}updateMeta(t){var e;Object(S.h)(this.meta,t),Ro(this.meta,{...t,type:null!==(e=t.type)&&void 0!==e?e:this.meta.type},t)}}function jo(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Ho{constructor(t){jo(this,"meta",void 0);const e=t.getMetaConstructor();this.meta=new e}getMeta(){return this.meta}updateMeta(t){Object(S.h)(this.meta,t),Ro(this.meta,t,t)}}function Do(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Po{constructor(t){Do(this,"valueFactory",void 0),Do(this,"data",[]),Do(this,"index",[]),Do(this,"holes",new Set),this.valueFactory=t}obtain(t){xo(()=>Mo(t),"Expecting an unsigned number.");const e=this._getStorageIndexByKey(t);let n;if(e>=0)n=this.data[e],void 0===n&&(n=this.valueFactory(t),this.data[e]=n);else if(n=this.valueFactory(t),this.holes.size>0){const e=this.holes.values().next().value;this.holes.delete(e),this.data[e]=n,this.index[t]=e}else this.data.push(n),this.index[t]=this.data.length-1;return n}insert(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;xo(()=>Mo(t)||Io(t),"Expecting an unsigned number or null/undefined argument.");const n=[],i=this.data.length;for(let o=0;o<e;o++)n.push(i+o),this.data.push(void 0);const r=Io(t)?this.index.length:t;this.index=[...this.index.slice(0,r),...n,...this.index.slice(r)]}remove(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;xo(()=>Mo(t)||Io(t),"Expecting an unsigned number or null/undefined argument.");const n=this.index.splice(Io(t)?this.index.length-e:t,e);for(let i=0;i<n.length;i++){const t=n[i];"number"===typeof t&&this.holes.add(t)}}size(){return this.data.length-this.holes.size}values(){return Object(V.b)(this.data,(t,e)=>!this.holes.has(e))[Symbol.iterator]()}entries(){const t=[];for(let n=0;n<this.data.length;n++){const e=this._getKeyByStorageIndex(n);-1!==e&&t.push([e,this.data[n]])}let e=0;return{next:()=>{if(e<t.length){const n=t[e];return e+=1,{value:n,done:!1}}return{done:!0}}}}clear(){this.data=[],this.index=[],this.holes.clear()}_getStorageIndexByKey(t){return this.index.length>t?this.index[t]:-1}_getKeyByStorageIndex(t){return this.index.indexOf(t)}[Symbol.iterator](){return this.entries()}}function Lo(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Fo=["data","width"];class Bo{constructor(t){Lo(this,"globalMeta",void 0),Lo(this,"metas",new Po(()=>this._createMeta())),this.globalMeta=t,this.metas=new Po(()=>this._createMeta())}updateMeta(t,e){const n=this.getMeta(t);Object(S.h)(n,e),Ro(n,e)}createColumn(t,e){this.metas.insert(t,e)}removeColumn(t,e){this.metas.remove(t,e)}getMeta(t){return this.metas.obtain(t)}getMetaConstructor(t){return this.metas.obtain(t).constructor}clearCache(){this.metas.clear()}_createMeta(){return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];function n(){}Object(S.k)(n,t);for(let i=0;i<e.length;i++)n.prototype[e[i]]=void 0;return n}(this.globalMeta.getMetaConstructor(),Fo).prototype}}function Vo(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Uo{constructor(t){Vo(this,"columnMeta",void 0),Vo(this,"metas",new Po(()=>this._createRow())),this.columnMeta=t}updateMeta(t,e,n){const i=this.getMeta(t,e);Object(S.h)(i,n),Ro(i,n)}createRow(t,e){this.metas.insert(t,e)}createColumn(t,e){for(let n=0;n<this.metas.size();n++)this.metas.obtain(n).insert(t,e)}removeRow(t,e){this.metas.remove(t,e)}removeColumn(t,e){for(let n=0;n<this.metas.size();n++)this.metas.obtain(n).remove(t,e)}getMeta(t,e,n){const i=this.metas.obtain(t).obtain(e);return void 0===n?i:i[n]}setMeta(t,e,n,i){var r;const o=this.metas.obtain(t).obtain(e);null===(r=o._automaticallyAssignedMetaProps)||void 0===r||r.delete(n),o[n]=i}removeMeta(t,e,n){delete this.metas.obtain(t).obtain(e)[n]}getMetas(){const t=[],e=Array.from(this.metas.values());for(let n=0;n<e.length;n++)Object(a.b)(e[n])&&t.push(...e[n].values());return t}getMetasAtRow(t){xo(()=>Mo(t),"Expecting an unsigned number.");const e=new Map(this.metas);return e.has(t)?Array.from(e.get(t).values()):[]}clearCache(){this.metas.clear()}_createRow(){return new Po(t=>this._createMeta(t))}_createMeta(t){return new(this.columnMeta.getMetaConstructor(t))}}class Wo{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.hot=t,this.globalMeta=new No(t),this.tableMeta=new Ho(this.globalMeta),this.columnMeta=new Bo(this.globalMeta),this.cellMeta=new Uo(this.columnMeta),n.forEach(t=>new t(this)),this.globalMeta.updateMeta(e)}getGlobalMeta(){return this.globalMeta.getMeta()}updateGlobalMeta(t){this.globalMeta.updateMeta(t)}getTableMeta(){return this.tableMeta.getMeta()}updateTableMeta(t){this.tableMeta.updateMeta(t)}getColumnMeta(t){return this.columnMeta.getMeta(t)}updateColumnMeta(t,e){this.columnMeta.updateMeta(t,e)}getCellMeta(t,e,n){let{visualRow:i,visualColumn:r}=n;const o=this.cellMeta.getMeta(t,e);return o.visualRow=i,o.visualCol=r,o.row=t,o.col=e,this.runLocalHooks("afterGetCellMeta",o),o}getCellMetaKeyValue(t,e,n){if("string"!==typeof n)throw new Error("The passed cell meta object key is not a string");return this.cellMeta.getMeta(t,e,n)}setCellMeta(t,e,n,i){this.cellMeta.setMeta(t,e,n,i)}updateCellMeta(t,e,n){this.cellMeta.updateMeta(t,e,n)}removeCellMeta(t,e,n){this.cellMeta.removeMeta(t,e,n)}getCellsMeta(){return this.cellMeta.getMetas()}getCellsMetaAtRow(t){return this.cellMeta.getMetasAtRow(t)}createRow(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.cellMeta.createRow(t,e)}removeRow(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.cellMeta.removeRow(t,e)}createColumn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.cellMeta.createColumn(t,e),this.columnMeta.createColumn(t,e)}removeColumn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.cellMeta.removeColumn(t,e),this.columnMeta.removeColumn(t,e)}clearCellsCache(){this.cellMeta.clearCache()}clearCache(){this.cellMeta.clearCache(),this.columnMeta.clearCache()}}function zo(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object(S.n)(Wo,Li.a);class Yo{constructor(t){zo(this,"metaManager",void 0),zo(this,"metaSyncMemo",new Map),this.metaManager=t,t.addLocalHook("afterGetCellMeta",t=>this.extendCellMeta(t)),ar.a.getSingleton().add("beforeRender",t=>{t&&this.metaSyncMemo.clear()},this.metaManager.hot)}extendCellMeta(t){var e;const{row:n,col:i}=t;if(null!==(e=this.metaSyncMemo.get(n))&&void 0!==e&&e.has(i))return;const{visualRow:r,visualCol:o}=t,a=this.metaManager.hot,l=a.colToProp(o);t.prop=l,a.runHooks("beforeGetCellMeta",r,o,t);const c=Object(S.j)(t,"type")?t.type:null;let u=Object(s.d)(t.cells)?t.cells(n,i,l):null;var h;c&&(u?u.type=null!==(h=u.type)&&void 0!==h?h:c:u={type:c});u&&this.metaManager.updateCellMeta(n,i,u),a.runHooks("afterGetCellMeta",r,o,t),this.metaSyncMemo.has(n)||this.metaSyncMemo.set(n,new Set),this.metaSyncMemo.get(n).add(i)}}function Go(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function $o(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ko(t,e){return t.get(function(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}(t,e))}var Xo=new WeakMap;class qo{constructor(t){$o(this,"metaManager",void 0),$o(this,"usageTracker",new Set),$o(this,"propDescriptors",new Map([["ariaTags",{initOnly:!0}],["fixedColumnsLeft",{target:"fixedColumnsStart",onChange(t){if(this.metaManager.hot.isRtl()&&"fixedColumnsLeft"===t)throw new Error("The `fixedColumnsLeft` is not supported for RTL. Please use option `fixedColumnsStart`.");if(this.usageTracker.has("fixedColumnsLeft")&&this.usageTracker.has("fixedColumnsStart"))throw new Error("The `fixedColumnsLeft` and `fixedColumnsStart` should not be used together. Please use only the option `fixedColumnsStart`.")}}],["layoutDirection",{initOnly:!0}],["renderAllColumns",{initOnly:!0}],["renderAllRows",{initOnly:!0}]])),Go(this,Xo,(t,e,n)=>{if(!n)throw new Error(`The \`${t}\` option can not be updated after the Handsontable is initialized.`)}),this.metaManager=t,this.extendMetaProps()}extendMetaProps(){this.propDescriptors.forEach((t,e)=>{const{initOnly:n,target:i,onChange:r}=t,o="string"===typeof i,s=o?i:e,a="_"+s;this.metaManager.globalMeta.meta[a]=this.metaManager.globalMeta.meta[s],r?(this.installPropWatcher(e,a,r),o&&this.installPropWatcher(i,a,r)):n&&(this.installPropWatcher(e,a,Ko(Xo,this)),this.metaManager.globalMeta.meta._initOnlySettings||(this.metaManager.globalMeta.meta._initOnlySettings=[]),this.metaManager.globalMeta.meta._initOnlySettings.push(e))})}installPropWatcher(t,e,n){const i=this;Object.defineProperty(this.metaManager.globalMeta.meta,t,{get(){return this[e]},set(r){const o=!i.usageTracker.has(t);i.usageTracker.add(t),n.call(i,t,r,o),this[e]=r},enumerable:!0,configurable:!0})}}var Qo=n(239);function Zo(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Jo{static get DESTINATION_RENDERER(){return 1}static get DESTINATION_CLIPBOARD_GENERATOR(){return 2}constructor(t,e,n){Zo(this,"hot",void 0),Zo(this,"metaManager",void 0),Zo(this,"tableMeta",void 0),Zo(this,"dataSource",void 0),Zo(this,"duckSchema",void 0),Zo(this,"colToPropCache",void 0),Zo(this,"propToColCache",void 0),this.hot=t,this.metaManager=n,this.tableMeta=n.getTableMeta(),this.dataSource=e,this.duckSchema=this.createDuckSchema(),this.createMap()}createMap(){const t=this.getSchema();if("undefined"===typeof t)throw new Error("trying to create `columns` definition but you didn't provide `schema` nor `data`");const e=this.tableMeta.columns;let n;if(this.colToPropCache=[],this.propToColCache=new Map,e){let i=0,r=0,o=!1;if("function"===typeof e){const e=Object(S.e)(t);i=e>0?e:this.countFirstRowKeys(),o=!0}else{const t=this.tableMeta.maxCols;i=Math.min(t,e.length)}for(n=0;n<i;n++){const t=o?e(n):e[n];if(Object(S.l)(t)){if("undefined"!==typeof t.data){const e=o?r:n;this.colToPropCache[e]=t.data,this.propToColCache.set(t.data,e)}r+=1}}}else this.recursiveDuckColumns(t)}countFirstRowKeys(){return Object(Ri.a)(this.dataSource)}recursiveDuckColumns(t,e,n){let i,r=e,o=n;return"undefined"===typeof r&&(r=0,o=""),"object"!==typeof t||Array.isArray(t)||Object(S.o)(t,(t,e)=>{null===t?(i=o+e,this.colToPropCache.push(i),this.propToColCache.set(i,r),r+=1):r=this.recursiveDuckColumns(t,r,e+".")}),r}colToProp(t){if(!1===Number.isInteger(t))return t;const e=this.hot.toPhysicalColumn(t);return null===e?t:this.colToPropCache&&Object(a.b)(this.colToPropCache[e])?this.colToPropCache[e]:e}propToCol(t){const e=this.propToColCache.get(t);if(Object(a.b)(e))return this.hot.toVisualColumn(e);const n=this.hot.toVisualColumn(t);return null===n?t:n}getSchema(){const t=this.tableMeta.dataSchema;return t?"function"===typeof t?t():t:this.duckSchema}createDuckSchema(){return this.dataSource&&this.dataSource[0]?Object(S.g)(this.dataSource[0]):{}}refreshDuckSchema(){this.duckSchema=this.createDuckSchema()}createRow(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{source:n,mode:i="above"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.hot.countSourceRows();let o=r,s=0,a=t;("number"!==typeof a||a>=r)&&(a=r),a<this.hot.countRows()&&(o=this.hot.toPhysicalRow(a));if(!1===this.hot.runHooks("beforeCreateRow",a,e,n)||null===o)return{delta:0};const l=this.tableMeta.maxRows,c=this.getSchema().length,u=[];for(;s<e&&r+s<l;){let t=null;"array"===this.hot.dataType?this.tableMeta.dataSchema?t=Object(S.c)(this.getSchema()):(t=[],Object($.d)(c-1,()=>t.push(null))):"function"===this.hot.dataType?t=this.tableMeta.dataSchema(a+s):(t={},Object(S.d)(t,this.getSchema())),u.push(t),s+=1}this.hot.rowIndexMapper.insertIndexes(a,s),"below"===i&&(o=Math.min(o+1,r)),this.spliceData(o,0,u);const h=this.hot.toVisualRow(o);return this.hot.countSourceRows()===u.length&&this.hot.columnIndexMapper.initToLength(this.hot.getInitialColumnCount()),s>0&&(void 0===t||null===t?this.metaManager.createRow(null,s):"auto"!==n&&this.metaManager.createRow(o,e)),this.hot.runHooks("afterCreateRow",h,s,n),this.hot.forceFullRender=!0,{delta:s,startPhysicalIndex:o}}createCol(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{source:n,mode:i="start"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.hot.isColumnModificationAllowed())throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");const r=this.dataSource,o=this.tableMeta.maxCols,s=this.hot.countSourceCols();let a=t;("number"!==typeof a||a>=s)&&(a=s);if(!1===this.hot.runHooks("beforeCreateCol",a,e,n))return{delta:0};let l=s;a<this.hot.countCols()&&(l=this.hot.toPhysicalColumn(a));const c=this.hot.countSourceRows();let u=this.hot.countCols(),h=0,d=l;"end"===i&&(d=Math.min(d+1,s));const f=d;for(;h<e&&u<o;){if("number"!==typeof a||a>=u)if(c>0)for(let t=0;t<c;t+=1)"undefined"===typeof r[t]&&(r[t]=[]),r[t].push(null);else r.push([null]);else for(let t=0;t<c;t++)r[t].splice(d,0,null);h+=1,d+=1,u+=1}this.hot.columnIndexMapper.insertIndexes(a,h),h>0&&(void 0===t||null===t?this.metaManager.createColumn(null,h):"auto"!==n&&this.metaManager.createColumn(f,e));const g=this.hot.toVisualColumn(f);return this.hot.runHooks("afterCreateCol",g,h,n),this.hot.forceFullRender=!0,this.refreshDuckSchema(),{delta:h,startPhysicalIndex:f}}removeRow(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,i=Number.isInteger(t)?t:-e;const r=this.visualRowsToPhysical(i,e),o=this.hot.countSourceRows();i=(o+i)%o;if(!1===this.hot.runHooks("beforeRemoveRow",i,r.length,r,n))return!1;const s=r.length;if(this.filterData(i,s,r),i<this.hot.countRows()){this.hot.rowIndexMapper.removeIndexes(r);const t=Object(a.b)(this.tableMeta.columns)||Object(a.b)(this.tableMeta.dataSchema);0===this.hot.rowIndexMapper.getNotTrimmedIndexesLength()&&!1===t&&this.hot.columnIndexMapper.setIndexesSequence([])}return r.slice(0).sort((t,e)=>e-t).forEach(t=>{this.metaManager.removeRow(t,1)}),this.hot.runHooks("afterRemoveRow",i,s,r,n),this.hot.forceFullRender=!0,!0}removeCol(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;if("object"===this.hot.dataType||this.tableMeta.columns)throw new Error("cannot remove column with object data source or columns option specified");let i="number"!==typeof t?-e:t;i=(this.hot.countCols()+i)%this.hot.countCols();const r=this.visualColumnsToPhysical(i,e),o=r.slice(0).sort((t,e)=>e-t);if(!1===this.hot.runHooks("beforeRemoveCol",i,e,r,n))return!1;let s=!0;const a=o.length,l=this.dataSource;for(let c=0;c<a;c++)s&&r[0]!==r[c]-c&&(s=!1);if(s)for(let c=0,u=this.hot.countSourceRows();c<u;c++)l[c].splice(r[0],e),0===c&&this.metaManager.removeColumn(r[0],e);else for(let c=0,u=this.hot.countSourceRows();c<u;c++)for(let t=0;t<a;t++)l[c].splice(o[t],1),0===c&&this.metaManager.removeColumn(o[t],1);return i<this.hot.countCols()&&(this.hot.columnIndexMapper.removeIndexes(r),0===this.hot.columnIndexMapper.getNotTrimmedIndexesLength()&&this.hot.rowIndexMapper.setIndexesSequence([])),this.hot.runHooks("afterRemoveCol",i,e,r,n),this.hot.forceFullRender=!0,this.refreshDuckSchema(),!0}spliceCol(t,e,n){const i=this.hot.getDataAtCol(t),r=i.slice(e,e+n),o=i.slice(e+n);for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];Object(V.f)(a,o);let c=0;for(;c<n;)a.push(null),c+=1;return Object(V.j)(a),this.hot.populateFromArray(e,t,a,null,null,"spliceCol"),r}spliceRow(t,e,n){const i=this.hot.getSourceDataAtRow(t),r=i.slice(e,e+n),o=i.slice(e+n);for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];Object(V.f)(a,o);let c=0;for(;c<n;)a.push(null),c+=1;return this.hot.populateFromArray(t,e,[a],null,null,"spliceRow"),r}spliceData(t,e,n){if(!1!==this.hot.runHooks("beforeDataSplice",t,e,n)){const e=[...this.dataSource.slice(0,t),...n,...this.dataSource.slice(t)];this.dataSource.length=0,e.forEach(t=>this.dataSource.push(t))}}filterData(t,e,n){let i=this.hot.runHooks("filterData",t,e,n);!1===Array.isArray(i)&&(i=this.dataSource.filter((t,e)=>-1===n.indexOf(e))),this.dataSource.length=0,Array.prototype.push.apply(this.dataSource,i)}get(t,e){const n=this.hot.toPhysicalRow(t);let i=this.dataSource[n];const r=this.hot.runHooks("modifyRowData",n);i=isNaN(r)?r:i;const{dataDotNotation:o}=this.hot.getSettings();let s=null;if(i&&i.hasOwnProperty&&Object(S.j)(i,e))s=i[e];else if(o&&"string"===typeof e&&e.indexOf(".")>-1){let t=i;if(!t)return null;const n=e.split(".");for(let e=0,i=n.length;e<i;e++)if(t=t[n[e]],"undefined"===typeof t)return null;s=t}else"function"===typeof e&&(s=e(this.dataSource.slice(n,n+1)[0]));if(this.hot.hasHook("modifyData")){const t=Object(S.b)(s);this.hot.runHooks("modifyData",n,this.propToCol(e),t,"get"),t.isTouched()&&(s=t.value)}return s}getCopyable(t,e){return this.hot.getCellMeta(t,this.propToCol(e)).copyable?this.get(t,e):""}set(t,e,n){const i=this.hot.toPhysicalRow(t);let r=n,o=this.dataSource[i];const s=this.hot.runHooks("modifyRowData",i);if(o=isNaN(s)?s:o,this.hot.hasHook("modifyData")){const t=Object(S.b)(r);this.hot.runHooks("modifyData",i,this.propToCol(e),t,"set"),t.isTouched()&&(r=t.value)}const{dataDotNotation:a}=this.hot.getSettings();if(o&&o.hasOwnProperty&&Object(S.j)(o,e))o[e]=r;else if(a&&"string"===typeof e&&e.indexOf(".")>-1){let t,n=o,i=0;const s=e.split(".");for(i=0,t=s.length-1;i<t;i++)"undefined"===typeof n[s[i]]&&(n[s[i]]={}),n=n[s[i]];n[s[i]]=r}else"function"===typeof e?e(this.dataSource.slice(i,i+1)[0],r):o[e]=r}visualRowsToPhysical(t,e){const n=this.hot.countSourceRows(),i=[];let r,o=(n+t)%n,s=e;for(;o<n&&s;)r=this.hot.toPhysicalRow(o),i.push(r),s-=1,o+=1;return i}visualColumnsToPhysical(t,e){const n=this.hot.countCols(),i=[];let r=(n+t)%n,o=e;for(;r<n&&o;){const t=this.hot.toPhysicalColumn(r);i.push(t),o-=1,r+=1}return i}clear(){for(let t=0;t<this.hot.countSourceRows();t++)for(let e=0;e<this.hot.countCols();e++)this.set(t,this.colToProp(e),"")}getLength(){const t=this.tableMeta.maxRows;let e;e=t<0||0===t?0:t||1/0;const n=this.hot.rowIndexMapper.getNotTrimmedIndexesLength();return Math.min(n,e)}getAll(){const t={row:0,col:0},e={row:Math.max(this.hot.countRows()-1,0),col:Math.max(this.hot.countCols()-1,0)};return t.row-e.row!==0||this.hot.countSourceRows()?this.getRange(t,e,Jo.DESTINATION_RENDERER):[]}countCachedColumns(){return this.colToPropCache.length}getRange(t,e,n){const i=[];let r,o,s;const a=this.tableMeta.maxRows,l=this.tableMeta.maxCols;if(0===a||0===l)return[];const c=n===Jo.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get,u=Math.min(Math.max(a-1,0),Math.max(t.row,e.row)),h=Math.min(Math.max(l-1,0),Math.max(t.col,e.col));for(r=Math.min(t.row,e.row);r<=u;r++){s=[];const n=r>=0?this.hot.toPhysicalRow(r):r;for(o=Math.min(t.col,e.col);o<=h&&null!==n;o++)s.push(c.call(this,r,this.colToProp(o)));null!==n&&i.push(s)}return i}getText(t,e){return Object(Qo.b)(this.getRange(t,e,Jo.DESTINATION_RENDERER))}getCopyableText(t,e){return Object(Qo.b)(this.getRange(t,e,Jo.DESTINATION_CLIPBOARD_GENERATOR))}destroy(){this.hot=null,this.metaManager=null,this.dataSource=null,this.duckSchema=null,this.colToPropCache.length=0,this.propToColCache.clear(),this.propToColCache=void 0}}var ts=Jo;function es(t,e,n,i){const{hotInstance:r,dataMap:a,dataSource:l,internalSource:c,source:u,metaManager:h,firstRun:d}=i,f=Object(G.f)(c),g=r.getSettings();Array.isArray(g.dataSchema)?r.dataType="array":Object(s.d)(g.dataSchema)?r.dataType="function":r.dataType="object",a&&a.destroy(),t=r.runHooks("before"+f,t,d,u);const p=new ts(r,t,h);if(e(p),"object"===typeof t&&null!==t)t.push&&t.splice||(t=[t]);else{if(null!==t)throw new Error(`${c} only accepts array of objects or array of arrays (${typeof t} given)`);{const e=p.getSchema();let n;t=[];let i=0,o=0;for(i=0,o=g.startRows;i<o;i++)if("object"!==r.dataType&&"function"!==r.dataType||!g.dataSchema)if("array"===r.dataType)n=Object(S.c)(e[0]),t.push(n);else{n=[];for(let t=0,e=g.startCols;t<e;t++)n.push(null);t.push(n)}else n=Object(S.c)(e),t.push(n)}}Array.isArray(t[0])&&(r.dataType="array"),g.data=t,p.dataSource=t,l.data=t,l.dataType=r.dataType,l.colToProp=p.colToProp.bind(p),l.propToCol=p.propToCol.bind(p),l.countCachedColumns=p.countCachedColumns.bind(p),n(p),r.runHooks("after"+f,t,d,u),d||(r.runHooks("afterChange",null,c),r.render()),r.getSettings().ariaTags&&Object(o.U)(r.rootElement,[Object(_t.C)(-1),Object(_t.e)(r.countCols()+(r.view?r.countRowHeaders():0))])}function ns(t){const{selection:e}=t;let n=!1,i=!1;return{resume(){i=!1},suspend(){i=!0},skipNextScrollCycle(){n=!0},scrollTo(r){var o;if(n||i)return void(n=!1);let s;e.isFocusSelectionChanged()?s=function(t){return e=>{t.scrollViewportTo(e.toObject())}}(t):e.isSelectedByCorner()?s=()=>{}:e.isSelectedByRowHeader()?s=function(t){return e=>{let{row:n}=e;t.scrollViewportTo({row:n})}}(t):e.isSelectedByColumnHeader()?s=function(t){return e=>{let{col:n}=e;t.scrollViewportTo({col:n})}}(t):1===e.getSelectedRange().size()&&e.isMultiple()?s=function(t){return e=>{t.scrollViewportTo(e.toObject())}}(t):1!==e.getSelectedRange().size()||e.isMultiple()?e.getSelectedRange().size()>1&&(s=function(t){return e=>{t.scrollViewportTo(e.toObject())}}(t)):s=function(t){return e=>{const n=t.selection.getSelectionSource(),{row:i,col:r}=e;if(i<0&&r>=0)t.scrollViewportTo({col:r});else if(r<0&&i>=0)t.scrollViewportTo({row:i});else{if("mouse"===n&&(r===t.view.getLastPartiallyVisibleColumn()||i===t.view.getLastPartiallyVisibleRow()))return;t.scrollViewportTo({row:i,col:r})}}}(t),null===(o=s)||void 0===o||o(r)}}}var is=n(48);function rs(t){const e=t.rootDocument.createElement("input");return e.type="text",e.classList.add("htFocusCatcher"),t.getSettings().ariaTags&&Object(o.U)(e,[Object(_t.y)(),Object(_t.n)()]),e}function os(t){const e=function(t){return e=>{if(!e)return null;const n=ss(t),i=as(t);return e.col<n.col&&(e.col=n.col),e.col>i.col&&(e.col=i.col),e.row<n.row&&(e.row=n.row),e.row>i.row&&(e.row=i.row),e}}(t);let n;const{activate:i,deactivate:r}=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.rootElement,i=rs(t),r=rs(t);return i.addEventListener("focus",()=>null===e||void 0===e?void 0:e.onFocusFromTop()),r.addEventListener("focus",()=>null===e||void 0===e?void 0:e.onFocusFromBottom()),n.firstChild.before(i),n.lastChild.after(r),{activate(){t._registerTimeout(()=>{i.tabIndex=0,r.tabIndex=0},10)},deactivate(){t._registerTimeout(()=>{i.tabIndex=-1,r.tabIndex=-1},10)}}}(t,{onFocusFromTop(){var i;const r=null!==(i=e(n))&&void 0!==i?i:ss(t);r&&(t.runHooks("modifyFocusOnTabNavigation","from_above",r),t.selectCell(r.row,r.col)),t.listen()},onFocusFromBottom(){var i;const r=null!==(i=e(n))&&void 0!==i?i:as(t);r&&(t.runHooks("modifyFocusOnTabNavigation","from_below",r),t.selectCell(r.row,r.col)),t.listen()}}),o={wrapped:!1,flipped:!1};let s=!0,a=!1,l=!1;t.addHook("afterListen",()=>r()),t.addHook("afterUnlisten",()=>i()),t.addHook("afterSelection",(e,i,r,c,u)=>{var h;(a&&(o.wrapped&&o.flipped||l)&&(l=!1,u.value=!0),s)&&(n=null===(h=t.getSelectedRangeLast())||void 0===h?void 0:h.highlight)}),t.addHook("beforeRowWrap",(t,e,n)=>{o.wrapped=!0,o.flipped=n});const c={keys:[["Tab"],["Shift","Tab"]],preventDefault:!1,stopPropagation:!1,relativeToGroup:is.b,group:"focusCatcher"};t.getShortcutManager().getContext("grid").addShortcuts([{...c,callback:()=>{const{tabNavigation:e}=t.getSettings();a=!0,t.getSelectedRangeLast()&&!e&&(s=!1),e||(l=!0)},position:"before"},{...c,callback:e=>{const{tabNavigation:i,autoWrapRow:r}=t.getSettings();if(a=!1,s=!0,!i||!t.selection.isSelected()||r&&o.wrapped&&o.flipped||!r&&o.wrapped)return r&&o.wrapped&&o.flipped&&(n=e.shiftKey?ss(t):as(t)),o.wrapped=!1,o.flipped=!1,t.deselectCell(),t.unlisten(),!1;e.preventDefault()},position:"after"}])}function ss(t){const{rowIndexMapper:e,columnIndexMapper:n}=t,{navigableHeaders:i}=t.getSettings();let r=i&&t.countColHeaders()>0?-t.countColHeaders():0,o=i&&t.countRowHeaders()>0?-t.countRowHeaders():0;return 0===r&&(r=e.getVisualFromRenderableIndex(r)),0===o&&(o=n.getVisualFromRenderableIndex(o)),null===r||null===o?null:t._createCellCoords(r,o)}function as(t){var e,n;const{rowIndexMapper:i,columnIndexMapper:r}=t,{navigableHeaders:o}=t.getSettings();let s=i.getRenderableIndexesLength()-1,a=r.getRenderableIndexesLength()-1;if(s<0){if(!o||0===t.countColHeaders())return null;s=-1}if(a<0){if(!o||0===t.countColHeaders())return null;a=-1}return t._createCellCoords(null!==(e=i.getVisualFromRenderableIndex(s))&&void 0!==e?e:s,null!==(n=r.getVisualFromRenderableIndex(a))&&void 0!==n?n:a)}var ls=n(40);const cs=new Map([[" ","space"],["spacebar","space"],["scroll","scrolllock"],["del","delete"],["esc","escape"],["medianexttrack","mediatracknext"],["mediaprevioustrack","mediatrackprevious"],["volumeup","audiovolumeup"],["volumedown","audiovolumedown"],["volumemute","audiovolumemute"],["multiply","*"],["add","+"],["divide","/"],["subtract","-"],["left","arrowleft"],["right","arrowright"],["up","arrowup"],["down","arrowdown"]]),us=t=>t.map(t=>{const e=t.toLowerCase();return cs.has(e)?cs.get(e):e}).sort().join("+"),hs=new Map([[96,"numpad0"],[97,"numpad1"],[98,"numpad2"],[99,"numpad3"],[100,"numpad4"],[101,"numpad5"],[102,"numpad6"],[103,"numpad7"],[104,"numpad8"],[105,"numpad9"],[106,"multiply"],[107,"add"],[108,"decimal"],[109,"subtract"],[110,"decimal"],[111,"divide"],[112,"f1"],[113,"f2"],[114,"f3"],[115,"f4"],[116,"f5"],[117,"f6"],[118,"f7"],[119,"f8"],[120,"f9"],[121,"f10"],[122,"f11"],[123,"f12"],[186,"semicolon"],[187,"equal"],[188,"comma"],[189,"minus"],[190,"period"],[191,"slash"],[192,"backquote"],[219,"bracketleft"],[220,"backslash"],[221,"bracketright"],[222,"quote"]]),ds=t=>{let{which:e,key:n}=t;if(hs.has(e))return hs.get(e);const i=String.fromCharCode(e).toLowerCase();return/^[a-z0-9]$/.test(i)?i:n.toLowerCase()},fs=Symbol("shortcut-context");function gs(t){return Object(S.l)(t)&&t.__kindOf===fs}const ps=["meta","alt","shift","control"],ms=function(){const t=new Set;return{press(e){t.add(e)},release(e){t.delete(e)},releaseAll(){t.clear()},isPressed:e=>t.has(e)}}(),bs=[];let ys=0;const ws=t=>{let{ownerWindow:e,handleEvent:n,beforeKeyDown:i,afterKeyDown:r}=t;const c=Object(ls.a)({errorIdExists:t=>`The "${t}" context name is already registered.`});let h="grid";const d=()=>h,f=t=>c.getItem(t);let g=!1;const p=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d();const i=gs(n)?n:f(n);let r=!1;if(!i.hasShortcut(e))return r;const o=i.getShortcuts(e);for(let s=0;s<o.length;s++){const{callback:n,runOnlyIf:i,preventDefault:a,stopPropagation:l,captureCtrl:c,forwardToContext:h}=o[s];if(!0===i(t)){if(g=c,r=!1===n(t,e),g=!1,a&&t.preventDefault(),l&&(Object(u.f)(t),t.stopPropagation()),r)break;h&&p(t,e,h)}}return r},m=function(t,e,n,i,r){const s=t=>ps.includes(t),a=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[];return t.altKey&&n.push("alt"),e&&(t.ctrlKey||t.metaKey)?n.push("control/meta"):(t.ctrlKey&&n.push("control"),t.metaKey&&n.push("meta")),t.shiftKey&&n.push("shift"),n},c=t=>{if(!1===e(t))return;const o=n(t);if(229===t.keyCode||!1===o||Object(u.a)(t))return;const c=ds(t);let h=[];s(c)||(h=a(t));const d=[c].concat(h);!r(t,d)&&(Object(l.h)()&&h.includes("meta")||!Object(l.h)()&&h.includes("control"))&&r(t,[c].concat(a(t,!0))),i(t)},h=t=>{if(t.key){const e=ds(t);s(e)&&ms.press(e)}},d=t=>{if(t.key){const e=ds(t);s(e)&&ms.release(e)}},f=()=>{ms.releaseAll()};return{mount:()=>{let e=t;for(ys+=1;e;)1===ys&&(e.document.documentElement.addEventListener("keydown",h),bs.push({event:"keydown",listener:h}),e.document.documentElement.addEventListener("keyup",d),bs.push({event:"keyup",listener:d})),e.document.documentElement.addEventListener("keydown",c),e.document.documentElement.addEventListener("blur",f),e=Object(o.m)(e)},unmount:()=>{let e=t;for(ys-=1;e;){if(0===ys){for(let t=0;t<bs.length;t++){const{event:n,listener:i}=bs[t];e.document.documentElement.removeEventListener(n,i)}bs.length=0}e.document.documentElement.removeEventListener("keydown",c),e.document.documentElement.removeEventListener("blur",f),e=Object(o.m)(e)}},isPressed:t=>ms.isPressed(t),releasePressedKeys:()=>ms.releaseAll()}}(e,n,i,r,p);return m.mount(),{addContext:t=>{const e=(t=>{const e=Object(ls.a)({errorIdExists:e=>`The "${e}" shortcut is already registered in the "${t}" context.`}),n=function(){let{keys:t,callback:n,group:i,runOnlyIf:r=(()=>!0),captureCtrl:o=!1,preventDefault:l=!0,stopPropagation:c=!1,relativeToGroup:u,position:h,forwardToContext:d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(a.e)(i))throw new Error("You need to define the shortcut's group.");if(!1===Object(s.d)(n))throw new Error("The shortcut's callback needs to be a function.");if(!1===Array.isArray(t))throw new Error(xt.a`Pass the shortcut\'s keys as an array of arrays,\x20
      using the KeyboardEvent.key properties:\x20
      https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values.`);const f={callback:n,group:i,runOnlyIf:r,captureCtrl:o,preventDefault:l,stopPropagation:c};Object(a.b)(u)&&(f.relativeToGroup=u,f.position=h),gs(d)&&(f.forwardToContext=d),t.forEach(t=>{const n=us(t);if(e.hasItem(n)){const t=e.getItem(n);let i=t.findIndex(t=>t.group===u);-1!==i?"before"===h?i-=1:i+=1:i=t.length,t.splice(i,0,f)}else e.addItem(n,[f])})},i=t=>{const n=us(t);e.removeItem(n)};return{__kindOf:fs,addShortcut:n,addShortcuts:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.forEach(t=>{Object(S.o)(e,(n,i)=>{!1===Object.prototype.hasOwnProperty.call(t,i)&&(t[i]=e[i])}),n(t)})},getShortcuts:t=>{const n=us(t),i=e.getItem(n);return Object(a.b)(i)?i.slice():[]},hasShortcut:t=>{const n=us(t);return e.hasItem(n)},removeShortcutsByKeys:i,removeShortcutsByGroup:t=>{e.getItems().forEach(e=>{let[n,r]=e;const o=r.filter(e=>e.group!==t);0===o.length?i((t=>t.split("+"))(n)):(r.length=0,r.push(...o))})}}})(t);return c.addItem(t,e),e},getActiveContextName:d,getContext:f,setActiveContextName:t=>{if(!c.hasItem(t))throw new Error(xt.a`You've tried to activate the "${t}" shortcut context\x20
        that does not exist. Before activation, register the context using the "addContext" method.`);h=t},isCtrlPressed:()=>!g&&(m.isPressed("control")||m.isPressed("meta")),releasePressedKeys:()=>m.releasePressedKeys(),destroy:()=>m.unmount()}};var vs=n(35);let Cs=null;const Ss=new Map;new Set;function Os(t,e){var n,i=this;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=this;const u=new d.a(c);let f,g,p,m,b,y,w=!0;li(r)&&ai(this),this.rootElement=t,this.rootDocument=t.ownerDocument,this.rootWindow=this.rootDocument.defaultView,this.isDestroyed=!1,this.renderSuspendedCounter=0,this.executionSuspendedCounter=0;const v=null!==(n=null===e||void 0===e?void 0:e.layoutDirection)&&void 0!==n?n:"inherit",O=["rtl","ltr"].includes(v)?v:this.rootWindow.getComputedStyle(this.rootElement).direction;this.rootElement.setAttribute("dir",O),this.isRtl=function(){return"rtl"===O},this.isLtr=function(){return!c.isRtl()},this.getDirectionFactor=function(){return c.isLtr()?1:-1},e.language=_r(e.language);const T=new Wo(c,e,[Yo,qo]),_=T.getTableMeta(),E=T.getGlobalMeta(),R=Object(ls.a)();this.container=this.rootDocument.createElement("div"),this.renderCall=!1,t.insertBefore(this.container,t.firstChild),ci(this)&&Object(a.a)(e.licenseKey,t),this.guid="ht_"+Object(G.b)(),Ss.set(this.guid,this),this.columnIndexMapper=new sr,this.rowIndexMapper=new sr,this.columnIndexMapper.addLocalHook("indexesSequenceChange",t=>{c.runHooks("afterColumnSequenceChange",t)}),this.rowIndexMapper.addLocalHook("indexesSequenceChange",t=>{c.runHooks("afterRowSequenceChange",t)}),g=new xi(c),this.rootElement.id&&"ht_"!==this.rootElement.id.substring(0,3)||(this.rootElement.id=this.guid);const M=t=>{const{row:e,col:n}=t;return c._createCellCoords(e>=0?c.rowIndexMapper.getRenderableFromVisualIndex(e):e,n>=0?c.columnIndexMapper.getRenderableFromVisualIndex(n):n)},x=t=>{const{row:e,col:n}=t;return c._createCellCoords(e>=0?c.rowIndexMapper.getVisualFromRenderableIndex(e):e,n>=0?c.columnIndexMapper.getVisualFromRenderableIndex(n):n)},I=(t,e)=>{const n=e>t?1:-1,i=Math.min(t,e),r=Math.max(t,e),o=c.rowIndexMapper.getNearestNotHiddenIndex(t,n);return null===o||1===n&&o>r||-1===n&&o<i?null:o>=0?c.rowIndexMapper.getRenderableFromVisualIndex(o):o},k=(t,e)=>{const n=e>t?1:-1,i=Math.min(t,e),r=Math.max(t,e),o=c.columnIndexMapper.getNearestNotHiddenIndex(t,n);return null===o||1===n&&o>r||-1===n&&o<i?null:o>=0?c.columnIndexMapper.getRenderableFromVisualIndex(o):o};let A=new To(_,{rowIndexMapper:c.rowIndexMapper,columnIndexMapper:c.columnIndexMapper,countCols:()=>c.countCols(),countRows:()=>c.countRows(),propToCol:t=>f.propToCol(t),isEditorOpened:()=>!!c.getActiveEditor()&&c.getActiveEditor().isOpened(),countRenderableColumns:()=>this.view.countRenderableColumns(),countRenderableRows:()=>this.view.countRenderableRows(),countRowHeaders:()=>this.countRowHeaders(),countColHeaders:()=>this.countColHeaders(),countRenderableRowsInRange:function(){return i.view.countRenderableRowsInRange(...arguments)},countRenderableColumnsInRange:function(){return i.view.countRenderableColumnsInRange(...arguments)},getShortcutManager:()=>c.getShortcutManager(),createCellCoords:(t,e)=>c._createCellCoords(t,e),createCellRange:(t,e,n)=>c._createCellRange(t,e,n),visualToRenderableCoords:M,renderableToVisualCoords:x,findFirstNonHiddenRenderableRow:I,findFirstNonHiddenRenderableColumn:k,isDisabledCellSelection:(t,e)=>t<0||e<0?c.getSettings().disableVisualSelection:c.getCellMeta(t,e).disableVisualSelection});this.selection=A;const N=t=>{let{hiddenIndexesChanged:e}=t;e&&this.selection.commit()};function j(t){const e=lr(t);Or(e)?(c.runHooks("beforeLanguageChange",e),E.language=e,c.runHooks("afterLanguageChange",e)):cr(t)}function H(t,e){const n="className"===t?c.rootElement:c.table;if(w)Object(o.a)(n,e);else{let i=[],r=[];E[t]&&(i=Array.isArray(E[t])?E[t]:Object(V.i)(E[t])),e&&(r=Array.isArray(e)?e:Object(V.i)(e));const s=Object(V.g)(i,r),a=Object(V.g)(r,i);s.length&&Object(o.P)(n,s),a.length&&Object(o.a)(n,a)}E[t]=e}function P(){let t=!1;return{validatorsInQueue:0,valid:!0,addValidatorToQueue(){this.validatorsInQueue+=1,t=!1},removeValidatorFormQueue(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty(){},checkIfQueueIsEmpty(){0===this.validatorsInQueue&&!1===t&&(t=!0,this.onQueueEmpty(this.valid))}}}function L(t){const e=t.replace(",",".");return!1===isNaN(parseFloat(e))?parseFloat(e):t}function F(t,e,n){if(!t.length)return void n();const i=c.getActiveEditor(),r=new P;let o=!0;r.onQueueEmpty=()=>{i&&o&&i.cancelChanges(),n()};for(let s=t.length-1;s>=0;s--){const[n,i,,a]=t[s],l=f.propToCol(i);let u;u=Number.isInteger(l)?c.getCellMeta(n,l):{...Object.getPrototypeOf(_),..._},"numeric"===u.type&&"string"===typeof a&&Object($.c)(a)&&(t[s][3]=L(a)),c.getCellValidator(u)&&(r.addValidatorToQueue(),c.validateCell(t[s][3],u,function(e,n){return function(i){if("boolean"!==typeof i)throw new Error("Validation error: result is not boolean");!1===i&&!1===n.allowInvalid&&(o=!1,t.splice(e,1),n.valid=!0),r.removeValidatorFormQueue()}}(s,u),e))}r.checkIfQueueIsEmpty()}function B(t,e){for(let i=t.length-1;i>=0;i--){let n=!1;if(null!==t[i]){if(null!==t[i][2]&&void 0!==t[i][2]||null!==t[i][3]&&void 0!==t[i][3]){if(_.allowInsertRow)for(;t[i][0]>c.countRows()-1;){const{delta:t}=f.createRow(void 0,void 0,{source:e});if(0===t){n=!0;break}}if("array"===c.dataType&&(!_.columns||0===_.columns.length)&&_.allowInsertColumn)for(;f.propToCol(t[i][1])>c.countCols()-1;){const{delta:t}=f.createCol(void 0,void 0,{source:e});if(0===t){n=!0;break}}n||f.set(t[i][0],t[i][1],t[i][3])}}else t.splice(i,1)}const n=t.length>0;if(c.forceFullRender=!0,n){p.adjustRowsAndCols(),c.runHooks("beforeChangeRender",t,e),m.closeEditor(),c.view.render(),m.prepareEditor(),c.view.adjustElementsSize(),c.runHooks("afterChange",t,e||"edit");const n=c.getActiveEditor();n&&Object(a.b)(n.refreshValue)&&n.refreshValue()}else c.view.render()}function K(t,e,n){return Array.isArray(t)?t:[[t,e,n]]}function X(t,e){const n=c.getActiveEditor(),i=c.runHooks("beforeChange",t,e||"edit"),r=t.filter(t=>null!==t);return!1===i||0===r.length?(n&&n.cancelChanges(),[]):r}this.columnIndexMapper.addLocalHook("cacheUpdated",N),this.rowIndexMapper.addLocalHook("cacheUpdated",N),this.selection.addLocalHook("afterSetRangeEnd",(t,e)=>{const n=Object(S.b)(!1),i=this.selection.getSelectedRange(),{from:r,to:s}=i.current(),a=i.size()-1;this.runHooks("afterSelection",r.row,r.col,s.row,s.col,n,a),this.runHooks("afterSelectionByProp",r.row,c.colToProp(r.col),s.row,c.colToProp(s.col),n,a),e&&(!n.isTouched()||n.isTouched()&&!n.value)&&y.scrollTo(t);const l=A.isSelectedByRowHeader(),u=A.isSelectedByColumnHeader();l&&u?Object(o.a)(this.rootElement,["ht__selection--rows","ht__selection--columns"]):l?(Object(o.P)(this.rootElement,"ht__selection--columns"),Object(o.a)(this.rootElement,"ht__selection--rows")):u?(Object(o.P)(this.rootElement,"ht__selection--rows"),Object(o.a)(this.rootElement,"ht__selection--columns")):Object(o.P)(this.rootElement,["ht__selection--rows","ht__selection--columns"]),"shift"!==A.getSelectionSource()&&m.closeEditor(null),c.view.render(),m.prepareEditor()}),this.selection.addLocalHook("beforeSetFocus",t=>{this.runHooks("beforeSelectionFocusSet",t.row,t.col)}),this.selection.addLocalHook("afterSetFocus",t=>{const e=Object(S.b)(!1);this.runHooks("afterSelectionFocusSet",t.row,t.col,e),(!e.isTouched()||e.isTouched()&&!e.value)&&y.scrollTo(t),m.closeEditor(),c.view.render(),m.prepareEditor()}),this.selection.addLocalHook("afterSelectionFinished",t=>{const e=t.length-1,{from:n,to:i}=t[e];this.runHooks("afterSelectionEnd",n.row,n.col,i.row,i.col,e),this.runHooks("afterSelectionEndByProp",n.row,c.colToProp(n.col),i.row,c.colToProp(i.col),e)}),this.selection.addLocalHook("afterIsMultipleSelection",t=>{const e=this.runHooks("afterIsMultipleSelection",t.value);t.value&&(t.value=e)}),this.selection.addLocalHook("afterDeselect",()=>{m.closeEditor(),c.view.render(),Object(o.P)(this.rootElement,["ht__selection--rows","ht__selection--columns"]),this.runHooks("afterDeselect")}),this.selection.addLocalHook("beforeHighlightSet",()=>this.runHooks("beforeSelectionHighlightSet")).addLocalHook("beforeSetRangeStart",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runHooks("beforeSetRangeStart",...e)})).addLocalHook("beforeSetRangeStartOnly",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runHooks("beforeSetRangeStartOnly",...e)})).addLocalHook("beforeSetRangeEnd",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runHooks("beforeSetRangeEnd",...e)})).addLocalHook("beforeSelectColumns",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runHooks("beforeSelectColumns",...e)})).addLocalHook("afterSelectColumns",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runHooks("afterSelectColumns",...e)})).addLocalHook("beforeSelectRows",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runHooks("beforeSelectRows",...e)})).addLocalHook("afterSelectRows",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runHooks("afterSelectRows",...e)})).addLocalHook("beforeModifyTransformStart",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runHooks("modifyTransformStart",...e)})).addLocalHook("afterModifyTransformStart",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runHooks("afterModifyTransformStart",...e)})).addLocalHook("beforeModifyTransformFocus",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runHooks("modifyTransformFocus",...e)})).addLocalHook("afterModifyTransformFocus",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runHooks("afterModifyTransformFocus",...e)})).addLocalHook("beforeModifyTransformEnd",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runHooks("modifyTransformEnd",...e)})).addLocalHook("afterModifyTransformEnd",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runHooks("afterModifyTransformEnd",...e)})).addLocalHook("beforeRowWrap",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runHooks("beforeRowWrap",...e)})).addLocalHook("beforeColumnWrap",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.runHooks("beforeColumnWrap",...e)})).addLocalHook("insertRowRequire",t=>this.alter("insert_row_above",t,1,"auto")).addLocalHook("insertColRequire",t=>this.alter("insert_col_start",t,1,"auto")),p={alter(t,e){var n,i;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;const l=t=>{if(0===t.length)return[];const e=[...t];e.sort((t,e)=>{let[n]=t,[i]=e;return n===i?0:n>i?1:-1});return Object(V.d)(e,(t,e)=>{let[n,i]=e;const r=t[t.length-1],[o,s]=r,a=o+s;if(n<=a){const t=Math.max(i-(a-n),0);r[1]+=t}else t.push([n,i]);return t},[e[0]])};switch(t){case"insert_row_below":case"insert_row_above":const s=c.countSourceRows();if(_.maxRows===s)return;const u="insert_row_below"===t?"below":"above";e=null!==(n=e)&&void 0!==n?n:"below"===u?s:0;const{delta:h,startPhysicalIndex:d}=f.createRow(e,r,{source:o,mode:u});A.shiftRows(c.toVisualRow(d),h);break;case"insert_col_start":case"insert_col_end":const g="insert_col_end"===t?"end":"start";e=null!==(i=e)&&void 0!==i?i:"end"===g?c.countSourceCols():0;const{delta:p,startPhysicalIndex:b}=f.createCol(e,r,{source:o,mode:g});if(p){if(Array.isArray(_.colHeaders)){const t=[c.toVisualColumn(b),0];t.length+=p,Array.prototype.splice.apply(_.colHeaders,t)}A.shiftColumns(c.toVisualColumn(b),p)}break;case"remove_row":const y=t=>{let e=0;Object(V.a)(t,t=>{let[n,i]=t;const r=Object(a.c)(n)?c.countRows()-1:Math.max(n-e,0);Number.isInteger(n)&&(n=Math.max(n-e,0));if(!f.removeRow(n,i,o))return;if(A.isSelected()){const{row:t}=c.getSelectedRangeLast().highlight;t>=n&&t<=n+i-1&&m.closeEditor(!0)}const s=c.countRows();0===s?A.deselect():"ContextMenu.removeRow"===o?A.refresh():A.shiftRows(n,-i);const l=_.fixedRowsTop;l>=r+1&&(_.fixedRowsTop-=Math.min(i,l-r));const u=_.fixedRowsBottom;u&&r>=s-u&&(_.fixedRowsBottom-=Math.min(i,u)),e+=i})};Array.isArray(e)?y(l(e)):y([[e,r]]);break;case"remove_col":const w=t=>{let e=0;Object(V.a)(t,t=>{let[n,i]=t;const r=Object(a.c)(n)?c.countCols()-1:Math.max(n-e,0);let s=c.toPhysicalColumn(r);Number.isInteger(n)&&(n=Math.max(n-e,0));if(!f.removeCol(n,i,o))return;if(A.isSelected()){const{col:t}=c.getSelectedRangeLast().highlight;t>=n&&t<=n+i-1&&m.closeEditor(!0)}0===c.countCols()?A.deselect():"ContextMenu.removeColumn"===o?A.refresh():A.shiftColumns(n,-i);const l=_.fixedColumnsStart;l>=r+1&&(_.fixedColumnsStart-=Math.min(i,l-r)),Array.isArray(_.colHeaders)&&("undefined"===typeof s&&(s=-1),_.colHeaders.splice(s,i)),e+=i})};Array.isArray(e)?w(l(e)):w([[e,r]]);break;default:throw new Error(`There is no such action "${t}"`)}c.view.render(),s||p.adjustRowsAndCols()},adjustRowsAndCols(){const t=_.minRows,e=_.minSpareRows,n=_.minCols,i=_.minSpareCols;if(t){const e=c.countRows();e<t&&f.createRow(e,t-e,{source:"auto"})}if(e){const t=c.countEmptyRows(!0);if(t<e){const n=e-t,i=Math.min(n,_.maxRows-c.countSourceRows());f.createRow(c.countRows(),i,{source:"auto"})}}{let t;(n||i)&&(t=c.countEmptyCols(!0));let e=c.countCols();if(n&&!_.columns&&e<n){const i=n-e;t+=i,f.createCol(e,i,{source:"auto"})}if(i&&!_.columns&&"array"===c.dataType&&t<i){e=c.countCols();const n=i-t,r=Math.min(n,_.maxCols-e);f.createCol(e,r,{source:"auto"})}}c.view&&c.view.adjustElementsSize()},populateFromArray(t,e,n,i,r){let o,s,a,l;const u=[],h={},d=[],f=t.row,g=t.col;if(s=e.length,0===s)return!1;let p=0,m=0;switch(Object(S.l)(n)&&(p=n.col-g+1,m=n.row-f+1),r){case"shift_down":const r=Object(V.h)(e),b=r.length,y=Math.max(b,p),w=c.getData().slice(f),v=Object(V.h)(w).slice(g,g+y);for(a=0;a<y;a+=1)if(a<b){for(o=0,s=r[a].length;o<m-s;o+=1)r[a].push(r[a][o%s]);a<v.length?d.push(r[a].concat(v[a])):d.push(r[a].concat(new Array(w.length).fill(null)))}else d.push(r[a%b].concat(v[a]));c.populateFromArray(f,g,Object(V.h)(d));break;case"shift_right":const C=e.length,O=Math.max(C,m),T=c.getData().slice(f).map(t=>t.slice(g));for(o=0;o<O;o+=1)if(o<C){for(a=0,l=e[o].length;a<p-l;a+=1)e[o].push(e[o][a%l]);if(o<T.length)for(let t=0;t<T[o].length;t+=1)e[o].push(T[o][t]);else e[o].push(...new Array(T[0].length).fill(null))}else e.push(e[o%s].slice(0,O).concat(T[o]));c.populateFromArray(f,g,e);break;case"overwrite":default:h.row=t.row,h.col=t.col;let E,R=0,M=0,x=!0;const I=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=e[t%e.length];return null!==n?i[n%i.length]:i},k=e.length,A=n?n.row-t.row+1:0;for(s=n?A:Math.max(k,A),o=0;o<s&&!(n&&h.row>n.row&&A>k||!_.allowInsertRow&&h.row>c.countRows()-1||h.row>=_.maxRows);o++){const e=o-R,r=I(e).length,d=n?n.col-t.col+1:0;if(l=n?d:Math.max(r,d),h.col=t.col,E=c.getCellMeta(h.row,h.col),"CopyPaste.paste"!==i&&"Autofill.fill"!==i||!E.skipRowOnPaste){for(M=0,a=0;a<l&&!(n&&h.col>n.col&&d>r||!_.allowInsertColumn&&h.col>c.countCols()-1||h.col>=_.maxCols);a++){if(E=c.getCellMeta(h.row,h.col),("CopyPaste.paste"===i||"Autofill.fill"===i)&&E.skipColumnOnPaste){M+=1,h.col+=1,l+=1;continue}if(E.readOnly&&"UndoRedo.undo"!==i){h.col+=1;continue}let t=I(e,a-M),n=c.getDataAtCell(h.row,h.col);if(null!==t&&"object"===typeof t)if(Array.isArray(t)&&null===n&&(n=[]),null===n||"object"!==typeof n)x=!1;else{const e=Object(S.g)(Array.isArray(n)?n:n[0]||n),i=Object(S.g)(Array.isArray(t)?t:t[0]||t);Object(S.m)(e,i)||Array.isArray(e)&&Array.isArray(i)?t=Object(S.c)(t):x=!1}else null!==n&&"object"===typeof n&&(x=!1);x&&u.push([h.row,h.col,t]),x=!0,h.col+=1}h.row+=1}else R+=1,h.row+=1,s+=1}c.setDataAtCell(u,null,null,i||"populateFromArray")}}},this.init=function(){g.setData(_.data),c.runHooks("beforeInit"),(Object(l.i)()||Object(l.g)())&&Object(o.a)(c.rootElement,"mobile"),this.updateSettings(_,!0),this.view=new Ei(this),m=C.getInstance(c,_,A),y=ns(c),b=new D(c),ci(this)&&os(c),c.runHooks("init"),this.forceFullRender=!0,this.view.render(),w&&null===c.rootElement.offsetParent&&Object(o.J)(c.rootElement,()=>{c.view._wt.wtOverlays.updateLastSpreaderSize(),c.render(),c.view.adjustElementsSize()}),"object"===typeof w&&(c.runHooks("afterChange",w[0],w[1]),w=!1),c.runHooks("afterInit")},this._createCellCoords=function(t,e){return c.view._wt.createCellCoords(t,e)},this._createCellRange=function(t,e,n){return c.view._wt.createCellRange(t,e,n)},this.validateCell=function(t,e,n,i){let r=c.getCellValidator(e);function o(t){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!i||!0===e.hidden)return void n(t);const r=e.visualCol,o=e.visualRow,s=c.getCell(o,r,!0);if(s&&"TH"!==s.nodeName){const t=c.rowIndexMapper.getRenderableFromVisualIndex(o),e=c.columnIndexMapper.getRenderableFromVisualIndex(r);c.view._wt.getSetting("cellRenderer",t,e,s)}n(t)}var l;Object(a.d)(r)&&(l=r,r=function(t,e){e(l.test(t))}),Object(s.d)(r)?(t=c.runHooks("beforeValidate",t,e.visualRow,e.prop,i),c._registerImmediate(()=>{r.call(e,t,n=>{c&&(n=c.runHooks("afterValidate",n,t,e.visualRow,e.prop,i),e.valid=n,o(n),c.runHooks("postAfterValidate",n,t,e.visualRow,e.prop,i))})})):c._registerImmediate(()=>{e.valid=!0,o(e.valid,!1)})},this.setDataAtCell=function(t,e,n,i){const r=K(t,e,n),o=[];let s,a,l,u=i;for(s=0,a=r.length;s<a;s++){if("object"!==typeof r[s])throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if("number"!==typeof r[s][1])throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");l=r[s][1]>=this.countCols()?r[s][1]:f.colToProp(r[s][1]),o.push([r[s][0],l,g.getAtCell(this.toPhysicalRow(r[s][0]),r[s][1]),r[s][2]])}u||"object"!==typeof t||(u=e);const h=X(o,i);c.runHooks("afterSetDataAtCell",h,u),F(h,u,()=>{B(h,u)})},this.setDataAtRowProp=function(t,e,n,i){const r=K(t,e,n),o=[];let s,a,l=i;for(s=0,a=r.length;s<a;s++)o.push([r[s][0],r[s][1],g.getAtCell(this.toPhysicalRow(r[s][0]),r[s][1]),r[s][2]]);l||"object"!==typeof t||(l=e);const u=X(o,i);c.runHooks("afterSetDataAtRowProp",u,l),F(u,l,()=>{B(u,l)})},this.listen=function(){c&&!c.isListening()&&(Ss.forEach(t=>{c!==t&&t.unlisten()}),Cs=c.guid,c.runHooks("afterListen"))},this.unlisten=function(){this.isListening()&&(Cs=null,c.runHooks("afterUnlisten"))},this.isListening=function(){return Cs===c.guid},this.destroyEditor=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];m.closeEditor(t),c.view.render(),e&&A.isSelected()&&m.prepareEditor()},this.populateFromArray=function(t,e,n,i,r,o,s){if("object"!==typeof n||"object"!==typeof n[0])throw new Error("populateFromArray parameter `input` must be an array of arrays");const a="number"===typeof i?c._createCellCoords(i,r):null;return p.populateFromArray(c._createCellCoords(t,e),n,a,o,s)},this.spliceCol=function(t,e,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];return f.spliceCol(t,e,n,...r)},this.spliceRow=function(t,e,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];return f.spliceRow(t,e,n,...r)},this.getSelected=function(){if(A.isSelected())return Object(V.c)(A.getSelectedRange(),t=>{let{from:e,to:n}=t;return[e.row,e.col,n.row,n.col]})},this.getSelectedLast=function(){const t=this.getSelected();let e;return t&&t.length>0&&(e=t[t.length-1]),e},this.getSelectedRange=function(){if(A.isSelected())return Array.from(A.getSelectedRange())},this.getSelectedRangeLast=function(){const t=this.getSelectedRange();let e;return t&&t.length>0&&(e=t[t.length-1]),e},this.emptySelectedCells=function(t){if(!A.isSelected()||0===this.countRows()||0===this.countCols())return;const e=[];Object(V.a)(A.getSelectedRange(),t=>{if(t.isSingleHeader())return;const n=t.getTopStartCorner(),i=t.getBottomEndCorner();Object($.d)(n.row,i.row,t=>{Object($.d)(n.col,i.col,n=>{this.getCellMeta(t,n).readOnly||e.push([t,n,null])})})}),e.length>0&&this.setDataAtCell(e,t)},this.isRenderSuspended=function(){return this.renderSuspendedCounter>0},this.suspendRender=function(){this.renderSuspendedCounter+=1},this.resumeRender=function(){const t=this.renderSuspendedCounter-1;this.renderSuspendedCounter=Math.max(t,0),this.isRenderSuspended()||t!==this.renderSuspendedCounter||(this.renderCall?this.render():c.view.render())},this.render=function(){this.view&&(this.renderCall=!0,this.forceFullRender=!0,this.isRenderSuspended()||c.view.render())},this.batchRender=function(t){this.suspendRender();const e=t();return this.resumeRender(),e},this.isExecutionSuspended=function(){return this.executionSuspendedCounter>0},this.suspendExecution=function(){this.executionSuspendedCounter+=1,this.columnIndexMapper.suspendOperations(),this.rowIndexMapper.suspendOperations()},this.resumeExecution=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=this.executionSuspendedCounter-1;this.executionSuspendedCounter=Math.max(e,0),(!this.isExecutionSuspended()&&e===this.executionSuspendedCounter||t)&&(this.columnIndexMapper.resumeOperations(),this.rowIndexMapper.resumeOperations())},this.batchExecution=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.suspendExecution();const n=t();return this.resumeExecution(e),n},this.batch=function(t){this.suspendRender(),this.suspendExecution();const e=t();return this.resumeExecution(),this.resumeRender(),e},this.refreshDimensions=function(){if(!c.view)return;const{width:t,height:e}=c.view.getLastSize(),{width:n,height:i}=c.rootElement.getBoundingClientRect(),r=n!==t||i!==e;!1===c.runHooks("beforeRefreshDimensions",{width:t,height:e},{width:n,height:i},r)||((r||c.view._wt.wtOverlays.scrollableElement===c.rootWindow)&&(c.view.setLastSize(n,i),c.render()),c.runHooks("afterRefreshDimensions",{width:t,height:e},{width:n,height:i},r))},this.updateData=function(t,e){es(t,t=>{f=t},t=>{f=t,c.columnIndexMapper.fitToLength(this.getInitialColumnCount()),c.rowIndexMapper.fitToLength(this.countSourceRows()),p.adjustRowsAndCols(),A.refresh()},{hotInstance:c,dataMap:f,dataSource:g,internalSource:"updateData",source:e,metaManager:T,firstRun:w})},this.loadData=function(t,e){es(t,t=>{f=t},()=>{T.clearCellsCache(),c.initIndexMappers(),p.adjustRowsAndCols(),A.refresh(),w&&(w=[null,"loadData"])},{hotInstance:c,dataMap:f,dataSource:g,internalSource:"loadData",source:e,metaManager:T,firstRun:w})},this.getInitialColumnCount=function(){const t=_.columns;let e=0;if(Array.isArray(t))e=t.length;else if(Object(s.d)(t))if("array"===c.dataType){const n=this.countSourceCols();for(let i=0;i<n;i+=1)t(i)&&(e+=1)}else"object"!==c.dataType&&"function"!==c.dataType||(e=f.colToPropCache.length);else if(Object(a.b)(_.dataSchema)){const t=f.getSchema();e=Array.isArray(t)?t.length:Object(S.e)(t)}else e=this.countSourceCols();return e},this.initIndexMappers=function(){this.columnIndexMapper.initToLength(this.getInitialColumnCount()),this.rowIndexMapper.initToLength(this.countSourceRows())},this.getData=function(t,e,n,i){return Object(a.e)(t)?f.getAll():f.getRange(c._createCellCoords(t,e),c._createCellCoords(n,i),f.DESTINATION_RENDERER)},this.getCopyableText=function(t,e,n,i){return f.getCopyableText(c._createCellCoords(t,e),c._createCellCoords(n,i))},this.getCopyableData=function(t,e){return f.getCopyable(t,f.colToProp(e))},this.getSchema=function(){return f.getSchema()},this.updateSettings=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(w?c.loadData:c.updateData).bind(this);let i,r,o=!1;if(Object(a.b)(t.rows))throw new Error('The "rows" setting is no longer supported. Do you mean startRows, minRows or maxRows?');if(Object(a.b)(t.cols))throw new Error('The "cols" setting is no longer supported. Do you mean startCols, minCols or maxCols?');if(Object(a.b)(t.ganttChart))throw new Error('Since 8.0.0 the "ganttChart" setting is no longer supported.');for(i in t)"data"===i||("language"===i?j(t.language):"className"===i?H("className",t.className):"tableClassName"===i&&c.table?(H("tableClassName",t.tableClassName),c.view._wt.wtOverlays.syncOverlayTableClassNames()):ar.a.getSingleton().isRegistered(i)||ar.a.getSingleton().isDeprecated(i)?(Object(s.d)(t[i])||Array.isArray(t[i]))&&(t[i].initialHook=!0,c.addHook(i,t[i])):!e&&Object(S.j)(t,i)&&(E[i]=t[i]));void 0===t.data&&void 0===_.data?n(null,"updateSettings"):void 0!==t.data?n(t.data,"updateSettings"):void 0!==t.columns&&(f.createMap(),c.initIndexMappers());const l=c.countCols(),u=_.columns;if(u&&Object(s.d)(u)&&(o=!0),void 0===t.cell&&void 0===t.cells&&void 0===t.columns||T.clearCache(),l>0)for(i=0,r=0;i<l;i++){if(u){const t=o?u(i):u[r];t&&T.updateColumnMeta(r,t)}r+=1}Object(a.b)(t.cell)&&Object(S.o)(t.cell,t=>{c.setCellMetaObject(t.row,t.col,t)}),c.runHooks("afterCellMetaReset");let h=c.rootElement.style.height;""!==h&&(h=parseInt(c.rootElement.style.height,10));let d=t.height;if(Object(s.d)(d)&&(d=d()),e){c.rootElement.getAttribute("style")&&c.rootElement.setAttribute("data-initialstyle",c.rootElement.getAttribute("style"))}if(null===d){const t=c.rootElement.getAttribute("data-initialstyle");t&&(t.indexOf("height")>-1||t.indexOf("overflow")>-1)?c.rootElement.setAttribute("style",t):(c.rootElement.style.height="",c.rootElement.style.overflow="")}else void 0!==d&&(c.rootElement.style.height=isNaN(d)?""+d:d+"px",c.rootElement.style.overflow="hidden");if("undefined"!==typeof t.width){let e=t.width;Object(s.d)(e)&&(e=e()),c.rootElement.style.width=isNaN(e)?""+e:e+"px"}e||(c.view&&(c.view._wt.wtViewport.resetHasOversizedColumnHeadersMarked(),c.view._wt.exportSettingsAsClassNames()),c.runHooks("afterUpdateSettings",t)),p.adjustRowsAndCols(),c.view&&!w&&(c.forceFullRender=!0,c.view.render(),c.view._wt.wtOverlays.adjustElementsSize()),e||!c.view||""!==h&&""!==d&&void 0!==d||h===d||c.view._wt.wtOverlays.updateMainScrollableElements()},this.getValue=function(){const t=c.getSelectedLast();if(_.getValue){if(Object(s.d)(_.getValue))return _.getValue.call(c);if(t)return c.getData()[t[0][0]][_.getValue]}else if(t)return c.getDataAtCell(t[0],t[1])},this.getSettings=function(){return _},this.clear=function(){this.selectAll(),this.emptySelectedCells()},this.alter=function(t,e,n,i,r){p.alter(t,e,n,i,r)},this.getCell=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e,r=t;if(e>=0){if(this.columnIndexMapper.isHidden(this.toPhysicalColumn(e)))return null;i=this.columnIndexMapper.getRenderableFromVisualIndex(e)}if(t>=0){if(this.rowIndexMapper.isHidden(this.toPhysicalRow(t)))return null;r=this.rowIndexMapper.getRenderableFromVisualIndex(t)}return null===r||null===i||void 0===r||void 0===i?null:c.view.getCellAtCoords(c._createCellCoords(r,i),n)},this.getCoords=function(t){const e=this.view._wt.wtTable.getCoords(t);if(null===e)return null;const{row:n,col:i}=e;let r=n,o=i;return n>=0&&(r=this.rowIndexMapper.getVisualFromRenderableIndex(n)),i>=0&&(o=this.columnIndexMapper.getVisualFromRenderableIndex(i)),c._createCellCoords(r,o)},this.colToProp=function(t){return f.colToProp(t)},this.propToCol=function(t){return f.propToCol(t)},this.toVisualRow=t=>this.rowIndexMapper.getVisualFromPhysicalIndex(t),this.toVisualColumn=t=>this.columnIndexMapper.getVisualFromPhysicalIndex(t),this.toPhysicalRow=t=>this.rowIndexMapper.getPhysicalFromVisualIndex(t),this.toPhysicalColumn=t=>this.columnIndexMapper.getPhysicalFromVisualIndex(t),this.getDataAtCell=function(t,e){return f.get(t,f.colToProp(e))},this.getDataAtRowProp=function(t,e){return f.get(t,e)},this.getDataAtCol=function(t){const e=[],n=f.getRange(c._createCellCoords(0,t),c._createCellCoords(_.data.length-1,t),f.DESTINATION_RENDERER);for(let i=0;i<n.length;i+=1)for(let t=0;t<n[i].length;t+=1)e.push(n[i][t]);return e},this.getDataAtProp=function(t){const e=[],n=f.getRange(c._createCellCoords(0,f.propToCol(t)),c._createCellCoords(_.data.length-1,f.propToCol(t)),f.DESTINATION_RENDERER);for(let i=0;i<n.length;i+=1)for(let t=0;t<n[i].length;t+=1)e.push(n[i][t]);return e},this.getSourceData=function(t,e,n,i){let r;return r=void 0===t?g.getData():g.getByRange(c._createCellCoords(t,e),c._createCellCoords(n,i)),r},this.getSourceDataArray=function(t,e,n,i){let r;return r=void 0===t?g.getData(!0):g.getByRange(c._createCellCoords(t,e),c._createCellCoords(n,i),!0),r},this.getSourceDataAtCol=function(t){return g.getAtColumn(t)},this.setSourceDataAtCell=function(t,e,n,i){const r=K(t,e,n),o=this.hasHook("afterSetSourceDataAtCell"),s=[];o&&Object(V.a)(r,t=>{let[e,n,i]=t;s.push([e,n,g.getAtCell(e,n),i])}),Object(V.a)(r,t=>{let[e,n,i]=t;g.setAtCell(e,n,i)}),o&&this.runHooks("afterSetSourceDataAtCell",s,i),this.render();const l=c.getActiveEditor();l&&Object(a.b)(l.refreshValue)&&l.refreshValue()},this.getSourceDataAtRow=function(t){return g.getAtRow(t)},this.getSourceDataAtCell=function(t,e){return g.getAtCell(t,e)},this.getDataAtRow=function(t){return f.getRange(c._createCellCoords(t,0),c._createCellCoords(t,this.countCols()-1),f.DESTINATION_RENDERER)[0]||[]},this.getDataType=function(t,e,n,i){const r=void 0===t?[0,0,this.countRows(),this.countCols()]:[t,e,n,i],[o,s]=r;let[,,a,l]=r,c=null,u=null;void 0===a&&(a=o),void 0===l&&(l=s);let h="mixed";return Object($.d)(Math.max(Math.min(o,a),0),Math.max(o,a),t=>{let e=!0;return Object($.d)(Math.max(Math.min(s,l),0),Math.max(s,l),n=>{const i=this.getCellMeta(t,n);return u=i.type,c?e=c===u:c=u,e}),h=e?u:"mixed",e}),h},this.removeCellMeta=function(t,e,n){const[i,r]=[this.toPhysicalRow(t),this.toPhysicalColumn(e)];let o=T.getCellMetaKeyValue(i,r,n);!1!==c.runHooks("beforeRemoveCellMeta",t,e,n,o)&&(T.removeCellMeta(i,r,n),c.runHooks("afterRemoveCellMeta",t,e,n,o)),o=null},this.spliceCellsMeta=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(i.length>0&&!Array.isArray(i[0]))throw new Error("The 3rd argument (cellMetaRows) has to be passed as an array of cell meta objects array.");e>0&&T.removeRow(this.toPhysicalRow(t),e),i.length>0&&Object(V.a)(i.reverse(),e=>{T.createRow(this.toPhysicalRow(t)),Object(V.a)(e,(e,n)=>this.setCellMetaObject(t,n,e))}),c.render()},this.setCellMetaObject=function(t,e,n){"object"===typeof n&&Object(S.o)(n,(n,i)=>{this.setCellMeta(t,e,i,n)})},this.setCellMeta=function(t,e,n,i){if(!1===c.runHooks("beforeSetCellMeta",t,e,n,i))return;let r=t,o=e;t<this.countRows()&&(r=this.toPhysicalRow(t)),e<this.countCols()&&(o=this.toPhysicalColumn(e)),T.setCellMeta(r,o,n,i),c.runHooks("afterSetCellMeta",t,e,n,i)},this.getCellsMeta=function(){return T.getCellsMeta()},this.getCellMeta=function(t,e){let n=this.toPhysicalRow(t),i=this.toPhysicalColumn(e);return null===n&&(n=t),null===i&&(i=e),T.getCellMeta(n,i,{visualRow:t,visualColumn:e})},this.getColumnMeta=function(t){return T.getColumnMeta(this.toPhysicalColumn(t))},this.getCellMetaAtRow=function(t){return T.getCellsMetaAtRow(t)},this.isColumnModificationAllowed=function(){return!("object"===c.dataType||_.columns)},this.getCellRenderer=function(t,e){const n="number"===typeof t?c.getCellMeta(t,e).renderer:t.renderer;return"string"===typeof n?Object(z.a)(n):Object(a.e)(n)?Object(z.a)("text"):n},this.getCellEditor=function(t,e){const n="number"===typeof t?c.getCellMeta(t,e).editor:t.editor;return"string"===typeof n?Object(h.a)(n):Object(a.e)(n)?Object(h.a)("text"):n},this.getCellValidator=function(t,e){const n="number"===typeof t?c.getCellMeta(t,e).validator:t.validator;return"string"===typeof n?Object(Y.a)(n):n},this.validateCells=function(t){this._validateCells(t)},this.validateRows=function(t,e){if(!Array.isArray(t))throw new Error("validateRows parameter `rows` must be an array");this._validateCells(e,t)},this.validateColumns=function(t,e){if(!Array.isArray(t))throw new Error("validateColumns parameter `columns` must be an array");this._validateCells(e,void 0,t)},this._validateCells=function(t,e,n){const i=new P;t&&(i.onQueueEmpty=t);let r=c.countRows()-1;for(;r>=0;){if(void 0!==e&&-1===e.indexOf(r)){r-=1;continue}let t=c.countCols()-1;for(;t>=0;)void 0===n||-1!==n.indexOf(t)?(i.addValidatorToQueue(),c.validateCell(c.getDataAtCell(r,t),c.getCellMeta(r,t),t=>{if("boolean"!==typeof t)throw new Error("Validation error: result is not boolean");!1===t&&(i.valid=!1),i.removeValidatorFormQueue()},"validateCells"),t-=1):t-=1;r-=1}i.checkIfQueueIsEmpty()},this.getRowHeader=function(t){let e=_.rowHeaders,n=t;return void 0!==n&&(n=c.runHooks("modifyRowHeader",n)),void 0===n?(e=[],Object($.d)(c.countRows()-1,t=>{e.push(c.getRowHeader(t))})):Array.isArray(e)&&void 0!==e[n]?e=e[n]:Object(s.d)(e)?e=e(n):e&&"string"!==typeof e&&"number"!==typeof e&&(e=n+1),e},this.hasRowHeaders=function(){return!!_.rowHeaders},this.hasColHeaders=function(){if(void 0!==_.colHeaders&&null!==_.colHeaders)return!!_.colHeaders;for(let t=0,e=c.countCols();t<e;t++)if(c.getColHeader(t))return!0;return!1},this.getColHeader=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=c.runHooks("modifyColHeader",t);if(void 0===n){const t=[],e=c.countCols();for(let n=0;n<e;n++)t.push(c.getColHeader(n));return t}let i=_.colHeaders;const r=function(t){const e=[],n=c.countCols();let i=0;for(;i<n;i++)Object(s.d)(_.columns)&&_.columns(i)&&e.push(i);return e[t]},o=c.toPhysicalColumn(n),a=r(o);return!1===_.colHeaders?i=null:_.columns&&Object(s.d)(_.columns)&&_.columns(a)&&_.columns(a).title?i=_.columns(a).title:_.columns&&_.columns[o]&&_.columns[o].title?i=_.columns[o].title:Array.isArray(_.colHeaders)&&void 0!==_.colHeaders[o]?i=_.colHeaders[o]:Object(s.d)(_.colHeaders)?i=_.colHeaders(o):_.colHeaders&&"string"!==typeof _.colHeaders&&"number"!==typeof _.colHeaders&&(i=Object(Ri.e)(n)),i=c.runHooks("modifyColumnHeaderValue",i,t,e),i},this._getColWidthFromSettings=function(t){let e;if(t>=0){e=c.getCellMeta(0,t).width}if(void 0!==e&&e!==_.width||(e=_.colWidths),void 0!==e&&null!==e){switch(typeof e){case"object":e=e[t];break;case"function":e=e(t)}"string"===typeof e&&(e=parseInt(e,10))}return e},this.getColWidth=function(t){let e=c._getColWidthFromSettings(t);return e=c.runHooks("modifyColWidth",e,t),void 0===e&&(e=Ut.a),e},this._getRowHeightFromSettings=function(t){let e=_.rowHeights;if(void 0!==e&&null!==e){switch(typeof e){case"object":e=e[t];break;case"function":e=e(t)}"string"===typeof e&&(e=parseInt(e,10))}return e},this.getRowHeight=function(t){let e=c._getRowHeightFromSettings(t);return e=c.runHooks("modifyRowHeight",e,t),e},this.countSourceRows=function(){return g.countRows()},this.countSourceCols=function(){return g.countFirstRowKeys()},this.countRows=function(){return f.getLength()},this.countCols=function(){const t=_.maxCols,e=this.columnIndexMapper.getNotTrimmedIndexesLength();return Math.min(t,e)},this.countRenderedRows=function(){return c.view._wt.drawn?c.view._wt.wtTable.getRenderedRowsCount():-1},this.countVisibleRows=function(){return c.view._wt.drawn?c.view._wt.wtTable.getVisibleRowsCount():-1},this.countRenderedCols=function(){return c.view._wt.drawn?c.view._wt.wtTable.getRenderedColumnsCount():-1},this.countVisibleCols=function(){return c.view._wt.drawn?c.view._wt.wtTable.getVisibleColumnsCount():-1},this.countRowHeaders=function(){return this.view.getRowHeadersCount()},this.countColHeaders=function(){return this.view.getColumnHeadersCount()},this.countEmptyRows=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=0;return Object($.e)(c.countRows()-1,n=>{if(c.isEmptyRow(n))e+=1;else if(!0===t)return!1}),e},this.countEmptyCols=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=0;return Object($.e)(c.countCols()-1,n=>{if(c.isEmptyCol(n))e+=1;else if(!0===t)return!1}),e},this.isEmptyRow=function(t){return _.isEmptyRow.call(c,t)},this.isEmptyCol=function(t){return _.isEmptyCol.call(c,t)},this.selectCell=function(t,e,n,i){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return!Object(a.e)(t)&&!Object(a.e)(e)&&this.selectCells([[t,e,n,i]],r,o)},this.selectCells=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[]],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];!1===e&&y.suspend();const i=A.selectCells(t);return i&&n&&c.listen(),y.resume(),i},this.selectColumns=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2?arguments[2]:void 0;return A.selectColumns(t,e,n)},this.selectRows=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2?arguments[2]:void 0;return A.selectRows(t,e,n)},this.deselectCell=function(){A.deselect()},this.selectAll=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2?arguments[2]:void 0;y.skipNextScrollCycle(),A.selectAll(t,e,n)};const q=(t,e)=>t.getNearestNotHiddenIndex(e,1,!0);function Q(t){return()=>{throw new Error(`The "${t}" method cannot be called because this Handsontable instance has been destroyed`)}}this.scrollViewportTo=function(t){var e,n;"number"===typeof t&&(t={row:arguments[0],col:arguments[1],verticalSnap:arguments[2]?"bottom":"top",horizontalSnap:arguments[3]?"end":"start",considerHiddenIndexes:null===(n=arguments[4])||void 0===n||n});const{row:i,col:r,verticalSnap:o,horizontalSnap:s,considerHiddenIndexes:a}=null!==(e=t)&&void 0!==e?e:{};let l,u,h,d;void 0!==o&&(l="top"===o,u=!l),void 0!==s&&(h="start"===s,d=!h);let f=i,g=r;if(void 0===a||a){const t=Number.isInteger(i)&&i>=0,e=Number.isInteger(r)&&r>=0,n=t?q(this.rowIndexMapper,i):void 0,o=e?q(this.columnIndexMapper,r):void 0;if(null===n||null===o)return!1;f=t?c.rowIndexMapper.getRenderableFromVisualIndex(n):i,g=e?c.columnIndexMapper.getRenderableFromVisualIndex(o):r}const p=Number.isInteger(f),m=Number.isInteger(g);return p&&f>=0&&m&&g>=0?c.view.scrollViewport(c._createCellCoords(f,g),l,d,u,h):p&&f>=0&&(m&&g<0||!m)?c.view.scrollViewportVertically(f,l,u):!!(m&&g>=0&&(p&&f<0||!p))&&c.view.scrollViewportHorizontally(g,d,h)},this.scrollToFocusedCell=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};if(!this.selection.isSelected())return;this.addHookOnce("afterScroll",t);const{highlight:e}=this.getSelectedRangeLast(),n=this.scrollViewportTo(e.toObject());n?this.view.render():(this.removeHook("afterScroll",t),this._registerImmediate(()=>t()))},this.destroy=function(){if(c._clearTimeouts(),c._clearImmediates(),c.view&&c.view.destroy(),g&&g.destroy(),g=null,this.getShortcutManager().destroy(),T.clearCache(),Ss.delete(this.guid),ci(c)){const t=this.rootDocument.querySelector(".hot-display-license-info");t&&t.parentNode.removeChild(t)}Object(o.e)(c.rootElement),u.destroy(),m&&m.destroy(),c.batchExecution(()=>{c.rowIndexMapper.unregisterAll(),c.columnIndexMapper.unregisterAll(),R.getItems().forEach(t=>{let[,e]=t;e.destroy()}),R.clear(),c.runHooks("afterDestroy")},!0),ar.a.getSingleton().destroy(c),Object(S.o)(c,(t,e,n)=>{Object(s.d)(t)?n[e]=Q(e):"guid"!==e&&(n[e]=null)}),c.isDestroyed=!0,f&&f.destroy(),f=null,p=null,A=null,m=null,c=null},this.getActiveEditor=function(){return m.getActiveEditor()},this.getFirstRenderedVisibleRow=function(){return c.view.getFirstRenderedVisibleRow()},this.getLastRenderedVisibleRow=function(){return c.view.getLastRenderedVisibleRow()},this.getFirstRenderedVisibleColumn=function(){return c.view.getFirstRenderedVisibleColumn()},this.getLastRenderedVisibleColumn=function(){return c.view.getLastRenderedVisibleColumn()},this.getFirstFullyVisibleRow=function(){return c.view.getFirstFullyVisibleRow()},this.getLastFullyVisibleRow=function(){return c.view.getLastFullyVisibleRow()},this.getFirstFullyVisibleColumn=function(){return c.view.getFirstFullyVisibleColumn()},this.getLastFullyVisibleColumn=function(){return c.view.getLastFullyVisibleColumn()},this.getFirstPartiallyVisibleRow=function(){return c.view.getFirstPartiallyVisibleRow()},this.getLastPartiallyVisibleRow=function(){return c.view.getLastPartiallyVisibleRow()},this.getFirstPartiallyVisibleColumn=function(){return c.view.getFirstPartiallyVisibleColumn()},this.getLastPartiallyVisibleColumn=function(){return c.view.getLastPartiallyVisibleColumn()},this.getPlugin=function(t){const e=Object(G.f)(t);return"UndoRedo"===e?this.undoRedo:R.getItem(e)},this.getPluginName=function(t){return t===this.undoRedo?this.undoRedo.constructor.PLUGIN_KEY:R.getId(t)},this.getInstance=function(){return c},this.addHook=function(t,e,n){ar.a.getSingleton().add(t,e,c,n)},this.hasHook=function(t){return ar.a.getSingleton().has(t,c)||ar.a.getSingleton().has(t)},this.addHookOnce=function(t,e,n){ar.a.getSingleton().once(t,e,c,n)},this.removeHook=function(t,e){ar.a.getSingleton().remove(t,e,c)},this.runHooks=function(t,e,n,i,r,o,s){return ar.a.getSingleton().run(c,t,e,n,i,r,o,s)},this.getTranslatedPhrase=function(t,e){return Tr(_.language,t,e)},this.toHTML=()=>Object(U.c)(this),this.toTableElement=()=>{const t=this.rootDocument.createElement("div");return t.insertAdjacentHTML("afterbegin",Object(U.c)(this)),t.firstElementChild},this.timeouts=[],this._registerTimeout=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t;"function"===typeof n&&(n=setTimeout(n,e)),this.timeouts.push(n)},this._clearTimeouts=function(){Object(V.a)(this.timeouts,t=>{clearTimeout(t)})},this.immediates=[],this._registerImmediate=function(t){this.immediates.push(setImmediate(t))},this._clearImmediates=function(){Object(V.a)(this.immediates,t=>{clearImmediate(t)})},this._getEditorManager=function(){return m},this.isRtl=function(){return"rtl"===c.rootWindow.getComputedStyle(c.rootElement).direction},this.isLtr=function(){return!c.isRtl()},this.getDirectionFactor=function(){return c.isLtr()?1:-1};const Z=ws({handleEvent:()=>c.isListening(),beforeKeyDown:t=>this.runHooks("beforeKeyDown",t),afterKeyDown:t=>{this.isDestroyed||c.runHooks("afterDocumentKeyDown",t)},ownerWindow:this.rootWindow});this.addHook("beforeOnCellMouseDown",t=>{!1===t.ctrlKey&&!1===t.metaKey&&Z.releasePressedKeys()}),this.getShortcutManager=function(){return Z},this.getFocusManager=function(){return b},Object(W.b)().forEach(t=>{const e=Object(W.a)(t);R.addItem(t,new e(this))}),Object(vs.a)(c),Z.setActiveContextName("grid"),ar.a.getSingleton().run(c,"construct")}var Ts=n(235),_s=n(240);function Es(t,e){const n=new Os(t,e||{},si);return n.init(),n}Object(_o.c)(Ts.a),Es.editors={BaseEditor:_s.a},Es.Core=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Os(t,e,si)},Es.DefaultSettings=ko(),Es.hooks=ar.a.getSingleton(),Es.CellCoords=Ce.a,Es.CellRange=Se.a,Es.packageName="handsontable",Es.buildDate="30/09/2024 12:33:10",Es.version="14.6.0",Es.languages={dictionaryKeys:pr,getLanguageDictionary:Sr,getLanguagesDictionaries:function(){return vr()},registerLanguageDictionary:Cr,getTranslatedPhrase:Tr};var Rs=Es;function Ms(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function xs(t,e,n){return e=js(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],js(t).constructor):e.apply(t,n))}function Is(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ks(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Bs(i.key),i)}}function As(t,e,n){return e&&ks(t.prototype,e),n&&ks(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ns(t,e,n){return(e=Bs(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function js(t){return(js=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hs(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ls(t,e)}function Ds(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ps(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ds(Object(n),!0).forEach((function(e){Ns(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ds(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ls(t,e){return(Ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Fs(t){return function(t){if(Array.isArray(t))return Ms(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ms(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ms(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bs(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==typeof e?e:e+""}var Vs=null;function Us(t,e){var n=i.Children.toArray(t),r=i.Children.count(t),o=null;return 0!==r&&(o=1===r&&n[0].props[e]?n[0]:n.find((function(t){return void 0!==t.props[e]}))),o||null}function Ws(t){return t?t.type.WrappedComponent?t.type.WrappedComponent:t.type:null}function zs(t,e){if("undefined"===typeof t||null===e)return null;var n=Gs(e.props,!1);return n.className="".concat("hot-wrapper-editor-container"," ").concat(n.className),r.createPortal(i.createElement("div",Object.assign({},n),e),t.body)}function Ys(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"global",r=Us(t,"hot-editor"),o=Ws(r);return r?i.cloneElement(r,{emitEditorInstance:function(t,n){e.get(o)||e.set(o,new Map),e.get(o).set(null!==n&&void 0!==n?n:"global",t)},editorColumnScope:n,isEditor:!0}):null}function Gs(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{id:t.id||(e?"hot-"+Math.random().toString(36).substring(5):void 0),className:t.className||"",style:t.style||{}}}var $s=function(){return As((function t(){Is(this,t)}),null,[{key:"getSettings",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.prevProps,i=void 0===n?{}:n,r=e.isInit,o=void 0!==r&&r,s=e.initOnlySettingKeys,a=void 0===s?[]:s,l=function(e){return!(o||!a.includes(e))&&i[e]===t[e]},c={};if(t.settings){var u=t.settings;for(var h in u)u.hasOwnProperty(h)&&!l(h)&&(c[h]=u[h])}for(var d in t)"settings"!==d&&"children"!==d&&!l(d)&&t.hasOwnProperty(d)&&(c[d]=t[d]);return c}}])}(),Ks=function(t){function e(){return Is(this,e),xs(this,e,arguments)}return Hs(e,t),As(e,[{key:"getSettingsProps",value:function(){var t=this;return this.internalProps=["_componentRendererColumns","_emitColumnSettings","_columnIndex","_getChildElementByType","_getRendererWrapper","_getEditorClass","_getEditorCache","_getOwnerDocument","hot-renderer","hot-editor","children"],Object.keys(this.props).filter((function(e){return!t.internalProps.includes(e)})).reduce((function(e,n){return e[n]=t.props[n],e}),{})}},{key:"getLocalEditorElement",value:function(){return Ys(this.props.children,this.props._getEditorCache(),this.props._columnIndex)}},{key:"createColumnSettings",value:function(){var t=this.props._getChildElementByType(this.props.children,"hot-renderer"),e=this.getLocalEditorElement();this.columnSettings=$s.getSettings(this.getSettingsProps()),null!==t&&(this.columnSettings.renderer=this.props._getRendererWrapper(t),this.props._componentRendererColumns.set(this.props._columnIndex,!0)),null!==e&&(this.columnSettings.editor=this.props._getEditorClass(e,this.props._columnIndex))}},{key:"emitColumnSettings",value:function(){this.props._emitColumnSettings(this.columnSettings,this.props._columnIndex)}},{key:"componentDidMount",value:function(){this.createColumnSettings(),this.emitColumnSettings()}},{key:"componentDidUpdate",value:function(){this.createColumnSettings(),this.emitColumnSettings()}},{key:"render",value:function(){var t=zs(this.props._getOwnerDocument(),this.getLocalEditorElement());return i.createElement(i.Fragment,null,t)}}])}(i.Component),Xs=function(t){function e(){var t;return Is(this,e),(t=xs(this,e,arguments)).state={portals:[]},t}return Hs(e,t),As(e,[{key:"render",value:function(){return i.createElement(i.Fragment,null,this.state.portals)}}])}(i.Component);function qs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qs={exports:{}};var Zs,Js,ta,ea;function na(){if(Js)return Zs;Js=1;return Zs="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}Qs.exports=function(){if(ea)return ta;ea=1;var t=na();function e(){}function n(){}return n.resetWarningCache=e,ta=function(){function i(e,n,i,r,o,s){if(s!==t){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function r(){return i}i.isRequired=i;var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o}}()();var ia=qs(Qs.exports),ra=function(t){function e(){var t;return Is(this,e),(t=xs(this,e,arguments)).id=null,t.__hotInstance=null,t.hotElementRef=null,t.columnSettings=[],t.renderersPortalManager=null,t.portalCache=new Map,t.portalContainerCache=new Map,t.renderedCellCache=new Map,t.editorCache=new Map,t.componentRendererColumns=new Map,t}return Hs(e,t),As(e,[{key:"hotInstance",get:function(){return!this.__hotInstance||this.__hotInstance&&!this.__hotInstance.isDestroyed?this.__hotInstance:(console.warn("The Handsontable instance bound to this component was destroyed and cannot be used properly."),null)},set:function(t){this.__hotInstance=t}},{key:"_isHotInstanceDestroyed",value:function(){return this.__hotInstance&&this.__hotInstance.isDestroyed}},{key:"getPortalContainerCache",value:function(){return this.portalContainerCache}},{key:"getRenderedCellCache",value:function(){return this.renderedCellCache}},{key:"getEditorCache",value:function(){return this.editorCache}},{key:"clearCache",value:function(){this.getRenderedCellCache().clear(),this.componentRendererColumns.clear()}},{key:"getOwnerDocument",value:function(){return"undefined"!==typeof window?this.hotElementRef?this.hotElementRef.ownerDocument:document:null}},{key:"setHotElementRef",value:function(t){this.hotElementRef=t}},{key:"getRendererWrapper",value:function(t){var e=this;return function(n,o,s,a,l,c,u){var h=e.getRenderedCellCache(),d=e.getPortalContainerCache(),f="".concat(s,"-").concat(a),g=n.guid,p="".concat(g,"-").concat(f),m="".concat(f,"-").concat(g);if(h.has(f)&&(o.innerHTML=h.get(f).innerHTML),o&&!o.getAttribute("ghost-table")){for(var b=e.portalCache.get(m),y=d.get(p);o.firstChild;)o.removeChild(o.firstChild);if(b&&y)o.appendChild(y);else{var w=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;n||(n=document),Vs||(Vs=n.createDocumentFragment());var a=null!==s&&void 0!==s?s:n.createElement("DIV");Vs.appendChild(a);var l=i.cloneElement(t,Ps({key:"".concat(e.row,"-").concat(e.col)},e));return{portal:r.createPortal(l,a,o),portalContainer:a}}(t,{TD:o,row:s,col:a,prop:l,value:c,cellProperties:u,isRenderer:!0},o.ownerDocument,m,y),v=w.portal,C=w.portalContainer;d.set(p,C),o.appendChild(C),e.portalCache.set(m,v)}}return h.set(f,o),o}}},{key:"getEditorClass",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global",i=Ws(t),r=null===(e=this.getEditorCache().get(i))||void 0===e?void 0:e.get(n);return this.makeEditorClass(r)}},{key:"makeEditorClass",value:function(t){var e=function(e){function n(e){var i;return Is(this,n),i=xs(this,n,[e]),t.hotCustomEditorInstance=i,i.editorComponent=t,i}return Hs(n,e),As(n,[{key:"focus",value:function(){}},{key:"getValue",value:function(){}},{key:"setValue",value:function(){}},{key:"open",value:function(){}},{key:"close",value:function(){}}])}(Rs.editors.BaseEditor);return Object.getOwnPropertyNames(Rs.editors.BaseEditor.prototype).forEach((function(n){"constructor"!==n&&(e.prototype[n]=function(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t[n]).call.apply(e,[t].concat(r))})})),e}},{key:"getGlobalRendererElement",value:function(){return Us(this.props.children,"hot-renderer")}},{key:"getGlobalEditorElement",value:function(){return Ys(this.props.children,this.getEditorCache())}},{key:"createNewGlobalSettings",value:function(){var t,e,n,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this._isHotInstanceDestroyed()?[]:(null===(t=this.hotInstance)||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t._initOnlySettings)||[],s=$s.getSettings(this.props,{prevProps:r,isInit:i,initOnlySettingKeys:o}),a=this.getGlobalRendererElement(),l=this.getGlobalEditorElement();(s.columns=this.columnSettings.length?this.columnSettings:s.columns,l)?s.editor=this.getEditorClass(l,"global"):this.props.editor||null!==(e=this.props.settings)&&void 0!==e&&e.editor?s.editor=this.props.editor||this.props.settings.editor:s.editor=Object(h.a)("text");a?(s.renderer=this.getRendererWrapper(a),this.componentRendererColumns.set("global",!0)):this.props.renderer||null!==(n=this.props.settings)&&void 0!==n&&n.renderer?s.renderer=this.props.renderer||this.props.settings.renderer:s.renderer=Object(z.a)("text");return s}},{key:"displayAutoSizeWarning",value:function(t){var e,n;this.hotInstance&&(null!==(e=this.hotInstance.getPlugin("autoRowSize"))&&void 0!==e&&e.enabled||null!==(n=this.hotInstance.getPlugin("autoColumnSize"))&&void 0!==n&&n.enabled)&&this.componentRendererColumns.size>0&&function(){var t;"undefined"!==typeof console&&(t=console).warn.apply(t,arguments)}("Your `HotTable` configuration includes `autoRowSize`/`autoColumnSize` options, which are not compatible with  the component-based renderers`. Disable `autoRowSize` and `autoColumnSize` to prevent row and column misalignment.")}},{key:"setHotColumnSettings",value:function(t,e){this.columnSettings[e]=t}},{key:"handsontableBeforeViewRender",value:function(){this.portalCache.clear(),this.getRenderedCellCache().clear()}},{key:"handsontableAfterViewRender",value:function(){this.renderersPortalManager.setState({portals:Fs(this.portalCache.values())})}},{key:"updateHot",value:function(t){this.hotInstance&&this.hotInstance.updateSettings(t,!1)}},{key:"setRenderersPortalManagerRef",value:function(t){this.renderersPortalManager=t}},{key:"componentDidMount",value:function(){var t=this,e=this.createNewGlobalSettings(!0);this.hotInstance=new Rs.Core(this.hotElementRef,e),this.hotInstance.addHook("beforeViewRender",(function(){return t.handsontableBeforeViewRender()})),this.hotInstance.addHook("afterViewRender",(function(){return t.handsontableAfterViewRender()})),this.hotInstance.init(),this.displayAutoSizeWarning(e)}},{key:"componentDidUpdate",value:function(t){this.clearCache();var e=this.createNewGlobalSettings(!1,t);this.updateHot(e),this.displayAutoSizeWarning(e)}},{key:"componentWillUnmount",value:function(){this.clearCache(),this.hotInstance&&this.hotInstance.destroy()}},{key:"render",value:function(){var t=this,e=i.Children.toArray(this.props.children).filter((function(t){return function(t){return t.type===Ks}(t)})).map((function(e,n){return i.cloneElement(e,{_componentRendererColumns:t.componentRendererColumns,_emitColumnSettings:t.setHotColumnSettings.bind(t),_columnIndex:n,_getChildElementByType:Us.bind(t),_getRendererWrapper:t.getRendererWrapper.bind(t),_getEditorClass:t.getEditorClass.bind(t),_getOwnerDocument:t.getOwnerDocument.bind(t),_getEditorCache:t.getEditorCache.bind(t),children:e.props.children})})),n=Gs(this.props),r=zs(this.getOwnerDocument(),this.getGlobalEditorElement());return i.createElement(i.Fragment,null,i.createElement("div",Object.assign({ref:this.setHotElementRef.bind(this)},n),e),i.createElement(Xs,{ref:this.setRenderersPortalManagerRef.bind(this)}),r)}}],[{key:"version",get:function(){return"14.6.0"}}])}(i.Component);ra.propTypes={style:ia.object,id:ia.string,className:ia.string};var oa=["children"],sa=i.forwardRef((function(t,e){var n,r=t.children,o=function(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.includes(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(t,oa),s="function"===typeof i.useId?i.useId():void 0,a=null!==(n=o.id)&&void 0!==n?n:s;return i.createElement(ra,Object.assign({id:a},o,{ref:e}),r)}));sa.version=ra.version;i.Component},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(79),r="function"===typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,s=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,h=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.memo"):60115,p=r?Symbol.for("react.lazy"):60116,m="function"===typeof Symbol&&Symbol.iterator;function b(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w={};function v(t,e,n){this.props=t,this.context=e,this.refs=w,this.updater=n||y}function C(){}function S(t,e,n){this.props=t,this.context=e,this.refs=w,this.updater=n||y}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(b(85));this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},C.prototype=v.prototype;var O=S.prototype=new C;O.constructor=S,i(O,v.prototype),O.isPureReactComponent=!0;var T={current:null},_=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function R(t,e,n){var i,r={},s=null,a=null;if(null!=e)for(i in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)_.call(e,i)&&!E.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===r[i]&&(r[i]=l[i]);return{$$typeof:o,type:t,key:s,ref:a,props:r,_owner:T.current}}function M(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}var x=/\/+/g,I=[];function k(t,e,n,i){if(I.length){var r=I.pop();return r.result=t,r.keyPrefix=e,r.func=n,r.context=i,r.count=0,r}return{result:t,keyPrefix:e,func:n,context:i,count:0}}function A(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>I.length&&I.push(t)}function N(t,e,n){return null==t?0:function t(e,n,i,r){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case o:case s:l=!0}}if(l)return i(r,e,""===n?"."+j(e,0):n),1;if(l=0,n=""===n?".":n+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=n+j(a=e[c],c);l+=t(a,u,i,r)}else if(null===e||"object"!==typeof e?u=null:u="function"===typeof(u=m&&e[m]||e["@@iterator"])?u:null,"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=t(a=a.value,u=n+j(a,c++),i,r);else if("object"===a)throw i=""+e,Error(b(31,"[object Object]"===i?"object with keys {"+Object.keys(e).join(", ")+"}":i,""));return l}(t,"",e,n)}function j(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function H(t,e){t.func.call(t.context,e,t.count++)}function D(t,e,n){var i=t.result,r=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?P(t,i,n,(function(t){return t})):null!=t&&(M(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,r+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(x,"$&/")+"/")+n)),i.push(t))}function P(t,e,n,i,r){var o="";null!=n&&(o=(""+n).replace(x,"$&/")+"/"),N(t,D,e=k(e,o,i,r)),A(e)}var L={current:null};function F(){var t=L.current;if(null===t)throw Error(b(321));return t}var B={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:T,IsSomeRendererActing:{current:!1},assign:i};e.Children={map:function(t,e,n){if(null==t)return t;var i=[];return P(t,i,null,e,n),i},forEach:function(t,e,n){if(null==t)return t;N(t,H,e=k(null,null,e,n)),A(e)},count:function(t){return N(t,(function(){return null}),null)},toArray:function(t){var e=[];return P(t,e,null,(function(t){return t})),e},only:function(t){if(!M(t))throw Error(b(143));return t}},e.Component=v,e.Fragment=a,e.Profiler=c,e.PureComponent=S,e.StrictMode=l,e.Suspense=f,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(b(267,t));var r=i({},t.props),s=t.key,a=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,l=T.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)_.call(e,u)&&!E.hasOwnProperty(u)&&(r[u]=void 0===e[u]&&void 0!==c?c[u]:e[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];r.children=c}return{$$typeof:o,type:t.type,key:s,ref:a,props:r,_owner:l}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:t},t.Consumer=t},e.createElement=R,e.createFactory=function(t){var e=R.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:d,render:t}},e.isValidElement=M,e.lazy=function(t){return{$$typeof:p,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:g,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return F().useCallback(t,e)},e.useContext=function(t,e){return F().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return F().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return F().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return F().useLayoutEffect(t,e)},e.useMemo=function(t,e){return F().useMemo(t,e)},e.useReducer=function(t,e,n){return F().useReducer(t,e,n)},e.useRef=function(t){return F().useRef(t)},e.useState=function(t){return F().useState(t)},e.version="16.14.0"},function(t,e,n){"use strict";var i=n(12),r=n(79),o=n(137);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(s(227));function a(t,e,n,i,r,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var l=!1,c=null,u=!1,h=null,d={onError:function(t){l=!0,c=t}};function f(t,e,n,i,r,o,s,u,h){l=!1,c=null,a.apply(d,arguments)}var g=null,p=null,m=null;function b(t,e,n){var i=t.type||"unknown-event";t.currentTarget=m(n),function(t,e,n,i,r,o,a,d,g){if(f.apply(this,arguments),l){if(!l)throw Error(s(198));var p=c;l=!1,c=null,u||(u=!0,h=p)}}(i,e,void 0,t),t.currentTarget=null}var y=null,w={};function v(){if(y)for(var t in w){var e=w[t],n=y.indexOf(t);if(!(-1<n))throw Error(s(96,t));if(!S[n]){if(!e.extractEvents)throw Error(s(97,t));for(var i in S[n]=e,n=e.eventTypes){var r=void 0,o=n[i],a=e,l=i;if(O.hasOwnProperty(l))throw Error(s(99,l));O[l]=o;var c=o.phasedRegistrationNames;if(c){for(r in c)c.hasOwnProperty(r)&&C(c[r],a,l);r=!0}else o.registrationName?(C(o.registrationName,a,l),r=!0):r=!1;if(!r)throw Error(s(98,i,t))}}}}function C(t,e,n){if(T[t])throw Error(s(100,t));T[t]=e,_[t]=e.eventTypes[n].dependencies}var S=[],O={},T={},_={};function E(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var i=t[e];if(!w.hasOwnProperty(e)||w[e]!==i){if(w[e])throw Error(s(102,e));w[e]=i,n=!0}}n&&v()}var R=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),M=null,x=null,I=null;function k(t){if(t=p(t)){if("function"!==typeof M)throw Error(s(280));var e=t.stateNode;e&&(e=g(e),M(t.stateNode,t.type,e))}}function A(t){x?I?I.push(t):I=[t]:x=t}function N(){if(x){var t=x,e=I;if(I=x=null,k(t),e)for(t=0;t<e.length;t++)k(e[t])}}function j(t,e){return t(e)}function H(t,e,n,i,r){return t(e,n,i,r)}function D(){}var P=j,L=!1,F=!1;function B(){null===x&&null===I||(D(),N())}function V(t,e,n){if(F)return t(e,n);F=!0;try{return P(t,e,n)}finally{F=!1,B()}}var U=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W=Object.prototype.hasOwnProperty,z={},Y={};function G(t,e,n,i,r,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){$[t]=new G(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];$[e]=new G(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){$[t]=new G(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){$[t]=new G(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){$[t]=new G(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){$[t]=new G(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){$[t]=new G(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){$[t]=new G(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){$[t]=new G(t,5,!1,t.toLowerCase(),null,!1)}));var K=/[\-:]([a-z])/g;function X(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(K,X);$[e]=new G(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(K,X);$[e]=new G(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(K,X);$[e]=new G(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){$[t]=new G(t,1,!1,t.toLowerCase(),null,!1)})),$.xlinkHref=new G("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){$[t]=new G(t,1,!1,t.toLowerCase(),null,!0)}));var q=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Q(t,e,n,i){var r=$.hasOwnProperty(e)?$[e]:null;(null!==r?0===r.type:!i&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!W.call(Y,t)||!W.call(z,t)&&(U.test(t)?Y[t]=!0:(z[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}q.hasOwnProperty("ReactCurrentDispatcher")||(q.ReactCurrentDispatcher={current:null}),q.hasOwnProperty("ReactCurrentBatchConfig")||(q.ReactCurrentBatchConfig={suspense:null});var Z=/^(.*)[\\\/]/,J="function"===typeof Symbol&&Symbol.for,tt=J?Symbol.for("react.element"):60103,et=J?Symbol.for("react.portal"):60106,nt=J?Symbol.for("react.fragment"):60107,it=J?Symbol.for("react.strict_mode"):60108,rt=J?Symbol.for("react.profiler"):60114,ot=J?Symbol.for("react.provider"):60109,st=J?Symbol.for("react.context"):60110,at=J?Symbol.for("react.concurrent_mode"):60111,lt=J?Symbol.for("react.forward_ref"):60112,ct=J?Symbol.for("react.suspense"):60113,ut=J?Symbol.for("react.suspense_list"):60120,ht=J?Symbol.for("react.memo"):60115,dt=J?Symbol.for("react.lazy"):60116,ft=J?Symbol.for("react.block"):60121,gt="function"===typeof Symbol&&Symbol.iterator;function pt(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=gt&&t[gt]||t["@@iterator"])?t:null}function mt(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case nt:return"Fragment";case et:return"Portal";case rt:return"Profiler";case it:return"StrictMode";case ct:return"Suspense";case ut:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case st:return"Context.Consumer";case ot:return"Context.Provider";case lt:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ht:return mt(t.type);case ft:return mt(t.render);case dt:if(t=1===t._status?t._result:null)return mt(t)}return null}function bt(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var i=t._debugOwner,r=t._debugSource,o=mt(t.type);n=null,i&&(n=mt(i.type)),i=o,o="",r?o=" (at "+r.fileName.replace(Z,"")+":"+r.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(i||"Unknown")+o}e+=n,t=t.return}while(t);return e}function yt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function wt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function vt(t){t._valueTracker||(t._valueTracker=function(t){var e=wt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Ct(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=wt(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function St(t,e){var n=e.checked;return r({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Ot(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=yt(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Tt(t,e){null!=(e=e.checked)&&Q(t,"checked",e,!1)}function _t(t,e){Tt(t,e);var n=yt(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?Rt(t,e.type,n):e.hasOwnProperty("defaultValue")&&Rt(t,e.type,yt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Et(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Rt(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function Mt(t,e){return t=r({children:void 0},e),(e=function(t){var e="";return i.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function xt(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+yt(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function It(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return r({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:yt(n)}}function At(t,e){var n=yt(e.value),i=yt(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function Nt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var jt="http://www.w3.org/1999/xhtml",Ht="http://www.w3.org/2000/svg";function Dt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Dt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Lt,Ft=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==Ht||"innerHTML"in t)t.innerHTML=e;else{for((Lt=Lt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function Bt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function Vt(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ut={animationend:Vt("Animation","AnimationEnd"),animationiteration:Vt("Animation","AnimationIteration"),animationstart:Vt("Animation","AnimationStart"),transitionend:Vt("Transition","TransitionEnd")},Wt={},zt={};function Yt(t){if(Wt[t])return Wt[t];if(!Ut[t])return t;var e,n=Ut[t];for(e in n)if(n.hasOwnProperty(e)&&e in zt)return Wt[t]=n[e];return t}R&&(zt=document.createElement("div").style,"AnimationEvent"in window||(delete Ut.animationend.animation,delete Ut.animationiteration.animation,delete Ut.animationstart.animation),"TransitionEvent"in window||delete Ut.transitionend.transition);var Gt=Yt("animationend"),$t=Yt("animationiteration"),Kt=Yt("animationstart"),Xt=Yt("transitionend"),qt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qt=new("function"===typeof WeakMap?WeakMap:Map);function Zt(t){var e=Qt.get(t);return void 0===e&&(e=new Map,Qt.set(t,e)),e}function Jt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function te(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function ee(t){if(Jt(t)!==t)throw Error(s(188))}function ne(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Jt(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return ee(r),t;if(o===i)return ee(r),e;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function ie(t,e){if(null==e)throw Error(s(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function re(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var oe=null;function se(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var i=0;i<e.length&&!t.isPropagationStopped();i++)b(t,e[i],n[i]);else e&&b(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function ae(t){if(null!==t&&(oe=ie(oe,t)),t=oe,oe=null,t){if(re(t,se),oe)throw Error(s(95));if(u)throw t=h,u=!1,h=null,t}}function le(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function ce(t){if(!R)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"===typeof e[t]),e}var ue=[];function he(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>ue.length&&ue.push(t)}function de(t,e,n,i){if(ue.length){var r=ue.pop();return r.topLevelType=t,r.eventSystemFlags=i,r.nativeEvent=e,r.targetInst=n,r}return{topLevelType:t,eventSystemFlags:i,nativeEvent:e,targetInst:n,ancestors:[]}}function fe(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var i=n;if(3===i.tag)i=i.stateNode.containerInfo;else{for(;i.return;)i=i.return;i=3!==i.tag?null:i.stateNode.containerInfo}if(!i)break;5!==(e=n.tag)&&6!==e||t.ancestors.push(n),n=Rn(i)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var r=le(t.nativeEvent);i=t.topLevelType;var o=t.nativeEvent,s=t.eventSystemFlags;0===n&&(s|=64);for(var a=null,l=0;l<S.length;l++){var c=S[l];c&&(c=c.extractEvents(i,e,o,r,s))&&(a=ie(a,c))}ae(a)}}function ge(t,e,n){if(!n.has(t)){switch(t){case"scroll":Ke(e,"scroll",!0);break;case"focus":case"blur":Ke(e,"focus",!0),Ke(e,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ce(t)&&Ke(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===qt.indexOf(t)&&$e(t,e)}n.set(t,null)}}var pe,me,be,ye=!1,we=[],ve=null,Ce=null,Se=null,Oe=new Map,Te=new Map,_e=[],Ee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Re="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Me(t,e,n,i,r){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:r,container:i}}function xe(t,e){switch(t){case"focus":case"blur":ve=null;break;case"dragenter":case"dragleave":Ce=null;break;case"mouseover":case"mouseout":Se=null;break;case"pointerover":case"pointerout":Oe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Te.delete(e.pointerId)}}function Ie(t,e,n,i,r,o){return null===t||t.nativeEvent!==o?(t=Me(e,n,i,r,o),null!==e&&(null!==(e=Mn(e))&&me(e)),t):(t.eventSystemFlags|=i,t)}function ke(t){var e=Rn(t.target);if(null!==e){var n=Jt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=te(n)))return t.blockedOn=e,void o.unstable_runWithPriority(t.priority,(function(){be(n)}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Ae(t){if(null!==t.blockedOn)return!1;var e=Ze(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null!==e){var n=Mn(e);return null!==n&&me(n),t.blockedOn=e,!1}return!0}function Ne(t,e,n){Ae(t)&&n.delete(e)}function je(){for(ye=!1;0<we.length;){var t=we[0];if(null!==t.blockedOn){null!==(t=Mn(t.blockedOn))&&pe(t);break}var e=Ze(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:we.shift()}null!==ve&&Ae(ve)&&(ve=null),null!==Ce&&Ae(Ce)&&(Ce=null),null!==Se&&Ae(Se)&&(Se=null),Oe.forEach(Ne),Te.forEach(Ne)}function He(t,e){t.blockedOn===e&&(t.blockedOn=null,ye||(ye=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,je)))}function De(t){function e(e){return He(e,t)}if(0<we.length){He(we[0],t);for(var n=1;n<we.length;n++){var i=we[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==ve&&He(ve,t),null!==Ce&&He(Ce,t),null!==Se&&He(Se,t),Oe.forEach(e),Te.forEach(e),n=0;n<_e.length;n++)(i=_e[n]).blockedOn===t&&(i.blockedOn=null);for(;0<_e.length&&null===(n=_e[0]).blockedOn;)ke(n),null===n.blockedOn&&_e.shift()}var Pe={},Le=new Map,Fe=new Map,Be=["abort","abort",Gt,"animationEnd",$t,"animationIteration",Kt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Xt,"transitionEnd","waiting","waiting"];function Ve(t,e){for(var n=0;n<t.length;n+=2){var i=t[n],r=t[n+1],o="on"+(r[0].toUpperCase()+r.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[i],eventPriority:e},Fe.set(i,e),Le.set(i,o),Pe[r]=o}}Ve("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ve("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ve(Be,2);for(var Ue="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),We=0;We<Ue.length;We++)Fe.set(Ue[We],0);var ze=o.unstable_UserBlockingPriority,Ye=o.unstable_runWithPriority,Ge=!0;function $e(t,e){Ke(e,t,!1)}function Ke(t,e,n){var i=Fe.get(e);switch(void 0===i?2:i){case 0:i=Xe.bind(null,e,1,t);break;case 1:i=qe.bind(null,e,1,t);break;default:i=Qe.bind(null,e,1,t)}n?t.addEventListener(e,i,!0):t.addEventListener(e,i,!1)}function Xe(t,e,n,i){L||D();var r=Qe,o=L;L=!0;try{H(r,t,e,n,i)}finally{(L=o)||B()}}function qe(t,e,n,i){Ye(ze,Qe.bind(null,t,e,n,i))}function Qe(t,e,n,i){if(Ge)if(0<we.length&&-1<Ee.indexOf(t))t=Me(null,t,e,n,i),we.push(t);else{var r=Ze(t,e,n,i);if(null===r)xe(t,i);else if(-1<Ee.indexOf(t))t=Me(r,t,e,n,i),we.push(t);else if(!function(t,e,n,i,r){switch(e){case"focus":return ve=Ie(ve,t,e,n,i,r),!0;case"dragenter":return Ce=Ie(Ce,t,e,n,i,r),!0;case"mouseover":return Se=Ie(Se,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Oe.set(o,Ie(Oe.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Te.set(o,Ie(Te.get(o)||null,t,e,n,i,r)),!0}return!1}(r,t,e,n,i)){xe(t,i),t=de(t,i,null,e);try{V(fe,t)}finally{he(t)}}}}function Ze(t,e,n,i){if(null!==(n=Rn(n=le(i)))){var r=Jt(n);if(null===r)n=null;else{var o=r.tag;if(13===o){if(null!==(n=te(r)))return n;n=null}else if(3===o){if(r.stateNode.hydrate)return 3===r.tag?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}t=de(t,i,n,e);try{V(fe,t)}finally{he(t)}return null}var Je={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function en(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||Je.hasOwnProperty(t)&&Je[t]?(""+e).trim():e+"px"}function nn(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=en(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(Je).forEach((function(t){tn.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Je[e]=Je[t]}))}));var rn=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(t,e){if(e){if(rn[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62,""))}}function sn(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var an=jt;function ln(t,e){var n=Zt(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=_[e];for(var i=0;i<e.length;i++)ge(e[i],t,n)}function cn(){}function un(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function hn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dn(t,e){var n,i=hn(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=hn(i)}}function fn(){for(var t=window,e=un();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=un((t=e.contentWindow).document)}return e}function gn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var pn=null,mn=null;function bn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function yn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var wn="function"===typeof setTimeout?setTimeout:void 0,vn="function"===typeof clearTimeout?clearTimeout:void 0;function Cn(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Sn(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var On=Math.random().toString(36).slice(2),Tn="__reactInternalInstance$"+On,_n="__reactEventHandlers$"+On,En="__reactContainere$"+On;function Rn(t){var e=t[Tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[En]||n[Tn]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=Sn(t);null!==t;){if(n=t[Tn])return n;t=Sn(t)}return e}n=(t=n).parentNode}return null}function Mn(t){return!(t=t[Tn]||t[En])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function xn(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function In(t){return t[_n]||null}function kn(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function An(t,e){var n=t.stateNode;if(!n)return null;var i=g(n);if(!i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(s(231,e,typeof n));return n}function Nn(t,e,n){(e=An(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=ie(n._dispatchListeners,e),n._dispatchInstances=ie(n._dispatchInstances,t))}function jn(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=kn(e);for(e=n.length;0<e--;)Nn(n[e],"captured",t);for(e=0;e<n.length;e++)Nn(n[e],"bubbled",t)}}function Hn(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=An(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=ie(n._dispatchListeners,e),n._dispatchInstances=ie(n._dispatchInstances,t))}function Dn(t){t&&t.dispatchConfig.registrationName&&Hn(t._targetInst,null,t)}function Pn(t){re(t,jn)}var Ln=null,Fn=null,Bn=null;function Vn(){if(Bn)return Bn;var t,e,n=Fn,i=n.length,r="value"in Ln?Ln.value:Ln.textContent,o=r.length;for(t=0;t<i&&n[t]===r[t];t++);var s=i-t;for(e=1;e<=s&&n[i-e]===r[o-e];e++);return Bn=r.slice(t,1<e?1-e:void 0)}function Un(){return!0}function Wn(){return!1}function zn(t,e,n,i){for(var r in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(r)&&((e=t[r])?this[r]=e(n):"target"===r?this.target=i:this[r]=n[r]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Un:Wn,this.isPropagationStopped=Wn,this}function Yn(t,e,n,i){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,t,e,n,i),r}return new this(t,e,n,i)}function Gn(t){if(!(t instanceof this))throw Error(s(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function $n(t){t.eventPool=[],t.getPooled=Yn,t.release=Gn}r(zn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Un)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Un)},persist:function(){this.isPersistent=Un},isPersistent:Wn,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Wn,this._dispatchInstances=this._dispatchListeners=null}}),zn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},zn.extend=function(t){function e(){}function n(){return i.apply(this,arguments)}var i=this;e.prototype=i.prototype;var o=new e;return r(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=r({},i.Interface,t),n.extend=i.extend,$n(n),n},$n(zn);var Kn=zn.extend({data:null}),Xn=zn.extend({data:null}),qn=[9,13,27,32],Qn=R&&"CompositionEvent"in window,Zn=null;R&&"documentMode"in document&&(Zn=document.documentMode);var Jn=R&&"TextEvent"in window&&!Zn,ti=R&&(!Qn||Zn&&8<Zn&&11>=Zn),ei=String.fromCharCode(32),ni={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ii=!1;function ri(t,e){switch(t){case"keyup":return-1!==qn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function oi(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var si=!1;var ai={eventTypes:ni,extractEvents:function(t,e,n,i){var r;if(Qn)t:{switch(t){case"compositionstart":var o=ni.compositionStart;break t;case"compositionend":o=ni.compositionEnd;break t;case"compositionupdate":o=ni.compositionUpdate;break t}o=void 0}else si?ri(t,n)&&(o=ni.compositionEnd):"keydown"===t&&229===n.keyCode&&(o=ni.compositionStart);return o?(ti&&"ko"!==n.locale&&(si||o!==ni.compositionStart?o===ni.compositionEnd&&si&&(r=Vn()):(Fn="value"in(Ln=i)?Ln.value:Ln.textContent,si=!0)),o=Kn.getPooled(o,e,n,i),r?o.data=r:null!==(r=oi(n))&&(o.data=r),Pn(o),r=o):r=null,(t=Jn?function(t,e){switch(t){case"compositionend":return oi(e);case"keypress":return 32!==e.which?null:(ii=!0,ei);case"textInput":return(t=e.data)===ei&&ii?null:t;default:return null}}(t,n):function(t,e){if(si)return"compositionend"===t||!Qn&&ri(t,e)?(t=Vn(),Bn=Fn=Ln=null,si=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ti&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=Xn.getPooled(ni.beforeInput,e,n,i)).data=t,Pn(e)):e=null,null===r?e:null===e?r:[r,e]}},li={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ci(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!li[t.type]:"textarea"===e}var ui={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function hi(t,e,n){return(t=zn.getPooled(ui.change,t,e,n)).type="change",A(n),Pn(t),t}var di=null,fi=null;function gi(t){ae(t)}function pi(t){if(Ct(xn(t)))return t}function mi(t,e){if("change"===t)return e}var bi=!1;function yi(){di&&(di.detachEvent("onpropertychange",wi),fi=di=null)}function wi(t){if("value"===t.propertyName&&pi(fi))if(t=hi(fi,t,le(t)),L)ae(t);else{L=!0;try{j(gi,t)}finally{L=!1,B()}}}function vi(t,e,n){"focus"===t?(yi(),fi=n,(di=e).attachEvent("onpropertychange",wi)):"blur"===t&&yi()}function Ci(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return pi(fi)}function Si(t,e){if("click"===t)return pi(e)}function Oi(t,e){if("input"===t||"change"===t)return pi(e)}R&&(bi=ce("input")&&(!document.documentMode||9<document.documentMode));var Ti={eventTypes:ui,_isInputEventSupported:bi,extractEvents:function(t,e,n,i){var r=e?xn(e):window,o=r.nodeName&&r.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===r.type)var s=mi;else if(ci(r))if(bi)s=Oi;else{s=Ci;var a=vi}else(o=r.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(s=Si);if(s&&(s=s(t,e)))return hi(s,n,i);a&&a(t,r,e),"blur"===t&&(t=r._wrapperState)&&t.controlled&&"number"===r.type&&Rt(r,"number",r.value)}},_i=zn.extend({view:null,detail:null}),Ei={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ri(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Ei[t])&&!!e[t]}function Mi(){return Ri}var xi=0,Ii=0,ki=!1,Ai=!1,Ni=_i.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Mi,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=xi;return xi=t.screenX,ki?"mousemove"===t.type?t.screenX-e:0:(ki=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Ii;return Ii=t.screenY,Ai?"mousemove"===t.type?t.screenY-e:0:(Ai=!0,0)}}),ji=Ni.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Hi={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Di={eventTypes:Hi,extractEvents:function(t,e,n,i,r){var o="mouseover"===t||"pointerover"===t,s="mouseout"===t||"pointerout"===t;if(o&&0===(32&r)&&(n.relatedTarget||n.fromElement)||!s&&!o)return null;(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,s)?(s=e,null!==(e=(e=n.relatedTarget||n.toElement)?Rn(e):null)&&(e!==Jt(e)||5!==e.tag&&6!==e.tag)&&(e=null)):s=null;if(s===e)return null;if("mouseout"===t||"mouseover"===t)var a=Ni,l=Hi.mouseLeave,c=Hi.mouseEnter,u="mouse";else"pointerout"!==t&&"pointerover"!==t||(a=ji,l=Hi.pointerLeave,c=Hi.pointerEnter,u="pointer");if(t=null==s?o:xn(s),o=null==e?o:xn(e),(l=a.getPooled(l,s,n,i)).type=u+"leave",l.target=t,l.relatedTarget=o,(n=a.getPooled(c,e,n,i)).type=u+"enter",n.target=o,n.relatedTarget=t,u=e,(i=s)&&u)t:{for(c=u,s=0,t=a=i;t;t=kn(t))s++;for(t=0,e=c;e;e=kn(e))t++;for(;0<s-t;)a=kn(a),s--;for(;0<t-s;)c=kn(c),t--;for(;s--;){if(a===c||a===c.alternate)break t;a=kn(a),c=kn(c)}a=null}else a=null;for(c=a,a=[];i&&i!==c&&(null===(s=i.alternate)||s!==c);)a.push(i),i=kn(i);for(i=[];u&&u!==c&&(null===(s=u.alternate)||s!==c);)i.push(u),u=kn(u);for(u=0;u<a.length;u++)Hn(a[u],"bubbled",l);for(u=i.length;0<u--;)Hn(i[u],"captured",n);return 0===(64&r)?[l]:[l,n]}};var Pi="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},Li=Object.prototype.hasOwnProperty;function Fi(t,e){if(Pi(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!Li.call(e,n[i])||!Pi(t[n[i]],e[n[i]]))return!1;return!0}var Bi=R&&"documentMode"in document&&11>=document.documentMode,Vi={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Ui=null,Wi=null,zi=null,Yi=!1;function Gi(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Yi||null==Ui||Ui!==un(n)?null:("selectionStart"in(n=Ui)&&gn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},zi&&Fi(zi,n)?null:(zi=n,(t=zn.getPooled(Vi.select,Wi,t,e)).type="select",t.target=Ui,Pn(t),t))}var $i={eventTypes:Vi,extractEvents:function(t,e,n,i,r,o){if(!(o=!(r=o||(i.window===i?i.document:9===i.nodeType?i:i.ownerDocument)))){t:{r=Zt(r),o=_.onSelect;for(var s=0;s<o.length;s++)if(!r.has(o[s])){r=!1;break t}r=!0}o=!r}if(o)return null;switch(r=e?xn(e):window,t){case"focus":(ci(r)||"true"===r.contentEditable)&&(Ui=r,Wi=e,zi=null);break;case"blur":zi=Wi=Ui=null;break;case"mousedown":Yi=!0;break;case"contextmenu":case"mouseup":case"dragend":return Yi=!1,Gi(n,i);case"selectionchange":if(Bi)break;case"keydown":case"keyup":return Gi(n,i)}return null}},Ki=zn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Xi=zn.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qi=_i.extend({relatedTarget:null});function Qi(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var Zi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ji={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tr=_i.extend({key:function(t){if(t.key){var e=Zi[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Qi(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Ji[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Mi,charCode:function(t){return"keypress"===t.type?Qi(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Qi(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),er=Ni.extend({dataTransfer:null}),nr=_i.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Mi}),ir=zn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),rr=Ni.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),or={eventTypes:Pe,extractEvents:function(t,e,n,i){var r=Le.get(t);if(!r)return null;switch(t){case"keypress":if(0===Qi(n))return null;case"keydown":case"keyup":t=tr;break;case"blur":case"focus":t=qi;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Ni;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=er;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=nr;break;case Gt:case $t:case Kt:t=Ki;break;case Xt:t=ir;break;case"scroll":t=_i;break;case"wheel":t=rr;break;case"copy":case"cut":case"paste":t=Xi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=ji;break;default:t=zn}return Pn(e=t.getPooled(r,e,n,i)),e}};if(y)throw Error(s(101));y=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),v(),g=In,p=Mn,m=xn,E({SimpleEventPlugin:or,EnterLeaveEventPlugin:Di,ChangeEventPlugin:Ti,SelectEventPlugin:$i,BeforeInputEventPlugin:ai});var sr=[],ar=-1;function lr(t){0>ar||(t.current=sr[ar],sr[ar]=null,ar--)}function cr(t,e){ar++,sr[ar]=t.current,t.current=e}var ur={},hr={current:ur},dr={current:!1},fr=ur;function gr(t,e){var n=t.type.contextTypes;if(!n)return ur;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function pr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function mr(){lr(dr),lr(hr)}function br(t,e,n){if(hr.current!==ur)throw Error(s(168));cr(hr,e),cr(dr,n)}function yr(t,e,n){var i=t.stateNode;if(t=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var o in i=i.getChildContext())if(!(o in t))throw Error(s(108,mt(e)||"Unknown",o));return r({},n,{},i)}function wr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ur,fr=hr.current,cr(hr,t),cr(dr,dr.current),!0}function vr(t,e,n){var i=t.stateNode;if(!i)throw Error(s(169));n?(t=yr(t,e,fr),i.__reactInternalMemoizedMergedChildContext=t,lr(dr),lr(hr),cr(hr,t)):lr(dr),cr(dr,n)}var Cr=o.unstable_runWithPriority,Sr=o.unstable_scheduleCallback,Or=o.unstable_cancelCallback,Tr=o.unstable_requestPaint,_r=o.unstable_now,Er=o.unstable_getCurrentPriorityLevel,Rr=o.unstable_ImmediatePriority,Mr=o.unstable_UserBlockingPriority,xr=o.unstable_NormalPriority,Ir=o.unstable_LowPriority,kr=o.unstable_IdlePriority,Ar={},Nr=o.unstable_shouldYield,jr=void 0!==Tr?Tr:function(){},Hr=null,Dr=null,Pr=!1,Lr=_r(),Fr=1e4>Lr?_r:function(){return _r()-Lr};function Br(){switch(Er()){case Rr:return 99;case Mr:return 98;case xr:return 97;case Ir:return 96;case kr:return 95;default:throw Error(s(332))}}function Vr(t){switch(t){case 99:return Rr;case 98:return Mr;case 97:return xr;case 96:return Ir;case 95:return kr;default:throw Error(s(332))}}function Ur(t,e){return t=Vr(t),Cr(t,e)}function Wr(t,e,n){return t=Vr(t),Sr(t,e,n)}function zr(t){return null===Hr?(Hr=[t],Dr=Sr(Rr,Gr)):Hr.push(t),Ar}function Yr(){if(null!==Dr){var t=Dr;Dr=null,Or(t)}Gr()}function Gr(){if(!Pr&&null!==Hr){Pr=!0;var t=0;try{var e=Hr;Ur(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Hr=null}catch(n){throw null!==Hr&&(Hr=Hr.slice(t+1)),Sr(Rr,Yr),n}finally{Pr=!1}}}function $r(t,e,n){return 1073741821-(1+((1073741821-t+e/10)/(n/=10)|0))*n}function Kr(t,e){if(t&&t.defaultProps)for(var n in e=r({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var Xr={current:null},qr=null,Qr=null,Zr=null;function Jr(){Zr=Qr=qr=null}function to(t){var e=Xr.current;lr(Xr),t.type._context._currentValue=e}function eo(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function no(t,e){qr=t,Zr=Qr=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(Is=!0),t.firstContext=null)}function io(t,e){if(Zr!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(Zr=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Qr){if(null===qr)throw Error(s(308));Qr=e,qr.dependencies={expirationTime:0,firstContext:e,responders:null}}else Qr=Qr.next=e;return t._currentValue}var ro=!1;function oo(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function so(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function ao(t,e){return(t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null}).next=t}function lo(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function co(t,e){var n=t.alternate;null!==n&&so(n,t),null===(n=(t=t.updateQueue).baseQueue)?(t.baseQueue=e.next=e,e.next=e):(e.next=n.next,n.next=e)}function uo(t,e,n,i){var o=t.updateQueue;ro=!1;var s=o.baseQueue,a=o.shared.pending;if(null!==a){if(null!==s){var l=s.next;s.next=a.next,a.next=l}s=a,o.shared.pending=null,null!==(l=t.alternate)&&(null!==(l=l.updateQueue)&&(l.baseQueue=a))}if(null!==s){l=s.next;var c=o.baseState,u=0,h=null,d=null,f=null;if(null!==l)for(var g=l;;){if((a=g.expirationTime)<i){var p={expirationTime:g.expirationTime,suspenseConfig:g.suspenseConfig,tag:g.tag,payload:g.payload,callback:g.callback,next:null};null===f?(d=f=p,h=c):f=f.next=p,a>u&&(u=a)}else{null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:g.suspenseConfig,tag:g.tag,payload:g.payload,callback:g.callback,next:null}),ol(a,g.suspenseConfig);t:{var m=t,b=g;switch(a=e,p=n,b.tag){case 1:if("function"===typeof(m=b.payload)){c=m.call(p,c,a);break t}c=m;break t;case 3:m.effectTag=-4097&m.effectTag|64;case 0:if(null===(a="function"===typeof(m=b.payload)?m.call(p,c,a):m)||void 0===a)break t;c=r({},c,a);break t;case 2:ro=!0}}null!==g.callback&&(t.effectTag|=32,null===(a=o.effects)?o.effects=[g]:a.push(g))}if(null===(g=g.next)||g===l){if(null===(a=o.shared.pending))break;g=s.next=a.next,a.next=l,o.baseQueue=s=a,o.shared.pending=null}}null===f?h=c:f.next=d,o.baseState=h,o.baseQueue=f,sl(u),t.expirationTime=u,t.memoizedState=c}}function ho(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=r,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var fo=q.ReactCurrentBatchConfig,go=(new i.Component).refs;function po(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:r({},e,n),t.memoizedState=n,0===t.expirationTime&&(t.updateQueue.baseState=n)}var mo={isMounted:function(t){return!!(t=t._reactInternalFiber)&&Jt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var i=Ga(),r=fo.suspense;(r=ao(i=$a(i,t,r),r)).payload=e,void 0!==n&&null!==n&&(r.callback=n),lo(t,r),Ka(t,i)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var i=Ga(),r=fo.suspense;(r=ao(i=$a(i,t,r),r)).tag=1,r.payload=e,void 0!==n&&null!==n&&(r.callback=n),lo(t,r),Ka(t,i)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Ga(),i=fo.suspense;(i=ao(n=$a(n,t,i),i)).tag=2,void 0!==e&&null!==e&&(i.callback=e),lo(t,i),Ka(t,n)}};function bo(t,e,n,i,r,o,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!Fi(n,i)||!Fi(r,o))}function yo(t,e,n){var i=!1,r=ur,o=e.contextType;return"object"===typeof o&&null!==o?o=io(o):(r=pr(e)?fr:hr.current,o=(i=null!==(i=e.contextTypes)&&void 0!==i)?gr(t,r):ur),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=mo,t.stateNode=e,e._reactInternalFiber=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function wo(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&mo.enqueueReplaceState(e,e.state,null)}function vo(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=go,oo(t);var o=e.contextType;"object"===typeof o&&null!==o?r.context=io(o):(o=pr(e)?fr:hr.current,r.context=gr(t,o)),uo(t,n,r,i),r.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(po(t,e,o,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&mo.enqueueReplaceState(r,r.state,null),uo(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.effectTag|=4)}var Co=Array.isArray;function So(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,t));var r=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===r?e.ref:((e=function(t){var e=i.refs;e===go&&(e=i.refs={}),null===t?delete e[r]:e[r]=t})._stringRef=r,e)}if("string"!==typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function Oo(t,e){if("textarea"!==t.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function To(t){function e(e,n){if(t){var i=e.lastEffect;null!==i?(i.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=El(t,e)).index=0,t.sibling=null,t}function o(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.effectTag=2,n):i:(e.effectTag=2,n):n}function a(e){return t&&null===e.alternate&&(e.effectTag=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=xl(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function c(t,e,n,i){return null!==e&&e.elementType===n.type?((i=r(e,n.props)).ref=So(t,e,n),i.return=t,i):((i=Rl(n.type,n.key,n.props,null,t.mode,i)).ref=So(t,e,n),i.return=t,i)}function u(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Il(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,i,o){return null===e||7!==e.tag?((e=Ml(n,t.mode,i,o)).return=t,e):((e=r(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=xl(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case tt:return(n=Rl(e.type,e.key,e.props,null,t.mode,n)).ref=So(t,null,e),n.return=t,n;case et:return(e=Il(e,t.mode,n)).return=t,e}if(Co(e)||pt(e))return(e=Ml(e,t.mode,n,null)).return=t,e;Oo(t,e)}return null}function f(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==r?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case tt:return n.key===r?n.type===nt?h(t,e,n.props.children,i,r):c(t,e,n,i):null;case et:return n.key===r?u(t,e,n,i):null}if(Co(n)||pt(n))return null!==r?null:h(t,e,n,i,null);Oo(t,n)}return null}function g(t,e,n,i,r){if("string"===typeof i||"number"===typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case tt:return t=t.get(null===i.key?n:i.key)||null,i.type===nt?h(e,t,i.props.children,r,i.key):c(e,t,i,r);case et:return u(e,t=t.get(null===i.key?n:i.key)||null,i,r)}if(Co(i)||pt(i))return h(e,t=t.get(n)||null,i,r,null);Oo(e,i)}return null}function p(r,s,a,l){for(var c=null,u=null,h=s,p=s=0,m=null;null!==h&&p<a.length;p++){h.index>p?(m=h,h=null):m=h.sibling;var b=f(r,h,a[p],l);if(null===b){null===h&&(h=m);break}t&&h&&null===b.alternate&&e(r,h),s=o(b,s,p),null===u?c=b:u.sibling=b,u=b,h=m}if(p===a.length)return n(r,h),c;if(null===h){for(;p<a.length;p++)null!==(h=d(r,a[p],l))&&(s=o(h,s,p),null===u?c=h:u.sibling=h,u=h);return c}for(h=i(r,h);p<a.length;p++)null!==(m=g(h,r,p,a[p],l))&&(t&&null!==m.alternate&&h.delete(null===m.key?p:m.key),s=o(m,s,p),null===u?c=m:u.sibling=m,u=m);return t&&h.forEach((function(t){return e(r,t)})),c}function m(r,a,l,c){var u=pt(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,p=a,m=a=0,b=null,y=l.next();null!==p&&!y.done;m++,y=l.next()){p.index>m?(b=p,p=null):b=p.sibling;var w=f(r,p,y.value,c);if(null===w){null===p&&(p=b);break}t&&p&&null===w.alternate&&e(r,p),a=o(w,a,m),null===h?u=w:h.sibling=w,h=w,p=b}if(y.done)return n(r,p),u;if(null===p){for(;!y.done;m++,y=l.next())null!==(y=d(r,y.value,c))&&(a=o(y,a,m),null===h?u=y:h.sibling=y,h=y);return u}for(p=i(r,p);!y.done;m++,y=l.next())null!==(y=g(p,r,m,y.value,c))&&(t&&null!==y.alternate&&p.delete(null===y.key?m:y.key),a=o(y,a,m),null===h?u=y:h.sibling=y,h=y);return t&&p.forEach((function(t){return e(r,t)})),u}return function(t,i,o,l){var c="object"===typeof o&&null!==o&&o.type===nt&&null===o.key;c&&(o=o.props.children);var u="object"===typeof o&&null!==o;if(u)switch(o.$$typeof){case tt:t:{for(u=o.key,c=i;null!==c;){if(c.key===u){switch(c.tag){case 7:if(o.type===nt){n(t,c.sibling),(i=r(c,o.props.children)).return=t,t=i;break t}break;default:if(c.elementType===o.type){n(t,c.sibling),(i=r(c,o.props)).ref=So(t,c,o),i.return=t,t=i;break t}}n(t,c);break}e(t,c),c=c.sibling}o.type===nt?((i=Ml(o.props.children,t.mode,l,o.key)).return=t,t=i):((l=Rl(o.type,o.key,o.props,null,t.mode,l)).ref=So(t,i,o),l.return=t,t=l)}return a(t);case et:t:{for(c=o.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(t,i.sibling),(i=r(i,o.children||[])).return=t,t=i;break t}n(t,i);break}e(t,i),i=i.sibling}(i=Il(o,t.mode,l)).return=t,t=i}return a(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==i&&6===i.tag?(n(t,i.sibling),(i=r(i,o)).return=t,t=i):(n(t,i),(i=xl(o,t.mode,l)).return=t,t=i),a(t);if(Co(o))return p(t,i,o,l);if(pt(o))return m(t,i,o,l);if(u&&Oo(t,o),"undefined"===typeof o&&!c)switch(t.tag){case 1:case 0:throw t=t.type,Error(s(152,t.displayName||t.name||"Component"))}return n(t,i)}}var _o=To(!0),Eo=To(!1),Ro={},Mo={current:Ro},xo={current:Ro},Io={current:Ro};function ko(t){if(t===Ro)throw Error(s(174));return t}function Ao(t,e){switch(cr(Io,e),cr(xo,t),cr(Mo,Ro),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pt(null,"");break;default:e=Pt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}lr(Mo),cr(Mo,e)}function No(){lr(Mo),lr(xo),lr(Io)}function jo(t){ko(Io.current);var e=ko(Mo.current),n=Pt(e,t.type);e!==n&&(cr(xo,t),cr(Mo,n))}function Ho(t){xo.current===t&&(lr(Mo),lr(xo))}var Do={current:0};function Po(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Lo(t,e){return{responder:t,props:e}}var Fo=q.ReactCurrentDispatcher,Bo=q.ReactCurrentBatchConfig,Vo=0,Uo=null,Wo=null,zo=null,Yo=!1;function Go(){throw Error(s(321))}function $o(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pi(t[n],e[n]))return!1;return!0}function Ko(t,e,n,i,r,o){if(Vo=o,Uo=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,Fo.current=null===t||null===t.memoizedState?bs:ys,t=n(i,r),e.expirationTime===Vo){o=0;do{if(e.expirationTime=0,!(25>o))throw Error(s(301));o+=1,zo=Wo=null,e.updateQueue=null,Fo.current=ws,t=n(i,r)}while(e.expirationTime===Vo)}if(Fo.current=ms,e=null!==Wo&&null!==Wo.next,Vo=0,zo=Wo=Uo=null,Yo=!1,e)throw Error(s(300));return t}function Xo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===zo?Uo.memoizedState=zo=t:zo=zo.next=t,zo}function qo(){if(null===Wo){var t=Uo.alternate;t=null!==t?t.memoizedState:null}else t=Wo.next;var e=null===zo?Uo.memoizedState:zo.next;if(null!==e)zo=e,Wo=t;else{if(null===t)throw Error(s(310));t={memoizedState:(Wo=t).memoizedState,baseState:Wo.baseState,baseQueue:Wo.baseQueue,queue:Wo.queue,next:null},null===zo?Uo.memoizedState=zo=t:zo=zo.next=t}return zo}function Qo(t,e){return"function"===typeof e?e(t):e}function Zo(t){var e=qo(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=Wo,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){r=r.next,i=i.baseState;var l=a=o=null,c=r;do{var u=c.expirationTime;if(u<Vo){var h={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(a=l=h,o=i):l=l.next=h,u>Uo.expirationTime&&(Uo.expirationTime=u,sl(u))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),ol(u,c.suspenseConfig),i=c.eagerReducer===t?c.eagerState:t(i,c.action);c=c.next}while(null!==c&&c!==r);null===l?o=i:l.next=a,Pi(i,e.memoizedState)||(Is=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}return[e.memoizedState,n.dispatch]}function Jo(t){var e=qo(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=t(o,a.action),a=a.next}while(a!==r);Pi(o,e.memoizedState)||(Is=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function ts(t){var e=Xo();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:t}).dispatch=ps.bind(null,Uo,t),[e.memoizedState,t]}function es(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=Uo.updateQueue)?(e={lastEffect:null},Uo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function ns(){return qo().memoizedState}function is(t,e,n,i){var r=Xo();Uo.effectTag|=t,r.memoizedState=es(1|e,n,void 0,void 0===i?null:i)}function rs(t,e,n,i){var r=qo();i=void 0===i?null:i;var o=void 0;if(null!==Wo){var s=Wo.memoizedState;if(o=s.destroy,null!==i&&$o(i,s.deps))return void es(e,n,o,i)}Uo.effectTag|=t,r.memoizedState=es(1|e,n,o,i)}function os(t,e){return is(516,4,t,e)}function ss(t,e){return rs(516,4,t,e)}function as(t,e){return rs(4,2,t,e)}function ls(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function cs(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,rs(4,2,ls.bind(null,e,t),n)}function us(){}function hs(t,e){return Xo().memoizedState=[t,void 0===e?null:e],t}function ds(t,e){var n=qo();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&$o(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function fs(t,e){var n=qo();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&$o(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function gs(t,e,n){var i=Br();Ur(98>i?98:i,(function(){t(!0)})),Ur(97<i?97:i,(function(){var i=Bo.suspense;Bo.suspense=void 0===e?null:e;try{t(!1),n()}finally{Bo.suspense=i}}))}function ps(t,e,n){var i=Ga(),r=fo.suspense;r={expirationTime:i=$a(i,t,r),suspenseConfig:r,action:n,eagerReducer:null,eagerState:null,next:null};var o=e.pending;if(null===o?r.next=r:(r.next=o.next,o.next=r),e.pending=r,o=t.alternate,t===Uo||null!==o&&o===Uo)Yo=!0,r.expirationTime=Vo,Uo.expirationTime=Vo;else{if(0===t.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=e.lastRenderedReducer))try{var s=e.lastRenderedState,a=o(s,n);if(r.eagerReducer=o,r.eagerState=a,Pi(a,s))return}catch(l){}Ka(t,i)}}var ms={readContext:io,useCallback:Go,useContext:Go,useEffect:Go,useImperativeHandle:Go,useLayoutEffect:Go,useMemo:Go,useReducer:Go,useRef:Go,useState:Go,useDebugValue:Go,useResponder:Go,useDeferredValue:Go,useTransition:Go},bs={readContext:io,useCallback:hs,useContext:io,useEffect:os,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,is(4,2,ls.bind(null,e,t),n)},useLayoutEffect:function(t,e){return is(4,2,t,e)},useMemo:function(t,e){var n=Xo();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Xo();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t=(t=i.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=ps.bind(null,Uo,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},Xo().memoizedState=t},useState:ts,useDebugValue:us,useResponder:Lo,useDeferredValue:function(t,e){var n=ts(t),i=n[0],r=n[1];return os((function(){var n=Bo.suspense;Bo.suspense=void 0===e?null:e;try{r(t)}finally{Bo.suspense=n}}),[t,e]),i},useTransition:function(t){var e=ts(!1),n=e[0];return e=e[1],[hs(gs.bind(null,e,t),[e,t]),n]}},ys={readContext:io,useCallback:ds,useContext:io,useEffect:ss,useImperativeHandle:cs,useLayoutEffect:as,useMemo:fs,useReducer:Zo,useRef:ns,useState:function(){return Zo(Qo)},useDebugValue:us,useResponder:Lo,useDeferredValue:function(t,e){var n=Zo(Qo),i=n[0],r=n[1];return ss((function(){var n=Bo.suspense;Bo.suspense=void 0===e?null:e;try{r(t)}finally{Bo.suspense=n}}),[t,e]),i},useTransition:function(t){var e=Zo(Qo),n=e[0];return e=e[1],[ds(gs.bind(null,e,t),[e,t]),n]}},ws={readContext:io,useCallback:ds,useContext:io,useEffect:ss,useImperativeHandle:cs,useLayoutEffect:as,useMemo:fs,useReducer:Jo,useRef:ns,useState:function(){return Jo(Qo)},useDebugValue:us,useResponder:Lo,useDeferredValue:function(t,e){var n=Jo(Qo),i=n[0],r=n[1];return ss((function(){var n=Bo.suspense;Bo.suspense=void 0===e?null:e;try{r(t)}finally{Bo.suspense=n}}),[t,e]),i},useTransition:function(t){var e=Jo(Qo),n=e[0];return e=e[1],[ds(gs.bind(null,e,t),[e,t]),n]}},vs=null,Cs=null,Ss=!1;function Os(t,e){var n=Tl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Ts(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function _s(t){if(Ss){var e=Cs;if(e){var n=e;if(!Ts(t,e)){if(!(e=Cn(n.nextSibling))||!Ts(t,e))return t.effectTag=-1025&t.effectTag|2,Ss=!1,void(vs=t);Os(vs,n)}vs=t,Cs=Cn(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,Ss=!1,vs=t}}function Es(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;vs=t}function Rs(t){if(t!==vs)return!1;if(!Ss)return Es(t),Ss=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!yn(e,t.memoizedProps))for(e=Cs;e;)Os(t,e),e=Cn(e.nextSibling);if(Es(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){Cs=Cn(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}Cs=null}}else Cs=vs?Cn(t.stateNode.nextSibling):null;return!0}function Ms(){Cs=vs=null,Ss=!1}var xs=q.ReactCurrentOwner,Is=!1;function ks(t,e,n,i){e.child=null===t?Eo(e,null,n,i):_o(e,t.child,n,i)}function As(t,e,n,i,r){n=n.render;var o=e.ref;return no(e,r),i=Ko(t,e,n,i,o,r),null===t||Is?(e.effectTag|=1,ks(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=r&&(t.expirationTime=0),Ks(t,e,r))}function Ns(t,e,n,i,r,o){if(null===t){var s=n.type;return"function"!==typeof s||_l(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Rl(n.type,null,i,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,js(t,e,s,i,r,o))}return s=t.child,r<o&&(r=s.memoizedProps,(n=null!==(n=n.compare)?n:Fi)(r,i)&&t.ref===e.ref)?Ks(t,e,o):(e.effectTag|=1,(t=El(s,i)).ref=e.ref,t.return=e,e.child=t)}function js(t,e,n,i,r,o){return null!==t&&Fi(t.memoizedProps,i)&&t.ref===e.ref&&(Is=!1,r<o)?(e.expirationTime=t.expirationTime,Ks(t,e,o)):Ds(t,e,n,i,o)}function Hs(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function Ds(t,e,n,i,r){var o=pr(n)?fr:hr.current;return o=gr(e,o),no(e,r),n=Ko(t,e,n,i,o,r),null===t||Is?(e.effectTag|=1,ks(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=r&&(t.expirationTime=0),Ks(t,e,r))}function Ps(t,e,n,i,r){if(pr(n)){var o=!0;wr(e)}else o=!1;if(no(e,r),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),yo(e,n,i),vo(e,n,i,r),i=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=io(c):c=gr(e,c=pr(n)?fr:hr.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==i||l!==c)&&wo(e,s,i,c),ro=!1;var d=e.memoizedState;s.state=d,uo(e,i,s,r),l=e.memoizedState,a!==i||d!==l||dr.current||ro?("function"===typeof u&&(po(e,n,u,i),l=e.memoizedState),(a=ro||bo(e,n,a,i,d,l,c))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.effectTag|=4)):("function"===typeof s.componentDidMount&&(e.effectTag|=4),e.memoizedProps=i,e.memoizedState=l),s.props=i,s.state=l,s.context=c,i=a):("function"===typeof s.componentDidMount&&(e.effectTag|=4),i=!1)}else s=e.stateNode,so(t,e),a=e.memoizedProps,s.props=e.type===e.elementType?a:Kr(e.type,a),l=s.context,"object"===typeof(c=n.contextType)&&null!==c?c=io(c):c=gr(e,c=pr(n)?fr:hr.current),(h="function"===typeof(u=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==i||l!==c)&&wo(e,s,i,c),ro=!1,l=e.memoizedState,s.state=l,uo(e,i,s,r),d=e.memoizedState,a!==i||l!==d||dr.current||ro?("function"===typeof u&&(po(e,n,u,i),d=e.memoizedState),(u=ro||bo(e,n,a,i,l,d,c))?(h||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,d,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,d,c)),"function"===typeof s.componentDidUpdate&&(e.effectTag|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),e.memoizedProps=i,e.memoizedState=d),s.props=i,s.state=d,s.context=c,i=u):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),i=!1);return Ls(t,e,n,i,o,r)}function Ls(t,e,n,i,r,o){Hs(t,e);var s=0!==(64&e.effectTag);if(!i&&!s)return r&&vr(e,n,!1),Ks(t,e,o);i=e.stateNode,xs.current=e;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.effectTag|=1,null!==t&&s?(e.child=_o(e,t.child,null,o),e.child=_o(e,null,a,o)):ks(t,e,a,o),e.memoizedState=i.state,r&&vr(e,n,!0),e.child}function Fs(t){var e=t.stateNode;e.pendingContext?br(0,e.pendingContext,e.pendingContext!==e.context):e.context&&br(0,e.context,!1),Ao(t,e.containerInfo)}var Bs,Vs,Us,Ws={dehydrated:null,retryTime:0};function zs(t,e,n){var i,r=e.mode,o=e.pendingProps,s=Do.current,a=!1;if((i=0!==(64&e.effectTag))||(i=0!==(2&s)&&(null===t||null!==t.memoizedState)),i?(a=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(s|=1),cr(Do,1&s),null===t){if(void 0!==o.fallback&&_s(e),a){if(a=o.fallback,(o=Ml(null,r,0,null)).return=e,0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Ml(a,r,n,null)).return=e,o.sibling=n,e.memoizedState=Ws,e.child=o,n}return r=o.children,e.memoizedState=null,e.child=Eo(e,null,r,n)}if(null!==t.memoizedState){if(r=(t=t.child).sibling,a){if(o=o.fallback,(n=El(t,t.pendingProps)).return=e,0===(2&e.mode)&&(a=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(n.child=a;null!==a;)a.return=n,a=a.sibling;return(r=El(r,o)).return=e,n.sibling=r,n.childExpirationTime=0,e.memoizedState=Ws,e.child=n,r}return n=_o(e,t.child,o.children,n),e.memoizedState=null,e.child=n}if(t=t.child,a){if(a=o.fallback,(o=Ml(null,r,0,null)).return=e,o.child=t,null!==t&&(t.return=o),0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Ml(a,r,n,null)).return=e,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,e.memoizedState=Ws,e.child=o,n}return e.memoizedState=null,e.child=_o(e,t,o.children,n)}function Ys(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),eo(t.return,e)}function Gs(t,e,n,i,r,o){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailExpiration:0,tailMode:r,lastEffect:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailExpiration=0,s.tailMode=r,s.lastEffect=o)}function $s(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(ks(t,e,i.children,n),0!==(2&(i=Do.current)))i=1&i|2,e.effectTag|=64;else{if(null!==t&&0!==(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ys(t,n);else if(19===t.tag)Ys(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(cr(Do,i),0===(2&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===Po(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Gs(e,!1,r,n,o,e.lastEffect);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===Po(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Gs(e,!0,n,null,o,e.lastEffect);break;case"together":Gs(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Ks(t,e,n){null!==t&&(e.dependencies=t.dependencies);var i=e.expirationTime;if(0!==i&&sl(i),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=El(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=El(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Xs(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function qs(t,e,n){var i=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return pr(e.type)&&mr(),null;case 3:return No(),lr(dr),lr(hr),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||!Rs(e)||(e.effectTag|=4),null;case 5:Ho(e),n=ko(Io.current);var o=e.type;if(null!==t&&null!=e.stateNode)Vs(t,e,o,i,n),t.ref!==e.ref&&(e.effectTag|=128);else{if(!i){if(null===e.stateNode)throw Error(s(166));return null}if(t=ko(Mo.current),Rs(e)){i=e.stateNode,o=e.type;var a=e.memoizedProps;switch(i[Tn]=e,i[_n]=a,o){case"iframe":case"object":case"embed":$e("load",i);break;case"video":case"audio":for(t=0;t<qt.length;t++)$e(qt[t],i);break;case"source":$e("error",i);break;case"img":case"image":case"link":$e("error",i),$e("load",i);break;case"form":$e("reset",i),$e("submit",i);break;case"details":$e("toggle",i);break;case"input":Ot(i,a),$e("invalid",i),ln(n,"onChange");break;case"select":i._wrapperState={wasMultiple:!!a.multiple},$e("invalid",i),ln(n,"onChange");break;case"textarea":kt(i,a),$e("invalid",i),ln(n,"onChange")}for(var l in on(o,a),t=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(t=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(t=["children",""+c]):T.hasOwnProperty(l)&&null!=c&&ln(n,l)}switch(o){case"input":vt(i),Et(i,a,!0);break;case"textarea":vt(i),Nt(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=cn)}n=t,e.updateQueue=n,null!==n&&(e.effectTag|=4)}else{switch(l=9===n.nodeType?n:n.ownerDocument,t===an&&(t=Dt(o)),t===an?"script"===o?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=l.createElement(o,{is:i.is}):(t=l.createElement(o),"select"===o&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,o),t[Tn]=e,t[_n]=i,Bs(t,e),e.stateNode=t,l=sn(o,i),o){case"iframe":case"object":case"embed":$e("load",t),c=i;break;case"video":case"audio":for(c=0;c<qt.length;c++)$e(qt[c],t);c=i;break;case"source":$e("error",t),c=i;break;case"img":case"image":case"link":$e("error",t),$e("load",t),c=i;break;case"form":$e("reset",t),$e("submit",t),c=i;break;case"details":$e("toggle",t),c=i;break;case"input":Ot(t,i),c=St(t,i),$e("invalid",t),ln(n,"onChange");break;case"option":c=Mt(t,i);break;case"select":t._wrapperState={wasMultiple:!!i.multiple},c=r({},i,{value:void 0}),$e("invalid",t),ln(n,"onChange");break;case"textarea":kt(t,i),c=It(t,i),$e("invalid",t),ln(n,"onChange");break;default:c=i}on(o,c);var u=c;for(a in u)if(u.hasOwnProperty(a)){var h=u[a];"style"===a?nn(t,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&Ft(t,h):"children"===a?"string"===typeof h?("textarea"!==o||""!==h)&&Bt(t,h):"number"===typeof h&&Bt(t,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(T.hasOwnProperty(a)?null!=h&&ln(n,a):null!=h&&Q(t,a,h,l))}switch(o){case"input":vt(t),Et(t,i,!1);break;case"textarea":vt(t),Nt(t);break;case"option":null!=i.value&&t.setAttribute("value",""+yt(i.value));break;case"select":t.multiple=!!i.multiple,null!=(n=i.value)?xt(t,!!i.multiple,n,!1):null!=i.defaultValue&&xt(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof c.onClick&&(t.onclick=cn)}bn(o,i)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)Us(0,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(s(166));n=ko(Io.current),ko(Mo.current),Rs(e)?(n=e.stateNode,i=e.memoizedProps,n[Tn]=e,n.nodeValue!==i&&(e.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[Tn]=e,e.stateNode=n)}return null;case 13:return lr(Do),i=e.memoizedState,0!==(64&e.effectTag)?(e.expirationTime=n,e):(n=null!==i,i=!1,null===t?void 0!==e.memoizedProps.fallback&&Rs(e):(i=null!==(o=t.memoizedState),n||null===o||null!==(o=t.child.sibling)&&(null!==(a=e.firstEffect)?(e.firstEffect=o,o.nextEffect=a):(e.firstEffect=e.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!i&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&Do.current)?Ra===va&&(Ra=Ca):(Ra!==va&&Ra!==Ca||(Ra=Sa),0!==Aa&&null!==Ta&&(Nl(Ta,Ea),jl(Ta,Aa)))),(n||i)&&(e.effectTag|=4),null);case 4:return No(),null;case 10:return to(e),null;case 17:return pr(e.type)&&mr(),null;case 19:if(lr(Do),null===(i=e.memoizedState))return null;if(o=0!==(64&e.effectTag),null===(a=i.rendering)){if(o)Xs(i,!1);else if(Ra!==va||null!==t&&0!==(64&t.effectTag))for(a=e.child;null!==a;){if(null!==(t=Po(a))){for(e.effectTag|=64,Xs(i,!1),null!==(o=t.updateQueue)&&(e.updateQueue=o,e.effectTag|=4),null===i.lastEffect&&(e.firstEffect=null),e.lastEffect=i.lastEffect,i=e.child;null!==i;)a=n,(o=i).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(t=o.alternate)?(o.childExpirationTime=0,o.expirationTime=a,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=t.childExpirationTime,o.expirationTime=t.expirationTime,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,a=t.dependencies,o.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),i=i.sibling;return cr(Do,1&Do.current|2),e.child}a=a.sibling}}else{if(!o)if(null!==(t=Po(a))){if(e.effectTag|=64,o=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.effectTag|=4),Xs(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate)return null!==(e=e.lastEffect=i.lastEffect)&&(e.nextEffect=null),null}else 2*Fr()-i.renderingStartTime>i.tailExpiration&&1<n&&(e.effectTag|=64,o=!0,Xs(i,!1),e.expirationTime=e.childExpirationTime=n-1);i.isBackwards?(a.sibling=e.child,e.child=a):(null!==(n=i.last)?n.sibling=a:e.child=a,i.last=a)}return null!==i.tail?(0===i.tailExpiration&&(i.tailExpiration=Fr()+500),n=i.tail,i.rendering=n,i.tail=n.sibling,i.lastEffect=e.lastEffect,i.renderingStartTime=Fr(),n.sibling=null,e=Do.current,cr(Do,o?1&e|2:1&e),n):null}throw Error(s(156,e.tag))}function Qs(t){switch(t.tag){case 1:pr(t.type)&&mr();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(No(),lr(dr),lr(hr),0!==(64&(e=t.effectTag)))throw Error(s(285));return t.effectTag=-4097&e|64,t;case 5:return Ho(t),null;case 13:return lr(Do),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return lr(Do),null;case 4:return No(),null;case 10:return to(t),null;default:return null}}function Zs(t,e){return{value:t,source:e,stack:bt(e)}}Bs=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Vs=function(t,e,n,i,o){var s=t.memoizedProps;if(s!==i){var a,l,c=e.stateNode;switch(ko(Mo.current),t=null,n){case"input":s=St(c,s),i=St(c,i),t=[];break;case"option":s=Mt(c,s),i=Mt(c,i),t=[];break;case"select":s=r({},s,{value:void 0}),i=r({},i,{value:void 0}),t=[];break;case"textarea":s=It(c,s),i=It(c,i),t=[];break;default:"function"!==typeof s.onClick&&"function"===typeof i.onClick&&(c.onclick=cn)}for(a in on(n,i),n=null,s)if(!i.hasOwnProperty(a)&&s.hasOwnProperty(a)&&null!=s[a])if("style"===a)for(l in c=s[a])c.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(T.hasOwnProperty(a)?t||(t=[]):(t=t||[]).push(a,null));for(a in i){var u=i[a];if(c=null!=s?s[a]:void 0,i.hasOwnProperty(a)&&u!==c&&(null!=u||null!=c))if("style"===a)if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(t||(t=[]),t.push(a,n)),n=u;else"dangerouslySetInnerHTML"===a?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(t=t||[]).push(a,u)):"children"===a?c===u||"string"!==typeof u&&"number"!==typeof u||(t=t||[]).push(a,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(T.hasOwnProperty(a)?(null!=u&&ln(o,a),t||c===u||(t=[])):(t=t||[]).push(a,u))}n&&(t=t||[]).push("style",n),o=t,(e.updateQueue=o)&&(e.effectTag|=4)}},Us=function(t,e,n,i){n!==i&&(e.effectTag|=4)};var Js="function"===typeof WeakSet?WeakSet:Set;function ta(t,e){var n=e.source,i=e.stack;null===i&&null!==n&&(i=bt(n)),null!==n&&mt(n.type),e=e.value,null!==t&&1===t.tag&&mt(t.type);try{console.error(e)}catch(r){setTimeout((function(){throw r}))}}function ea(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){yl(t,n)}else e.current=null}function na(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,i=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Kr(e.type,n),i),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(s(163))}function ia(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.destroy;n.destroy=void 0,void 0!==i&&i()}n=n.next}while(n!==e)}}function ra(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function oa(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ra(3,n);case 1:if(t=n.stateNode,4&n.effectTag)if(null===e)t.componentDidMount();else{var i=n.elementType===n.type?e.memoizedProps:Kr(n.type,e.memoizedProps);t.componentDidUpdate(i,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return void(null!==(e=n.updateQueue)&&ho(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}ho(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.effectTag&&bn(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&De(n)))));case 19:case 17:case 20:case 21:return}throw Error(s(163))}function sa(t,e,n){switch("function"===typeof Sl&&Sl(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var i=t.next;Ur(97<n?97:n,(function(){var t=i;do{var n=t.destroy;if(void 0!==n){var r=e;try{n()}catch(o){yl(r,o)}}t=t.next}while(t!==i)}))}break;case 1:ea(e),"function"===typeof(n=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(n){yl(t,n)}}(e,n);break;case 5:ea(e);break;case 4:ua(t,e,n)}}function aa(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&aa(e)}function la(t){return 5===t.tag||3===t.tag||4===t.tag}function ca(t){t:{for(var e=t.return;null!==e;){if(la(e)){var n=e;break t}e=e.return}throw Error(s(160))}switch(e=n.stateNode,n.tag){case 5:var i=!1;break;case 3:case 4:e=e.containerInfo,i=!0;break;default:throw Error(s(161))}16&n.effectTag&&(Bt(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||la(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}i?function t(e,n,i){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,n?8===i.nodeType?i.parentNode.insertBefore(e,n):i.insertBefore(e,n):(8===i.nodeType?(n=i.parentNode).insertBefore(e,i):(n=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==n.onclick||(n.onclick=cn));else if(4!==r&&null!==(e=e.child))for(t(e,n,i),e=e.sibling;null!==e;)t(e,n,i),e=e.sibling}(t,n,e):function t(e,n,i){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,n?i.insertBefore(e,n):i.appendChild(e);else if(4!==r&&null!==(e=e.child))for(t(e,n,i),e=e.sibling;null!==e;)t(e,n,i),e=e.sibling}(t,n,e)}function ua(t,e,n){for(var i,r,o=e,a=!1;;){if(!a){a=o.return;t:for(;;){if(null===a)throw Error(s(160));switch(i=a.stateNode,a.tag){case 5:r=!1;break t;case 3:case 4:i=i.containerInfo,r=!0;break t}a=a.return}a=!0}if(5===o.tag||6===o.tag){t:for(var l=t,c=o,u=n,h=c;;)if(sa(l,h,u),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break t;for(;null===h.sibling;){if(null===h.return||h.return===c)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}r?(l=i,c=o.stateNode,8===l.nodeType?l.parentNode.removeChild(c):l.removeChild(c)):i.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){i=o.stateNode.containerInfo,r=!0,o.child.return=o,o=o.child;continue}}else if(sa(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function ha(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void ia(3,e);case 1:return;case 5:var n=e.stateNode;if(null!=n){var i=e.memoizedProps,r=null!==t?t.memoizedProps:i;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[_n]=i,"input"===t&&"radio"===i.type&&null!=i.name&&Tt(n,i),sn(t,r),e=sn(t,i),r=0;r<o.length;r+=2){var a=o[r],l=o[r+1];"style"===a?nn(n,l):"dangerouslySetInnerHTML"===a?Ft(n,l):"children"===a?Bt(n,l):Q(n,a,l,e)}switch(t){case"input":_t(n,i);break;case"textarea":At(n,i);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(t=i.value)?xt(n,!!i.multiple,t,!1):e!==!!i.multiple&&(null!=i.defaultValue?xt(n,!!i.multiple,i.defaultValue,!0):xt(n,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(s(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((e=e.stateNode).hydrate&&(e.hydrate=!1,De(e.containerInfo)));case 12:return;case 13:if(n=e,null===e.memoizedState?i=!1:(i=!0,n=e.child,ja=Fr()),null!==n)t:for(t=n;;){if(5===t.tag)o=t.stateNode,i?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=t.stateNode,r=void 0!==(r=t.memoizedProps.style)&&null!==r&&r.hasOwnProperty("display")?r.display:null,o.style.display=en("display",r));else if(6===t.tag)t.stateNode.nodeValue=i?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(o=t.child.sibling).return=t,t=o;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return void da(e);case 19:return void da(e);case 17:return}throw Error(s(163))}function da(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Js),e.forEach((function(e){var i=vl.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function ga(t,e,n){(n=ao(n,null)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Da||(Da=!0,Pa=i),ta(t,e)},n}function pa(t,e,n){(n=ao(n,null)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return ta(t,e),i(r)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof i&&(null===La?La=new Set([this]):La.add(this),ta(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var ma,ba=Math.ceil,ya=q.ReactCurrentDispatcher,wa=q.ReactCurrentOwner,va=0,Ca=3,Sa=4,Oa=0,Ta=null,_a=null,Ea=0,Ra=va,Ma=null,xa=1073741823,Ia=1073741823,ka=null,Aa=0,Na=!1,ja=0,Ha=null,Da=!1,Pa=null,La=null,Fa=!1,Ba=null,Va=90,Ua=null,Wa=0,za=null,Ya=0;function Ga(){return 0!==(48&Oa)?1073741821-(Fr()/10|0):0!==Ya?Ya:Ya=1073741821-(Fr()/10|0)}function $a(t,e,n){if(0===(2&(e=e.mode)))return 1073741823;var i=Br();if(0===(4&e))return 99===i?1073741823:1073741822;if(0!==(16&Oa))return Ea;if(null!==n)t=$r(t,0|n.timeoutMs||5e3,250);else switch(i){case 99:t=1073741823;break;case 98:t=$r(t,150,100);break;case 97:case 96:t=$r(t,5e3,250);break;case 95:t=2;break;default:throw Error(s(326))}return null!==Ta&&t===Ea&&--t,t}function Ka(t,e){if(50<Wa)throw Wa=0,za=null,Error(s(185));if(null!==(t=Xa(t,e))){var n=Br();1073741823===e?0!==(8&Oa)&&0===(48&Oa)?Ja(t):(Qa(t),0===Oa&&Yr()):Qa(t),0===(4&Oa)||98!==n&&99!==n||(null===Ua?Ua=new Map([[t,e]]):(void 0===(n=Ua.get(t))||n>e)&&Ua.set(t,e))}}function Xa(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var i=t.return,r=null;if(null===i&&3===t.tag)r=t.stateNode;else for(;null!==i;){if(n=i.alternate,i.childExpirationTime<e&&(i.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===i.return&&3===i.tag){r=i.stateNode;break}i=i.return}return null!==r&&(Ta===r&&(sl(e),Ra===Sa&&Nl(r,Ea)),jl(r,e)),r}function qa(t){var e=t.lastExpiredTime;if(0!==e)return e;if(!Al(t,e=t.firstPendingTime))return e;var n=t.lastPingedTime;return 2>=(t=n>(t=t.nextKnownPendingLevel)?n:t)&&e!==t?0:t}function Qa(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=zr(Ja.bind(null,t));else{var e=qa(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var i=Ga();if(1073741823===e?i=99:1===e||2===e?i=95:i=0>=(i=10*(1073741821-e)-10*(1073741821-i))?99:250>=i?98:5250>=i?97:95,null!==n){var r=t.callbackPriority;if(t.callbackExpirationTime===e&&r>=i)return;n!==Ar&&Or(n)}t.callbackExpirationTime=e,t.callbackPriority=i,e=1073741823===e?zr(Ja.bind(null,t)):Wr(i,Za.bind(null,t),{timeout:10*(1073741821-e)-Fr()}),t.callbackNode=e}}}function Za(t,e){if(Ya=0,e)return Hl(t,e=Ga()),Qa(t),null;var n=qa(t);if(0!==n){if(e=t.callbackNode,0!==(48&Oa))throw Error(s(327));if(pl(),t===Ta&&n===Ea||nl(t,n),null!==_a){var i=Oa;Oa|=16;for(var r=rl();;)try{ll();break}catch(l){il(t,l)}if(Jr(),Oa=i,ya.current=r,1===Ra)throw e=Ma,nl(t,n),Nl(t,n),Qa(t),e;if(null===_a)switch(r=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,i=Ra,Ta=null,i){case va:case 1:throw Error(s(345));case 2:Hl(t,2<n?2:n);break;case Ca:if(Nl(t,n),n===(i=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=hl(r)),1073741823===xa&&10<(r=ja+500-Fr())){if(Na){var o=t.lastPingedTime;if(0===o||o>=n){t.lastPingedTime=n,nl(t,n);break}}if(0!==(o=qa(t))&&o!==n)break;if(0!==i&&i!==n){t.lastPingedTime=i;break}t.timeoutHandle=wn(dl.bind(null,t),r);break}dl(t);break;case Sa:if(Nl(t,n),n===(i=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=hl(r)),Na&&(0===(r=t.lastPingedTime)||r>=n)){t.lastPingedTime=n,nl(t,n);break}if(0!==(r=qa(t))&&r!==n)break;if(0!==i&&i!==n){t.lastPingedTime=i;break}if(1073741823!==Ia?i=10*(1073741821-Ia)-Fr():1073741823===xa?i=0:(i=10*(1073741821-xa)-5e3,0>(i=(r=Fr())-i)&&(i=0),(n=10*(1073741821-n)-r)<(i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*ba(i/1960))-i)&&(i=n)),10<i){t.timeoutHandle=wn(dl.bind(null,t),i);break}dl(t);break;case 5:if(1073741823!==xa&&null!==ka){o=xa;var a=ka;if(0>=(i=0|a.busyMinDurationMs)?i=0:(r=0|a.busyDelayMs,i=(o=Fr()-(10*(1073741821-o)-(0|a.timeoutMs||5e3)))<=r?0:r+i-o),10<i){Nl(t,n),t.timeoutHandle=wn(dl.bind(null,t),i);break}}dl(t);break;default:throw Error(s(329))}if(Qa(t),t.callbackNode===e)return Za.bind(null,t)}}return null}function Ja(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,0!==(48&Oa))throw Error(s(327));if(pl(),t===Ta&&e===Ea||nl(t,e),null!==_a){var n=Oa;Oa|=16;for(var i=rl();;)try{al();break}catch(r){il(t,r)}if(Jr(),Oa=n,ya.current=i,1===Ra)throw n=Ma,nl(t,e),Nl(t,e),Qa(t),n;if(null!==_a)throw Error(s(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,Ta=null,dl(t),Qa(t)}return null}function tl(t,e){var n=Oa;Oa|=1;try{return t(e)}finally{0===(Oa=n)&&Yr()}}function el(t,e){var n=Oa;Oa&=-2,Oa|=8;try{return t(e)}finally{0===(Oa=n)&&Yr()}}function nl(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,vn(n)),null!==_a)for(n=_a.return;null!==n;){var i=n;switch(i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&mr();break;case 3:No(),lr(dr),lr(hr);break;case 5:Ho(i);break;case 4:No();break;case 13:case 19:lr(Do);break;case 10:to(i)}n=n.return}Ta=t,_a=El(t.current,null),Ea=e,Ra=va,Ma=null,Ia=xa=1073741823,ka=null,Aa=0,Na=!1}function il(t,e){for(;;){try{if(Jr(),Fo.current=ms,Yo)for(var n=Uo.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}if(Vo=0,zo=Wo=Uo=null,Yo=!1,null===_a||null===_a.return)return Ra=1,Ma=e,_a=null;t:{var r=t,o=_a.return,s=_a,a=e;if(e=Ea,s.effectTag|=2048,s.firstEffect=s.lastEffect=null,null!==a&&"object"===typeof a&&"function"===typeof a.then){var l=a;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.expirationTime=c.expirationTime):(s.updateQueue=null,s.memoizedState=null)}var u=0!==(1&Do.current),h=o;do{var d;if(d=13===h.tag){var f=h.memoizedState;if(null!==f)d=null!==f.dehydrated;else{var g=h.memoizedProps;d=void 0!==g.fallback&&(!0!==g.unstable_avoidThisFallback||!u)}}if(d){var p=h.updateQueue;if(null===p){var m=new Set;m.add(l),h.updateQueue=m}else p.add(l);if(0===(2&h.mode)){if(h.effectTag|=64,s.effectTag&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var b=ao(1073741823,null);b.tag=2,lo(s,b)}s.expirationTime=1073741823;break t}a=void 0,s=e;var y=r.pingCache;if(null===y?(y=r.pingCache=new fa,a=new Set,y.set(l,a)):void 0===(a=y.get(l))&&(a=new Set,y.set(l,a)),!a.has(s)){a.add(s);var w=wl.bind(null,r,l,s);l.then(w,w)}h.effectTag|=4096,h.expirationTime=e;break t}h=h.return}while(null!==h);a=Error((mt(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+bt(s))}5!==Ra&&(Ra=2),a=Zs(a,s),h=o;do{switch(h.tag){case 3:l=a,h.effectTag|=4096,h.expirationTime=e,co(h,ga(h,l,e));break t;case 1:l=a;var v=h.type,C=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof v.getDerivedStateFromError||null!==C&&"function"===typeof C.componentDidCatch&&(null===La||!La.has(C)))){h.effectTag|=4096,h.expirationTime=e,co(h,pa(h,l,e));break t}}h=h.return}while(null!==h)}_a=ul(_a)}catch(S){e=S;continue}break}}function rl(){var t=ya.current;return ya.current=ms,null===t?ms:t}function ol(t,e){t<xa&&2<t&&(xa=t),null!==e&&t<Ia&&2<t&&(Ia=t,ka=e)}function sl(t){t>Aa&&(Aa=t)}function al(){for(;null!==_a;)_a=cl(_a)}function ll(){for(;null!==_a&&!Nr();)_a=cl(_a)}function cl(t){var e=ma(t.alternate,t,Ea);return t.memoizedProps=t.pendingProps,null===e&&(e=ul(t)),wa.current=null,e}function ul(t){_a=t;do{var e=_a.alternate;if(t=_a.return,0===(2048&_a.effectTag)){if(e=qs(e,_a,Ea),1===Ea||1!==_a.childExpirationTime){for(var n=0,i=_a.child;null!==i;){var r=i.expirationTime,o=i.childExpirationTime;r>n&&(n=r),o>n&&(n=o),i=i.sibling}_a.childExpirationTime=n}if(null!==e)return e;null!==t&&0===(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=_a.firstEffect),null!==_a.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=_a.firstEffect),t.lastEffect=_a.lastEffect),1<_a.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=_a:t.firstEffect=_a,t.lastEffect=_a))}else{if(null!==(e=Qs(_a)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=_a.sibling))return e;_a=t}while(null!==_a);return Ra===va&&(Ra=5),null}function hl(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function dl(t){var e=Br();return Ur(99,fl.bind(null,t,e)),null}function fl(t,e){do{pl()}while(null!==Ba);if(0!==(48&Oa))throw Error(s(327));var n=t.finishedWork,i=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(s(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var r=hl(n);if(t.firstPendingTime=r,i<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:i<=t.firstSuspendedTime&&(t.firstSuspendedTime=i-1),i<=t.lastPingedTime&&(t.lastPingedTime=0),i<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===Ta&&(_a=Ta=null,Ea=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){var o=Oa;Oa|=32,wa.current=null,pn=Ge;var a=fn();if(gn(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else t:{var c=(l=(l=a.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(c&&0!==c.rangeCount){l=c.anchorNode;var u=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{l.nodeType,h.nodeType}catch(E){l=null;break t}var d=0,f=-1,g=-1,p=0,m=0,b=a,y=null;e:for(;;){for(var w;b!==l||0!==u&&3!==b.nodeType||(f=d+u),b!==h||0!==c&&3!==b.nodeType||(g=d+c),3===b.nodeType&&(d+=b.nodeValue.length),null!==(w=b.firstChild);)y=b,b=w;for(;;){if(b===a)break e;if(y===l&&++p===u&&(f=d),y===h&&++m===c&&(g=d),null!==(w=b.nextSibling))break;y=(b=y).parentNode}b=w}l=-1===f||-1===g?null:{start:f,end:g}}else l=null}l=l||{start:0,end:0}}else l=null;mn={activeElementDetached:null,focusedElem:a,selectionRange:l},Ge=!1,Ha=r;do{try{gl()}catch(E){if(null===Ha)throw Error(s(330));yl(Ha,E),Ha=Ha.nextEffect}}while(null!==Ha);Ha=r;do{try{for(a=t,l=e;null!==Ha;){var v=Ha.effectTag;if(16&v&&Bt(Ha.stateNode,""),128&v){var C=Ha.alternate;if(null!==C){var S=C.ref;null!==S&&("function"===typeof S?S(null):S.current=null)}}switch(1038&v){case 2:ca(Ha),Ha.effectTag&=-3;break;case 6:ca(Ha),Ha.effectTag&=-3,ha(Ha.alternate,Ha);break;case 1024:Ha.effectTag&=-1025;break;case 1028:Ha.effectTag&=-1025,ha(Ha.alternate,Ha);break;case 4:ha(Ha.alternate,Ha);break;case 8:ua(a,u=Ha,l),aa(u)}Ha=Ha.nextEffect}}catch(E){if(null===Ha)throw Error(s(330));yl(Ha,E),Ha=Ha.nextEffect}}while(null!==Ha);if(S=mn,C=fn(),v=S.focusedElem,l=S.selectionRange,C!==v&&v&&v.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(v.ownerDocument.documentElement,v)){null!==l&&gn(v)&&(C=l.start,void 0===(S=l.end)&&(S=C),"selectionStart"in v?(v.selectionStart=C,v.selectionEnd=Math.min(S,v.value.length)):(S=(C=v.ownerDocument||document)&&C.defaultView||window).getSelection&&(S=S.getSelection(),u=v.textContent.length,a=Math.min(l.start,u),l=void 0===l.end?a:Math.min(l.end,u),!S.extend&&a>l&&(u=l,l=a,a=u),u=dn(v,a),h=dn(v,l),u&&h&&(1!==S.rangeCount||S.anchorNode!==u.node||S.anchorOffset!==u.offset||S.focusNode!==h.node||S.focusOffset!==h.offset)&&((C=C.createRange()).setStart(u.node,u.offset),S.removeAllRanges(),a>l?(S.addRange(C),S.extend(h.node,h.offset)):(C.setEnd(h.node,h.offset),S.addRange(C))))),C=[];for(S=v;S=S.parentNode;)1===S.nodeType&&C.push({element:S,left:S.scrollLeft,top:S.scrollTop});for("function"===typeof v.focus&&v.focus(),v=0;v<C.length;v++)(S=C[v]).element.scrollLeft=S.left,S.element.scrollTop=S.top}Ge=!!pn,mn=pn=null,t.current=n,Ha=r;do{try{for(v=t;null!==Ha;){var O=Ha.effectTag;if(36&O&&oa(v,Ha.alternate,Ha),128&O){C=void 0;var T=Ha.ref;if(null!==T){var _=Ha.stateNode;switch(Ha.tag){case 5:C=_;break;default:C=_}"function"===typeof T?T(C):T.current=C}}Ha=Ha.nextEffect}}catch(E){if(null===Ha)throw Error(s(330));yl(Ha,E),Ha=Ha.nextEffect}}while(null!==Ha);Ha=null,jr(),Oa=o}else t.current=n;if(Fa)Fa=!1,Ba=t,Va=e;else for(Ha=r;null!==Ha;)e=Ha.nextEffect,Ha.nextEffect=null,Ha=e;if(0===(e=t.firstPendingTime)&&(La=null),1073741823===e?t===za?Wa++:(Wa=0,za=t):Wa=0,"function"===typeof Cl&&Cl(n.stateNode,i),Qa(t),Da)throw Da=!1,t=Pa,Pa=null,t;return 0!==(8&Oa)||Yr(),null}function gl(){for(;null!==Ha;){var t=Ha.effectTag;0!==(256&t)&&na(Ha.alternate,Ha),0===(512&t)||Fa||(Fa=!0,Wr(97,(function(){return pl(),null}))),Ha=Ha.nextEffect}}function pl(){if(90!==Va){var t=97<Va?97:Va;return Va=90,Ur(t,ml)}}function ml(){if(null===Ba)return!1;var t=Ba;if(Ba=null,0!==(48&Oa))throw Error(s(331));var e=Oa;for(Oa|=32,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ia(5,n),ra(5,n)}}catch(i){if(null===t)throw Error(s(330));yl(t,i)}n=t.nextEffect,t.nextEffect=null,t=n}return Oa=e,Yr(),!0}function bl(t,e,n){lo(t,e=ga(t,e=Zs(n,e),1073741823)),null!==(t=Xa(t,1073741823))&&Qa(t)}function yl(t,e){if(3===t.tag)bl(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){bl(n,t,e);break}if(1===n.tag){var i=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===La||!La.has(i))){lo(n,t=pa(n,t=Zs(e,t),1073741823)),null!==(n=Xa(n,1073741823))&&Qa(n);break}}n=n.return}}function wl(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),Ta===t&&Ea===n?Ra===Sa||Ra===Ca&&1073741823===xa&&Fr()-ja<500?nl(t,Ea):Na=!0:Al(t,n)&&(0!==(e=t.lastPingedTime)&&e<n||(t.lastPingedTime=n,Qa(t)))}function vl(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(e=$a(e=Ga(),t,null)),null!==(t=Xa(t,e))&&Qa(t)}ma=function(t,e,n){var i=e.expirationTime;if(null!==t){var r=e.pendingProps;if(t.memoizedProps!==r||dr.current)Is=!0;else{if(i<n){switch(Is=!1,e.tag){case 3:Fs(e),Ms();break;case 5:if(jo(e),4&e.mode&&1!==n&&r.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:pr(e.type)&&wr(e);break;case 4:Ao(e,e.stateNode.containerInfo);break;case 10:i=e.memoizedProps.value,r=e.type._context,cr(Xr,r._currentValue),r._currentValue=i;break;case 13:if(null!==e.memoizedState)return 0!==(i=e.child.childExpirationTime)&&i>=n?zs(t,e,n):(cr(Do,1&Do.current),null!==(e=Ks(t,e,n))?e.sibling:null);cr(Do,1&Do.current);break;case 19:if(i=e.childExpirationTime>=n,0!==(64&t.effectTag)){if(i)return $s(t,e,n);e.effectTag|=64}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null),cr(Do,Do.current),!i)return null}return Ks(t,e,n)}Is=!1}}else Is=!1;switch(e.expirationTime=0,e.tag){case 2:if(i=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,r=gr(e,hr.current),no(e,n),r=Ko(null,e,i,t,r,n),e.effectTag|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,pr(i)){var o=!0;wr(e)}else o=!1;e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,oo(e);var a=i.getDerivedStateFromProps;"function"===typeof a&&po(e,i,a,t),r.updater=mo,e.stateNode=r,r._reactInternalFiber=e,vo(e,i,t,n),e=Ls(null,e,i,!0,o,n)}else e.tag=0,ks(null,e,r,n),e=e.child;return e;case 16:t:{if(r=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(r),1!==r._status)throw r._result;switch(r=r._result,e.type=r,o=e.tag=function(t){if("function"===typeof t)return _l(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===lt)return 11;if(t===ht)return 14}return 2}(r),t=Kr(r,t),o){case 0:e=Ds(null,e,r,t,n);break t;case 1:e=Ps(null,e,r,t,n);break t;case 11:e=As(null,e,r,t,n);break t;case 14:e=Ns(null,e,r,Kr(r.type,t),i,n);break t}throw Error(s(306,r,""))}return e;case 0:return i=e.type,r=e.pendingProps,Ds(t,e,i,r=e.elementType===i?r:Kr(i,r),n);case 1:return i=e.type,r=e.pendingProps,Ps(t,e,i,r=e.elementType===i?r:Kr(i,r),n);case 3:if(Fs(e),i=e.updateQueue,null===t||null===i)throw Error(s(282));if(i=e.pendingProps,r=null!==(r=e.memoizedState)?r.element:null,so(t,e),uo(e,i,null,n),(i=e.memoizedState.element)===r)Ms(),e=Ks(t,e,n);else{if((r=e.stateNode.hydrate)&&(Cs=Cn(e.stateNode.containerInfo.firstChild),vs=e,r=Ss=!0),r)for(n=Eo(e,null,i,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else ks(t,e,i,n),Ms();e=e.child}return e;case 5:return jo(e),null===t&&_s(e),i=e.type,r=e.pendingProps,o=null!==t?t.memoizedProps:null,a=r.children,yn(i,r)?a=null:null!==o&&yn(i,o)&&(e.effectTag|=16),Hs(t,e),4&e.mode&&1!==n&&r.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(ks(t,e,a,n),e=e.child),e;case 6:return null===t&&_s(e),null;case 13:return zs(t,e,n);case 4:return Ao(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=_o(e,null,i,n):ks(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,As(t,e,i,r=e.elementType===i?r:Kr(i,r),n);case 7:return ks(t,e,e.pendingProps,n),e.child;case 8:case 12:return ks(t,e,e.pendingProps.children,n),e.child;case 10:t:{i=e.type._context,r=e.pendingProps,a=e.memoizedProps,o=r.value;var l=e.type._context;if(cr(Xr,l._currentValue),l._currentValue=o,null!==a)if(l=a.value,0===(o=Pi(l,o)?0:0|("function"===typeof i._calculateChangedBits?i._calculateChangedBits(l,o):1073741823))){if(a.children===r.children&&!dr.current){e=Ks(t,e,n);break t}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var c=l.dependencies;if(null!==c){a=l.child;for(var u=c.firstContext;null!==u;){if(u.context===i&&0!==(u.observedBits&o)){1===l.tag&&((u=ao(n,null)).tag=2,lo(l,u)),l.expirationTime<n&&(l.expirationTime=n),null!==(u=l.alternate)&&u.expirationTime<n&&(u.expirationTime=n),eo(l.return,n),c.expirationTime<n&&(c.expirationTime=n);break}u=u.next}}else a=10===l.tag&&l.type===e.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===e){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}ks(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=(o=e.pendingProps).children,no(e,n),i=i(r=io(r,o.unstable_observedBits)),e.effectTag|=1,ks(t,e,i,n),e.child;case 14:return o=Kr(r=e.type,e.pendingProps),Ns(t,e,r,o=Kr(r.type,o),i,n);case 15:return js(t,e,e.type,e.pendingProps,i,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Kr(i,r),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,pr(i)?(t=!0,wr(e)):t=!1,no(e,n),yo(e,i,r),vo(e,i,r,n),Ls(null,e,i,!0,t,n);case 19:return $s(t,e,n)}throw Error(s(156,e.tag))};var Cl=null,Sl=null;function Ol(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Tl(t,e,n,i){return new Ol(t,e,n,i)}function _l(t){return!(!(t=t.prototype)||!t.isReactComponent)}function El(t,e){var n=t.alternate;return null===n?((n=Tl(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Rl(t,e,n,i,r,o){var a=2;if(i=t,"function"===typeof t)_l(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case nt:return Ml(n.children,r,o,e);case at:a=8,r|=7;break;case it:a=8,r|=1;break;case rt:return(t=Tl(12,n,e,8|r)).elementType=rt,t.type=rt,t.expirationTime=o,t;case ct:return(t=Tl(13,n,e,r)).type=ct,t.elementType=ct,t.expirationTime=o,t;case ut:return(t=Tl(19,n,e,r)).elementType=ut,t.expirationTime=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case ot:a=10;break t;case st:a=9;break t;case lt:a=11;break t;case ht:a=14;break t;case dt:a=16,i=null;break t;case ft:a=22;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Tl(a,n,e,r)).elementType=t,e.type=i,e.expirationTime=o,e}function Ml(t,e,n,i){return(t=Tl(7,t,i,e)).expirationTime=n,t}function xl(t,e,n){return(t=Tl(6,t,null,e)).expirationTime=n,t}function Il(t,e,n){return(e=Tl(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kl(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Al(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function Nl(t,e){var n=t.firstSuspendedTime,i=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(i>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function jl(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function Hl(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}function Dl(t,e,n,i){var r=e.current,o=Ga(),a=fo.suspense;o=$a(o,r,a);t:if(n){e:{if(Jt(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(s(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(pr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(null!==l);throw Error(s(171))}if(1===n.tag){var c=n.type;if(pr(c)){n=yr(n,c,l);break t}}n=l}else n=ur;return null===e.context?e.context=n:e.pendingContext=n,(e=ao(o,a)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),lo(r,e),Ka(r,o),o}function Pl(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Ll(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function Fl(t,e){Ll(t,e),(t=t.alternate)&&Ll(t,e)}function Bl(t,e,n){var i=new kl(t,e,n=null!=n&&!0===n.hydrate),r=Tl(3,null,null,2===e?7:1===e?3:0);i.current=r,r.stateNode=i,oo(r),t[En]=i.current,n&&0!==e&&function(t,e){var n=Zt(e);Ee.forEach((function(t){ge(t,e,n)})),Re.forEach((function(t){ge(t,e,n)}))}(0,9===t.nodeType?t:t.ownerDocument),this._internalRoot=i}function Vl(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Ul(t,e,n,i,r){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if("function"===typeof r){var a=r;r=function(){var t=Pl(s);a.call(t)}}Dl(e,s,t,r)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Bl(t,0,e?{hydrate:!0}:void 0)}(n,i),s=o._internalRoot,"function"===typeof r){var l=r;r=function(){var t=Pl(s);l.call(t)}}el((function(){Dl(e,s,t,r)}))}return Pl(s)}function Wl(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:et,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}function zl(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Vl(e))throw Error(s(200));return Wl(t,e,null,n)}Bl.prototype.render=function(t){Dl(t,this._internalRoot,null,null)},Bl.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Dl(null,t,null,(function(){e[En]=null}))},pe=function(t){if(13===t.tag){var e=$r(Ga(),150,100);Ka(t,e),Fl(t,e)}},me=function(t){13===t.tag&&(Ka(t,3),Fl(t,3))},be=function(t){if(13===t.tag){var e=Ga();Ka(t,e=$a(e,t,null)),Fl(t,e)}},M=function(t,e,n){switch(e){case"input":if(_t(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=In(i);if(!r)throw Error(s(90));Ct(i),_t(i,r)}}}break;case"textarea":At(t,n);break;case"select":null!=(e=n.value)&&xt(t,!!n.multiple,e,!1)}},j=tl,H=function(t,e,n,i,r){var o=Oa;Oa|=4;try{return Ur(98,t.bind(null,e,n,i,r))}finally{0===(Oa=o)&&Yr()}},D=function(){0===(49&Oa)&&(function(){if(null!==Ua){var t=Ua;Ua=null,t.forEach((function(t,e){Hl(e,t),Qa(e)})),Yr()}}(),pl())},P=function(t,e){var n=Oa;Oa|=2;try{return t(e)}finally{0===(Oa=n)&&Yr()}};var Yl={Events:[Mn,xn,In,E,O,Pn,function(t){re(t,Dn)},A,N,Qe,ae,pl,{current:!1}]};!function(t){var e=t.findFiberByHostInstance;(function(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);Cl=function(t){try{e.onCommitFiberRoot(n,t,void 0,64===(64&t.current.effectTag))}catch(i){}},Sl=function(t){try{e.onCommitFiberUnmount(n,t)}catch(i){}}}catch(i){}})(r({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=ne(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Rn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yl,e.createPortal=zl,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw Error(s(268,Object.keys(t)))}return t=null===(t=ne(e))?null:t.stateNode},e.flushSync=function(t,e){if(0!==(48&Oa))throw Error(s(187));var n=Oa;Oa|=1;try{return Ur(99,t.bind(null,e))}finally{Oa=n,Yr()}},e.hydrate=function(t,e,n){if(!Vl(e))throw Error(s(200));return Ul(null,t,e,!0,n)},e.render=function(t,e,n){if(!Vl(e))throw Error(s(200));return Ul(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Vl(t))throw Error(s(40));return!!t._reactRootContainer&&(el((function(){Ul(null,null,t,!1,(function(){t._reactRootContainer=null,t[En]=null}))})),!0)},e.unstable_batchedUpdates=tl,e.unstable_createPortal=function(t,e){return zl(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Vl(n))throw Error(s(200));if(null==t||void 0===t._reactInternalFiber)throw Error(s(38));return Ul(t,e,n,!1,i)},e.version="16.14.0"},function(t,e,n){"use strict";t.exports=n(138)},function(t,e,n){"use strict";var i,r,o,s,a;if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,c=null,u=function(){if(null!==l)try{var t=e.unstable_now();l(!0,t),l=null}catch(n){throw setTimeout(u,0),n}},h=Date.now();e.unstable_now=function(){return Date.now()-h},i=function(t){null!==l?setTimeout(i,0,t):(l=t,setTimeout(u,0))},r=function(t,e){c=setTimeout(t,e)},o=function(){clearTimeout(c)},s=function(){return!1},a=e.unstable_forceFrameRate=function(){}}else{var d=window.performance,f=window.Date,g=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof d&&"function"===typeof d.now)e.unstable_now=function(){return d.now()};else{var b=f.now();e.unstable_now=function(){return f.now()-b}}var y=!1,w=null,v=-1,C=5,S=0;s=function(){return e.unstable_now()>=S},a=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):C=0<t?Math.floor(1e3/t):5};var O=new MessageChannel,T=O.port2;O.port1.onmessage=function(){if(null!==w){var t=e.unstable_now();S=t+C;try{w(!0,t)?T.postMessage(null):(y=!1,w=null)}catch(n){throw T.postMessage(null),n}}else y=!1},i=function(t){w=t,y||(y=!0,T.postMessage(null))},r=function(t,n){v=g((function(){t(e.unstable_now())}),n)},o=function(){p(v),v=-1}}function _(t,e){var n=t.length;t.push(e);t:for(;;){var i=n-1>>>1,r=t[i];if(!(void 0!==r&&0<M(r,e)))break t;t[i]=e,t[n]=r,n=i}}function E(t){return void 0===(t=t[0])?null:t}function R(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length;i<r;){var o=2*(i+1)-1,s=t[o],a=o+1,l=t[a];if(void 0!==s&&0>M(s,n))void 0!==l&&0>M(l,s)?(t[i]=l,t[a]=n,i=a):(t[i]=s,t[o]=n,i=o);else{if(!(void 0!==l&&0>M(l,n)))break t;t[i]=l,t[a]=n,i=a}}}return e}return null}function M(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var x=[],I=[],k=1,A=null,N=3,j=!1,H=!1,D=!1;function P(t){for(var e=E(I);null!==e;){if(null===e.callback)R(I);else{if(!(e.startTime<=t))break;R(I),e.sortIndex=e.expirationTime,_(x,e)}e=E(I)}}function L(t){if(D=!1,P(t),!H)if(null!==E(x))H=!0,i(F);else{var e=E(I);null!==e&&r(L,e.startTime-t)}}function F(t,n){H=!1,D&&(D=!1,o()),j=!0;var i=N;try{for(P(n),A=E(x);null!==A&&(!(A.expirationTime>n)||t&&!s());){var a=A.callback;if(null!==a){A.callback=null,N=A.priorityLevel;var l=a(A.expirationTime<=n);n=e.unstable_now(),"function"===typeof l?A.callback=l:A===E(x)&&R(x),P(n)}else R(x);A=E(x)}if(null!==A)var c=!0;else{var u=E(I);null!==u&&r(L,u.startTime-n),c=!1}return c}finally{A=null,N=i,j=!1}}function B(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var V=a;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){H||j||(H=!0,i(F))},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return E(x)},e.unstable_next=function(t){switch(N){case 1:case 2:case 3:var e=3;break;default:e=N}var n=N;N=e;try{return t()}finally{N=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=V,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=N;N=t;try{return e()}finally{N=n}},e.unstable_scheduleCallback=function(t,n,s){var a=e.unstable_now();if("object"===typeof s&&null!==s){var l=s.delay;l="number"===typeof l&&0<l?a+l:a,s="number"===typeof s.timeout?s.timeout:B(t)}else s=B(t),l=a;return t={id:k++,callback:n,priorityLevel:t,startTime:l,expirationTime:s=l+s,sortIndex:-1},l>a?(t.sortIndex=l,_(I,t),null===E(x)&&t===E(I)&&(D?o():D=!0,r(L,l-a))):(t.sortIndex=s,_(x,t),H||j||(H=!0,i(F))),t},e.unstable_shouldYield=function(){var t=e.unstable_now();P(t);var n=E(x);return n!==A&&null!==A&&null!==n&&null!==n.callback&&n.startTime<=t&&n.expirationTime<A.expirationTime||s()},e.unstable_wrapCallback=function(t){var e=N;return function(){var n=N;N=e;try{return t.apply(this,arguments)}finally{N=n}}}},function(t,e,n){"use strict";t.exports=n(140)},function(t,e,n){"use strict";var i="function"===typeof Symbol&&Symbol.for,r=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,a=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,u=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.async_mode"):60111,d=i?Symbol.for("react.concurrent_mode"):60111,f=i?Symbol.for("react.forward_ref"):60112,g=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.suspense_list"):60120,m=i?Symbol.for("react.memo"):60115,b=i?Symbol.for("react.lazy"):60116,y=i?Symbol.for("react.block"):60121,w=i?Symbol.for("react.fundamental"):60117,v=i?Symbol.for("react.responder"):60118,C=i?Symbol.for("react.scope"):60119;function S(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case h:case d:case s:case l:case a:case g:return t;default:switch(t=t&&t.$$typeof){case u:case f:case b:case m:case c:return t;default:return e}}case o:return e}}}function O(t){return S(t)===d}e.AsyncMode=h,e.ConcurrentMode=d,e.ContextConsumer=u,e.ContextProvider=c,e.Element=r,e.ForwardRef=f,e.Fragment=s,e.Lazy=b,e.Memo=m,e.Portal=o,e.Profiler=l,e.StrictMode=a,e.Suspense=g,e.isAsyncMode=function(t){return O(t)||S(t)===h},e.isConcurrentMode=O,e.isContextConsumer=function(t){return S(t)===u},e.isContextProvider=function(t){return S(t)===c},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return S(t)===f},e.isFragment=function(t){return S(t)===s},e.isLazy=function(t){return S(t)===b},e.isMemo=function(t){return S(t)===m},e.isPortal=function(t){return S(t)===o},e.isProfiler=function(t){return S(t)===l},e.isStrictMode=function(t){return S(t)===a},e.isSuspense=function(t){return S(t)===g},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===s||t===d||t===l||t===a||t===g||t===p||"object"===typeof t&&null!==t&&(t.$$typeof===b||t.$$typeof===m||t.$$typeof===c||t.$$typeof===u||t.$$typeof===f||t.$$typeof===w||t.$$typeof===v||t.$$typeof===C||t.$$typeof===y)},e.typeOf=S},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";n(143),n(181)},function(t,e,n){"use strict";var i=n(80),r=n(28),o=n(98).clear;i({global:!0,bind:!0,enumerable:!0,forced:r.clearImmediate!==o},{clearImmediate:o})},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!i.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:i},function(t,e,n){"use strict";var i=n(32),r=n(34),o=n(63),s=Object,a=i("".split);t.exports=r((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===o(t)?a(t,""):s(t)}:s},function(t,e,n){"use strict";var i=n(61),r=n(52),o=n(86),s=n(150),a=n(152),l=n(153),c=TypeError,u=l("toPrimitive");t.exports=function(t,e){if(!r(t)||o(t))return t;var n,l=s(t,u);if(l){if(void 0===e&&(e="default"),n=i(l,t,e),!r(n)||o(n))return n;throw new c("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},function(t,e,n){"use strict";var i=n(32);t.exports=i({}.isPrototypeOf)},function(t,e,n){"use strict";var i,r,o=n(28),s=n(57),a=o.process,l=o.Deno,c=a&&a.versions||l&&l.version,u=c&&c.v8;u&&(r=(i=u.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(r=+i[1]),t.exports=r},function(t,e,n){"use strict";var i=n(89),r=n(84);t.exports=function(t,e){var n=t[e];return r(n)?void 0:i(n)}},function(t,e,n){"use strict";var i=String;t.exports=function(t){try{return i(t)}catch(e){return"Object"}}},function(t,e,n){"use strict";var i=n(61),r=n(31),o=n(52),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&r(n=t.toString)&&!o(a=i(n,t)))return a;if(r(n=t.valueOf)&&!o(a=i(n,t)))return a;if("string"!==e&&r(n=t.toString)&&!o(a=i(n,t)))return a;throw new s("Can't convert object to primitive value")}},function(t,e,n){"use strict";var i=n(28),r=n(90),o=n(39),s=n(91),a=n(88),l=n(87),c=i.Symbol,u=r("wks"),h=l?c.for||c:c&&c.withoutSetter||s;t.exports=function(t){return o(u,t)||(u[t]=a&&o(c,t)?c[t]:h("Symbol."+t)),u[t]}},function(t,e,n){"use strict";t.exports=!1},function(t,e,n){"use strict";var i=n(83),r=Object;t.exports=function(t){return r(i(t))}},function(t,e,n){"use strict";var i=n(46),r=n(34);t.exports=i&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(t,e,n){"use strict";var i=n(31),r=n(67),o=n(158),s=n(66);t.exports=function(t,e,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:e;if(i(n)&&o(n,c,a),a.global)l?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(l=!0):delete t[e]}catch(u){}l?t[e]=n:r.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},function(t,e,n){"use strict";var i=n(32),r=n(34),o=n(31),s=n(39),a=n(46),l=n(159).CONFIGURABLE,c=n(160),u=n(161),h=u.enforce,d=u.get,f=String,g=Object.defineProperty,p=i("".slice),m=i("".replace),b=i([].join),y=a&&!r((function(){return 8!==g((function(){}),"length",{value:8}).length})),w=String(String).split("String"),v=t.exports=function(t,e,n){"Symbol("===p(f(e),0,7)&&(e="["+m(f(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||l&&t.name!==e)&&(a?g(t,"name",{value:e,configurable:!0}):t.name=e),y&&n&&s(n,"arity")&&t.length!==n.arity&&g(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&g(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(r){}var i=h(t);return s(i,"source")||(i.source=b(w,"string"==typeof e?e:"")),t};Function.prototype.toString=v((function(){return o(this)&&d(this).source||c(this)}),"toString")},function(t,e,n){"use strict";var i=n(46),r=n(39),o=Function.prototype,s=i&&Object.getOwnPropertyDescriptor,a=r(o,"name"),l=a&&"something"===function(){}.name,c=a&&(!i||i&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},function(t,e,n){"use strict";var i=n(32),r=n(31),o=n(65),s=i(Function.toString);r(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},function(t,e,n){"use strict";var i,r,o,s=n(162),a=n(28),l=n(52),c=n(94),u=n(39),h=n(65),d=n(163),f=n(96),g=a.TypeError,p=a.WeakMap;if(s||h.state){var m=h.state||(h.state=new p);m.get=m.get,m.has=m.has,m.set=m.set,i=function(t,e){if(m.has(t))throw new g("Object already initialized");return e.facade=t,m.set(t,e),e},r=function(t){return m.get(t)||{}},o=function(t){return m.has(t)}}else{var b=d("state");f[b]=!0,i=function(t,e){if(u(t,b))throw new g("Object already initialized");return e.facade=t,c(t,b,e),e},r=function(t){return u(t,b)?t[b]:{}},o=function(t){return u(t,b)}}t.exports={set:i,get:r,has:o,enforce:function(t){return o(t)?r(t):i(t,{})},getterFor:function(t){return function(e){var n;if(!l(e)||(n=r(e)).type!==t)throw new g("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){"use strict";var i=n(28),r=n(31),o=i.WeakMap;t.exports=r(o)&&/native code/.test(String(o))},function(t,e,n){"use strict";var i=n(90),r=n(91),o=i("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},function(t,e,n){"use strict";var i=n(39),r=n(165),o=n(81),s=n(67);t.exports=function(t,e,n){for(var a=r(e),l=s.f,c=o.f,u=0;u<a.length;u++){var h=a[u];i(t,h)||n&&i(n,h)||l(t,h,c(e,h))}}},function(t,e,n){"use strict";var i=n(64),r=n(32),o=n(166),s=n(174),a=n(95),l=r([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?l(e,n(t)):e}},function(t,e,n){"use strict";var i=n(167),r=n(173).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){"use strict";var i=n(32),r=n(39),o=n(62),s=n(168).indexOf,a=n(96),l=i([].push);t.exports=function(t,e){var n,i=o(t),c=0,u=[];for(n in i)!r(a,n)&&r(i,n)&&l(u,n);for(;e.length>c;)r(i,n=e[c++])&&(~s(u,n)||l(u,n));return u}},function(t,e,n){"use strict";var i=n(62),r=n(169),o=n(171),s=function(t){return function(e,n,s){var a=i(e),l=o(a);if(0===l)return!t&&-1;var c,u=r(s,l);if(t&&n!==n){for(;l>u;)if((c=a[u++])!==c)return!0}else for(;l>u;u++)if((t||u in a)&&a[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},function(t,e,n){"use strict";var i=n(97),r=Math.max,o=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):o(n,e)}},function(t,e,n){"use strict";var i=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var e=+t;return(e>0?r:i)(e)}},function(t,e,n){"use strict";var i=n(172);t.exports=function(t){return i(t.length)}},function(t,e,n){"use strict";var i=n(97),r=Math.min;t.exports=function(t){var e=i(t);return e>0?r(e,9007199254740991):0}},function(t,e,n){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){"use strict";e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";var i=n(34),r=n(31),o=/#|\.prototype\./,s=function(t,e){var n=l[a(t)];return n===u||n!==c&&(r(e)?i(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},l=s.data={},c=s.NATIVE="N",u=s.POLYFILL="P";t.exports=s},function(t,e,n){"use strict";var i=n(177),r=n(89),o=n(56),s=i(i.bind);t.exports=function(t,e){return r(t),void 0===e?t:o?s(t,e):function(){return t.apply(e,arguments)}}},function(t,e,n){"use strict";var i=n(63),r=n(32);t.exports=function(t){if("Function"===i(t))return r(t)}},function(t,e,n){"use strict";var i=n(64);t.exports=i("document","documentElement")},function(t,e,n){"use strict";var i=n(57);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},function(t,e,n){"use strict";var i=n(102);t.exports="NODE"===i},function(t,e,n){"use strict";var i=n(80),r=n(28),o=n(98).set,s=n(182),a=r.setImmediate?s(o,!1):o;i({global:!0,bind:!0,enumerable:!0,forced:r.setImmediate!==a},{setImmediate:a})},function(t,e,n){"use strict";var i=n(28),r=n(99),o=n(31),s=n(102),a=n(57),l=n(100),c=n(101),u=i.Function,h=/MSIE .\./.test(a)||"BUN"===s&&function(){var t=i.Bun.version.split(".");return t.length<3||"0"===t[0]&&(t[1]<3||"3"===t[1]&&"0"===t[2])}();t.exports=function(t,e){var n=e?2:1;return h?function(i,s){var a=c(arguments.length,1)>n,h=o(i)?i:u(i),d=a?l(arguments,n):[],f=a?function(){r(h,this,d)}:h;return e?t(f,s):t(f)}:t}},function(t,e,n){},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(33),r=n(37);const o=new Map([["indexesSequence",{getListWithInsertedItems:i.a,getListWithRemovedItems:i.b}],["physicallyIndexed",{getListWithInsertedItems:r.a,getListWithRemovedItems:r.b}]]),s=t=>{if(!1===o.has(t))throw new Error(`Alter strategy with ID '${t}' does not exist.`);return o.get(t)}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(187),r=n(0),o=n(4);function s(t,e,n,s,a,l,c){i.a.apply(this,[t,e,n,s,a,l,c]);let u=l;if(!u&&c.placeholder&&(u=c.placeholder),u=Object(o.f)(u),c.trimWhitespace&&(u=u.trim()),c.rendererTemplate){Object(r.e)(e);const i=t.rootDocument.createElement("TEMPLATE");i.setAttribute("bind","{{}}"),i.innerHTML=c.rendererTemplate,HTMLTemplateElement.decorate(i),i.model=t.getSourceDataAtRow(n),e.appendChild(i)}else Object(r.g)(e,u)}s.RENDERER_TYPE="text"},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(0),r=n(6);function o(t,e,n,o,s,a,l){const c=l.ariaTags,u=[],h=[],d=[],f=[];l.className&&Object(i.a)(e,l.className),l.readOnly?(u.push(l.readOnlyCellClassName),c&&f.push(Object(r.z)())):c&&d.push(Object(r.z)()[0]),!1===l.valid&&l.invalidCellClassName?(u.push(l.invalidCellClassName),c&&f.push(Object(r.o)())):(h.push(l.invalidCellClassName),c&&d.push(Object(r.o)()[0])),!1===l.wordWrap&&l.noWordWrapClassName&&u.push(l.noWordWrapClassName),!a&&l.placeholder&&u.push(l.placeholderCellClassName),Object(i.P)(e,h),Object(i.a)(e,u),Object(i.O)(e,d),Object(i.U)(e,f)}o.RENDERER_TYPE="base"},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n(240),r=n(23),o=n(15),s=n(0),a=n(5);function l(t,e,n){t.addEventListener(e,n,!1)}function c(t,e,n){t.removeEventListener(e,n,!1)}function u(t){return t.ownerDocument.defaultView.getComputedStyle(t)}var h=n(4);function d(t,e){const n=Object(s.h)(e),i=e.value.split("\n");let r=n,o=0;for(let s=0;s<i.length;s++){const e=i[s];0!==s&&(o+=i[s-1].length+1);const a=o+e.length;if("home"===t?r=o:"end"===t&&(r=a),n<=a)break}Object(s.V)(e,r)}var f=n(6);function g(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class p extends i.a{static get EDITOR_TYPE(){return"text"}constructor(t){super(t),g(this,"eventManager",new r.a(this)),g(this,"autoResize",function(t){const e={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},n=t.body,i=t.createTextNode(""),r=t.createElement("span");let o;function s(){i.textContent=o.value,r.style.position="absolute",r.style.fontSize=u(o).fontSize,r.style.fontFamily=u(o).fontFamily,r.style.whiteSpace="pre",n.appendChild(r);const t=r.clientWidth+2;n.removeChild(r);const s=o.style;s.height=e.minHeight+"px",e.minWidth>t?s.width=e.minWidth+"px":t>e.maxWidth?s.width=e.maxWidth+"px":s.width=t+"px";const a=o.scrollHeight?o.scrollHeight-1:0;e.minHeight>a?s.height=e.minHeight+"px":e.maxHeight<a?(s.height=e.maxHeight+"px",s.overflowY="visible"):s.height=a+"px"}function a(){t.defaultView.setTimeout(s,0)}function h(t){if(t&&t.minHeight)if("inherit"===t.minHeight)e.minHeight=o.clientHeight;else{const n=parseInt(t.minHeight,10);isNaN(n)||(e.minHeight=n)}if(t&&t.maxHeight)if("inherit"===t.maxHeight)e.maxHeight=o.clientHeight;else{const n=parseInt(t.maxHeight,10);isNaN(n)||(e.maxHeight=n)}if(t&&t.minWidth)if("inherit"===t.minWidth)e.minWidth=o.clientWidth;else{const n=parseInt(t.minWidth,10);isNaN(n)||(e.minWidth=n)}if(t&&t.maxWidth)if("inherit"===t.maxWidth)e.maxWidth=o.clientWidth;else{const n=parseInt(t.maxWidth,10);isNaN(n)||(e.maxWidth=n)}r.firstChild||(r.className="autoResize",r.style.display="inline-block",r.appendChild(i))}return{init:function(t,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o=t,h(n),"TEXTAREA"===o.nodeName&&(o.style.resize="none",o.style.height=e.minHeight+"px",o.style.minWidth=e.minWidth+"px",o.style.maxWidth=e.maxWidth+"px",o.style.overflowY="hidden"),i&&(l(o,"input",s),l(o,"keydown",a)),s()},resize:s,unObserve(){c(o,"input",s),c(o,"keydown",a)}}}(this.hot.rootDocument)),g(this,"TEXTAREA",void 0),g(this,"textareaStyle",void 0),g(this,"TEXTAREA_PARENT",void 0),g(this,"textareaParentStyle",void 0),g(this,"layerClass",void 0),this.eventManager=new r.a(this),this.createElements(),this.bindEvents(),this.hot.addHookOnce("afterDestroy",()=>this.destroy())}getValue(){return this.TEXTAREA.value}setValue(t){this.TEXTAREA.value=t}open(){this.refreshDimensions(),this.showEditableElement(),this.hot.getShortcutManager().setActiveContextName("editor"),this.registerShortcuts()}close(){this.autoResize.unObserve(),Object(s.G)(this.hot.rootDocument.activeElement,this.hot.rootElement)&&this.hot.listen(),this.hideEditableElement(),this.unregisterShortcuts()}prepare(t,e,n,r,o,s){const a=this.state;if(super.prepare(t,e,n,r,o,s),!s.readOnly){this.refreshDimensions(!0);const{allowInvalid:t}=s;t&&!this.isOpened()&&(this.TEXTAREA.value=""),a===i.b.FINISHED||this.isOpened()||this.hideEditableElement()}}beginEditing(t,e){this.state===i.b.VIRGIN&&(this.TEXTAREA.value="",super.beginEditing(t,e))}focus(){this.TEXTAREA.select(),Object(s.V)(this.TEXTAREA,this.TEXTAREA.value.length)}createElements(){const{rootDocument:t}=this.hot;this.TEXTAREA=t.createElement("TEXTAREA"),Object(s.U)(this.TEXTAREA,[["data-hot-input",""],Object(f.L)(-1)]),this.hot.getSettings().ariaTags&&Object(s.U)(this.TEXTAREA,[Object(f.n)()]),Object(s.a)(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.textareaStyle.overflowY="visible",this.TEXTAREA_PARENT=t.createElement("DIV"),Object(s.a)(this.TEXTAREA_PARENT,"handsontableInputHolder"),Object(s.w)(this.TEXTAREA_PARENT,this.layerClass)&&Object(s.P)(this.TEXTAREA_PARENT,this.layerClass),Object(s.a)(this.TEXTAREA_PARENT,"ht_editor_hidden"),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.hot.rootElement.appendChild(this.TEXTAREA_PARENT)}hideEditableElement(){Object(o.c)()&&(this.textareaStyle.textIndent="-99999px"),this.textareaStyle.overflowY="visible",this.textareaParentStyle.opacity="0",this.textareaParentStyle.height="1px",Object(s.P)(this.TEXTAREA_PARENT,this.layerClass),Object(s.a)(this.TEXTAREA_PARENT,"ht_editor_hidden")}showEditableElement(){this.textareaParentStyle.height="",this.textareaParentStyle.overflow="",this.textareaParentStyle.position="",this.textareaParentStyle[this.hot.isRtl()?"left":"right"]="auto",this.textareaParentStyle.opacity="1",this.textareaStyle.textIndent="";const t=this.TEXTAREA_PARENT.childNodes;let e=!1;Object(a.d)(t.length-1,n=>{const i=t[n];if(Object(s.w)(i,"handsontableEditor"))return e=!0,!1}),Object(s.w)(this.TEXTAREA_PARENT,"ht_editor_hidden")&&Object(s.P)(this.TEXTAREA_PARENT,"ht_editor_hidden"),e?(this.layerClass="ht_editor_visible",Object(s.a)(this.TEXTAREA_PARENT,this.layerClass)):(this.layerClass=this.getEditedCellsLayerClass(),Object(s.a)(this.TEXTAREA_PARENT,this.layerClass))}refreshValue(){const t=this.hot.toPhysicalRow(this.row),e=this.hot.getSourceDataAtCell(t,this.col);this.originalValue=e,this.setValue(e),this.refreshDimensions()}refreshDimensions(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.state!==i.b.EDITING&&!t)return;if(this.TD=this.getEditedCell(),!this.TD)return void(t||this.close());const{top:e,start:n,width:r,maxWidth:o,height:a,maxHeight:l}=this.getEditedCellRect();this.textareaParentStyle.top=e+"px",this.textareaParentStyle[this.hot.isRtl()?"right":"left"]=n+"px",this.showEditableElement();const c=Object(s.i)(this.TD,this.hot.rootWindow);this.TEXTAREA.style.fontSize=c.fontSize,this.TEXTAREA.style.fontFamily=c.fontFamily,this.TEXTAREA.style.backgroundColor=this.TD.style.backgroundColor;const u=Object(s.i)(this.TEXTAREA),h=parseInt(u.paddingLeft,10)+parseInt(u.paddingRight,10),d=parseInt(u.paddingTop,10)+parseInt(u.paddingBottom,10),f=r-h,g=a-d,p=o-h,m=l-d;this.autoResize.init(this.TEXTAREA,{minWidth:Math.min(f,p),minHeight:Math.min(g,m),maxWidth:p,maxHeight:m},!0)}bindEvents(){Object(o.f)()&&this.eventManager.addEventListener(this.TEXTAREA,"focusout",()=>this.finishEditing(!1)),this.addHook("afterScrollHorizontally",()=>this.refreshDimensions()),this.addHook("afterScrollVertically",()=>this.refreshDimensions()),this.addHook("afterColumnResize",()=>{this.refreshDimensions(),this.state===i.b.EDITING&&this.focus()}),this.addHook("afterRowResize",()=>{this.refreshDimensions(),this.state===i.b.EDITING&&this.focus()})}allowKeyEventPropagation(){}destroy(){this.eventManager.destroy(),this.clearHooks()}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor"),e={runOnlyIf:()=>Object(h.b)(this.hot.getSelected()),group:"textEditor"},n=()=>{this.hot.rootDocument.execCommand("insertText",!1,"\n")};t.addShortcuts([{keys:[["Control","Enter"]],callback:()=>(n(),!1),runOnlyIf:t=>!this.hot.selection.isMultiple()&&!t.altKey},{keys:[["Meta","Enter"]],callback:()=>(n(),!1),runOnlyIf:()=>!this.hot.selection.isMultiple()},{keys:[["Alt","Enter"]],callback:()=>(n(),!1)},{keys:[["Home"]],callback:(t,e)=>{let[n]=e;d(n,this.TEXTAREA)}},{keys:[["End"]],callback:(t,e)=>{let[n]=e;d(n,this.TEXTAREA)}}],e)}unregisterShortcuts(){this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup("textEditor")}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(188),r=n(186);const o={CELL_TYPE:"text",editor:i.a,renderer:r.a}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"g",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"f",(function(){return s})),n.d(e,"e",(function(){return a})),n.d(e,"h",(function(){return l})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return u}));const i="active-header",r="header",o="area",s="focus",a="fill",l="row",c="column",u="custom-selection"},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var i=n(58);function r(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const o=50;class s extends i.a{constructor(t){let{calculationTypes:e,viewportWidth:n,scrollOffset:i,totalColumns:o,columnWidthFn:s,overrideFn:a,inlineStartOffset:l}=t;super(e),r(this,"viewportWidth",0),r(this,"scrollOffset",0),r(this,"zeroBasedScrollOffset",0),r(this,"totalColumns",0),r(this,"columnWidthFn",null),r(this,"columnWidth",0),r(this,"overrideFn",null),r(this,"inlineStartOffset",0),r(this,"totalCalculatedWidth",0),r(this,"startPositions",[]),r(this,"needReverse",!0),this.viewportWidth=n,this.scrollOffset=i,this.zeroBasedScrollOffset=Math.max(i,0),this.totalColumns=o,this.columnWidthFn=s,this.overrideFn=a,this.inlineStartOffset=l,this.calculate()}calculate(){this._initialize(this);for(let t=0;t<this.totalColumns;t++)if(this.columnWidth=this.getColumnWidth(t),this._process(t,this),this.startPositions.push(this.totalCalculatedWidth),this.totalCalculatedWidth+=this.columnWidth,this.totalCalculatedWidth>=this.zeroBasedScrollOffset+this.viewportWidth){this.needReverse=!1;break}this._finalize(this)}getColumnWidth(t){const e=this.columnWidthFn(t);return isNaN(e)?o:e}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var i=n(58);function r(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const o=23;class s extends i.a{constructor(t){let{calculationTypes:e,viewportHeight:n,scrollOffset:i,totalRows:o,rowHeightFn:s,overrideFn:a,horizontalScrollbarHeight:l}=t;super(e),r(this,"viewportHeight",0),r(this,"scrollOffset",0),r(this,"zeroBasedScrollOffset",0),r(this,"totalRows",0),r(this,"rowHeightFn",null),r(this,"rowHeight",0),r(this,"overrideFn",null),r(this,"horizontalScrollbarHeight",0),r(this,"innerViewportHeight",0),r(this,"totalCalculatedHeight",0),r(this,"startPositions",[]),r(this,"needReverse",!0),this.viewportHeight=n,this.scrollOffset=i,this.zeroBasedScrollOffset=Math.max(i,0),this.totalRows=o,this.rowHeightFn=s,this.overrideFn=a,this.horizontalScrollbarHeight=null!==l&&void 0!==l?l:0,this.innerViewportHeight=this.zeroBasedScrollOffset+this.viewportHeight-this.horizontalScrollbarHeight,this.calculate()}calculate(){this._initialize(this);for(let t=0;t<this.totalRows;t++)if(this.rowHeight=this.getRowHeight(t),this._process(t,this),this.startPositions.push(this.totalCalculatedHeight),this.totalCalculatedHeight+=this.rowHeight,this.totalCalculatedHeight>=this.innerViewportHeight){this.needReverse=!1;break}this._finalize(this)}getRowHeight(t){const e=this.rowHeightFn(t);return isNaN(e)?o:e}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a}));const i=/^(\r\n|\n\r|\r|\n)/,r=/^[^\t\r\n]+/,o=/^\t/;function s(t){const e=[[""]];if(0===t.length)return e;let n,s=0,a=0;for(;t.length>0&&n!==t.length;)if(n=t.length,t.match(o))t=t.replace(o,""),s+=1,e[a][s]="";else if(t.match(i))t=t.replace(i,""),s=0,a+=1,e[a]=[""];else{let n="";if(t.startsWith('"')){let e=0,i=!0;for(;i;){const r=t.slice(0,1);'"'===r&&(e+=1),n+=r,(0===(t=t.slice(1)).length||t.match(/^[\t\r\n]/)&&e%2===0)&&(i=!1)}n=n.replace(/^"/,"").replace(/"$/,"").replace(/["]*/g,t=>new Array(Math.floor(t.length/2)).fill('"').join(""))}else{const e=t.match(r);n=e?e[0]:"",t=t.slice(n.length)}e[a][s]=n}return e}function a(t){let e,n,i,r,o,s="";for(e=0,n=t.length;e<n;e+=1){for(r=t[e].length,i=0;i<r;i+=1)i>0&&(s+="\t"),o=t[e][i],"string"===typeof o?o.indexOf("\n")>-1?s+=`"${o.replace(/"/g,'""')}"`:s+=o:s+=null===o||void 0===o?"":o;e!==n-1&&(s+="\n")}return s}},function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return h}));var i=n(4),r=n(2),o=n(1);const s={_hooksStorage:Object.create(null),addHook(t,e){return this._hooksStorage[t]||(this._hooksStorage[t]=[]),this.hot.addHook(t,e),this._hooksStorage[t].push(e),this},removeHooksByKey(t){Object(o.a)(this._hooksStorage[t]||[],e=>{this.hot.removeHook(t,e)})},clearHooks(){Object(r.o)(this._hooksStorage,(t,e)=>this.removeHooksByKey(e)),this._hooksStorage={}}};Object(r.f)(s,"MIXIN_NAME","hooksRefRegisterer",{writable:!1,enumerable:!1});var a=s,l=n(0);function c(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const u=Object.freeze({VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"});class h{static get EDITOR_TYPE(){return"base"}constructor(t){c(this,"hot",void 0),c(this,"state",u.VIRGIN),c(this,"_opened",!1),c(this,"_fullEditMode",!1),c(this,"_closeCallback",null),c(this,"TD",null),c(this,"row",null),c(this,"col",null),c(this,"prop",null),c(this,"originalValue",null),c(this,"cellProperties",null),this.hot=t,this.init()}_fireCallbacks(t){this._closeCallback&&(this._closeCallback(t),this._closeCallback=null)}init(){}getValue(){throw Error("Editor getValue() method unimplemented")}setValue(){throw Error("Editor setValue() method unimplemented")}open(){throw Error("Editor open() method unimplemented")}close(){throw Error("Editor close() method unimplemented")}prepare(t,e,n,i,r,o){this.TD=i,this.row=t,this.col=e,this.prop=n,this.originalValue=r,this.cellProperties=o,this.state=this.isOpened()?this.state:u.VIRGIN}extend(){return class extends this.constructor{}}saveValue(t,e){let n,i,r,o;if(e){const t=this.hot.getSelectedLast();n=Math.max(Math.min(t[0],t[2]),0),i=Math.max(Math.min(t[1],t[3]),0),r=Math.max(t[0],t[2]),o=Math.max(t[1],t[3])}else[n,i,r,o]=[this.row,this.col,null,null];const s=this.hot.runHooks("modifyGetCellCoords",n,i);Array.isArray(s)&&([n,i]=s),this.hot.populateFromArray(n,i,t,r,o,"edit")}beginEditing(t,e){if(this.state!==u.VIRGIN)return;const n=this.hot,r=n.rowIndexMapper.getRenderableFromVisualIndex(this.row),o=n.columnIndexMapper.getRenderableFromVisualIndex(this.col);if(n.view.scrollViewport(n._createCellCoords(r,o)),this.state=u.EDITING,this.isInFullEditMode()){const e="string"===typeof t?t:Object(i.f)(this.originalValue);this.setValue(e)}this.open(e),this._opened=!0,this.focus(),n.view.render(),n.runHooks("afterBeginEditing",this.row,this.col)}finishEditing(t,e,n){let i;if(n){const t=this._closeCallback;this._closeCallback=e=>{t&&t(e),n(e),this.hot.view.render()}}if(!this.isWaiting())if(this.state!==u.VIRGIN){if(this.state===u.EDITING){if(t)return this.cancelChanges(),void this.hot.view.render();const n=this.getValue();i=this.cellProperties.trimWhitespace?[["string"===typeof n?String.prototype.trim.call(n||""):n]]:[[n]],this.state=u.WAITING,this.saveValue(i,e),this.hot.getCellValidator(this.cellProperties)?this.hot.addHookOnce("postAfterValidate",t=>{this.state=u.FINISHED,this.discardEditor(t)}):(this.state=u.FINISHED,this.discardEditor(!0))}}else this.hot._registerTimeout(()=>{this._fireCallbacks(!0)})}cancelChanges(){this.state=u.FINISHED,this.discardEditor()}discardEditor(t){if(this.state===u.FINISHED)if(!1===t&&!0!==this.cellProperties.allowInvalid)this.hot.selectCell(this.row,this.col),this.focus(),this.state=u.EDITING,this._fireCallbacks(!1);else{this.close(),this._opened=!1,this._fullEditMode=!1,this.state=u.VIRGIN,this._fireCallbacks(!0);this.hot.getShortcutManager().setActiveContextName("grid")}}enableFullEditMode(){this._fullEditMode=!0}isInFullEditMode(){return this._fullEditMode}isOpened(){return this._opened}isWaiting(){return this.state===u.WAITING}getEditedCellRect(){var t;const e=this.getEditedCell();if(!e)return;const{wtOverlays:n,wtViewport:i}=this.hot.view._wt,r=this.hot.rootWindow,o=Object(l.K)(e),s=Object(l.M)(e),a=Object(l.K)(this.hot.rootElement),c=Object(l.M)(this.hot.rootElement),u=n.topOverlay.holder,h=n.inlineStartOverlay.holder,d=u!==r?u.scrollTop:0,f=h!==r?h.scrollLeft:0,g=r.innerWidth-a.left-c,{wtTable:p}=null!==(t=n.getParentOverlay(e))&&void 0!==t?t:this.hot.view._wt,m=p.name,b=["master","inline_start"].includes(m)?d:0,y=["master","top","bottom"].includes(m)?f:0,w=o.top===a.top?0:1;let v=o.top-a.top-w-b,C=0;C=this.hot.isRtl()?r.innerWidth-o.left-s-g-1+y:o.left-a.left-1-y,["top","top_inline_start_corner"].includes(m)&&(v+=n.topOverlay.getOverlayOffset()),["inline_start","top_inline_start_corner"].includes(m)&&(C+=Math.abs(n.inlineStartOverlay.getOverlayOffset()));const S=this.hot.hasColHeaders(),O=this.hot.rowIndexMapper.getRenderableFromVisualIndex(this.row),T=this.hot.columnIndexMapper.getRenderableFromVisualIndex(this.col),_=this.hot.rowIndexMapper.getRenderableIndexesLength()-this.hot.view._wt.getSetting("fixedRowsBottom");(S&&O<=0||O===_)&&(v+=1),T<=0&&(C+=1);const E=i.rowsRenderCalculator.startPosition,R=i.columnsRenderCalculator.startPosition,M=Math.abs(n.inlineStartOverlay.getScrollPosition()),x=n.topOverlay.getScrollPosition(),I=Object(l.q)(this.hot.rootDocument);let k=e.offsetTop;if(["inline_start","master"].includes(m)&&(k+=E-x),["bottom","bottom_inline_start_corner"].includes(m)){const{wtViewport:t,wtTable:e}=n.bottomOverlay.clone;k+=t.getWorkspaceHeight()-e.getHeight()-I}let A=e.offsetLeft;this.hot.isRtl()?(A=A>=0?p.getWidth()-e.offsetLeft:Math.abs(A),A+=R-M-s):["top","master","bottom"].includes(m)&&(A+=R-M);const N=Object(l.i)(this.TD,this.hot.rootWindow),j=this.hot.isRtl()?"borderRightWidth":"borderLeftWidth",H=parseInt(N[j],10)>0?0:1,D=parseInt(N.borderTopWidth,10)>0?0:1,P=Object(l.M)(e)+H,L=Object(l.L)(e)+D,F=Object(l.y)(u)?I:0,B=Object(l.x)(h)?I:0,V=this.hot.view.maximumVisibleElementWidth(A)-F+H;return{top:v,start:C,height:L,maxHeight:Math.max(this.hot.view.maximumVisibleElementHeight(k)-B+D,23),width:P,maxWidth:V}}getEditedCellsLayerClass(){switch(this.checkEditorSection()){case"inline-start":return"ht_clone_left ht_clone_inline_start";case"bottom":return"ht_clone_bottom";case"bottom-inline-start-corner":return"ht_clone_bottom_left_corner ht_clone_bottom_inline_start_corner";case"top":return"ht_clone_top";case"top-inline-start-corner":return"ht_clone_top_left_corner ht_clone_top_inline_start_corner";default:return"ht_clone_master"}}getEditedCell(){return this.hot.getCell(this.row,this.col,!0)}checkEditorSection(){const t=this.hot.countRows();let e="";return this.row<this.hot.getSettings().fixedRowsTop?e=this.col<this.hot.getSettings().fixedColumnsStart?"top-inline-start-corner":"top":this.hot.getSettings().fixedRowsBottom&&this.row>=t-this.hot.getSettings().fixedRowsBottom?e=this.col<this.hot.getSettings().fixedColumnsStart?"bottom-inline-start-corner":"bottom":this.col<this.hot.getSettings().fixedColumnsStart&&(e="inline-start"),e}}Object(r.n)(h,a)}]]);
//# sourceMappingURL=2.4f60b752.chunk.js.map